"use strict";(self.webpackChunkaudio_app=self.webpackChunkaudio_app||[]).push([[792],{792:(i,a,c)=>{var f=c(467);function b(e,t){return Object.is(e,t)}let m=null,v=!1,l=1;const h=Symbol("SIGNAL");function s(e){const t=m;return m=e,t}const I={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function N(e){if(v)throw new Error("");if(null===m)return;m.consumerOnSignalRead(e);const t=m.nextProducerIndex++;Xo(m),t<m.producerNode.length&&m.producerNode[t]!==e&&pu(m)&&ka(m.producerNode[t],m.producerIndexOfThis[t]),m.producerNode[t]!==e&&(m.producerNode[t]=e,m.producerIndexOfThis[t]=pu(m)?_r(e,m,t):0),m.producerLastReadVersion[t]=e.version}function U(e){if((!pu(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==l)){if(!e.producerMustRecompute(e)&&!Io(e))return e.dirty=!1,void(e.lastCleanEpoch=l);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=l}}function se(e){if(void 0===e.liveConsumerNode)return;const t=v;v=!0;try{for(const n of e.liveConsumerNode)n.dirty||ie(n)}finally{v=t}}function Z(){return!1!==m?.consumerAllowSignalWrites}function ie(e){e.dirty=!0,se(e),e.consumerMarkedDirty?.(e)}function le(e){return e&&(e.nextProducerIndex=0),s(e)}function Oe(e,t){if(s(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(pu(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)ka(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Io(e){Xo(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(U(n),r!==n.version))return!0}return!1}function _r(e,t,n){if(Xs(e),Xo(e),0===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=_r(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function ka(e,t){if(Xs(e),Xo(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)ka(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];Xo(o),o.producerIndexOfThis[r]=t}}function pu(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Xo(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Xs(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}const Xa=Symbol("UNSET"),xa=Symbol("COMPUTING"),Ca=Symbol("ERRORED"),$t={...I,value:Xa,dirty:!0,error:null,equal:b,producerMustRecompute:e=>e.value===Xa||e.value===xa,producerRecomputeValue(e){if(e.value===xa)throw new Error("Detected cycle in computations.");const t=e.value;e.value=xa;const n=le(e);let r;try{r=e.computation()}catch(o){r=Ca,e.error=o}finally{Oe(e,n)}t!==Xa&&t!==Ca&&r!==Ca&&e.equal(t,r)?e.value=t:(e.value=r,e.version++)}};let Ja=function Gu(){throw new Error};function gu(){Ja()}let gr=null;function mu(e,t){Z()||gu(),e.equal(e.value,t)||(e.value=t,function eu(e){e.version++,function L(){l++}(),se(e),gr?.()}(e))}const ha={...I,equal:b,value:void 0};function Jt(e){return"function"==typeof e}function Vg(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Zy=Vg(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Xy(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class ra{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const u of n)u.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Jt(r))try{r()}catch(u){t=u instanceof Zy?u.errors:[u]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const u of o)try{S_(u)}catch(d){t=t??[],d instanceof Zy?t=[...t,...d.errors]:t.push(d)}}if(t)throw new Zy(t)}}add(t){var n;if(t&&t!==this)if(this.closed)S_(t);else{if(t instanceof ra){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Xy(n,t)}remove(t){const{_finalizers:n}=this;n&&Xy(n,t),t instanceof ra&&t._removeParent(this)}}ra.EMPTY=(()=>{const e=new ra;return e.closed=!0,e})();const Jy=ra.EMPTY;function ev(e){return e instanceof ra||e&&"closed"in e&&Jt(e.remove)&&Jt(e.add)&&Jt(e.unsubscribe)}function S_(e){Jt(e)?e():e.unsubscribe()}const Fa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},vn={setTimeout(e,t,...n){const{delegate:r}=vn;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=vn;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function tv(e){vn.setTimeout(()=>{const{onUnhandledError:t}=Fa;if(!t)throw e;t(e)})}function nv(){}const I_=rv("C",void 0,void 0);function rv(e,t,n){return{kind:e,value:t,error:n}}let qs=null;function my(e){if(Fa.useDeprecatedSynchronousErrorHandling){const t=!qs;if(t&&(qs={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=qs;if(qs=null,n)throw r}}else e()}class ov extends ra{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ev(t)&&t.add(this)):this.destination=SE}static create(t,n,r){return new x_(t,n,r)}next(t){this.isStopped?C_(function Ud(e){return rv("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?C_(function md(e){return rv("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?C_(I_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const N0=Function.prototype.bind;function iv(e,t){return N0.call(e,t)}class sv{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){zd(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){zd(r)}else zd(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){zd(n)}}}class x_ extends ov{constructor(t,n,r){let o;if(super(),Jt(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let u;this&&Fa.useDeprecatedNextContext?(u=Object.create(t),u.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&iv(t.next,u),error:t.error&&iv(t.error,u),complete:t.complete&&iv(t.complete,u)}):o=t}this.destination=new sv(o)}}function zd(e){Fa.useDeprecatedSynchronousErrorHandling?function M0(e){Fa.useDeprecatedSynchronousErrorHandling&&qs&&(qs.errorThrown=!0,qs.error=e)}(e):tv(e)}function C_(e,t){const{onStoppedNotification:n}=Fa;n&&vn.setTimeout(()=>n(e,t))}const SE={closed:!0,next:nv,error:function EE(e){throw e},complete:nv},av="function"==typeof Symbol&&Symbol.observable||"@@observable";function yd(e){return e}function A_(e){return 0===e.length?yd:1===e.length?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}let _o=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){const u=function F0(e){return e&&e instanceof ov||function k0(e){return e&&Jt(e.next)&&Jt(e.error)&&Jt(e.complete)}(e)&&ev(e)}(n)?n:new x_(n,r,o);return my(()=>{const{operator:d,source:y}=this;u.add(d?d.call(u,y):y?this._subscribe(u):this._trySubscribe(u))}),u}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=O_(r))((o,u)=>{const d=new x_({next:y=>{try{n(y)}catch(_){u(_),d.unsubscribe()}},error:u,complete:o});this.subscribe(d)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[av](){return this}pipe(...n){return A_(n)(this)}toPromise(n){return new(n=O_(n))((r,o)=>{let u;this.subscribe(d=>u=d,d=>o(d),()=>r(u))})}}return e.create=t=>new e(t),e})();function O_(e){var t;return null!==(t=e??Fa.Promise)&&void 0!==t?t:Promise}const L0=Vg(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ks=(()=>{class e extends _o{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new P_(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new L0}next(n){my(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){my(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){my(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:o,observers:u}=this;return r||o?Jy:(this.currentObservers=null,u.push(n),new ra(()=>{this.currentObservers=null,Xy(u,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:o,isStopped:u}=this;r?n.error(o):u&&n.complete()}asObservable(){const n=new _o;return n.source=this,n}}return e.create=(t,n)=>new P_(t,n),e})();class P_ extends Ks{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Jy}}class pa extends Ks{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function M_(e){return Jt(e?.lift)}function zo(e){return t=>{if(M_(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ao(e,t,n,r,o){return new $0(e,t,n,r,o)}class $0 extends ov{constructor(t,n,r,o,u,d){super(t),this.onFinalize=u,this.shouldUnsubscribe=d,this._next=n?function(y){try{n(y)}catch(_){t.error(_)}}:super._next,this._error=o?function(y){try{o(y)}catch(_){t.error(_)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(y){t.error(y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function en(e,t){return zo((n,r)=>{let o=0;n.subscribe(Ao(r,u=>{r.next(e.call(t,u,o++))}))})}const N_="https://g.co/ng/security#xss";class re extends Error{constructor(t,n){super(function Gd(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function yu(e){return{toString:e}.toString()}const Hg="__parameters__";function La(e,t,n){return yu(()=>{const r=function R_(e){return function(...n){if(e){const r=e(...n);for(const o in r)this[o]=r[o]}}}(t);function o(...u){if(this instanceof o)return r.apply(this,u),this;const d=new o(...u);return y.annotation=d,y;function y(_,E,S){const x=_.hasOwnProperty(Hg)?_[Hg]:Object.defineProperty(_,Hg,{value:[]})[Hg];for(;x.length<=S;)x.push(null);return(x[S]=x[S]||[]).push(d),_}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}const Mt=globalThis;function Wt(e){for(let t in e)if(e[t]===Wt)return t;throw Error("Could not find renamed property on target object.")}function Oo(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Oo).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function by(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const CE=Wt({__forward_ref__:Wt});function k_(e){return e.__forward_ref__=k_,e.toString=function(){return Oo(this())},e}function $e(e){return vy(e)?e():e}function vy(e){return"function"==typeof e&&e.hasOwnProperty(CE)&&e.__forward_ref__===k_}function De(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function lv(e){return{providers:e.providers||[],imports:e.imports||[]}}function wy(e){return z0(e,Wd)||z0(e,$_)}function z0(e,t){return e.hasOwnProperty(t)?e[t]:null}function bu(e){return e&&(e.hasOwnProperty(Ty)||e.hasOwnProperty(G0))?e[Ty]:null}const Wd=Wt({\u0275prov:Wt}),Ty=Wt({\u0275inj:Wt}),$_=Wt({ngInjectableDef:Wt}),G0=Wt({ngInjectorDef:Wt});class be{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=De({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Q(e){return e&&!!e.\u0275providers}const X=Wt({\u0275cmp:Wt}),ue=Wt({\u0275dir:Wt}),Ie=Wt({\u0275pipe:Wt}),On=Wt({\u0275mod:Wt}),wr=Wt({\u0275fac:Wt}),Po=Wt({__NG_ELEMENT_ID__:Wt}),Js=Wt({__NG_ENV_ID__:Wt});function Ze(e){return"string"==typeof e?e:null==e?"":String(e)}function BE(e,t){throw new re(-201,!1)}var _t=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(_t||{});let VE;function W1(){return VE}function Aa(e){const t=VE;return VE=e,t}function K1(e,t,n){const r=wy(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&_t.Optional?null:void 0!==t?t:void BE()}const V_={},UE="__NG_DI_FLAG__",W0="ngTempTokenPath",p$=/\n/gm,Q1="__source";let dv;function Qg(e){const t=dv;return dv=e,t}function y$(e,t=_t.Default){if(void 0===dv)throw new re(-203,!1);return null===dv?K1(e,void 0,t):dv.get(e,t&_t.Optional?null:void 0,t)}function ft(e,t=_t.Default){return(W1()||y$)($e(e),t)}function fe(e,t=_t.Default){return ft(e,K0(t))}function K0(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function HE(e){const t=[];for(let n=0;n<e.length;n++){const r=$e(e[n]);if(Array.isArray(r)){if(0===r.length)throw new re(900,!1);let o,u=_t.Default;for(let d=0;d<r.length;d++){const y=r[d],_=b$(y);"number"==typeof _?-1===_?o=y.token:u|=_:o=y}t.push(ft(o,u))}else t.push(ft(r))}return t}function U_(e,t){return e[UE]=t,e.prototype[UE]=t,e}function b$(e){return e[UE]}const zE=U_(La("Optional"),8),GE=U_(La("SkipSelf"),4);function Ey(e,t){return e.hasOwnProperty(wr)?e[wr]:null}function fv(e,t){e.forEach(n=>Array.isArray(n)?fv(n,t):t(n))}function Z1(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Q0(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const _d={},Ft=[],Sy=new be(""),eA=new be("",-1),KE=new be("");class Z0{get(t,n=V_){if(n===V_){const r=new Error(`NullInjectorError: No provider for ${Oo(t)}!`);throw r.name="NullInjectorError",r}return n}}var X0=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(X0||{}),_u=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(_u||{}),wu=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(wu||{});function S$(e,t,n){let r=e.length;for(;;){const o=e.indexOf(t,n);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const u=t.length;if(o+u===r||e.charCodeAt(o+u)<=32)return o}n=o+1}}function QE(e,t,n){let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const u=n[r++],d=n[r++],y=n[r++];e.setAttribute(t,d,y,u)}else{const u=o,d=n[++r];nA(u)?e.setProperty(t,u,d):e.setAttribute(t,u,d),r++}}return r}function tA(e){return 3===e||4===e||6===e}function nA(e){return 64===e.charCodeAt(0)}function H_(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?n=o:0===n||rA(e,n,o,null,-1===n||2===n?t[++r]:null)}}return e}function rA(e,t,n,r,o){let u=0,d=e.length;if(-1===t)d=-1;else for(;u<e.length;){const y=e[u++];if("number"==typeof y){if(y===t){d=-1;break}if(y>t){d=u-1;break}}}for(;u<e.length;){const y=e[u];if("number"==typeof y)break;if(y===n){if(null===r)return void(null!==o&&(e[u+1]=o));if(r===e[u+1])return void(e[u+2]=o)}u++,null!==r&&u++,null!==o&&u++}-1!==d&&(e.splice(d,0,t),u=d+1),e.splice(u++,0,n),null!==r&&e.splice(u++,0,r),null!==o&&e.splice(u++,0,o)}const oA="ng-template";function I$(e,t,n,r){let o=0;if(r){for(;o<t.length&&"string"==typeof t[o];o+=2)if("class"===t[o]&&-1!==S$(t[o+1].toLowerCase(),n,0))return!0}else if(YE(e))return!1;if(o=t.indexOf(1,o),o>-1){let u;for(;++o<t.length&&"string"==typeof(u=t[o]);)if(u.toLowerCase()===n)return!0}return!1}function YE(e){return 4===e.type&&e.value!==oA}function x$(e,t,n){return t===(4!==e.type||n?e.value:oA)}function C$(e,t,n){let r=4;const o=e.attrs,u=null!==o?function P$(e){for(let t=0;t<e.length;t++)if(tA(e[t]))return t;return e.length}(o):0;let d=!1;for(let y=0;y<t.length;y++){const _=t[y];if("number"!=typeof _){if(!d)if(4&r){if(r=2|1&r,""!==_&&!x$(e,_,n)||""===_&&1===t.length){if(Tu(r))return!1;d=!0}}else if(8&r){if(null===o||!I$(e,o,_,n)){if(Tu(r))return!1;d=!0}}else{const E=t[++y],S=A$(_,o,YE(e),n);if(-1===S){if(Tu(r))return!1;d=!0;continue}if(""!==E){let x;if(x=S>u?"":o[S+1].toLowerCase(),2&r&&E!==x){if(Tu(r))return!1;d=!0}}}}else{if(!d&&!Tu(r)&&!Tu(_))return!1;if(d&&Tu(_))continue;d=!1,r=_|1&r}}return Tu(r)||d}function Tu(e){return!(1&e)}function A$(e,t,n,r){if(null===t)return-1;let o=0;if(r||!n){let u=!1;for(;o<t.length;){const d=t[o];if(d===e)return o;if(3===d||6===d)u=!0;else{if(1===d||2===d){let y=t[++o];for(;"string"==typeof y;)y=t[++o];continue}if(4===d)break;if(0===d){o+=4;continue}}o+=u?1:2}return-1}return function M$(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function iA(e,t,n=!1){for(let r=0;r<t.length;r++)if(C$(e,t[r],n))return!0;return!1}function sA(e,t){return e?":not("+t.trim()+")":t}function R$(e){let t=e[0],n=1,r=2,o="",u=!1;for(;n<e.length;){let d=e[n];if("string"==typeof d)if(2&r){const y=e[++n];o+="["+d+(y.length>0?'="'+y+'"':"")+"]"}else 8&r?o+="."+d:4&r&&(o+=" "+d);else""!==o&&!Tu(d)&&(t+=sA(u,o),o=""),r=d,u=u||!Tu(r);n++}return""!==o&&(t+=sA(u,o)),t}function J0(e){return yu(()=>{const t=uA(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===X0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||_u.Emulated,styles:e.styles||Ft,_:null,schemas:e.schemas||null,tView:null,id:""};lA(n);const r=e.dependencies;return n.directiveDefs=eT(r,!1),n.pipeDefs=eT(r,!0),n.id=function B$(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const o of n)t=Math.imul(31,t)+o.charCodeAt(0)|0;return t+=2147483648,"c"+t}(n),n})}function L$(e){return vt(e)||Jo(e)}function $$(e){return null!==e}function ZE(e){return yu(()=>({type:e.type,bootstrap:e.bootstrap||Ft,declarations:e.declarations||Ft,imports:e.imports||Ft,exports:e.exports||Ft,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function aA(e,t){if(null==e)return _d;const n={};for(const r in e)if(e.hasOwnProperty(r)){const o=e[r];let u,d,y=wu.None;Array.isArray(o)?(y=o[0],u=o[1],d=o[2]??u):(u=o,d=o),t?(n[u]=y!==wu.None?[r,y]:r,t[u]=d):n[u]=r}return n}function ma(e){return yu(()=>{const t=uA(e);return lA(t),t})}function Pa(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function vt(e){return e[X]||null}function Jo(e){return e[ue]||null}function ea(e){return e[Ie]||null}function ia(e,t){const n=e[On]||null;if(!n&&!0===t)throw new Error(`Type ${Oo(e)} does not have '\u0275mod' property.`);return n}function uA(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||_d,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Ft,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:aA(e.inputs,t),outputs:aA(e.outputs),debugInfo:null}}function lA(e){e.features?.forEach(t=>t(e))}function eT(e,t){if(!e)return null;const n=t?ea:L$;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter($$)}function z_(e){return{\u0275providers:e}}function V$(...e){return{\u0275providers:XE(0,e),\u0275fromNgModule:!0}}function XE(e,...t){const n=[],r=new Set;let o;const u=d=>{n.push(d)};return fv(t,d=>{const y=d;tT(y,u,[],r)&&(o||=[],o.push(y))}),void 0!==o&&cA(o,u),n}function cA(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:o}=e[n];JE(o,u=>{t(u,r)})}}function tT(e,t,n,r){if(!(e=$e(e)))return!1;let o=null,u=bu(e);const d=!u&&vt(e);if(u||d){if(d&&!d.standalone)return!1;o=e}else{const _=e.ngModule;if(u=bu(_),!u)return!1;o=_}const y=r.has(o);if(d){if(y)return!1;if(r.add(o),d.dependencies){const _="function"==typeof d.dependencies?d.dependencies():d.dependencies;for(const E of _)tT(E,t,n,r)}}else{if(!u)return!1;{if(null!=u.imports&&!y){let E;r.add(o);try{fv(u.imports,S=>{tT(S,t,n,r)&&(E||=[],E.push(S))})}finally{}void 0!==E&&cA(E,t)}if(!y){const E=Ey(o)||(()=>new o);t({provide:o,useFactory:E,deps:Ft},o),t({provide:KE,useValue:o,multi:!0},o),t({provide:Sy,useValue:()=>ft(o),multi:!0},o)}const _=u.providers;if(null!=_&&!y){const E=e;JE(_,S=>{t(S,E)})}}}return o!==e&&void 0!==e.providers}function JE(e,t){for(let n of e)Q(n)&&(n=n.\u0275providers),Array.isArray(n)?JE(n,t):t(n)}const U$=Wt({provide:String,useValue:Wt});function eS(e){return null!==e&&"object"==typeof e&&U$ in e}function Iy(e){return"function"==typeof e}const tS=new be(""),nT={},z$={};let nS;function rT(){return void 0===nS&&(nS=new Z0),nS}class tu{}class pv extends tu{get destroyed(){return this._destroyed}constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,oS(t,d=>this.processProvider(d)),this.records.set(eA,gv(void 0,this)),o.has("environment")&&this.records.set(tu,gv(void 0,this));const u=this.records.get(tS);null!=u&&"string"==typeof u.value&&this.scopes.add(u.value),this.injectorDefTypes=new Set(this.get(KE,Ft,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const t=s(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),s(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=Qg(this),r=Aa(void 0);try{return t()}finally{Qg(n),Aa(r)}}get(t,n=V_,r=_t.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Js))return t[Js](this);r=K0(r);const u=Qg(this),d=Aa(void 0);try{if(!(r&_t.SkipSelf)){let _=this.records.get(t);if(void 0===_){const E=function Q$(e){return"function"==typeof e||"object"==typeof e&&e instanceof be}(t)&&wy(t);_=E&&this.injectableDefInScope(E)?gv(rS(t),nT):null,this.records.set(t,_)}if(null!=_)return this.hydrate(t,_)}return(r&_t.Self?rT():this.parent).get(t,n=r&_t.Optional&&n===V_?null:n)}catch(y){if("NullInjectorError"===y.name){if((y[W0]=y[W0]||[]).unshift(Oo(t)),u)throw y;return function v$(e,t,n,r){const o=e[W0];throw t[Q1]&&o.unshift(t[Q1]),e.message=function _$(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let o=Oo(t);if(Array.isArray(t))o=t.map(Oo).join(" -> ");else if("object"==typeof t){let u=[];for(let d in t)if(t.hasOwnProperty(d)){let y=t[d];u.push(d+":"+("string"==typeof y?JSON.stringify(y):Oo(y)))}o=`{${u.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(p$,"\n  ")}`}("\n"+e.message,o,n,r),e.ngTokenPath=o,e[W0]=null,e}(y,t,"R3InjectorError",this.source)}throw y}finally{Aa(d),Qg(u)}}resolveInjectorInitializers(){const t=s(null),n=Qg(this),r=Aa(void 0);try{const u=this.get(Sy,Ft,_t.Self);for(const d of u)d()}finally{Qg(n),Aa(r),s(t)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(Oo(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(t){let n=Iy(t=$e(t))?t:$e(t&&t.provide);const r=function q$(e){return eS(e)?gv(void 0,e.useValue):gv(function hA(e,t,n){let r;if(Iy(e)){const o=$e(e);return Ey(o)||rS(o)}if(eS(e))r=()=>$e(e.useValue);else if(function fA(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...HE(e.deps||[]));else if(function dA(e){return!(!e||!e.useExisting)}(e))r=()=>ft($e(e.useExisting));else{const o=$e(e&&(e.useClass||e.provide));if(!function W$(e){return!!e.deps}(e))return Ey(o)||rS(o);r=()=>new o(...HE(e.deps))}return r}(e),nT)}(t);if(!Iy(t)&&!0===t.multi){let o=this.records.get(n);o||(o=gv(void 0,nT,!0),o.factory=()=>HE(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n){const r=s(null);try{return n.value===nT&&(n.value=z$,n.value=n.factory()),"object"==typeof n.value&&n.value&&function K$(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{s(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;const n=$e(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function rS(e){const t=wy(e),n=null!==t?t.factory:Ey(e);if(null!==n)return n;if(e instanceof be)throw new re(204,!1);if(e instanceof Function)return function G$(e){if(e.length>0)throw new re(204,!1);const n=function Ge(e){return e&&(e[Wd]||e[$_])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new re(204,!1)}function gv(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function oS(e,t){for(const n of e)Array.isArray(n)?oS(n,t):n&&Q(n)?oS(n.\u0275providers,t):t(n)}function Zg(e,t){e instanceof pv&&e.assertNotDestroyed();const r=Qg(e),o=Aa(void 0);try{return t()}finally{Qg(r),Aa(o)}}const Qr=0,ce=1,Ae=2,ko=3,Du=4,sa=5,ja=6,yv=7,Dr=8,na=9,Eu=10,et=11,q_=12,mA=13,bv=14,Eo=15,W_=16,vv=17,nh=18,K_=19,yA=20,Xg=21,sT=22,xy=23,st=25,sS=1,wd=7,_v=9,Fo=10;var aS=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(aS||{});function aa(e){return Array.isArray(e)&&"object"==typeof e[sS]}function ua(e){return Array.isArray(e)&&!0===e[sS]}function uS(e){return!!(4&e.flags)}function Cy(e){return e.componentOffset>-1}function uT(e){return!(1&~e.flags)}function Su(e){return!!e.template}function lS(e){return!!(512&e[Ae])}class u3{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function wA(e,t,n,r){null!==t?t.applyValueToInputSignal(t,r):e[n]=r}function Ay(){return TA}function TA(e){return e.type.prototype.ngOnChanges&&(e.setInput=c3),l3}function l3(){const e=EA(this),t=e?.current;if(t){const n=e.previous;if(n===_d)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function c3(e,t,n,r,o){const u=this.declaredInputs[r],d=EA(e)||function d3(e,t){return e[DA]=t}(e,{previous:_d,current:null}),y=d.current||(d.current={}),_=d.previous,E=_[u];y[u]=new u3(E&&E.currentValue,n,_===_d),wA(e,t,o,n)}Ay.ngInherit=!0;const DA="__ngSimpleChanges__";function EA(e){return e[DA]||null}const Td=function(e,t,n){};let xA=!1;function er(e){for(;Array.isArray(e);)e=e[Qr];return e}function ya(e,t){return er(t[e.index])}function Z_(e,t){return e.data[t]}function Ba(e,t){const n=t[e];return aa(n)?n:n[Qr]}function pS(e){return!(128&~e[Ae])}function Dd(e,t){return null==t?null:e[t]}function CA(e){e[vv]=0}function y3(e){1024&e[Ae]||(e[Ae]|=1024,pS(e)&&X_(e))}function gS(e){return!!(9216&e[Ae]||e[xy]?.dirty)}function mS(e){e[Eu].changeDetectionScheduler?.notify(1),gS(e)?X_(e):64&e[Ae]&&(function h3(){return xA}()?(e[Ae]|=1024,X_(e)):e[Eu].changeDetectionScheduler?.notify())}function X_(e){e[Eu].changeDetectionScheduler?.notify();let t=Oy(e);for(;null!==t&&!(8192&t[Ae])&&(t[Ae]|=8192,pS(t));)t=Oy(t)}function lT(e,t){if(!(256&~e[Ae]))throw new re(911,!1);null===e[Xg]&&(e[Xg]=[]),e[Xg].push(t)}function Oy(e){const t=e[ko];return ua(t)?t[ko]:t}const nt={lFrame:$A(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function PA(){return nt.bindingsEnabled}function oe(){return nt.lFrame.lView}function wt(){return nt.lFrame.tView}function J_(e){return nt.lFrame.contextLView=e,e[Dr]}function ew(e){return nt.lFrame.contextLView=null,e}function _n(){let e=MA();for(;null!==e&&64===e.type;)e=e.parent;return e}function MA(){return nt.lFrame.currentTNode}function Ed(e,t){const n=nt.lFrame;n.currentTNode=e,n.isParent=t}function bS(){return nt.lFrame.isParent}function Iu(){return nt.lFrame.bindingIndex++}function C3(e,t){const n=nt.lFrame;n.bindingIndex=n.bindingRootIndex=e,_S(t)}function _S(e){nt.lFrame.currentDirectiveIndex=e}function cT(e){nt.lFrame.currentQueryIndex=e}function O3(e){const t=e[ce];return 2===t.type?t.declTNode:1===t.type?e[sa]:null}function FA(e,t,n){if(n&_t.SkipSelf){let o=t,u=e;for(;!(o=o.parent,null!==o||n&_t.Host||(o=O3(u),null===o||(u=u[bv],10&o.type))););if(null===o)return!1;t=o,e=u}const r=nt.lFrame=LA();return r.currentTNode=t,r.lView=e,!0}function DS(e){const t=LA(),n=e[ce];nt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function LA(){const e=nt.lFrame,t=null===e?null:e.child;return null===t?$A(e):t}function $A(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function jA(){const e=nt.lFrame;return nt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const BA=jA;function ES(){const e=jA();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function la(){return nt.lFrame.selectedIndex}function Py(e){nt.lFrame.selectedIndex=e}let UA=!0;function nw(){return UA}function Sd(e){UA=e}function dT(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const u=e.data[n].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:y,ngAfterViewInit:_,ngAfterViewChecked:E,ngOnDestroy:S}=u;d&&(e.contentHooks??=[]).push(-n,d),y&&((e.contentHooks??=[]).push(n,y),(e.contentCheckHooks??=[]).push(n,y)),_&&(e.viewHooks??=[]).push(-n,_),E&&((e.viewHooks??=[]).push(n,E),(e.viewCheckHooks??=[]).push(n,E)),null!=S&&(e.destroyHooks??=[]).push(n,S)}}function fT(e,t,n){HA(e,t,3,n)}function hT(e,t,n,r){(3&e[Ae])===n&&HA(e,t,n,r)}function SS(e,t){let n=e[Ae];(3&n)===t&&(n&=16383,n+=1,e[Ae]=n)}function HA(e,t,n,r){const u=r??-1,d=t.length-1;let y=0;for(let _=void 0!==r?65535&e[vv]:0;_<d;_++)if("number"==typeof t[_+1]){if(y=t[_],null!=r&&y>=r)break}else t[_]<0&&(e[vv]+=65536),(y<u||-1==u)&&(L3(e,n,t,_),e[vv]=(4294901760&e[vv])+_+2),_++}function zA(e,t){Td(4,e,t);const n=s(null);try{t.call(e)}finally{s(n),Td(5,e,t)}}function L3(e,t,n,r){const o=n[r]<0,u=n[r+1],y=e[o?-n[r]:n[r]];o?e[Ae]>>14<e[vv]>>16&&(3&e[Ae])===t&&(e[Ae]+=16384,zA(y,u)):zA(y,u)}const Dv=-1;class rw{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function xS(e){return e!==Dv}function ow(e){return 32767&e}function iw(e,t){let n=function U3(e){return e>>16}(e),r=t;for(;n>0;)r=r[bv],n--;return r}let CS=!0;function pT(e){const t=CS;return CS=e,t}const GA=255,qA=5;let H3=0;const Id={};function gT(e,t){const n=WA(e,t);if(-1!==n)return n;const r=t[ce];r.firstCreatePass&&(e.injectorIndex=t.length,AS(r.data,e),AS(t,null),AS(r.blueprint,null));const o=mT(e,t),u=e.injectorIndex;if(xS(o)){const d=ow(o),y=iw(o,t),_=y[ce].data;for(let E=0;E<8;E++)t[u+E]=y[d+E]|_[d+E]}return t[u+8]=o,u}function AS(e,t){e.push(0,0,0,0,0,0,0,0,t)}function WA(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function mT(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;null!==o;){if(r=eO(o),null===r)return Dv;if(n++,o=o[bv],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Dv}function OS(e,t,n){!function z3(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Po)&&(r=n[Po]),null==r&&(r=n[Po]=H3++);const o=r&GA;t.data[e+(o>>qA)]|=1<<o}(e,t,n)}function KA(e,t,n){if(n&_t.Optional||void 0!==e)return e;BE()}function QA(e,t,n,r){if(n&_t.Optional&&void 0===r&&(r=null),!(n&(_t.Self|_t.Host))){const o=e[na],u=Aa(void 0);try{return o?o.get(t,r,n&_t.Optional):K1(t,r,n&_t.Optional)}finally{Aa(u)}}return KA(r,0,n)}function YA(e,t,n,r=_t.Default,o){if(null!==e){if(2048&t[Ae]&&!(r&_t.Self)){const d=function Q3(e,t,n,r,o){let u=e,d=t;for(;null!==u&&null!==d&&2048&d[Ae]&&!(512&d[Ae]);){const y=ZA(u,d,n,r|_t.Self,Id);if(y!==Id)return y;let _=u.parent;if(!_){const E=d[yA];if(E){const S=E.get(n,Id,r);if(S!==Id)return S}_=eO(d),d=d[bv]}u=_}return o}(e,t,n,r,Id);if(d!==Id)return d}const u=ZA(e,t,n,r,Id);if(u!==Id)return u}return QA(t,n,r,o)}function ZA(e,t,n,r,o){const u=function W3(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Po)?e[Po]:void 0;return"number"==typeof t?t>=0?t&GA:K3:t}(n);if("function"==typeof u){if(!FA(t,e,r))return r&_t.Host?KA(o,0,r):QA(t,n,r,o);try{let d;if(d=u(r),null!=d||r&_t.Optional)return d;BE()}finally{BA()}}else if("number"==typeof u){let d=null,y=WA(e,t),_=Dv,E=r&_t.Host?t[Eo][sa]:null;for((-1===y||r&_t.SkipSelf)&&(_=-1===y?mT(e,t):t[y+8],_!==Dv&&JA(r,!1)?(d=t[ce],y=ow(_),t=iw(_,t)):y=-1);-1!==y;){const S=t[ce];if(XA(u,y,S.data)){const x=q3(y,t,n,d,r,E);if(x!==Id)return x}_=t[y+8],_!==Dv&&JA(r,t[ce].data[y+8]===E)&&XA(u,y,t)?(d=S,y=ow(_),t=iw(_,t)):y=-1}}return o}function q3(e,t,n,r,o,u){const d=t[ce],y=d.data[e+8],S=function yT(e,t,n,r,o){const u=e.providerIndexes,d=t.data,y=1048575&u,_=e.directiveStart,S=u>>20,A=o?y+S:e.directiveEnd;for(let P=r?y:y+S;P<A;P++){const M=d[P];if(P<_&&n===M||P>=_&&M.type===n)return P}if(o){const P=d[_];if(P&&Su(P)&&P.type===n)return _}return null}(y,d,n,null==r?Cy(y)&&CS:r!=d&&!!(3&y.type),o&_t.Host&&u===y);return null!==S?My(t,d,S,y):Id}function My(e,t,n,r){let o=e[n];const u=t.data;if(function $3(e){return e instanceof rw}(o)){const d=o;d.resolving&&function Do(e,t){throw t&&t.join(" > "),new re(-200,e)}(function Ot(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ze(e)}(u[n]));const y=pT(d.canSeeViewProviders);d.resolving=!0;const E=d.injectImpl?Aa(d.injectImpl):null;FA(e,r,_t.Default);try{o=e[n]=d.factory(void 0,u,e,r),t.firstCreatePass&&n>=r.directiveStart&&function F3(e,t,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:u}=t.type.prototype;if(r){const d=TA(t);(n.preOrderHooks??=[]).push(e,d),(n.preOrderCheckHooks??=[]).push(e,d)}o&&(n.preOrderHooks??=[]).push(0-e,o),u&&((n.preOrderHooks??=[]).push(e,u),(n.preOrderCheckHooks??=[]).push(e,u))}(n,u[n],t)}finally{null!==E&&Aa(E),pT(y),d.resolving=!1,BA()}}return o}function XA(e,t,n){return!!(n[t+(e>>qA)]&1<<e)}function JA(e,t){return!(e&_t.Self||e&_t.Host&&t)}class ni{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return YA(this._tNode,this._lView,t,K0(r),n)}}function K3(){return new ni(_n(),oe())}function PS(e){return yu(()=>{const t=e.prototype.constructor,n=t[wr]||MS(t),r=Object.prototype;let o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){const u=o[wr]||MS(o);if(u&&u!==n)return u;o=Object.getPrototypeOf(o)}return u=>new u})}function MS(e){return vy(e)?()=>{const t=MS($e(e));return t&&t()}:Ey(e)}function eO(e){const t=e[ce],n=t.type;return 2===n?t.declTNode:1===n?e[sa]:null}function iO(e,t=null,n=null,r){const o=sO(e,t,n,r);return o.resolveInjectorInitializers(),o}function sO(e,t=null,n=null,r,o=new Set){const u=[n||Ft,V$(e)];return r=r||("object"==typeof e?void 0:Oo(e)),new pv(u,t||rT(),r||null,o)}let Va=(()=>{class e{static{this.THROW_IF_NOT_FOUND=V_}static{this.NULL=new Z0}static create(n,r){if(Array.isArray(n))return iO({name:""},r,n,"");{const o=n.name??"";return iO({name:o},n.parent,n.providers,o)}}static{this.\u0275prov=De({token:e,providedIn:"any",factory:()=>ft(eA)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();function RS(e){return e.ngOriginalError}class xd{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&RS(t);for(;n&&RS(n);)n=RS(n);return n||null}}const uO=new be("",{providedIn:"root",factory:()=>fe(xd).handleError.bind(void 0)});let Iv=(()=>{class e{static{this.__NG_ELEMENT_ID__=oj}static{this.__NG_ENV_ID__=n=>n}}return e})();class rj extends Iv{constructor(t){super(),this._lView=t}onDestroy(t){return lT(this._lView,t),()=>function yS(e,t){if(null===e[Xg])return;const n=e[Xg].indexOf(t);-1!==n&&e[Xg].splice(n,1)}(this._lView,t)}}function oj(){return new rj(oe())}function ij(){return xv(_n(),oe())}function xv(e,t){return new Jg(ya(e,t))}let Jg=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=ij}}return e})();function kS(e){return t=>{setTimeout(e,void 0,t)}}const va=class sj extends Ks{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,function pA(){return void 0!==W1()||null!=function m$(){return dv}()}()&&(this.destroyRef=fe(Iv,{optional:!0})??void 0)}emit(t){const n=s(null);try{super.next(t)}finally{s(n)}}subscribe(t,n,r){let o=t,u=n||(()=>null),d=r;if(t&&"object"==typeof t){const _=t;o=_.next?.bind(_),u=_.error?.bind(_),d=_.complete?.bind(_)}this.__isAsync&&(u=kS(u),o&&(o=kS(o)),d&&(d=kS(d)));const y=super.subscribe({next:o,error:u,complete:d});return t instanceof ra&&t.add(y),y}};function vT(e){return!(128&~e.flags)}let LS;const $S=new be("",{providedIn:"root",factory:()=>cj}),cj="ng",hO=new be(""),Cv=new be("",{providedIn:"platform",factory:()=>"unknown"}),pO=new be(""),gO=new be("",{providedIn:"root",factory:()=>function Om(){if(void 0!==LS)return LS;if(typeof document<"u")return document;throw new re(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let yO=()=>null;function qS(e,t,n=!1){return yO(e,t,n)}const DO=new be("",{providedIn:"root",factory:()=>!1});class CO{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${N_})`}}const Mj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Nv=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Nv||{});function nI(e){const t=function hw(){const e=oe();return e&&e[Eu].sanitizer}();return t?t.sanitize(Nv.URL,e)||"":function dw(e,t){const n=function Cj(e){return e instanceof CO&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${N_})`)}return n===t}(e,"URL")?function ey(e){return e instanceof CO?e.changingThisBreaksApplicationSecurity:e}(e):function XS(e){return(e=String(e)).match(Mj)?e:"unsafe:"+e}(Ze(e))}const rI=new Map;let tB=0;const iI="__ngContext__";function ca(e,t){aa(t)?(e[iI]=t[K_],function rB(e){rI.set(e[K_],e)}(t)):e[iI]=t}function Ua(e){return e instanceof Function?e():e}var ny=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(ny||{});let lI;function cI(e,t){return lI(e,t)}function kv(e,t,n,r,o){if(null!=r){let u,d=!1;ua(r)?u=r:aa(r)&&(d=!0,r=r[Qr]);const y=er(r);0===e&&null!==n?null==o?rP(t,n,y):Ny(t,n,y,o||null,!0):1===e&&null!==n?Ny(t,n,y,o||null,!0):2===e?function yw(e,t,n){const r=RT(e,t);r&&function SB(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,y,d):3===e&&t.destroyNode(y),null!=u&&function CB(e,t,n,r,o){const u=n[wd];u!==er(n)&&kv(t,e,r,u,o);for(let y=Fo;y<n.length;y++){const _=n[y];FT(_[ce],_,e,t,r,u)}}(t,e,u,n,o)}}function MT(e,t,n){return e.createElement(t,n)}function eP(e,t){t[Eu].changeDetectionScheduler?.notify(1),FT(e,t,t[et],2,null,null)}function tP(e,t){const n=e[_v],r=n.indexOf(t);n.splice(r,1)}function gw(e,t){if(e.length<=Fo)return;const n=Fo+t,r=e[n];if(r){const o=r[W_];null!==o&&o!==e&&tP(o,r),t>0&&(e[n-1][Du]=r[Du]);const u=Q0(e,Fo+t);!function bB(e,t){eP(e,t),t[Qr]=null,t[sa]=null}(r[ce],r);const d=u[nh];null!==d&&d.detachView(u[ce]),r[ko]=null,r[Du]=null,r[Ae]&=-129}return r}function NT(e,t){if(!(256&t[Ae])){const n=t[et];n.destroyNode&&FT(e,t,n,3,null,null),function _B(e){let t=e[q_];if(!t)return hI(e[ce],e);for(;t;){let n=null;if(aa(t))n=t[q_];else{const r=t[Fo];r&&(n=r)}if(!n){for(;t&&!t[Du]&&t!==e;)aa(t)&&hI(t[ce],t),t=t[ko];null===t&&(t=e),aa(t)&&hI(t[ce],t),n=t&&t[Du]}t=n}}(t)}}function hI(e,t){if(256&t[Ae])return;const n=s(null);try{t[Ae]&=-129,t[Ae]|=256,t[xy]&&function Zo(e){if(Xo(e),pu(e))for(let t=0;t<e.producerNode.length;t++)ka(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(t[xy]),function EB(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const o=t[n[r]];if(!(o instanceof rw)){const u=n[r+1];if(Array.isArray(u))for(let d=0;d<u.length;d+=2){const y=o[u[d]],_=u[d+1];Td(4,y,_);try{_.call(y)}finally{Td(5,y,_)}}else{Td(4,o,u);try{u.call(o)}finally{Td(5,o,u)}}}}}(e,t),function DB(e,t){const n=e.cleanup,r=t[yv];if(null!==n)for(let u=0;u<n.length-1;u+=2)if("string"==typeof n[u]){const d=n[u+3];d>=0?r[d]():r[-d].unsubscribe(),u+=2}else n[u].call(r[n[u+1]]);null!==r&&(t[yv]=null);const o=t[Xg];if(null!==o){t[Xg]=null;for(let u=0;u<o.length;u++)(0,o[u])()}}(e,t),1===t[ce].type&&t[et].destroy();const r=t[W_];if(null!==r&&ua(t[ko])){r!==t[ko]&&tP(r,t);const o=t[nh];null!==o&&o.detachView(e)}!function oB(e){rI.delete(e[K_])}(t)}finally{s(n)}}function pI(e,t,n){return function nP(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[Qr];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:u}=e.data[r.directiveStart+o];if(u===_u.None||u===_u.Emulated)return null}return ya(r,n)}}(e,t.parent,n)}function Ny(e,t,n,r,o){e.insertBefore(t,n,r,o)}function rP(e,t,n){e.appendChild(t,n)}function oP(e,t,n,r,o){null!==r?Ny(e,t,n,r,o):rP(e,t,n)}function RT(e,t){return e.parentNode(t)}let gI,aP=function sP(e,t,n){return 40&e.type?ya(e,n):null};function kT(e,t,n,r){const o=pI(e,r,t),u=t[et],y=function iP(e,t,n){return aP(e,t,n)}(r.parent||t[sa],r,t);if(null!=o)if(Array.isArray(n))for(let _=0;_<n.length;_++)oP(u,o,n[_],y,!1);else oP(u,o,n,y,!1);void 0!==gI&&gI(u,r,t,n,o)}function mw(e,t){if(null!==t){const n=t.type;if(3&n)return ya(t,e);if(4&n)return mI(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return mw(e,r);{const o=e[t.index];return ua(o)?mI(-1,o):er(o)}}if(32&n)return cI(t,e)()||er(e[t.index]);{const r=lP(e,t);return null!==r?Array.isArray(r)?r[0]:mw(Oy(e[Eo]),r):mw(e,t.next)}}return null}function lP(e,t){return null!==t?e[Eo][sa].projection[t.projection]:null}function mI(e,t){const n=Fo+e+1;if(n<t.length){const r=t[n],o=r[ce].firstChild;if(null!==o)return mw(r,o)}return t[wd]}function yI(e,t,n,r,o,u,d){for(;null!=n;){const y=r[n.index],_=n.type;if(d&&0===t&&(y&&ca(er(y),r),n.flags|=2),32&~n.flags)if(8&_)yI(e,t,n.child,r,o,u,!1),kv(t,e,o,y,u);else if(32&_){const E=cI(n,r);let S;for(;S=E();)kv(t,e,o,S,u);kv(t,e,o,y,u)}else 16&_?dP(e,t,r,n,o,u):kv(t,e,o,y,u);n=d?n.projectionNext:n.next}}function FT(e,t,n,r,o,u){yI(n,r,e.firstChild,t,o,u,!1)}function dP(e,t,n,r,o,u){const d=n[Eo],_=d[sa].projection[r.projection];if(Array.isArray(_))for(let E=0;E<_.length;E++)kv(t,e,o,_[E],u);else{let E=_;const S=d[ko];vT(r)&&(E.flags|=128),yI(e,t,E,S,o,u,!0)}}function fP(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function hP(e,t,n){const{mergedAttrs:r,classes:o,styles:u}=n;null!==r&&QE(e,t,r),null!==o&&fP(e,t,o),null!==u&&function OB(e,t,n){e.setAttribute(t,"style",n)}(e,t,u)}const ct={};function Yr(e=1){pP(wt(),oe(),la()+e,!1)}function pP(e,t,n,r){if(!r)if(3&~t[Ae]){const u=e.preOrderHooks;null!==u&&hT(t,u,0,n)}else{const u=e.preOrderCheckHooks;null!==u&&fT(t,u,n)}Py(n)}function Qe(e,t=_t.Default){const n=oe();return null===n?ft(e,t):YA(_n(),n,$e(e),t)}function gP(e,t,n,r,o,u){const d=s(null);try{let y=null;o&wu.SignalBased&&(y=t[r][h]),null!==y&&void 0!==y.transformFn&&(u=y.transformFn(u)),o&wu.HasDecoratorInputTransform&&(u=e.inputTransforms[r].call(t,u)),null!==e.setInput?e.setInput(t,y,u,n,r):wA(t,y,r,u)}finally{s(d)}}function LT(e,t,n,r,o,u,d,y,_,E,S){const x=t.blueprint.slice();return x[Qr]=o,x[Ae]=204|r,(null!==E||e&&2048&e[Ae])&&(x[Ae]|=2048),CA(x),x[ko]=x[bv]=e,x[Dr]=n,x[Eu]=d||e&&e[Eu],x[et]=y||e&&e[et],x[na]=_||e&&e[na]||null,x[sa]=u,x[K_]=function nB(){return tB++}(),x[ja]=S,x[yA]=E,x[Eo]=2==t.type?e[Eo]:x,x}function Fv(e,t,n,r,o){let u=e.data[t];if(null===u)u=function bI(e,t,n,r,o){const u=MA(),d=bS(),_=e.data[t]=function jB(e,t,n,r,o,u){let d=t?t.injectorIndex:-1,y=0;return function Tv(){return null!==nt.skipHydrationRootTNode}()&&(y|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:d,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:y,providerIndexes:0,value:o,attrs:u,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?u:u&&u.parent,n,t,r,o);return null===e.firstChild&&(e.firstChild=_),null!==u&&(d?null==u.child&&null!==_.parent&&(u.child=_):null===u.next&&(u.next=_,_.prev=u)),_}(e,t,n,r,o),function x3(){return nt.lFrame.inI18n}()&&(u.flags|=32);else if(64&u.type){u.type=n,u.value=r,u.attrs=o;const d=function tw(){const e=nt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();u.injectorIndex=null===d?-1:d.injectorIndex}return Ed(u,!0),u}function bw(e,t,n,r){if(0===n)return-1;const o=t.length;for(let u=0;u<n;u++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function mP(e,t,n,r,o){const u=la(),d=2&r;try{Py(-1),d&&t.length>st&&pP(e,t,st,!1),Td(d?2:0,o),n(r,o)}finally{Py(u),Td(d?3:1,o)}}function vI(e,t,n){if(uS(t)){const r=s(null);try{const u=t.directiveEnd;for(let d=t.directiveStart;d<u;d++){const y=e.data[d];y.contentQueries&&y.contentQueries(1,n[d],d)}}finally{s(r)}}}function _I(e,t,n){PA()&&(function qB(e,t,n,r){const o=n.directiveStart,u=n.directiveEnd;Cy(n)&&function JB(e,t,n){const r=ya(t,e),o=yP(n);let d=16;n.signals?d=4096:n.onPush&&(d=64);const y=$T(e,LT(e,o,null,d,r,t,null,e[Eu].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=y}(t,n,e.data[o+n.componentOffset]),e.firstCreatePass||gT(n,t),ca(r,t);const d=n.initialInputs;for(let y=o;y<u;y++){const _=e.data[y],E=My(t,e,y,n);ca(E,t),null!==d&&e4(0,y-o,E,_,0,d),Su(_)&&(Ba(n.index,t)[Dr]=My(t,e,y,n))}}(e,t,n,ya(n,t)),!(64&~n.flags)&&TP(e,t,n))}function wI(e,t,n=ya){const r=t.localNames;if(null!==r){let o=t.index+1;for(let u=0;u<r.length;u+=2){const d=r[u+1],y=-1===d?n(t,e):e[d];e[o++]=y}}}function yP(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=TI(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function TI(e,t,n,r,o,u,d,y,_,E,S){const x=st+r,A=x+o,P=function NB(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ct);return n}(x,A),M="function"==typeof E?E():E;return P[ce]={type:e,blueprint:P,template:n,queries:null,viewQuery:y,declTNode:t,data:P.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof u?u():u,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:_,consts:M,incompleteFirstPass:!1,ssrId:S}}let bP=()=>null;function vP(e,t,n,r,o){for(let u in t){if(!t.hasOwnProperty(u))continue;const d=t[u];if(void 0===d)continue;r??={};let y,_=wu.None;Array.isArray(d)?(y=d[0],_=d[1]):y=d;let E=u;if(null!==o){if(!o.hasOwnProperty(u))continue;E=o[u]}0===e?_P(r,n,E,y,_):_P(r,n,E,y)}return r}function _P(e,t,n,r,o){let u;e.hasOwnProperty(n)?(u=e[n]).push(t,r):u=e[n]=[t,r],void 0!==o&&u.push(o)}function DI(e,t,n,r){if(PA()){const o=null===r?null:{"":-1},u=function KB(e,t){const n=e.directiveRegistry;let r=null,o=null;if(n)for(let u=0;u<n.length;u++){const d=n[u];if(iA(t,d.selectors,!1))if(r||(r=[]),Su(d))if(null!==d.findHostDirectiveDefs){const y=[];o=o||new Map,d.findHostDirectiveDefs(d,y,o),r.unshift(...y,d),EI(e,t,y.length)}else r.unshift(d),EI(e,t,0);else o=o||new Map,d.findHostDirectiveDefs?.(d,r,o),r.push(d)}return null===r?null:[r,o]}(e,n);let d,y;null===u?d=y=null:[d,y]=u,null!==d&&wP(e,t,n,d,o,y),o&&function QB(e,t,n){if(t){const r=e.localNames=[];for(let o=0;o<t.length;o+=2){const u=n[t[o+1]];if(null==u)throw new re(-301,!1);r.push(t[o],u)}}}(n,r,o)}n.mergedAttrs=H_(n.mergedAttrs,n.attrs)}function wP(e,t,n,r,o,u){for(let E=0;E<r.length;E++)OS(gT(n,t),e,r[E].type);!function ZB(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let E=0;E<r.length;E++){const S=r[E];S.providersResolver&&S.providersResolver(S)}let d=!1,y=!1,_=bw(e,t,r.length,null);for(let E=0;E<r.length;E++){const S=r[E];n.mergedAttrs=H_(n.mergedAttrs,S.hostAttrs),XB(e,n,t,_,S),YB(_,S,o),null!==S.contentQueries&&(n.flags|=4),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(n.flags|=64);const x=S.type.prototype;!d&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),d=!0),!y&&(x.ngOnChanges||x.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),y=!0),_++}!function BB(e,t,n){const o=t.directiveEnd,u=e.data,d=t.attrs,y=[];let _=null,E=null;for(let S=t.directiveStart;S<o;S++){const x=u[S],A=n?n.get(x):null,M=A?A.outputs:null;_=vP(0,x.inputs,S,_,A?A.inputs:null),E=vP(1,x.outputs,S,E,M);const $=null===_||null===d||YE(t)?null:t4(_,S,d);y.push($)}null!==_&&(_.hasOwnProperty("class")&&(t.flags|=8),_.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=y,t.inputs=_,t.outputs=E}(e,n,u)}function TP(e,t,n){const r=n.directiveStart,o=n.directiveEnd,u=n.index,d=function A3(){return nt.lFrame.currentDirectiveIndex}();try{Py(u);for(let y=r;y<o;y++){const _=e.data[y],E=t[y];_S(y),(null!==_.hostBindings||0!==_.hostVars||null!==_.hostAttrs)&&WB(_,E)}}finally{Py(-1),_S(d)}}function WB(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function EI(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function YB(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Su(t)&&(n[""]=e)}}function XB(e,t,n,r,o){e.data[r]=o;const u=o.factory||(o.factory=Ey(o.type)),d=new rw(u,Su(o),Qe);e.blueprint[r]=d,n[r]=d,function zB(e,t,n,r,o){const u=o.hostBindings;if(u){let d=e.hostBindingOpCodes;null===d&&(d=e.hostBindingOpCodes=[]);const y=~t.index;(function GB(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(d)!=y&&d.push(y),d.push(n,r,u)}}(e,t,r,bw(e,n,o.hostVars,ct),o)}function e4(e,t,n,r,o,u){const d=u[t];if(null!==d)for(let y=0;y<d.length;)gP(r,n,d[y++],d[y++],d[y++],d[y++])}function t4(e,t,n){let r=null,o=0;for(;o<n.length;){const u=n[o];if(0!==u)if(5!==u){if("number"==typeof u)break;if(e.hasOwnProperty(u)){null===r&&(r=[]);const d=e[u];for(let y=0;y<d.length;y+=3)if(d[y]===t){r.push(u,d[y+1],d[y+2],n[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function DP(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function EP(e,t){const n=e.contentQueries;if(null!==n){const r=s(null);try{for(let o=0;o<n.length;o+=2){const d=n[o+1];if(-1!==d){const y=e.data[d];cT(n[o]),y.contentQueries(2,t[d],d)}}}finally{s(r)}}}function $T(e,t){return e[q_]?e[mA][Du]=t:e[q_]=t,e[mA]=t,t}function II(e,t,n){cT(0);const r=s(null);try{t(e,n)}finally{s(r)}}function jT(e,t){const n=e[na],r=n?n.get(xd,null):null;r&&r.handleError(t)}function xI(e,t,n,r,o){for(let u=0;u<n.length;){const d=n[u++],y=n[u++],_=n[u++];gP(e.data[d],t[d],r,y,_,o)}}function uh(e,t,n){const r=function Y_(e,t){return er(t[e])}(t,e);!function JO(e,t,n){e.setValue(t,n)}(e[et],r,n)}function n4(e,t){const n=Ba(t,e),r=n[ce];!function r4(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const o=n[Qr];null!==o&&null===n[ja]&&(n[ja]=qS(o,n[na])),CI(r,n,n[Dr])}function CI(e,t,n){DS(t);try{const r=e.viewQuery;null!==r&&II(1,r,n);const o=e.template;null!==o&&mP(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[nh]?.finishViewCreation(e),e.staticContentQueries&&EP(e,t),e.staticViewQueries&&II(2,e.viewQuery,n);const u=e.components;null!==u&&function o4(e,t){for(let n=0;n<t.length;n++)n4(e,t[n])}(t,u)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Ae]&=-5,ES()}}function Lv(e,t){return!t||null===t.firstChild||vT(e)}function _w(e,t,n,r=!0){const o=t[ce];if(function wB(e,t,n,r){const o=Fo+r,u=n.length;r>0&&(n[o-1][Du]=t),r<u-Fo?(t[Du]=n[o],Z1(n,Fo+r,t)):(n.push(t),t[Du]=null),t[ko]=n;const d=t[W_];null!==d&&n!==d&&function TB(e,t){const n=e[_v];t[Eo]!==t[ko][ko][Eo]&&(e[Ae]|=aS.HasTransplantedViews),null===n?e[_v]=[t]:n.push(t)}(d,t);const y=t[nh];null!==y&&y.insertView(e),mS(t),t[Ae]|=128}(o,t,e,n),r){const d=mI(n,e),y=t[et],_=RT(y,e[wd]);null!==_&&function vB(e,t,n,r,o,u){r[Qr]=o,r[sa]=t,FT(e,r,n,1,o,u)}(o,e[sa],y,t,_,d)}const u=t[ja];null!==u&&null!==u.firstChild&&(u.firstChild=null)}function ww(e,t,n,r,o=!1){for(;null!==n;){const u=t[n.index];null!==u&&r.push(er(u)),ua(u)&&AP(u,r);const d=n.type;if(8&d)ww(e,t,n.child,r);else if(32&d){const y=cI(n,t);let _;for(;_=y();)r.push(_)}else if(16&d){const y=lP(t,n);if(Array.isArray(y))r.push(...y);else{const _=Oy(t[Eo]);ww(_[ce],_,y,r,!0)}}n=o?n.projectionNext:n.next}return r}function AP(e,t){for(let n=Fo;n<e.length;n++){const r=e[n],o=r[ce].firstChild;null!==o&&ww(r[ce],r,o,t)}e[wd]!==e[Qr]&&t.push(e[wd])}let OP=[];const u4={...I,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{X_(e.lView)},consumerOnSignalRead(){this.lView[xy]=this}};function PP(e){return NP(e[q_])}function MP(e){return NP(e[Du])}function NP(e){for(;null!==e&&!ua(e);)e=e[Du];return e}const RP=100;function BT(e,t=!0,n=0){const r=e[Eu],o=r.rendererFactory;o.begin?.();try{!function d4(e,t){OI(e,t);let n=0;for(;gS(e);){if(n===RP)throw new re(103,!1);n++,OI(e,1)}}(e,n)}catch(d){throw t&&jT(e,d),d}finally{o.end?.(),r.inlineEffectRunner?.flush()}}function f4(e,t,n,r){const o=t[Ae];if(!(256&~o))return;t[Eu].inlineEffectRunner?.flush(),DS(t);let d=null,y=null;(function h4(e){return 2!==e.type})(e)&&(y=function i4(e){return e[xy]??function s4(e){const t=OP.pop()??Object.create(u4);return t.lView=e,t}(e)}(t),d=le(y));try{CA(t),function RA(e){return nt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&mP(e,t,n,2,r);const _=!(3&~o);if(_){const x=e.preOrderCheckHooks;null!==x&&fT(t,x,null)}else{const x=e.preOrderHooks;null!==x&&hT(t,x,0,null),SS(t,0)}if(function p4(e){for(let t=PP(e);null!==t;t=MP(t)){if(!(t[Ae]&aS.HasTransplantedViews))continue;const n=t[_v];for(let r=0;r<n.length;r++){y3(n[r])}}}(t),kP(t,0),null!==e.contentQueries&&EP(e,t),_){const x=e.contentCheckHooks;null!==x&&fT(t,x)}else{const x=e.contentHooks;null!==x&&hT(t,x,1),SS(t,1)}!function MB(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)Py(~o);else{const u=o,d=n[++r],y=n[++r];C3(d,u),y(2,t[u])}}}finally{Py(-1)}}(e,t);const E=e.components;null!==E&&LP(t,E,0);const S=e.viewQuery;if(null!==S&&II(2,S,r),_){const x=e.viewCheckHooks;null!==x&&fT(t,x)}else{const x=e.viewHooks;null!==x&&hT(t,x,2),SS(t,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[sT]){for(const x of t[sT])x();t[sT]=null}t[Ae]&=-73}catch(_){throw X_(t),_}finally{null!==y&&(Oe(y,d),function a4(e){e.lView[xy]!==e&&(e.lView=null,OP.push(e))}(y)),ES()}}function kP(e,t){for(let n=PP(e);null!==n;n=MP(n))for(let r=Fo;r<n.length;r++)FP(n[r],t)}function g4(e,t,n){FP(Ba(t,e),n)}function FP(e,t){pS(e)&&OI(e,t)}function OI(e,t){const r=e[ce],o=e[Ae],u=e[xy];let d=!!(0===t&&16&o);if(d||=!!(64&o&&0===t),d||=!!(1024&o),d||=!(!u?.dirty||!Io(u)),u&&(u.dirty=!1),e[Ae]&=-9217,d)f4(r,e,r.template,e[Dr]);else if(8192&o){kP(e,1);const y=r.components;null!==y&&LP(e,y,1)}}function LP(e,t,n){for(let r=0;r<t.length;r++)g4(e,t[r],n)}function Tw(e){for(e[Eu].changeDetectionScheduler?.notify();e;){e[Ae]|=64;const t=Oy(e);if(lS(e)&&!t)return e;e=t}return null}class Dw{get rootNodes(){const t=this._lView,n=t[ce];return ww(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Dr]}set context(t){this._lView[Dr]=t}get destroyed(){return!(256&~this._lView[Ae])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[ko];if(ua(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(gw(t,r),Q0(n,r))}this._attachedToViewContainer=!1}NT(this._lView[ce],this._lView)}onDestroy(t){lT(this._lView,t)}markForCheck(){Tw(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ae]&=-129}reattach(){mS(this._lView),this._lView[Ae]|=128}detectChanges(){this._lView[Ae]|=1024,BT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,eP(this._lView[ce],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=t,mS(this._lView)}}let lh=(()=>{class e{static{this.__NG_ELEMENT_ID__=b4}}return e})();const m4=lh,y4=class extends m4{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const o=function vw(e,t,n,r){const o=s(null);try{const u=t.tView,_=LT(e,u,n,4096&e[Ae]?4096:16,null,t,null,null,null,r?.injector??null,r?.dehydratedView??null);_[W_]=e[t.index];const S=e[nh];return null!==S&&(_[nh]=S.createEmbeddedView(u)),CI(u,_,n),_}finally{s(o)}}(this._declarationLView,this._declarationTContainer,t,{injector:n,dehydratedView:r});return new Dw(o)}};function b4(){return function VT(e,t){return 4&e.type?new y4(t,e,xv(e,t)):null}(_n(),oe())}class qT{}class U4{}class zP{}class z4{resolveComponentFactory(t){throw function H4(e){const t=Error(`No component factory found for ${Oo(e)}.`);return t.ngComponent=e,t}(t)}}let WT=(()=>{class e{static{this.NULL=new z4}}return e})();class FI{}let q4=(()=>{class e{static{this.\u0275prov=De({token:e,providedIn:"root",factory:()=>null})}}return e})();const LI={},qP=new Set;function xu(e){qP.has(e)||(qP.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function WP(...e){}class In{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new va(!1),this.onMicrotaskEmpty=new va(!1),this.onStable=new va(!1),this.onError=new va(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function W4(){const e="function"==typeof Mt.requestAnimationFrame;let t=Mt[e?"requestAnimationFrame":"setTimeout"],n=Mt[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function Y4(e){const t=()=>{!function Q4(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Mt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,jI(e),e.isCheckStableRunning=!0,$I(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),jI(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,u,d,y)=>{if(function Z4(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(y))return n.invokeTask(o,u,d,y);try{return KP(e),n.invokeTask(o,u,d,y)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===u.type||e.shouldCoalesceRunChangeDetection)&&t(),QP(e)}},onInvoke:(n,r,o,u,d,y,_)=>{try{return KP(e),n.invoke(o,u,d,y,_)}finally{e.shouldCoalesceRunChangeDetection&&t(),QP(e)}},onHasTask:(n,r,o,u)=>{n.hasTask(o,u),r===o&&("microTask"==u.change?(e._hasPendingMicrotasks=u.microTask,jI(e),$I(e)):"macroTask"==u.change&&(e.hasPendingMacrotasks=u.macroTask))},onHandleError:(n,r,o,u)=>(n.handleError(o,u),e.runOutsideAngular(()=>e.onError.emit(u)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!In.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(In.isInAngularZone())throw new re(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){const u=this._inner,d=u.scheduleEventTask("NgZoneEvent: "+o,t,K4,WP,WP);try{return u.runTask(d,n,r)}finally{u.cancelTask(d)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const K4={};function $I(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function jI(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function KP(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function QP(e){e._nesting--,$I(e)}let Cw=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=De({token:e,providedIn:"root",factory:()=>new e})}}return e})();function YT(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,u=0;if(null!==t)for(let d=0;d<t.length;d++){const y=t[d];"number"==typeof y?u=y:1==u?o=by(o,y):2==u&&(r=by(r,y+": "+t[++d]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}class nM extends WT{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=vt(t);return new Pw(n,this.ngModule)}}function rM(e){const t=[];for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];void 0!==r&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}class oV{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=K0(r);const o=this.injector.get(t,LI,r);return o!==LI||n===LI?o:this.parentInjector.get(t,n,r)}}class Pw extends zP{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=rM(t.inputs);if(null!==n)for(const o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return rM(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function k$(e){return e.map(R$).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,o){const u=s(null);try{let d=(o=o||this.ngModule)instanceof tu?o:o?.injector;d&&null!==this.componentDef.getStandaloneInjector&&(d=this.componentDef.getStandaloneInjector(d)||d);const y=d?new oV(t,d):t,_=y.get(FI,null);if(null===_)throw new re(407,!1);const E=y.get(q4,null),A={rendererFactory:_,sanitizer:E,inlineEffectRunner:null,afterRenderEventManager:y.get(Cw,null),changeDetectionScheduler:y.get(qT,null)},P=_.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",$=r?function RB(e,t,n,r){const u=r.get(DO,!1)||n===_u.ShadowDom,d=e.selectRootElement(t,u);return function kB(e){bP(e)}(d),d}(P,r,this.componentDef.encapsulation,y):MT(P,M,function rV(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(M));let K=512;this.componentDef.signals?K|=4096:this.componentDef.onPush||(K|=16);let te=null;null!==$&&(te=qS($,y,!0));const ee=TI(0,null,null,1,0,null,null,null,null,null,null),ge=LT(null,ee,null,K,null,null,A,P,y,null,te);let ve,at;DS(ge);try{const lt=this.componentDef;let Pt,ar=null;lt.findHostDirectiveDefs?(Pt=[],ar=new Map,lt.findHostDirectiveDefs(lt,Pt,ar),Pt.push(lt)):Pt=[lt];const Ya=function sV(e,t){const n=e[ce],r=st;return e[r]=t,Fv(n,r,2,"#host",null)}(ge,$),zu=function aV(e,t,n,r,o,u,d){const y=o[ce];!function uV(e,t,n,r){for(const o of e)t.mergedAttrs=H_(t.mergedAttrs,o.hostAttrs);null!==t.mergedAttrs&&(YT(t,t.mergedAttrs,!0),null!==n&&hP(r,n,t))}(r,e,t,d);let _=null;null!==t&&(_=qS(t,o[na]));const E=u.rendererFactory.createRenderer(t,n);let S=16;n.signals?S=4096:n.onPush&&(S=64);const x=LT(o,yP(n),null,S,o[e.index],e,u,E,null,null,_);return y.firstCreatePass&&EI(y,e,r.length-1),$T(o,x),o[e.index]=x}(Ya,$,lt,Pt,ge,A,P);at=Z_(ee,st),$&&function cV(e,t,n,r){if(r)QE(e,n,["ng-version","17.3.0"]);else{const{attrs:o,classes:u}=function F$(e){const t=[],n=[];let r=1,o=2;for(;r<e.length;){let u=e[r];if("string"==typeof u)2===o?""!==u&&t.push(u,e[++r]):8===o&&n.push(u);else{if(!Tu(o))break;o=u}r++}return{attrs:t,classes:n}}(t.selectors[0]);o&&QE(e,n,o),u&&u.length>0&&fP(e,n,u.join(" "))}}(P,lt,$,r),void 0!==n&&function dV(e,t,n){const r=e.projection=[];for(let o=0;o<t.length;o++){const u=n[o];r.push(null!=u?Array.from(u):null)}}(at,this.ngContentSelectors,n),ve=function lV(e,t,n,r,o,u){const d=_n(),y=o[ce],_=ya(d,o);wP(y,o,d,n,null,r);for(let S=0;S<n.length;S++)ca(My(o,y,d.directiveStart+S,d),o);TP(y,o,d),_&&ca(_,o);const E=My(o,y,d.directiveStart+d.componentOffset,d);if(e[Dr]=o[Dr]=E,null!==u)for(const S of u)S(E,t);return vI(y,d,o),E}(zu,lt,Pt,ar,ge,[fV]),CI(ee,ge,null)}finally{ES()}return new iV(this.componentType,ve,xv(at,ge),ge,at)}finally{s(u)}}}class iV extends U4{constructor(t,n,r,o,u){super(),this.location=r,this._rootLView=o,this._tNode=u,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Dw(o,void 0,!1),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const u=this._rootLView;xI(u[ce],u,o,t,n),this.previousInputValues.set(t,n),Tw(Ba(this._tNode.index,u))}}get injector(){return new ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function fV(){const e=_n();dT(oe()[ce],e)}let Cu=(()=>{class e{static{this.__NG_ELEMENT_ID__=hV}}return e})();function hV(){return function sM(e,t){let n;const r=t[e.index];return ua(r)?n=r:(n=DP(r,t,null,e),t[e.index]=n,$T(t,n)),aM(n,t,e,r),new oM(n,e,t)}(_n(),oe())}const pV=Cu,oM=class extends pV{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return xv(this._hostTNode,this._hostLView)}get injector(){return new ni(this._hostTNode,this._hostLView)}get parentInjector(){const t=mT(this._hostTNode,this._hostLView);if(xS(t)){const n=iw(t,this._hostLView),r=ow(t);return new ni(n[ce].data[r+8],n)}return new ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=iM(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-Fo}createEmbeddedView(t,n,r){let o,u;"number"==typeof r?o=r:null!=r&&(o=r.index,u=r.injector);const y=t.createEmbeddedViewImpl(n||{},u,null);return this.insertImpl(y,o,Lv(this._hostTNode,null)),y}createComponent(t,n,r,o,u){const d=t&&!function G_(e){return"function"==typeof e}(t);let y;if(d)y=n;else{const M=n||{};y=M.index,r=M.injector,o=M.projectableNodes,u=M.environmentInjector||M.ngModuleRef}const _=d?t:new Pw(vt(t)),E=r||this.parentInjector;if(!u&&null==_.ngModule){const $=(d?E:this.parentInjector).get(tu,null);$&&(u=$)}vt(_.componentType??{});const P=_.create(E,o,null,u);return this.insertImpl(P.hostView,y,Lv(this._hostTNode,null)),P}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){const o=t._lView;if(function m3(e){return ua(e[ko])}(o)){const y=this.indexOf(t);if(-1!==y)this.detach(y);else{const _=o[ko],E=new oM(_,_[sa],_[ko]);E.detach(E.indexOf(t))}}const u=this._adjustIndex(n),d=this._lContainer;return _w(d,o,u,r),t.attachToViewContainerRef(),Z1(HI(d),u,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=iM(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=gw(this._lContainer,n);r&&(Q0(HI(this._lContainer),n),NT(r[ce],r))}detach(t){const n=this._adjustIndex(t,-1),r=gw(this._lContainer,n);return r&&null!=Q0(HI(this._lContainer),n)?new Dw(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function iM(e){return e[8]}function HI(e){return e[8]||(e[8]=[])}let aM=function lM(e,t,n,r){if(e[wd])return;let o;o=8&n.type?er(r):function gV(e,t){const n=e[et],r=n.createComment(""),o=ya(t,e);return Ny(n,RT(n,o),r,function IB(e,t){return e.nextSibling(t)}(n,o),!1),r}(t,n),e[wd]=o},zI=()=>!1;function Ad(e,t){xu("NgSignals");const n=function fa(e){const t=Object.create(ha);t.value=e;const n=()=>(N(t),t.value);return n[h]=t,n}(e),r=n[h];return t?.equal&&(r.equal=t.equal),n.set=o=>mu(r,o),n.update=o=>function gy(e,t){Z()||gu(),mu(e,t(e.value))}(r,o),n.asReadonly=bM.bind(n),n}function bM(){const e=this[h];if(void 0===e.readonlyFn){const t=()=>this();t[h]=e,e.readonlyFn=t}return e.readonlyFn}class ky{}class FM{}class JI extends ky{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nM(this);const o=ia(t);this._bootstrapComponents=Ua(o.bootstrap),this._r3Injector=sO(t,n,[{provide:ky,useValue:this},{provide:WT,useValue:this.componentFactoryResolver},...r],Oo(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ex extends FM{constructor(t){super(),this.moduleType=t}create(t){return new JI(this.moduleType,t,[])}}class LM extends ky{constructor(t){super(),this.componentFactoryResolver=new nM(this),this.instance=null;const n=new pv([...t.providers,{provide:ky,useValue:this},{provide:WT,useValue:this.componentFactoryResolver}],t.parent||rT(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function tx(e,t,n=null){return new LM({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}let Bv=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pa(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function eD(e){return!!function nx(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Lo(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Fy(e,t,n,r){const o=Lo(e,t,n);return Lo(e,t+1,r)||o}function ru(e,t,n,r,o,u,d,y){const _=oe(),E=wt(),S=e+st,x=E.firstCreatePass?function ZV(e,t,n,r,o,u,d,y,_){const E=t.consts,S=Fv(t,e,4,d||null,Dd(E,y));DI(t,n,S,Dd(E,_)),dT(t,S);const x=S.tView=TI(2,S,r,o,u,t.directiveRegistry,t.pipeRegistry,null,t.schemas,E,null);return null!==t.queries&&(t.queries.template(t,S),x.queries=t.queries.embeddedTView(S)),S}(S,E,_,t,n,r,o,u,d):E.data[S];Ed(x,!1);const A=$M(E,_,x,e);nw()&&kT(E,_,A,x),ca(A,_);const P=DP(A,_,A,x);return _[S]=P,$T(_,P),function uM(e,t,n){return zI(e,t,n)}(P,x,_),uT(x)&&_I(E,_,x),null!=d&&wI(_,x,y),ru}let $M=function jM(e,t,n,r){return Sd(!0),t[et].createComment("")};function Qv(e,t,n,r,o,u){const y=Fy(e,function ih(){return nt.lFrame.bindingIndex}(),n,o);return function sh(e){const t=nt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2),y?t+Ze(n)+r+Ze(o)+u:ct}function Ko(e,t,n){const r=oe();return Lo(r,Iu(),t)&&function Na(e,t,n,r,o,u,d,y){const _=ya(t,n);let S,E=t.inputs;!y&&null!=E&&(S=E[r])?(xI(e,n,S,r,o),Cy(t)&&function UB(e,t){const n=Ba(t,e);16&n[Ae]||(n[Ae]|=64)}(n,t.index)):3&t.type&&(r=function VB(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),o=null!=d?d(o,t.value||"",r):o,u.setProperty(_,r,o))}(wt(),function Er(){const e=nt.lFrame;return Z_(e.tView,e.selectedIndex)}(),r,e,t,r[et],n,!1),Ko}function mx(e,t,n,r,o){const d=o?"class":"style";xI(e,n,t.inputs[d],d,r)}function rn(e,t,n,r){const o=oe(),u=wt(),d=st+e,y=o[et],_=u.firstCreatePass?function _6(e,t,n,r,o,u){const d=t.consts,_=Fv(t,e,2,r,Dd(d,o));return DI(t,n,_,Dd(d,u)),null!==_.attrs&&YT(_,_.attrs,!1),null!==_.mergedAttrs&&YT(_,_.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,_),_}(d,u,o,t,n,r):u.data[d],E=RN(u,o,_,y,t,e);o[d]=E;const S=uT(_);return Ed(_,!0),hP(y,E,_),!function Rw(e){return!(32&~e.flags)}(_)&&nw()&&kT(u,o,E,_),0===function b3(){return nt.lFrame.elementDepthCount}()&&ca(E,o),function v3(){nt.lFrame.elementDepthCount++}(),S&&(_I(u,o,_),vI(u,_,o)),null!==r&&wI(o,_),rn}function on(){let e=_n();bS()?function vS(){nt.lFrame.isParent=!1}():(e=e.parent,Ed(e,!1));const t=e;(function w3(e){return nt.skipHydrationRootTNode===e})(t)&&function S3(){nt.skipHydrationRootTNode=null}(),function _3(){nt.lFrame.elementDepthCount--}();const n=wt();return n.firstCreatePass&&(dT(n,e),uS(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function B3(e){return!!(8&e.flags)}(t)&&mx(n,t,oe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function V3(e){return!!(16&e.flags)}(t)&&mx(n,t,oe(),t.stylesWithoutHost,!1),on}function r_(e,t,n,r){return rn(e,t,n,r),on(),r_}let RN=(e,t,n,r,o,u)=>(Sd(!0),MT(r,o,function VA(){return nt.lFrame.currentNamespace}()));function lD(){return oe()}const jy=void 0;var x6=["en",[["a","p"],["AM","PM"],jy],[["AM","PM"],jy,jy],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jy,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jy,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jy,"{1} 'at' {0}",jy],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function I6(e){const n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let o_={};function _a(e){const t=function C6(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=BN(t);if(n)return n;const r=t.split("-")[0];if(n=BN(r),n)return n;if("en"===r)return x6;throw new re(701,!1)}function BN(e){return e in o_||(o_[e]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[e]),o_[e]}var Ir=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Ir||{});const i_="en-US";let VN=i_;function za(e,t,n,r){const o=oe(),u=wt(),d=_n();return function Ix(e,t,n,r,o,u,d){const y=uT(r),E=e.firstCreatePass&&function IP(e){return e.cleanup||(e.cleanup=[])}(e),S=t[Dr],x=function SP(e){return e[yv]||(e[yv]=[])}(t);let A=!0;if(3&r.type||d){const $=ya(r,t),K=d?d($):$,te=x.length,ee=d?ve=>d(er(ve[r.index])):r.index;let ge=null;if(!d&&y&&(ge=function EH(e,t,n,r){const o=e.cleanup;if(null!=o)for(let u=0;u<o.length-1;u+=2){const d=o[u];if(d===n&&o[u+1]===r){const y=t[yv],_=o[u+2];return y.length>_?y[_]:null}"string"==typeof d&&(u+=2)}return null}(e,t,o,r.index)),null!==ge)(ge.__ngLastListenerFn__||ge).__ngNextListenerFn__=u,ge.__ngLastListenerFn__=u,A=!1;else{u=g2(r,t,S,u,!1);const ve=n.listen(K,o,u);x.push(u,ve),E&&E.push(o,ee,te,te+1)}}else u=g2(r,t,S,u,!1);const P=r.outputs;let M;if(A&&null!==P&&(M=P[o])){const $=M.length;if($)for(let K=0;K<$;K+=2){const at=t[M[K]][M[K+1]].subscribe(u),lt=x.length;x.push(u,at),E&&E.push(o,r.index,lt,-(lt+1))}}}(u,o,o[et],d,e,t,r),za}function p2(e,t,n,r){const o=s(null);try{return Td(6,t,n),!1!==n(r)}catch(u){return jT(e,u),!1}finally{Td(7,t,n),s(o)}}function g2(e,t,n,r,o){return function u(d){if(d===Function)return r;Tw(e.componentOffset>-1?Ba(e.index,t):t);let _=p2(t,n,r,d),E=u.__ngNextListenerFn__;for(;E;)_=p2(t,n,E,d)&&_,E=E.__ngNextListenerFn__;return o&&!1===_&&d.preventDefault(),_}}function ou(e=1){return function P3(e){return(nt.lFrame.contextLView=function AA(e,t){for(;e>0;)t=t[bv],e--;return t}(e,nt.lFrame.contextLView))[Dr]}(e)}function Zr(e,t=""){const n=oe(),r=wt(),o=e+st,u=r.firstCreatePass?Fv(r,o,1,t,null):r.data[o],d=L2(r,n,u,t,e);n[o]=d,nw()&&kT(r,n,d,u),Ed(u,!1)}let L2=(e,t,n,r,o)=>(Sd(!0),function dI(e,t){return e.createText(t)}(t[et],r));function Gw(e){return qw("",e,""),Gw}function qw(e,t,n){const r=oe(),o=function Kv(e,t,n,r){return Lo(e,Iu(),n)?t+Ze(n)+r:ct}(r,e,t,n);return o!==ct&&uh(r,la(),o),qw}function Cx(e,t,n,r,o){const u=oe(),d=Qv(u,e,t,n,r,o);return d!==ct&&uh(u,la(),d),Cx}let ZH=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=XE(0,n.type),o=r.length>0?tx([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=De({token:e,providedIn:"environment",factory:()=>new e(ft(tu))})}}return e})();function pD(e){xu("NgStandalone"),e.getStandaloneInjector=t=>t.get(ZH).getOrCreateStandaloneInjector(e)}function rR(e,t,n,r,o,u,d){const y=t+n;return Fy(e,y,o,u)?function Od(e,t,n){return e[t]=n}(e,y+2,d?r.call(d,o,u):r(o,u)):function Ww(e,t){const n=e[t];return n===ct?void 0:n}(e,y+2)}function Rx(e,t){const n=wt();let r;const o=e+st;n.firstCreatePass?(r=function yz(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}}(t,n.pipeRegistry),n.data[o]=r,r.onDestroy&&(n.destroyHooks??=[]).push(o,r.onDestroy)):r=n.data[o];const u=r.factory||(r.factory=Ey(r.type)),y=Aa(Qe);try{const _=pT(!1),E=u();return pT(_),function MH(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,oe(),o,E),E}finally{Aa(y)}}function kx(e,t,n,r){const o=e+st,u=oe(),d=function wv(e,t){return e[t]}(u,o);return function Kw(e,t){return e[ce].data[t].pure}(u,o)?rR(u,function ba(){const e=nt.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}(),t,d.transform,n,r,d):d.transform(n,r)}let TR=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();const xR=new be("");function _D(e){return!!e&&"function"==typeof e.then}function CR(e){return!!e&&"function"==typeof e.subscribe}const m8=new be("");let zx=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=fe(m8,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const o of this.appInits){const u=o();if(_D(u))n.push(u);else if(CR(u)){const d=new Promise((y,_)=>{u.subscribe({complete:y,error:_})});n.push(d)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Gx=new be("");let ay=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=fe(uO),this.afterRenderEffectManager=fe(Cw),this.externalTestViews=new Set,this.beforeRender=new Ks,this.afterTick=new Ks,this.componentTypes=[],this.components=[],this.isStable=fe(Bv).hasPendingTasks.pipe(en(n=>!n)),this._injector=fe(tu)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const o=n instanceof zP;if(!this._injector.get(zx).done)throw!o&&function Yg(e){const t=vt(e)||Jo(e)||ea(e);return null!==t&&t.standalone}(n),new re(405,!1);let d;d=o?n:this._injector.get(WT).resolveComponentFactory(n),this.componentTypes.push(d.componentType);const y=function y8(e){return e.isBoundToModule}(d)?void 0:this._injector.get(ky),E=d.create(Va.NULL,[],r||d.selector,y),S=E.location.nativeElement,x=E.injector.get(xR,null);return x?.registerApplication(S),E.onDestroy(()=>{this.detachView(E.hostView),wD(this.components,E),x?.unregisterApplication(S)}),this._loadComponent(E),E}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new re(101,!1);const r=s(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,s(r)}}detectChangesInAttachedViews(n){let r=0;const o=this.afterRenderEffectManager;for(;;){if(r===RP)throw new re(103,!1);if(n){const u=0===r;this.beforeRender.next(u);for(let{_lView:d,notifyErrorHandler:y}of this._views)v8(d,u,y)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:u})=>qx(u))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:u})=>qx(u))))break}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;wD(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Gx,[]);[...this._bootstrapListeners,...r].forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>wD(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new re(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function wD(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function v8(e,t,n){!t&&!qx(e)||function _8(e,t,n){let r;n?(r=0,e[Ae]|=1024):r=64&e[Ae]?0:1,BT(e,t,r)}(e,n,t)}function qx(e){return gS(e)}class w8{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let T8=(()=>{class e{compileModuleSync(n){return new ex(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),u=Ua(ia(n).declarations).reduce((d,y)=>{const _=vt(y);return _&&d.push(new Pw(_)),d},[]);return new w8(r,u)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),S8=(()=>{class e{constructor(){this.zone=fe(In),this.applicationRef=fe(ay)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function NR(e){return[{provide:In,useFactory:e},{provide:Sy,multi:!0,useFactory:()=>{const t=fe(S8,{optional:!0});return()=>t.initialize()}},{provide:Sy,multi:!0,useFactory:()=>{const t=fe(C8);return()=>{t.initialize()}}},{provide:uO,useFactory:I8}]}function I8(){const e=fe(In),t=fe(xd);return n=>e.runOutsideAngular(()=>t.handleError(n))}function x8(e){return z_([[],NR(()=>new In(function RR(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}(e)))])}let C8=(()=>{class e{constructor(){this.subscription=new ra,this.initialized=!1,this.zone=fe(In),this.pendingTasks=fe(Bv)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{In.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{In.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const ch=new be("",{providedIn:"root",factory:()=>fe(ch,_t.Optional|_t.SkipSelf)||function A8(){return typeof $localize<"u"&&$localize.locale||i_}()}),Wx=new be("");let uy=null;let DD=(()=>{class e{static{this.__NG_ELEMENT_ID__=k8}}return e})();function k8(e){return function F8(e,t,n){if(Cy(e)&&!n){const r=Ba(e.index,t);return new Dw(r,r)}return 47&e.type?new Dw(t[Eo],t):null}(_n(),oe(),!(16&~e))}class HR{constructor(){}supports(t){return eD(t)}create(t){return new V8(t)}}const B8=(e,t)=>t;class V8{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||B8}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,o=0,u=null;for(;n||r;){const d=!r||n&&n.currentIndex<GR(r,o,u)?n:r,y=GR(d,o,u),_=d.currentIndex;if(d===r)o--,r=r._nextRemoved;else if(n=n._next,null==d.previousIndex)o++;else{u||(u=[]);const E=y-o,S=_-o;if(E!=S){for(let A=0;A<E;A++){const P=A<u.length?u[A]:u[A]=0,M=P+A;S<=M&&M<E&&(u[A]=P+1)}u[d.previousIndex]=S-E}}y!==_&&t(d,y,_)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!eD(t))throw new re(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let o,u,d,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let y=0;y<this.length;y++)u=t[y],d=this._trackByFn(y,u),null!==n&&Object.is(n.trackById,d)?(r&&(n=this._verifyReinsertion(n,u,d,y)),Object.is(n.item,u)||this._addIdentityChange(n,u)):(n=this._mismatch(n,u,d,y),r=!0),n=n._next}else o=0,function QV(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,y=>{d=this._trackByFn(o,y),null!==n&&Object.is(n.trackById,d)?(r&&(n=this._verifyReinsertion(n,y,d,o)),Object.is(n.item,y)||this._addIdentityChange(n,y)):(n=this._mismatch(n,y,d,o),r=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,o){let u;return null===t?u=this._itTail:(u=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,u,o)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,u,o)):t=this._addAfter(new U8(n,r),u,o),t}_verifyReinsertion(t,n,r,o){let u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==u?t=this._reinsertAfter(u,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const o=t._prevRemoved,u=t._nextRemoved;return null===o?this._removalsHead=u:o._nextRemoved=u,null===u?this._removalsTail=o:u._prevRemoved=o,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const o=null===n?this._itHead:n._next;return t._next=o,t._prev=n,null===o?this._itTail=t:o._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new zR),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zR),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class U8{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class H8{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class zR{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new H8,this.map.set(n,r)),r.add(t)}get(t,n){const o=this.map.get(t);return o?o.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GR(e,t,n){const r=e.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}function WR(){return new Jx([new HR])}let Jx=(()=>{class e{static{this.\u0275prov=De({token:e,providedIn:"root",factory:WR})}constructor(n){this.factories=n}static create(n,r){if(null!=r){const o=r.factories.slice();n=n.concat(o)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||WR()),deps:[[e,new GE,new zE]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(null!=r)return r;throw new re(901,!1)}}return e})();function uG(e){try{const{rootComponent:t,appProviders:n,platformProviders:r}=e,o=function R8(e=[]){if(uy)return uy;const t=function LR(e=[],t){return Va.create({name:t,providers:[{provide:tS,useValue:"platform"},{provide:Wx,useValue:new Set([()=>uy=null])},...e]})}(e);return uy=t,function AR(){!function fl(e){Ja=e}(()=>{throw new re(600,!1)})}(),function $R(e){e.get(hO,null)?.forEach(n=>n())}(t),t}(r),u=[x8(),...n||[]],y=new LM({providers:u,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,_=y.get(In);return _.run(()=>{y.resolveInjectorInitializers();const E=y.get(xd,null);let S;_.runOutsideAngular(()=>{S=_.onError.subscribe({next:P=>{E.handleError(P)}})});const x=()=>y.destroy(),A=o.get(Wx);return A.add(x),y.onDestroy(()=>{S.unsubscribe(),A.delete(x)}),function OR(e,t,n){try{const r=n();return _D(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(E,_,()=>{const P=y.get(zx);return P.runInitializers(),P.donePromise.then(()=>{!function UN(e){"string"==typeof e&&(VN=e.toLowerCase().replace(/_/g,"-"))}(y.get(ch,i_)||i_);const $=y.get(ay);return void 0!==t&&$.bootstrap(t),$})})})}catch(t){return Promise.reject(t)}}let yk=null;function l_(){return yk}class PG{}const Pu=new be("");let bk=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:()=>fe(MG),providedIn:"platform"})}}return e})(),MG=(()=>{class e extends bk{constructor(){super(),this._doc=fe(Pu),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return l_().getBaseHref(this._doc)}onPopState(n){const r=l_().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=l_().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function vk(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function _k(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Vy(e){return e&&"?"!==e[0]?"?"+e:e}let MD=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:()=>fe(RG),providedIn:"root"})}}return e})();const NG=new be("");let RG=(()=>{class e extends MD{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??fe(Pu).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return vk(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Vy(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,u){const d=this.prepareExternalUrl(o+Vy(u));this._platformLocation.pushState(n,r,d)}replaceState(n,r,o,u){const d=this.prepareExternalUrl(o+Vy(u));this._platformLocation.replaceState(n,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(ft(bk),ft(NG,8))}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Jw=(()=>{class e{constructor(n){this._subject=new va,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function LG(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(_k(wk(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Vy(r))}normalize(n){return e.stripTrailingSlash(function FG(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,wk(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Vy(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Vy(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r,complete:o})}static{this.normalizeQueryParams=Vy}static{this.joinWithSlash=vk}static{this.stripTrailingSlash=_k}static{this.\u0275fac=function(r){return new(r||e)(ft(MD))}}static{this.\u0275prov=De({token:e,factory:()=>function kG(){return new Jw(ft(MD))}(),providedIn:"root"})}}return e})();function wk(e){return e.replace(/\/index.html$/,"")}var ND=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}(ND||{});const Qo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function iu(e,t){const n=_a(e),r=n[Ir.NumberSymbols][t];if(typeof r>"u"){if(t===Qo.CurrencyDecimal)return n[Ir.NumberSymbols][Qo.Decimal];if(t===Qo.CurrencyGroup)return n[Ir.NumberSymbols][Qo.Group]}return r}const c5=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function cC(e){const t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}class E5{constructor(t,n,r,o){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mk=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new E5(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const y=r.get(u);r.move(y,d),Nk(y,o)}});for(let o=0,u=r.length;o<u;o++){const y=r.get(o).context;y.index=o,y.count=u,y.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{Nk(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(Qe(Cu),Qe(lh),Qe(Jx))}}static{this.\u0275dir=ma({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function Nk(e,t){e.context.$implicit=t.item}let Rk=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new S5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){kk("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){kk("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(Qe(Cu),Qe(lh))}}static{this.\u0275dir=ma({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})();class S5{constructor(){this.$implicit=null,this.ngIf=null}}function kk(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Oo(t)}'.`)}let $k=(()=>{class e{constructor(n){this._locale=n}transform(n,r,o){if(!function gC(e){return!(null==e||""===e||e!=e)}(n))return null;o||=this._locale;try{return function m5(e,t,n){return function uC(e,t,n,r,o,u,d=!1){let y="",_=!1;if(isFinite(e)){let E=function b5(e){let r,o,u,d,y,t=Math.abs(e)+"",n=0;for((o=t.indexOf("."))>-1&&(t=t.replace(".","")),(u=t.search(/e/i))>0?(o<0&&(o=u),o+=+t.slice(u+1),t=t.substring(0,u)):o<0&&(o=t.length),u=0;"0"===t.charAt(u);u++);if(u===(y=t.length))r=[0],o=1;else{for(y--;"0"===t.charAt(y);)y--;for(o-=u,r=[],d=0;u<=y;u++,d++)r[d]=Number(t.charAt(u))}return o>22&&(r=r.splice(0,21),n=o-1,o=1),{digits:r,exponent:n,integerLen:o}}(e);d&&(E=function y5(e){if(0===e.digits[0])return e;const t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(E));let S=t.minInt,x=t.minFrac,A=t.maxFrac;if(u){const ee=u.match(c5);if(null===ee)throw new Error(`${u} is not a valid digit info`);const ge=ee[1],ve=ee[3],at=ee[5];null!=ge&&(S=cC(ge)),null!=ve&&(x=cC(ve)),null!=at?A=cC(at):null!=ve&&x>A&&(A=x)}!function v5(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let r=e.digits,o=r.length-e.integerLen;const u=Math.min(Math.max(t,o),n);let d=u+e.integerLen,y=r[d];if(d>0){r.splice(Math.max(e.integerLen,d));for(let x=d;x<r.length;x++)r[x]=0}else{o=Math.max(0,o),e.integerLen=1,r.length=Math.max(1,d=u+1),r[0]=0;for(let x=1;x<d;x++)r[x]=0}if(y>=5)if(d-1<0){for(let x=0;x>d;x--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[d-1]++;for(;o<Math.max(0,u);o++)r.push(0);let _=0!==u;const E=t+e.integerLen,S=r.reduceRight(function(x,A,P,M){return M[P]=(A+=x)<10?A:A-10,_&&(0===M[P]&&P>=E?M.pop():_=!1),A>=10?1:0},0);S&&(r.unshift(S),e.integerLen++)}(E,x,A);let P=E.digits,M=E.integerLen;const $=E.exponent;let K=[];for(_=P.every(ee=>!ee);M<S;M++)P.unshift(0);for(;M<0;M++)P.unshift(0);M>0?K=P.splice(M,P.length):(K=P,P=[0]);const te=[];for(P.length>=t.lgSize&&te.unshift(P.splice(-t.lgSize,P.length).join(""));P.length>t.gSize;)te.unshift(P.splice(-t.gSize,P.length).join(""));P.length&&te.unshift(P.join("")),y=te.join(iu(n,r)),K.length&&(y+=iu(n,o)+K.join("")),$&&(y+=iu(n,Qo.Exponential)+"+"+$)}else y=iu(n,Qo.Infinity);return y=e<0&&!_?t.negPre+y+t.negSuf:t.posPre+y+t.posSuf,y}(e,function lC(e,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),o=r[0],u=r[1],d=-1!==o.indexOf(".")?o.split("."):[o.substring(0,o.lastIndexOf("0")+1),o.substring(o.lastIndexOf("0")+1)],y=d[0],_=d[1]||"";n.posPre=y.substring(0,y.indexOf("#"));for(let S=0;S<_.length;S++){const x=_.charAt(S);"0"===x?n.minFrac=n.maxFrac=S+1:"#"===x?n.maxFrac=S+1:n.posSuf+=x}const E=y.split(",");if(n.gSize=E[1]?E[1].length:0,n.lgSize=E[2]||E[1]?(E[2]||E[1]).length:0,u){const S=o.length-n.posPre.length-n.posSuf.length,x=u.indexOf("#");n.negPre=u.substring(0,x).replace(/'/g,""),n.negSuf=u.slice(x+S).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function rC(e,t){return _a(e)[Ir.NumberFormats][t]}(t,ND.Decimal),iu(t,Qo.MinusSign)),t,Qo.Group,Qo.Decimal,n)}(function mC(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}(n),o,r)}catch(u){throw function $u(e,t){return new re(2100,!1)}()}}static{this.\u0275fac=function(r){return new(r||e)(Qe(ch,16))}}static{this.\u0275pipe=Pa({name:"number",type:e,pure:!0,standalone:!0})}}return e})();let Y5=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=ZE({type:e})}static{this.\u0275inj=lv({})}}return e})();function Bk(e){return"server"===e}class Aq extends PG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class bC extends Aq{static makeCurrent(){!function OG(e){yk??=e}(new bC)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function Oq(){return r0=r0||document.querySelector("base"),r0?r0.getAttribute("href"):null}();return null==n?null:function Pq(e){return new URL(e,document.baseURI).pathname}(n)}resetBaseElement(){r0=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function w5(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[o,u]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(u)}return null}(document.cookie,t)}}let r0=null,Nq=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac})}}return e})();const vC=new be("");let Qk=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(u=>u.supports(n)),!r)throw new re(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(ft(vC),ft(In))}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac})}}return e})();class Yk{constructor(t){this._doc=t}}const _C="ng-app-id";let Zk=(()=>{class e{constructor(n,r,o,u={}){this.doc=n,this.appId=r,this.nonce=o,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Bk(u),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(o=>o.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${_C}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(n,r){const o=this.styleRef;if(o.has(n)){const u=o.get(n);return u.usage+=r,u.usage}return o.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const o=this.styleNodesInDOM,u=o?.get(r);if(u?.parentNode===n)return o.delete(r),u.removeAttribute(_C),u;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=r,this.platformIsServer&&d.setAttribute(_C,this.appId),n.appendChild(d),d}}addStyleToHost(n,r){const o=this.getStyleElement(n,r),u=this.styleRef,d=u.get(r)?.elements;d?d.push(o):u.set(r,{elements:[o],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(ft(Pu),ft($S),ft(gO,8),ft(Cv))}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac})}}return e})();const wC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},TC=/%COMP%/g,Lq=new be("",{providedIn:"root",factory:()=>!0});function Jk(e,t){return t.map(n=>n.replace(TC,e))}let DC=(()=>{class e{constructor(n,r,o,u,d,y,_,E=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=u,this.doc=d,this.platformId=y,this.ngZone=_,this.nonce=E,this.rendererByCompId=new Map,this.platformIsServer=Bk(y),this.defaultRenderer=new EC(n,d,_,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===_u.ShadowDom&&(r={...r,encapsulation:_u.Emulated});const o=this.getOrCreateRenderer(n,r);return o instanceof tF?o.applyToHost(n):o instanceof SC&&o.applyStyles(),o}getOrCreateRenderer(n,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const d=this.doc,y=this.ngZone,_=this.eventManager,E=this.sharedStylesHost,S=this.removeStylesOnCompDestroy,x=this.platformIsServer;switch(r.encapsulation){case _u.Emulated:u=new tF(_,E,r,this.appId,S,d,y,x);break;case _u.ShadowDom:return new Vq(_,E,n,r,d,y,this.nonce,x);default:u=new SC(_,E,r,S,d,y,x)}o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(ft(Qk),ft(Zk),ft($S),ft(Lq),ft(Pu),ft(Cv),ft(In),ft(gO))}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac})}}return e})();class EC{constructor(t,n,r,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(wC[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(eF(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(eF(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new re(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;const u=wC[o];u?t.setAttributeNS(u,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const o=wC[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(ny.DashCase|ny.Important)?t.style.setProperty(n,r,o&ny.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&ny.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){null!=t&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=l_().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function eF(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class Vq extends EC{constructor(t,n,r,o,u,d,y,_){super(t,u,d,_),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const E=Jk(o.id,o.styles);for(const S of E){const x=document.createElement("style");y&&x.setAttribute("nonce",y),x.textContent=S,this.shadowRoot.appendChild(x)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class SC extends EC{constructor(t,n,r,o,u,d,y,_){super(t,u,d,y),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=_?Jk(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class tF extends SC{constructor(t,n,r,o,u,d,y,_){const E=o+"-"+r.id;super(t,n,r,u,d,y,_,E),this.contentAttr=function $q(e){return"_ngcontent-%COMP%".replace(TC,e)}(E),this.hostAttr=function jq(e){return"_nghost-%COMP%".replace(TC,e)}(E)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}const nF=["alt","control","meta","shift"],Hq={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zq={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};function rF(e){return{appProviders:[...Xq,...e?.providers??[]],platformProviders:Yq}}const Yq=[{provide:Cv,useValue:"browser"},{provide:hO,useValue:function Wq(){bC.makeCurrent()},multi:!0},{provide:Pu,useFactory:function Qq(){return function lj(e){LS=e}(document),document},deps:[]}],Xq=[{provide:tS,useValue:"root"},{provide:xd,useFactory:function Kq(){return new xd},deps:[]},{provide:vC,useClass:(()=>{class e extends Yk{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}static{this.\u0275fac=function(r){return new(r||e)(ft(Pu))}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac})}}return e})(),multi:!0,deps:[Pu,In,Cv]},{provide:vC,useClass:(()=>{class e extends Yk{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,o){const u=e.parseEventName(r),d=e.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>l_().onAndCancel(n,u.domEventName,d))}static parseEventName(n){const r=n.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=e._normalizeKey(r.pop());let d="",y=r.indexOf("code");if(y>-1&&(r.splice(y,1),d="code."),nF.forEach(E=>{const S=r.indexOf(E);S>-1&&(r.splice(S,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=o,_.fullKey=d,_}static matchEventFullKeyCode(n,r){let o=Hq[n.key]||n.key,u="";return r.indexOf("code.")>-1&&(o=n.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),nF.forEach(d=>{d!==o&&(0,zq[d])(n)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(n,r,o){return u=>{e.matchEventFullKeyCode(u,n)&&o.runGuarded(()=>r(u))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(ft(Pu))}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac})}}return e})(),multi:!0,deps:[Pu]},DC,Zk,Qk,{provide:FI,useExisting:DC},{provide:class tq{},useClass:Nq,deps:[]},[]];let Jq=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(ft(Pu))}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var it=function(e){return e[e.State=0]="State",e[e.Transition=1]="Transition",e[e.Sequence=2]="Sequence",e[e.Group=3]="Group",e[e.Animate=4]="Animate",e[e.Keyframes=5]="Keyframes",e[e.Style=6]="Style",e[e.Trigger=7]="Trigger",e[e.Reference=8]="Reference",e[e.AnimateChild=9]="AnimateChild",e[e.AnimateRef=10]="AnimateRef",e[e.Query=11]="Query",e[e.Stagger=12]="Stagger",e}(it||{});const ph="*";function aF(e){return{type:it.Style,styles:e,offset:null}}class s0{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class uF{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,r=0,o=0;const u=this.players.length;0==u?queueMicrotask(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++n==u&&this._onFinish()}),d.onDestroy(()=>{++r==u&&this._onDestroy()}),d.onStart(()=>{++o==u&&this._onStart()})}),this.totalTime=this.players.reduce((d,y)=>Math.max(d,y.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(o)})}getPosition(){const t=this.players.reduce((n,r)=>null===n||r.totalTime>n.totalTime?r:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}function lF(e){return new re(3e3,!1)}function ly(e){switch(e.length){case 0:return new s0;case 1:return e[0];default:return new uF(e)}}function cF(e,t,n=new Map,r=new Map){const o=[],u=[];let d=-1,y=null;if(t.forEach(_=>{const E=_.get("offset"),S=E==d,x=S&&y||new Map;_.forEach((A,P)=>{let M=P,$=A;if("offset"!==P)switch(M=e.normalizePropertyName(M,o),$){case"!":$=n.get(P);break;case ph:$=r.get(P);break;default:$=e.normalizeStyleValue(P,M,$,o)}x.set(M,$)}),S||u.push(x),y=x,d=E}),o.length)throw function OW(e){return new re(3502,!1)}();return u}function xC(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&CC(n,"start",e)));break;case"done":e.onDone(()=>r(n&&CC(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&CC(n,"destroy",e)))}}function CC(e,t,n){const u=AC(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,n.totalTime??e.totalTime,!!n.disabled),d=e._data;return null!=d&&(u._data=d),u}function AC(e,t,n,r,o="",u=0,d){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:o,totalTime:u,disabled:!!d}}function qa(e,t,n){let r=e.get(t);return r||e.set(t,r=n),r}function dF(e){const t=e.indexOf(":");return[e.substring(1,t),e.slice(t+1)]}const UW=typeof document>"u"?null:document.documentElement;function OC(e){const t=e.parentNode||e.host||null;return t===UW?null:t}let Uy=null,fF=!1;function hF(e,t){for(;t;){if(t===e)return!0;t=OC(t)}return!1}function pF(e,t,n){if(n)return Array.from(e.querySelectorAll(t));const r=e.querySelector(t);return r?[r]:[]}let PC=(()=>{class e{validateStyleProperty(n){return function zW(e){Uy||(Uy=function GW(){return typeof document<"u"?document.body:null}()||{},fF=!!Uy.style&&"WebkitAppearance"in Uy.style);let t=!0;return Uy.style&&!function HW(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in Uy.style,!t&&fF&&(t="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in Uy.style)),t}(n)}matchesElement(n,r){return!1}containsElement(n,r){return hF(n,r)}getParentElement(n){return OC(n)}query(n,r,o){return pF(n,r,o)}computeStyle(n,r,o){return o||""}animate(n,r,o,u,d,y=[],_){return new s0(o,u)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac})}}return e})();class MC{static{this.NOOP=new PC}}class NC{}const WW=1e3,RC="ng-enter",qD="ng-leave",WD="ng-trigger",KD=".ng-trigger",mF="ng-animating",kC=".ng-animating";function Eh(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:FC(parseFloat(t[1]),t[2])}function FC(e,t){return"s"===t?e*WW:e}function QD(e,t,n){return e.hasOwnProperty("duration")?e:function QW(e,t,n){let o,u=0,d="";if("string"==typeof e){const y=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===y)return t.push(lF()),{duration:0,delay:0,easing:""};o=FC(parseFloat(y[1]),y[2]);const _=y[3];null!=_&&(u=FC(parseFloat(_),y[4]));const E=y[5];E&&(d=E)}else o=e;if(!n){let y=!1,_=t.length;o<0&&(t.push(function uW(){return new re(3100,!1)}()),y=!0),u<0&&(t.push(function lW(){return new re(3101,!1)}()),y=!0),y&&t.splice(_,0,lF())}return{duration:o,delay:u,easing:d}}(e,t,n)}function Nd(e,t,n){t.forEach((r,o)=>{const u=$C(o);n&&!n.has(o)&&n.set(o,e.style[u]),e.style[u]=r})}function Hy(e,t){t.forEach((n,r)=>{const o=$C(r);e.style[o]=""})}function a0(e){return Array.isArray(e)?1==e.length?e[0]:function rW(e,t=null){return{type:it.Sequence,steps:e,options:t}}(e):e}const LC=new RegExp("{{\\s*(.+?)\\s*}}","g");function bF(e){let t=[];if("string"==typeof e){let n;for(;n=LC.exec(e);)t.push(n[1]);LC.lastIndex=0}return t}function u0(e,t,n){const r=`${e}`,o=r.replace(LC,(u,d)=>{let y=t[d];return null==y&&(n.push(function dW(e){return new re(3003,!1)}()),y=""),y.toString()});return o==r?e:o}const XW=/-+([a-z0-9])/g;function $C(e){return e.replace(XW,(...t)=>t[1].toUpperCase())}function Wa(e,t,n){switch(t.type){case it.Trigger:return e.visitTrigger(t,n);case it.State:return e.visitState(t,n);case it.Transition:return e.visitTransition(t,n);case it.Sequence:return e.visitSequence(t,n);case it.Group:return e.visitGroup(t,n);case it.Animate:return e.visitAnimate(t,n);case it.Keyframes:return e.visitKeyframes(t,n);case it.Style:return e.visitStyle(t,n);case it.Reference:return e.visitReference(t,n);case it.AnimateChild:return e.visitAnimateChild(t,n);case it.AnimateRef:return e.visitAnimateRef(t,n);case it.Query:return e.visitQuery(t,n);case it.Stagger:return e.visitStagger(t,n);default:throw function fW(e){return new re(3004,!1)}()}}function jC(e,t){return window.getComputedStyle(e)[t]}const t7=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class vF extends NC{normalizePropertyName(t,n){return $C(t)}normalizeStyleValue(t,n,r,o){let u="";const d=r.toString().trim();if(t7.has(n)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const y=r.match(/^[+-]?[\d\.]+([a-z]*)$/);y&&0==y[1].length&&o.push(function hW(e,t){return new re(3005,!1)}())}return d+u}}const YD="*";const ZD=new Set(["true","1"]),XD=new Set(["false","0"]);function _F(e,t){const n=ZD.has(e)||XD.has(e),r=ZD.has(t)||XD.has(t);return(o,u)=>{let d=e==YD||e==o,y=t==YD||t==u;return!d&&n&&"boolean"==typeof o&&(d=o?ZD.has(e):XD.has(e)),!y&&r&&"boolean"==typeof u&&(y=u?ZD.has(t):XD.has(t)),d&&y}}const i7=new RegExp("s*:selfs*,?","g");function BC(e,t,n,r){return new s7(e).build(t,n,r)}class s7{constructor(t){this._driver=t}build(t,n,r){const o=new l7(n);return this._resetContextStyleTimingState(o),Wa(this,a0(t),o)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,n){let r=n.queryCount=0,o=n.depCount=0;const u=[],d=[];return"@"==t.name.charAt(0)&&n.errors.push(function pW(){return new re(3006,!1)}()),t.definitions.forEach(y=>{if(this._resetContextStyleTimingState(n),y.type==it.State){const _=y,E=_.name;E.toString().split(/\s*,\s*/).forEach(S=>{_.name=S,u.push(this.visitState(_,n))}),_.name=E}else if(y.type==it.Transition){const _=this.visitTransition(y,n);r+=_.queryCount,o+=_.depCount,d.push(_)}else n.errors.push(function gW(){return new re(3007,!1)}())}),{type:it.Trigger,name:t.name,states:u,transitions:d,queryCount:r,depCount:o,options:null}}visitState(t,n){const r=this.visitStyle(t.styles,n),o=t.options&&t.options.params||null;if(r.containsDynamicStyles){const u=new Set,d=o||{};r.styles.forEach(y=>{y instanceof Map&&y.forEach(_=>{bF(_).forEach(E=>{d.hasOwnProperty(E)||u.add(E)})})}),u.size&&n.errors.push(function mW(e,t){return new re(3008,!1)}(0,u.values()))}return{type:it.State,name:t.name,style:r,options:o?{params:o}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const r=Wa(this,a0(t.animation),n),o=function n7(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function r7(e,t,n){if(":"==e[0]){const _=function o7(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return t.push(function IW(e){return new re(3016,!1)}()),"* => *"}}(e,n);if("function"==typeof _)return void t.push(_);e=_}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(function SW(e){return new re(3015,!1)}()),t;const o=r[1],u=r[2],d=r[3];t.push(_F(o,d)),"<"==u[0]&&(o!=YD||d!=YD)&&t.push(_F(d,o))}(r,n,t)):n.push(e),n}(t.expr,n.errors);return{type:it.Transition,matchers:o,animation:r,queryCount:n.queryCount,depCount:n.depCount,options:zy(t.options)}}visitSequence(t,n){return{type:it.Sequence,steps:t.steps.map(r=>Wa(this,r,n)),options:zy(t.options)}}visitGroup(t,n){const r=n.currentTime;let o=0;const u=t.steps.map(d=>{n.currentTime=r;const y=Wa(this,d,n);return o=Math.max(o,n.currentTime),y});return n.currentTime=o,{type:it.Group,steps:u,options:zy(t.options)}}visitAnimate(t,n){const r=function d7(e,t){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return VC(QD(e,t).duration,0,"");const n=e;if(n.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=VC(0,0,"");return u.dynamic=!0,u.strValue=n,u}const o=QD(n,t);return VC(o.duration,o.delay,o.easing)}(t.timings,n.errors);n.currentAnimateTimings=r;let o,u=t.styles?t.styles:aF({});if(u.type==it.Keyframes)o=this.visitKeyframes(u,n);else{let d=t.styles,y=!1;if(!d){y=!0;const E={};r.easing&&(E.easing=r.easing),d=aF(E)}n.currentTime+=r.duration+r.delay;const _=this.visitStyle(d,n);_.isEmptyStep=y,o=_}return n.currentAnimateTimings=null,{type:it.Animate,timings:r,style:o,options:null}}visitStyle(t,n){const r=this._makeStyleAst(t,n);return this._validateStyleAst(r,n),r}_makeStyleAst(t,n){const r=[],o=Array.isArray(t.styles)?t.styles:[t.styles];for(let y of o)"string"==typeof y?y===ph?r.push(y):n.errors.push(new re(3002,!1)):r.push(new Map(Object.entries(y)));let u=!1,d=null;return r.forEach(y=>{if(y instanceof Map&&(y.has("easing")&&(d=y.get("easing"),y.delete("easing")),!u))for(let _ of y.values())if(_.toString().indexOf("{{")>=0){u=!0;break}}),{type:it.Style,styles:r,easing:d,offset:t.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(t,n){const r=n.currentAnimateTimings;let o=n.currentTime,u=n.currentTime;r&&u>0&&(u-=r.duration+r.delay),t.styles.forEach(d=>{"string"!=typeof d&&d.forEach((y,_)=>{const E=n.collectedStyles.get(n.currentQuerySelector),S=E.get(_);let x=!0;S&&(u!=o&&u>=S.startTime&&o<=S.endTime&&(n.errors.push(function bW(e,t,n,r,o){return new re(3010,!1)}()),x=!1),u=S.startTime),x&&E.set(_,{startTime:u,endTime:o}),n.options&&function ZW(e,t,n){const r=t.params||{},o=bF(e);o.length&&o.forEach(u=>{r.hasOwnProperty(u)||n.push(function cW(e){return new re(3001,!1)}())})}(y,n.options,n.errors)})})}visitKeyframes(t,n){const r={type:it.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function vW(){return new re(3011,!1)}()),r;let u=0;const d=[];let y=!1,_=!1,E=0;const S=t.steps.map(te=>{const ee=this._makeStyleAst(te,n);let ge=null!=ee.offset?ee.offset:function c7(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(n=>{if(n instanceof Map&&n.has("offset")){const r=n;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}return t}(ee.styles),ve=0;return null!=ge&&(u++,ve=ee.offset=ge),_=_||ve<0||ve>1,y=y||ve<E,E=ve,d.push(ve),ee});_&&n.errors.push(function _W(){return new re(3012,!1)}()),y&&n.errors.push(function wW(){return new re(3200,!1)}());const x=t.steps.length;let A=0;u>0&&u<x?n.errors.push(function TW(){return new re(3202,!1)}()):0==u&&(A=1/(x-1));const P=x-1,M=n.currentTime,$=n.currentAnimateTimings,K=$.duration;return S.forEach((te,ee)=>{const ge=A>0?ee==P?1:A*ee:d[ee],ve=ge*K;n.currentTime=M+$.delay+ve,$.duration=ve,this._validateStyleAst(te,n),te.offset=ge,r.styles.push(te)}),r}visitReference(t,n){return{type:it.Reference,animation:Wa(this,a0(t.animation),n),options:zy(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:it.AnimateChild,options:zy(t.options)}}visitAnimateRef(t,n){return{type:it.AnimateRef,animation:this.visitReference(t.animation,n),options:zy(t.options)}}visitQuery(t,n){const r=n.currentQuerySelector,o=t.options||{};n.queryCount++,n.currentQuery=t;const[u,d]=function a7(e){const t=!!e.split(/\s*,\s*/).find(n=>":self"==n);return t&&(e=e.replace(i7,"")),e=e.replace(/@\*/g,KD).replace(/@\w+/g,n=>KD+"-"+n.slice(1)).replace(/:animating/g,kC),[e,t]}(t.selector);n.currentQuerySelector=r.length?r+" "+u:u,qa(n.collectedStyles,n.currentQuerySelector,new Map);const y=Wa(this,a0(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:it.Query,selector:u,limit:o.limit||0,optional:!!o.optional,includeSelf:d,animation:y,originalSelector:t.selector,options:zy(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push(function DW(){return new re(3013,!1)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:QD(t.timings,n.errors,!0);return{type:it.Stagger,animation:Wa(this,a0(t.animation),n),timings:r,options:null}}}class l7{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function zy(e){return e?(e={...e}).params&&(e.params=function u7(e){return e?{...e}:null}(e.params)):e={},e}function VC(e,t,n){return{duration:e,delay:t,easing:n}}function UC(e,t,n,r,o,u,d=null,y=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:o,delay:u,totalTime:o+u,easing:d,subTimeline:y}}class JD{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,n){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const p7=new RegExp(":enter","g"),m7=new RegExp(":leave","g");function HC(e,t,n,r,o,u=new Map,d=new Map,y,_,E=[]){return(new y7).buildKeyframes(e,t,n,r,o,u,d,y,_,E)}class y7{buildKeyframes(t,n,r,o,u,d,y,_,E,S=[]){E=E||new JD;const x=new zC(t,n,E,o,u,S,[]);x.options=_;const A=_.delay?Eh(_.delay):0;x.currentTimeline.delayNextStep(A),x.currentTimeline.setStyles([d],null,x.errors,_),Wa(this,r,x);const P=x.timelines.filter(M=>M.containsAnimation());if(P.length&&y.size){let M;for(let $=P.length-1;$>=0;$--){const K=P[$];if(K.element===n){M=K;break}}M&&!M.allowOnlyTimelineStyles()&&M.setStyles([y],null,x.errors,_)}return P.length?P.map(M=>M.buildKeyframes()):[UC(n,[],[],[],0,A,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const r=n.subInstructions.get(n.element);if(r){const o=n.createSubContext(t.options),u=n.currentTimeline.currentTime,d=this._visitSubInstructions(r,o,o.options);u!=d&&n.transformIntoNewTimeline(d)}n.previousNode=t}visitAnimateRef(t,n){const r=n.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],n,r),this.visitReference(t.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=t}_applyAnimationRefDelays(t,n,r){for(const o of t){const u=o?.delay;if(u){const d="number"==typeof u?u:Eh(u0(u,o?.params??{},n.errors));r.delayNextStep(d)}}}_visitSubInstructions(t,n,r){let u=n.currentTimeline.currentTime;const d=null!=r.duration?Eh(r.duration):null,y=null!=r.delay?Eh(r.delay):null;return 0!==d&&t.forEach(_=>{const E=n.appendInstructionToTimeline(_,d,y);u=Math.max(u,E.duration+E.delay)}),u}visitReference(t,n){n.updateOptions(t.options,!0),Wa(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const r=n.subContextCount;let o=n;const u=t.options;if(u&&(u.params||u.delay)&&(o=n.createSubContext(u),o.transformIntoNewTimeline(),null!=u.delay)){o.previousNode.type==it.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=eE);const d=Eh(u.delay);o.delayNextStep(d)}t.steps.length&&(t.steps.forEach(d=>Wa(this,d,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const r=[];let o=n.currentTimeline.currentTime;const u=t.options&&t.options.delay?Eh(t.options.delay):0;t.steps.forEach(d=>{const y=n.createSubContext(t.options);u&&y.delayNextStep(u),Wa(this,d,y),o=Math.max(o,y.currentTimeline.currentTime),r.push(y.currentTimeline)}),r.forEach(d=>n.currentTimeline.mergeTimelineCollectedStyles(d)),n.transformIntoNewTimeline(o),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const r=t.strValue;return QD(n.params?u0(r,n.params,n.errors):r,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const r=n.currentAnimateTimings=this._visitTiming(t.timings,n),o=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),o.snapshotCurrentStyles());const u=t.style;u.type==it.Keyframes?this.visitKeyframes(u,n):(n.incrementTime(r.duration),this.visitStyle(u,n),o.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const r=n.currentTimeline,o=n.currentAnimateTimings;!o&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=o&&o.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(u):r.setStyles(t.styles,u,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const r=n.currentAnimateTimings,o=n.currentTimeline.duration,u=r.duration,y=n.createSubContext().currentTimeline;y.easing=r.easing,t.styles.forEach(_=>{y.forwardTime((_.offset||0)*u),y.setStyles(_.styles,_.easing,n.errors,n.options),y.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(y),n.transformIntoNewTimeline(o+u),n.previousNode=t}visitQuery(t,n){const r=n.currentTimeline.currentTime,o=t.options||{},u=o.delay?Eh(o.delay):0;u&&(n.previousNode.type===it.Style||0==r&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=eE);let d=r;const y=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!o.optional,n.errors);n.currentQueryTotal=y.length;let _=null;y.forEach((E,S)=>{n.currentQueryIndex=S;const x=n.createSubContext(t.options,E);u&&x.delayNextStep(u),E===n.element&&(_=x.currentTimeline),Wa(this,t.animation,x),x.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,x.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(d),_&&(n.currentTimeline.mergeTimelineCollectedStyles(_),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const r=n.parentContext,o=n.currentTimeline,u=t.timings,d=Math.abs(u.duration),y=d*(n.currentQueryTotal-1);let _=d*n.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=y-_;break;case"full":_=r.currentStaggerTime}const S=n.currentTimeline;_&&S.delayNextStep(_);const x=S.currentTime;Wa(this,t.animation,n),n.previousNode=t,r.currentStaggerTime=o.currentTime-x+(o.startTime-r.currentTimeline.startTime)}}const eE={};class zC{constructor(t,n,r,o,u,d,y,_){this._driver=t,this.element=n,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=u,this.errors=d,this.timelines=y,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=eE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new tE(this._driver,n,0),y.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const r=t;let o=this.options;null!=r.duration&&(o.duration=Eh(r.duration)),null!=r.delay&&(o.delay=Eh(r.delay));const u=r.params;if(u){let d=o.params;d||(d=this.options.params={}),Object.keys(u).forEach(y=>{(!n||!d.hasOwnProperty(y))&&(d[y]=u0(u[y],d,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const r=t.params={};Object.keys(n).forEach(o=>{r[o]=n[o]})}}return t}createSubContext(t=null,n,r){const o=n||this.element,u=new zC(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(t),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(t){return this.previousNode=eE,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,r){const o={duration:n??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},u=new b7(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,o,t.stretchStartingKeyframe);return this.timelines.push(u),o}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,r,o,u,d){let y=[];if(o&&y.push(this.element),t.length>0){t=(t=t.replace(p7,"."+this._enterClassName)).replace(m7,"."+this._leaveClassName);let E=this._driver.query(this.element,t,1!=r);0!==r&&(E=r<0?E.slice(E.length+r,E.length):E.slice(0,r)),y.push(...E)}return!u&&0==y.length&&d.push(function EW(e){return new re(3014,!1)}()),y}}class tE{constructor(t,n,r,o){this._driver=t,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=o,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new tE(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles.set(t,n),this._globalTimelineStyles.set(t,n),this._styleSummary.set(t,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||ph),this._currentKeyframe.set(n,ph);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,r,o){n&&this._previousKeyframe.set("easing",n);const u=o&&o.params||{},d=function v7(e,t){const n=new Map;let r;return e.forEach(o=>{if("*"===o){r??=t.keys();for(let u of r)n.set(u,ph)}else for(let[u,d]of o)n.set(u,d)}),n}(t,this._globalTimelineStyles);for(let[y,_]of d){const E=u0(_,u,r);this._pendingStyles.set(y,E),this._localTimelineStyles.has(y)||this._backFill.set(y,this._globalTimelineStyles.get(y)??ph),this._updateStyle(y,E)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,n)=>{this._currentKeyframe.set(n,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,t)}))}snapshotCurrentStyles(){for(let[t,n]of this._localTimelineStyles)this._pendingStyles.set(t,n),this._updateStyle(t,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((n,r)=>{const o=this._styleSummary.get(r);(!o||n.time>o.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((y,_)=>{const E=new Map([...this._backFill,...y]);E.forEach((S,x)=>{"!"===S?t.add(x):S===ph&&n.add(x)}),r||E.set("offset",_/this.duration),o.push(E)});const u=[...t.values()],d=[...n.values()];if(r){const y=o[0],_=new Map(y);y.set("offset",0),_.set("offset",1),o=[y,_]}return UC(this.element,o,u,d,this.duration,this.startTime,this.easing,!1)}}class b7 extends tE{constructor(t,n,r,o,u,d,y=!1){super(t,n,d.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=u,this._stretchStartingKeyframe=y,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&n){const u=[],d=r+n,y=n/d,_=new Map(t[0]);_.set("offset",0),u.push(_);const E=new Map(t[0]);E.set("offset",DF(y)),u.push(E);const S=t.length-1;for(let x=1;x<=S;x++){let A=new Map(t[x]);const P=A.get("offset");A.set("offset",DF((n+P*r)/d)),u.push(A)}r=d,n=0,o="",t=u}return UC(this.element,t,this.preStyleProps,this.postStyleProps,r,n,o,!0)}}function DF(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}function EF(e,t,n,r,o,u,d,y,_,E,S,x,A){return{type:0,element:e,triggerName:t,isRemovalTransition:o,fromState:n,fromStyles:u,toState:r,toStyles:d,timelines:y,queriedElements:_,preStyleProps:E,postStyleProps:S,totalTime:x,errors:A}}const GC={};class SF{constructor(t,n,r){this._triggerName=t,this.ast=n,this._stateStyles=r}match(t,n,r,o){return function _7(e,t,n,r,o){return e.some(u=>u(t,n,r,o))}(this.ast.matchers,t,n,r,o)}buildStyles(t,n,r){let o=this._stateStyles.get("*");return void 0!==t&&(o=this._stateStyles.get(t?.toString())||o),o?o.buildStyles(n,r):new Map}build(t,n,r,o,u,d,y,_,E,S){const x=[],A=this.ast.options&&this.ast.options.params||GC,M=this.buildStyles(r,y&&y.params||GC,x),$=_&&_.params||GC,K=this.buildStyles(o,$,x),te=new Set,ee=new Map,ge=new Map,ve="void"===o,at={params:IF($,A),delay:this.ast.options?.delay},lt=S?[]:HC(t,n,this.ast.animation,u,d,M,K,at,E,x);let Pt=0;return lt.forEach(ar=>{Pt=Math.max(ar.duration+ar.delay,Pt)}),x.length?EF(n,this._triggerName,r,o,ve,M,K,[],[],ee,ge,Pt,x):(lt.forEach(ar=>{const Ya=ar.element,zu=qa(ee,Ya,new Set);ar.preStyleProps.forEach(Ia=>zu.add(Ia));const x0=qa(ge,Ya,new Set);ar.postStyleProps.forEach(Ia=>x0.add(Ia)),Ya!==n&&te.add(Ya)}),EF(n,this._triggerName,r,o,ve,M,K,lt,[...te.values()],ee,ge,Pt))}}function IF(e,t){const n={...t};return Object.entries(e).forEach(([r,o])=>{null!=o&&(n[r]=o)}),n}class w7{constructor(t,n,r){this.styles=t,this.defaultParams=n,this.normalizer=r}buildStyles(t,n){const r=new Map,o=IF(t,this.defaultParams);return this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((d,y)=>{d&&(d=u0(d,o,n));const _=this.normalizer.normalizePropertyName(y,n);d=this.normalizer.normalizeStyleValue(y,_,d,n),r.set(y,d)})}),r}}class D7{constructor(t,n,r){this.name=t,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states=new Map,n.states.forEach(o=>{this.states.set(o.name,new w7(o.style,o.options&&o.options.params||{},r))}),xF(this.states,"true","1"),xF(this.states,"false","0"),n.transitions.forEach(o=>{this.transitionFactories.push(new SF(t,o,this.states))}),this.fallbackTransition=function E7(e,t,n){return new SF(e,{type:it.Transition,animation:{type:it.Sequence,steps:[],options:null},matchers:[(d,y)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,r,o){return this.transitionFactories.find(d=>d.match(t,n,r,o))||null}matchStyles(t,n,r){return this.fallbackTransition.buildStyles(t,n,r)}}function xF(e,t,n){e.has(t)?e.has(n)||e.set(n,e.get(t)):e.has(n)&&e.set(t,e.get(n))}const S7=new JD;class I7{constructor(t,n,r){this.bodyNode=t,this._driver=n,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,n){const r=[],u=BC(this._driver,n,r,[]);if(r.length)throw function PW(e){return new re(3503,!1)}();this._animations.set(t,u)}_buildPlayer(t,n,r){const o=t.element,u=cF(this._normalizer,t.keyframes,n,r);return this._driver.animate(o,u,t.duration,t.delay,t.easing,[],!0)}create(t,n,r={}){const o=[],u=this._animations.get(t);let d;const y=new Map;if(u?(d=HC(this._driver,n,u,RC,qD,new Map,new Map,r,S7,o),d.forEach(S=>{const x=qa(y,S.element,new Map);S.postStyleProps.forEach(A=>x.set(A,null))})):(o.push(function MW(){return new re(3300,!1)}()),d=[]),o.length)throw function NW(e){return new re(3504,!1)}();y.forEach((S,x)=>{S.forEach((A,P)=>{S.set(P,this._driver.computeStyle(x,P,ph))})});const E=ly(d.map(S=>{const x=y.get(S.element);return this._buildPlayer(S,new Map,x)}));return this._playersById.set(t,E),E.onDestroy(()=>this.destroy(t)),this.players.push(E),E}destroy(t){const n=this._getPlayer(t);n.destroy(),this._playersById.delete(t);const r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(t){const n=this._playersById.get(t);if(!n)throw function RW(e){return new re(3301,!1)}();return n}listen(t,n,r,o){const u=AC(n,"","","");return xC(this._getPlayer(t),r,u,o),()=>{}}command(t,n,r,o){if("register"==r)return void this.register(t,o[0]);if("create"==r)return void this.create(t,n,o[0]||{});const u=this._getPlayer(t);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(t)}}}const CF="ng-animate-queued",qC="ng-animate-disabled",P7=[],AF={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},M7={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Bu="__ng_removed";class WC{get params(){return this.options.params}constructor(t,n=""){this.namespaceId=n;const r=t&&t.hasOwnProperty("value");if(this.value=function F7(e){return e??null}(r?t.value:t),r){const{value:u,...d}=t;this.options=d}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const n=t.params;if(n){const r=this.options.params;Object.keys(n).forEach(o=>{null==r[o]&&(r[o]=n[o])})}}}const l0="void",KC=new WC(l0);class N7{constructor(t,n,r){this.id=t,this.hostElement=n,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,fu(n,this._hostClassName)}listen(t,n,r,o){if(!this._triggers.has(n))throw function kW(e,t){return new re(3302,!1)}();if(null==r||0==r.length)throw function FW(e){return new re(3303,!1)}();if(!function L7(e){return"start"==e||"done"==e}(r))throw function LW(e,t){return new re(3400,!1)}();const u=qa(this._elementListeners,t,[]),d={name:n,phase:r,callback:o};u.push(d);const y=qa(this._engine.statesByElement,t,new Map);return y.has(n)||(fu(t,WD),fu(t,WD+"-"+n),y.set(n,KC)),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(d);_>=0&&u.splice(_,1),this._triggers.has(n)||y.delete(n)})}}register(t,n){return!this._triggers.has(t)&&(this._triggers.set(t,n),!0)}_getTrigger(t){const n=this._triggers.get(t);if(!n)throw function $W(e){return new re(3401,!1)}();return n}trigger(t,n,r,o=!0){const u=this._getTrigger(n),d=new QC(this.id,n,t);let y=this._engine.statesByElement.get(t);y||(fu(t,WD),fu(t,WD+"-"+n),this._engine.statesByElement.set(t,y=new Map));let _=y.get(n);const E=new WC(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&E.absorbOptions(_.options),y.set(n,E),_||(_=KC),E.value!==l0&&_.value===E.value){if(!function B7(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let o=0;o<n.length;o++){const u=n[o];if(!t.hasOwnProperty(u)||e[u]!==t[u])return!1}return!0}(_.params,E.params)){const $=[],K=u.matchStyles(_.value,_.params,$),te=u.matchStyles(E.value,E.params,$);$.length?this._engine.reportError($):this._engine.afterFlush(()=>{Hy(t,K),Nd(t,te)})}return}const A=qa(this._engine.playersByElement,t,[]);A.forEach($=>{$.namespaceId==this.id&&$.triggerName==n&&$.queued&&$.destroy()});let P=u.matchTransition(_.value,E.value,t,E.params),M=!1;if(!P){if(!o)return;P=u.fallbackTransition,M=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:P,fromState:_,toState:E,player:d,isFallbackTransition:M}),M||(fu(t,CF),d.onStart(()=>{d_(t,CF)})),d.onDone(()=>{let $=this.players.indexOf(d);$>=0&&this.players.splice($,1);const K=this._engine.playersByElement.get(t);if(K){let te=K.indexOf(d);te>=0&&K.splice(te,1)}}),this.players.push(d),A.push(d),d}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(n=>n.delete(t)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(o=>o.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const r=this._engine.driver.query(t,KD,!0);r.forEach(o=>{if(o[Bu])return;const u=this._engine.fetchNamespacesByElement(o);u.size?u.forEach(d=>d.triggerLeaveAnimation(o,n,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(t,n,r,o){const u=this._engine.statesByElement.get(t),d=new Map;if(u){const y=[];if(u.forEach((_,E)=>{if(d.set(E,_.value),this._triggers.has(E)){const S=this.trigger(t,E,l0,o);S&&y.push(S)}}),y.length)return this._engine.markElementAsRemoved(this.id,t,!0,n,d),r&&ly(y).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(n&&r){const o=new Set;n.forEach(u=>{const d=u.name;if(o.has(d))return;o.add(d);const _=this._triggers.get(d).fallbackTransition,E=r.get(d)||KC,S=new WC(l0),x=new QC(this.id,d,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:d,transition:_,fromState:E,toState:S,player:x,isFallbackTransition:!0})})}}removeNode(t,n){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let o=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(t):[];if(u&&u.length)o=!0;else{let d=t;for(;d=d.parentNode;)if(r.statesByElement.get(d)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(t),o)r.markElementAsRemoved(this.id,t,!1,n);else{const u=t[Bu];(!u||u===AF)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,n))}}insertNode(t,n){fu(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const u=r.element,d=this._elementListeners.get(u);d&&d.forEach(y=>{if(y.name==r.triggerName){const _=AC(u,r.triggerName,r.fromState.value,r.toState.value);_._data=t,xC(r.player,y.phase,_,y.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):n.push(r)}),this._queue=[],n.sort((r,o)=>{const u=r.transition.ast.depCount,d=o.transition.ast.depCount;return 0==u||0==d?u-d:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}}class R7{_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}constructor(t,n,r,o){this.bodyNode=t,this.driver=n,this._normalizer=r,this.scheduler=o,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(u,d)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,n){const r=new N7(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,n){const r=this._namespaceList,o=this.namespacesByHostElement;if(r.length-1>=0){let d=!1,y=this.driver.getParentElement(n);for(;y;){const _=o.get(y);if(_){const E=r.indexOf(_);r.splice(E+1,0,t),d=!0;break}y=this.driver.getParentElement(y)}d||r.unshift(t)}else r.push(t);return o.set(n,t),t}register(t,n){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,n)),r}registerTrigger(t,n,r){let o=this._namespaceLookup[t];o&&o.register(n,r)&&this.totalAnimations++}destroy(t,n){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(t);this.namespacesByHostElement.delete(r.hostElement);const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1),r.destroy(n),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,r=this.statesByElement.get(t);if(r)for(let o of r.values())if(o.namespaceId){const u=this._fetchNamespace(o.namespaceId);u&&n.add(u)}return n}trigger(t,n,r,o){if(nE(n)){const u=this._fetchNamespace(t);if(u)return u.trigger(n,r,o),!0}return!1}insertNode(t,n,r,o){if(!nE(n))return;const u=n[Bu];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const d=this.collectedLeaveElements.indexOf(n);d>=0&&this.collectedLeaveElements.splice(d,1)}if(t){const d=this._fetchNamespace(t);d&&d.insertNode(n,r)}o&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),fu(t,qC)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),d_(t,qC))}removeNode(t,n,r){if(nE(n)){this.scheduler?.notify();const o=t?this._fetchNamespace(t):null;o?o.removeNode(n,r):this.markElementAsRemoved(t,n,!1,r);const u=this.namespacesByHostElement.get(n);u&&u.id!==t&&u.removeNode(n,r)}else this._onRemovalComplete(n,r)}markElementAsRemoved(t,n,r,o,u){this.collectedLeaveElements.push(n),n[Bu]={namespaceId:t,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(t,n,r,o,u){return nE(n)?this._fetchNamespace(t).listen(n,r,o,u):()=>{}}_buildInstruction(t,n,r,o,u){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,o,t.fromState.options,t.toState.options,n,u)}destroyInnerAnimations(t){let n=this.driver.query(t,KD,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,kC,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ly(this.players).onDone(()=>t());t()})}processLeaveNode(t){const n=t[Bu];if(n&&n.setForRemoval){if(t[Bu]=AF,n.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}t.classList?.contains(qC)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)fu(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{n=this._flushAnimations(r,t)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],n.length?ly(n).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(t){throw function jW(e){return new re(3402,!1)}()}_flushAnimations(t,n){const r=new JD,o=[],u=new Map,d=[],y=new Map,_=new Map,E=new Map,S=new Set;this.disabledNodes.forEach(we=>{S.add(we);const Le=this.driver.query(we,".ng-animate-queued",!0);for(let Ye=0;Ye<Le.length;Ye++)S.add(Le[Ye])});const x=this.bodyNode,A=Array.from(this.statesByElement.keys()),P=MF(A,this.collectedEnterElements),M=new Map;let $=0;P.forEach((we,Le)=>{const Ye=RC+$++;M.set(Le,Ye),we.forEach(Lt=>fu(Lt,Ye))});const K=[],te=new Set,ee=new Set;for(let we=0;we<this.collectedLeaveElements.length;we++){const Le=this.collectedLeaveElements[we],Ye=Le[Bu];Ye&&Ye.setForRemoval&&(K.push(Le),te.add(Le),Ye.hasAnimation?this.driver.query(Le,".ng-star-inserted",!0).forEach(Lt=>te.add(Lt)):ee.add(Le))}const ge=new Map,ve=MF(A,Array.from(te));ve.forEach((we,Le)=>{const Ye=qD+$++;ge.set(Le,Ye),we.forEach(Lt=>fu(Lt,Ye))}),t.push(()=>{P.forEach((we,Le)=>{const Ye=M.get(Le);we.forEach(Lt=>d_(Lt,Ye))}),ve.forEach((we,Le)=>{const Ye=ge.get(Le);we.forEach(Lt=>d_(Lt,Ye))}),K.forEach(we=>{this.processLeaveNode(we)})});const at=[],lt=[];for(let we=this._namespaceList.length-1;we>=0;we--)this._namespaceList[we].drainQueuedTransitions(n).forEach(Ye=>{const Lt=Ye.player,Zs=Ye.element;if(at.push(Lt),this.collectedEnterElements.length){const da=Zs[Bu];if(da&&da.setForMove){if(da.previousTriggersValues&&da.previousTriggersValues.has(Ye.triggerName)){const Qy=da.previousTriggersValues.get(Ye.triggerName),hu=this.statesByElement.get(Ye.element);if(hu&&hu.has(Ye.triggerName)){const TE=hu.get(Ye.triggerName);TE.value=Qy,hu.set(Ye.triggerName,TE)}}return void Lt.destroy()}}const Bd=!x||!this.driver.containsElement(x,Zs),Za=ge.get(Zs),fy=M.get(Zs),So=this._buildInstruction(Ye,r,fy,Za,Bd);if(So.errors&&So.errors.length)return void lt.push(So);if(Bd)return Lt.onStart(()=>Hy(Zs,So.fromStyles)),Lt.onDestroy(()=>Nd(Zs,So.toStyles)),void o.push(Lt);if(Ye.isFallbackTransition)return Lt.onStart(()=>Hy(Zs,So.fromStyles)),Lt.onDestroy(()=>Nd(Zs,So.toStyles)),void o.push(Lt);const l$=[];So.timelines.forEach(da=>{da.stretchStartingKeyframe=!0,this.disabledNodes.has(da.element)||l$.push(da)}),So.timelines=l$,r.append(Zs,So.timelines),d.push({instruction:So,player:Lt,element:Zs}),So.queriedElements.forEach(da=>qa(y,da,[]).push(Lt)),So.preStyleProps.forEach((da,Qy)=>{if(da.size){let hu=_.get(Qy);hu||_.set(Qy,hu=new Set),da.forEach((TE,F1)=>hu.add(F1))}}),So.postStyleProps.forEach((da,Qy)=>{let hu=E.get(Qy);hu||E.set(Qy,hu=new Set),da.forEach((TE,F1)=>hu.add(F1))})});if(lt.length){const we=[];lt.forEach(Le=>{we.push(function BW(e,t){return new re(3505,!1)}())}),at.forEach(Le=>Le.destroy()),this.reportError(we)}const Pt=new Map,ar=new Map;d.forEach(we=>{const Le=we.element;r.has(Le)&&(ar.set(Le,Le),this._beforeAnimationBuild(we.player.namespaceId,we.instruction,Pt))}),o.forEach(we=>{const Le=we.element;this._getPreviousPlayers(Le,!1,we.namespaceId,we.triggerName,null).forEach(Lt=>{qa(Pt,Le,[]).push(Lt),Lt.destroy()})});const Ya=K.filter(we=>RF(we,_,E)),zu=new Map;PF(zu,this.driver,ee,E,ph).forEach(we=>{RF(we,_,E)&&Ya.push(we)});const Ia=new Map;P.forEach((we,Le)=>{PF(Ia,this.driver,new Set(we),_,"!")}),Ya.forEach(we=>{const Le=zu.get(we),Ye=Ia.get(we);zu.set(we,new Map([...Le?.entries()??[],...Ye?.entries()??[]]))});const E_=[],a$=[],u$={};d.forEach(we=>{const{element:Le,player:Ye,instruction:Lt}=we;if(r.has(Le)){if(S.has(Le))return Ye.onDestroy(()=>Nd(Le,Lt.toStyles)),Ye.disabled=!0,Ye.overrideTotalTime(Lt.totalTime),void o.push(Ye);let Zs=u$;if(ar.size>1){let Za=Le;const fy=[];for(;Za=Za.parentNode;){const So=ar.get(Za);if(So){Zs=So;break}fy.push(Za)}fy.forEach(So=>ar.set(So,Zs))}const Bd=this._buildAnimation(Ye.namespaceId,Lt,Pt,u,Ia,zu);if(Ye.setRealPlayer(Bd),Zs===u$)E_.push(Ye);else{const Za=this.playersByElement.get(Zs);Za&&Za.length&&(Ye.parentPlayer=ly(Za)),o.push(Ye)}}else Hy(Le,Lt.fromStyles),Ye.onDestroy(()=>Nd(Le,Lt.toStyles)),a$.push(Ye),S.has(Le)&&o.push(Ye)}),a$.forEach(we=>{const Le=u.get(we.element);if(Le&&Le.length){const Ye=ly(Le);we.setRealPlayer(Ye)}}),o.forEach(we=>{we.parentPlayer?we.syncPlayerEvents(we.parentPlayer):we.destroy()});for(let we=0;we<K.length;we++){const Le=K[we],Ye=Le[Bu];if(d_(Le,qD),Ye&&Ye.hasAnimation)continue;let Lt=[];if(y.size){let Bd=y.get(Le);Bd&&Bd.length&&Lt.push(...Bd);let Za=this.driver.query(Le,kC,!0);for(let fy=0;fy<Za.length;fy++){let So=y.get(Za[fy]);So&&So.length&&Lt.push(...So)}}const Zs=Lt.filter(Bd=>!Bd.destroyed);Zs.length?$7(this,Le,Zs):this.processLeaveNode(Le)}return K.length=0,E_.forEach(we=>{this.players.push(we),we.onDone(()=>{we.destroy();const Le=this.players.indexOf(we);this.players.splice(Le,1)}),we.play()}),E_}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,r,o,u){let d=[];if(n){const y=this.playersByQueriedElement.get(t);y&&(d=y)}else{const y=this.playersByElement.get(t);if(y){const _=!u||u==l0;y.forEach(E=>{E.queued||!_&&E.triggerName!=o||d.push(E)})}}return(r||o)&&(d=d.filter(y=>!(r&&r!=y.namespaceId||o&&o!=y.triggerName))),d}_beforeAnimationBuild(t,n,r){const u=n.element,d=n.isRemovalTransition?void 0:t,y=n.isRemovalTransition?void 0:n.triggerName;for(const _ of n.timelines){const E=_.element,S=E!==u,x=qa(r,E,[]);this._getPreviousPlayers(E,S,d,y,n.toState).forEach(P=>{const M=P.getRealPlayer();M.beforeDestroy&&M.beforeDestroy(),P.destroy(),x.push(P)})}Hy(u,n.fromStyles)}_buildAnimation(t,n,r,o,u,d){const y=n.triggerName,_=n.element,E=[],S=new Set,x=new Set,A=n.timelines.map(M=>{const $=M.element;S.add($);const K=$[Bu];if(K&&K.removedBeforeQueried)return new s0(M.duration,M.delay);const te=$!==_,ee=function j7(e){const t=[];return NF(e,t),t}((r.get($)||P7).map(Pt=>Pt.getRealPlayer())).filter(Pt=>!!Pt.element&&Pt.element===$),ge=u.get($),ve=d.get($),at=cF(this._normalizer,M.keyframes,ge,ve),lt=this._buildPlayer(M,at,ee);if(M.subTimeline&&o&&x.add($),te){const Pt=new QC(t,y,$);Pt.setRealPlayer(lt),E.push(Pt)}return lt});E.forEach(M=>{qa(this.playersByQueriedElement,M.element,[]).push(M),M.onDone(()=>function k7(e,t,n){let r=e.get(t);if(r){if(r.length){const o=r.indexOf(n);r.splice(o,1)}0==r.length&&e.delete(t)}return r}(this.playersByQueriedElement,M.element,M))}),S.forEach(M=>fu(M,mF));const P=ly(A);return P.onDestroy(()=>{S.forEach(M=>d_(M,mF)),Nd(_,n.toStyles)}),x.forEach(M=>{qa(o,M,[]).push(P)}),P}_buildPlayer(t,n,r){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,r):new s0(t.duration,t.delay)}}class QC{constructor(t,n,r){this.namespaceId=t,this.triggerName=n,this.element=r,this._player=new s0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((n,r)=>{n.forEach(o=>xC(t,r,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){qa(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function nE(e){return e&&1===e.nodeType}function OF(e,t){const n=e.style.display;return e.style.display=t??"none",n}function PF(e,t,n,r,o){const u=[];n.forEach(_=>u.push(OF(_)));const d=[];r.forEach((_,E)=>{const S=new Map;_.forEach(x=>{const A=t.computeStyle(E,x,o);S.set(x,A),(!A||0==A.length)&&(E[Bu]=M7,d.push(E))}),e.set(E,S)});let y=0;return n.forEach(_=>OF(_,u[y++])),d}function MF(e,t){const n=new Map;if(e.forEach(y=>n.set(y,[])),0==t.length)return n;const o=new Set(t),u=new Map;function d(y){if(!y)return 1;let _=u.get(y);if(_)return _;const E=y.parentNode;return _=n.has(E)?E:o.has(E)?1:d(E),u.set(y,_),_}return t.forEach(y=>{const _=d(y);1!==_&&n.get(_).push(y)}),n}function fu(e,t){e.classList?.add(t)}function d_(e,t){e.classList?.remove(t)}function $7(e,t,n){ly(n).onDone(()=>e.processLeaveNode(t))}function NF(e,t){for(let n=0;n<e.length;n++){const r=e[n];r instanceof uF?NF(r.players,t):t.push(r)}}function RF(e,t,n){const r=n.get(e);if(!r)return!1;let o=t.get(e);return o?r.forEach(u=>o.add(u)):t.set(e,r),n.delete(e),!0}class c0{constructor(t,n,r,o){this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(u,d)=>{},this._transitionEngine=new R7(t.body,n,r,o),this._timelineEngine=new I7(t.body,n,r),this._transitionEngine.onRemovalComplete=(u,d)=>this.onRemovalComplete(u,d)}registerTrigger(t,n,r,o,u){const d=t+"-"+o;let y=this._triggerCache[d];if(!y){const _=[],S=BC(this._driver,u,_,[]);if(_.length)throw function AW(e,t){return new re(3404,!1)}();y=function T7(e,t,n){return new D7(e,t,n)}(o,S,this._normalizer),this._triggerCache[d]=y}this._transitionEngine.registerTrigger(n,o,y)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,r,o){this._transitionEngine.insertNode(t,n,r,o)}onRemove(t,n,r){this._transitionEngine.removeNode(t,n,r)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,r,o){if("@"==r.charAt(0)){const[u,d]=dF(r);this._timelineEngine.command(u,n,d,o)}else this._transitionEngine.trigger(t,n,r,o)}listen(t,n,r,o,u){if("@"==r.charAt(0)){const[d,y]=dF(r);return this._timelineEngine.listen(d,n,y,u)}return this._transitionEngine.listen(t,n,r,o,u)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}}class d0{static{this.initialStylesByElement=new WeakMap}constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let o=d0.initialStylesByElement.get(t);o||d0.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Nd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nd(this._element,this._initialStyles),this._endStyles&&(Nd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(d0.initialStylesByElement.delete(this._element),this._startStyles&&(Hy(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hy(this._element,this._endStyles),this._endStyles=null),Nd(this._element,this._initialStyles),this._state=3)}}function YC(e){let t=null;return e.forEach((n,r)=>{(function U7(e){return"display"===e||"position"===e})(r)&&(t=t||new Map,t.set(r,n))}),t}class kF{constructor(t,n,r,o){this.element=t,this.keyframes=n,this.options=r,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;const n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const n=[];return t.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(t,n,r){return t.animate(this._convertKeyframesToObject(n),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,o)=>{"offset"!==o&&t.set(o,this._finished?r:jC(this.element,o))}),this.currentSnapshot=t}triggerCallback(t){const n="start"===t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class FF{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,n){return!1}containsElement(t,n){return hF(t,n)}getParentElement(t){return OC(t)}query(t,n,r){return pF(t,n,r)}computeStyle(t,n,r){return jC(t,n)}animate(t,n,r,o,u,d=[]){const _={duration:r,delay:o,fill:0==o?"both":"forwards"};u&&(_.easing=u);const E=new Map,S=d.filter(P=>P instanceof kF);(function JW(e,t){return 0===e||0===t})(r,o)&&S.forEach(P=>{P.currentSnapshot.forEach((M,$)=>E.set($,M))});let x=function YW(e){return e.length?e[0]instanceof Map?e:e.map(t=>new Map(Object.entries(t))):[]}(n).map(P=>new Map(P));x=function e7(e,t,n){if(n.size&&t.length){let r=t[0],o=[];if(n.forEach((u,d)=>{r.has(d)||o.push(d),r.set(d,u)}),o.length)for(let u=1;u<t.length;u++){let d=t[u];o.forEach(y=>d.set(y,jC(e,y)))}}return t}(t,x,E);const A=function V7(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=YC(t[0]),t.length>1&&(r=YC(t[t.length-1]))):t instanceof Map&&(n=YC(t)),n||r?new d0(e,n,r):null}(t,x);return new kF(t,x,_,A)}}const LF="@.disabled";class $F{constructor(t,n,r,o){this.namespaceId=t,this.delegate=n,this.engine=r,this._onDestroy=o,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,r,o=!0){this.delegate.insertBefore(t,n,r),this.engine.onInsert(this.namespaceId,n,t,o)}removeChild(t,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,r,o){this.delegate.setAttribute(t,n,r,o)}removeAttribute(t,n,r){this.delegate.removeAttribute(t,n,r)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,r,o){this.delegate.setStyle(t,n,r,o)}removeStyle(t,n,r){this.delegate.removeStyle(t,n,r)}setProperty(t,n,r){"@"==n.charAt(0)&&n==LF?this.disableAnimations(t,!!r):this.delegate.setProperty(t,n,r)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,r){return this.delegate.listen(t,n,r)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class H7 extends $F{constructor(t,n,r,o,u){super(n,r,o,u),this.factory=t,this.namespaceId=n}setProperty(t,n,r){"@"==n.charAt(0)?"."==n.charAt(1)&&n==LF?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,n.slice(1),r):this.delegate.setProperty(t,n,r)}listen(t,n,r){if("@"==n.charAt(0)){const o=function z7(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(t);let u=n.slice(1),d="";return"@"!=u.charAt(0)&&([u,d]=function G7(e){const t=e.indexOf(".");return[e.substring(0,t),e.slice(t+1)]}(u)),this.engine.listen(this.namespaceId,o,u,d,y=>{this.factory.scheduleListenerCallback(y._data||-1,r,y)})}return this.delegate.listen(t,n,r)}}class q7{constructor(t,n,r){this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(o,u)=>{const d=u?.parentNode(o);d&&u.removeChild(d,o)}}createRenderer(t,n){const o=this.delegate.createRenderer(t,n);if(!t||!n?.data?.animation){const E=this._rendererCache;let S=E.get(o);return S||(S=new $F("",o,this.engine,()=>E.delete(o)),E.set(o,S)),S}const u=n.id,d=n.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const y=E=>{Array.isArray(E)?E.forEach(y):this.engine.registerTrigger(u,d,t,E.name,E)};return n.data.animation.forEach(y),new H7(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,r){if(t>=0&&t<this._microtaskId)return void this._zone.run(()=>n(r));const o=this._animationCallbacksBuffer;0==o.length&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(u=>{const[d,y]=u;d(y)}),this._animationCallbacksBuffer=[]})}),o.push([n,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const Y7=[{provide:MC,useFactory:()=>new FF},{provide:pO,useValue:"BrowserAnimations"},...[{provide:NC,useFactory:function K7(){return new vF}},{provide:c0,useClass:(()=>{class e extends c0{constructor(n,r,o){super(n,r,o,fe(qT,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||e)(ft(Pu),ft(MC),ft(NC))}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac})}}return e})()},{provide:FI,useFactory:function Q7(e,t,n){return new q7(e,t,n)},deps:[DC,c0,In]}]];function cy(e){return this instanceof cy?(this.v=e,this):new cy(e)}function HF(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function e1(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(u){n[u]=e[u]&&function(d){return new Promise(function(y,_){!function o(u,d,y,_){Promise.resolve(_).then(function(E){u({value:E,done:y})},d)}(y,_,(d=e[u](d)).done,d.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const zF=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function GF(e){return Jt(e?.then)}function qF(e){return Jt(e[av])}function WF(e){return Symbol.asyncIterator&&Jt(e?.[Symbol.asyncIterator])}function KF(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const QF=function w9(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function YF(e){return Jt(e?.[QF])}function ZF(e){return function UF(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),u=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(A){r[A]&&(o[A]=function(P){return new Promise(function(M,$){u.push([A,P,M,$])>1||y(A,P)})})}function y(A,P){try{!function _(A){A.value instanceof cy?Promise.resolve(A.value.v).then(E,S):x(u[0][2],A)}(r[A](P))}catch(M){x(u[0][3],M)}}function E(A){y("next",A)}function S(A){y("throw",A)}function x(A,P){A(P),u.shift(),u.length&&y(u[0][0],u[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:o}=yield cy(n.read());if(o)return yield cy(void 0);yield yield cy(r)}}finally{n.releaseLock()}})}function XF(e){return Jt(e?.getReader)}function kh(e){if(e instanceof _o)return e;if(null!=e){if(qF(e))return function T9(e){return new _o(t=>{const n=e[av]();if(Jt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(zF(e))return function D9(e){return new _o(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(GF(e))return function E9(e){return new _o(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,tv)})}(e);if(WF(e))return JF(e);if(YF(e))return function S9(e){return new _o(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(XF(e))return function I9(e){return JF(ZF(e))}(e)}throw KF(e)}function JF(e){return new _o(t=>{(function x9(e,t){var n,r,o,u;return function BF(e,t,n,r){return new(n||(n=Promise))(function(u,d){function y(S){try{E(r.next(S))}catch(x){d(x)}}function _(S){try{E(r.throw(S))}catch(x){d(x)}}function E(S){S.done?u(S.value):function o(u){return u instanceof n?u:new n(function(d){d(u)})}(S.value).then(y,_)}E((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=HF(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(d){o={error:d}}finally{try{r&&!r.done&&(u=n.return)&&(yield u.call(n))}finally{if(o)throw o.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Xh(e,t,n,r=0,o=!1){const u=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(u),!o)return u}function eL(e,t=0){return zo((n,r)=>{n.subscribe(Ao(r,o=>Xh(r,e,()=>r.next(o),t),()=>Xh(r,e,()=>r.complete(),t),o=>Xh(r,e,()=>r.error(o),t)))})}function tL(e,t=0){return zo((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function nL(e,t){if(!e)throw new Error("Iterable cannot be null");return new _o(n=>{Xh(n,t,()=>{const r=e[Symbol.asyncIterator]();Xh(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Da(e,t){return t?function N9(e,t){if(null!=e){if(qF(e))return function C9(e,t){return kh(e).pipe(tL(t),eL(t))}(e,t);if(zF(e))return function O9(e,t){return new _o(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(GF(e))return function A9(e,t){return kh(e).pipe(tL(t),eL(t))}(e,t);if(WF(e))return nL(e,t);if(YF(e))return function P9(e,t){return new _o(n=>{let r;return Xh(n,t,()=>{r=e[QF](),Xh(n,t,()=>{let o,u;try{({value:o,done:u}=r.next())}catch(d){return void n.error(d)}u?n.complete():n.next(o)},0,!0)}),()=>Jt(r?.return)&&r.return()})}(e,t);if(XF(e))return function M9(e,t){return nL(ZF(e),t)}(e,t)}throw KF(e)}(e,t):kh(e)}function t1(e){return e[e.length-1]}function oE(e){return function R9(e){return e&&Jt(e.schedule)}(t1(e))?e.pop():void 0}function pt(...e){return Da(e,oE(e))}const iE=Vg(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:F9}=Array,{getPrototypeOf:L9,prototype:$9,keys:j9}=Object;const{isArray:U9}=Array;function rL(...e){const t=oE(e),n=function k9(e){return Jt(t1(e))?e.pop():void 0}(e),{args:r,keys:o}=function B9(e){if(1===e.length){const t=e[0];if(F9(t))return{args:t,keys:null};if(function V9(e){return e&&"object"==typeof e&&L9(e)===$9}(t)){const n=j9(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return Da([],t);const u=new _o(function q9(e,t,n=yd){return r=>{oL(t,()=>{const{length:o}=e,u=new Array(o);let d=o,y=o;for(let _=0;_<o;_++)oL(t,()=>{const E=Da(e[_],t);let S=!1;E.subscribe(Ao(r,x=>{u[_]=x,S||(S=!0,y--),y||r.next(n(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,t,o?d=>function G9(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}(o,d):yd));return n?u.pipe(function z9(e){return en(t=>function H9(e,t){return U9(t)?e(...t):e(t)}(e,t))}(n)):u}function oL(e,t,n){e?Xh(n,e,t):t()}function Ea(e,t,n=1/0){return Jt(t)?Ea((r,o)=>en((u,d)=>t(r,u,o,d))(kh(e(r,o))),n):("number"==typeof t&&(n=t),zo((r,o)=>function W9(e,t,n,r,o,u,d,y){const _=[];let E=0,S=0,x=!1;const A=()=>{x&&!_.length&&!E&&t.complete()},P=$=>E<r?M($):_.push($),M=$=>{u&&t.next($),E++;let K=!1;kh(n($,S++)).subscribe(Ao(t,te=>{o?.(te),u?P(te):t.next(te)},()=>{K=!0},void 0,()=>{if(K)try{for(E--;_.length&&E<r;){const te=_.shift();d?Xh(t,d,()=>M(te)):M(te)}A()}catch(te){t.error(te)}}))};return e.subscribe(Ao(t,P,()=>{x=!0,A()})),()=>{y?.()}}(r,o,e,n)))}function r1(...e){return function K9(){return function n1(e=1/0){return Ea(yd,e)}(1)}()(Da(e,oE(e)))}function iL(e){return new _o(t=>{kh(e()).subscribe(t)})}function sE(e,t){const n=Jt(e)?e:()=>e,r=o=>o.error(n());return new _o(t?o=>t.schedule(r,0,o):r)}const Rd=new _o(e=>e.complete());function o1(){return zo((e,t)=>{let n=null;e._refCount++;const r=Ao(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const o=e._connection,u=n;n=null,o&&(!u||o===u)&&o.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class sL extends _o{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,M_(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ra;const n=this.getSubject();t.add(this.source.subscribe(Ao(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ra.EMPTY)}return t}refCount(){return o1()(this)}}function Rg(e,t){return zo((n,r)=>{let o=null,u=0,d=!1;const y=()=>d&&!o&&r.complete();n.subscribe(Ao(r,_=>{o?.unsubscribe();let E=0;const S=u++;kh(e(_,S)).subscribe(o=Ao(r,x=>r.next(t?t(_,x,S,E++):x),()=>{o=null,y()}))},()=>{d=!0,y()}))})}function f_(e){return e<=0?()=>Rd:zo((t,n)=>{let r=0;t.subscribe(Ao(n,o=>{++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function Gy(e,t){return zo((n,r)=>{let o=0;n.subscribe(Ao(r,u=>e.call(t,u,o++)&&r.next(u)))})}function aE(e){return zo((t,n)=>{let r=!1;t.subscribe(Ao(n,o=>{r=!0,n.next(o)},()=>{r||n.next(e),n.complete()}))})}function aL(e=Z9){return zo((t,n)=>{let r=!1;t.subscribe(Ao(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(e())))})}function Z9(){return new iE}function qy(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Gy((o,u)=>e(o,u,r)):yd,f_(1),n?aE(t):aL(()=>new iE))}function uE(e,t){return Jt(t)?Ea(e,t,1):Ea(e,1)}function Sa(e,t,n){const r=Jt(e)||t||n?{next:e,error:t,complete:n}:e;return r?zo((o,u)=>{var d;null===(d=r.subscribe)||void 0===d||d.call(r);let y=!0;o.subscribe(Ao(u,_=>{var E;null===(E=r.next)||void 0===E||E.call(r,_),u.next(_)},()=>{var _;y=!1,null===(_=r.complete)||void 0===_||_.call(r),u.complete()},_=>{var E;y=!1,null===(E=r.error)||void 0===E||E.call(r,_),u.error(_)},()=>{var _,E;y&&(null===(_=r.unsubscribe)||void 0===_||_.call(r)),null===(E=r.finalize)||void 0===E||E.call(r)}))}):yd}function h_(e){return zo((t,n)=>{let u,r=null,o=!1;r=t.subscribe(Ao(n,void 0,void 0,d=>{u=kh(e(d,h_(e)(t))),r?(r.unsubscribe(),r=null,u.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(n))})}function i1(e){return e<=0?()=>Rd:zo((t,n)=>{let r=[];t.subscribe(Ao(n,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(const o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function s1(e){return zo((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const gt="primary",f0=Symbol("RouteTitle");class rK{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function p_(e){return new rK(e)}function oK(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],y=e[u];if(d.startsWith(":"))o[d.substring(1)]=y;else if(d!==y.path)return null}return{consumed:e.slice(0,r.length),posParams:o}}function kd(e,t){const n=e?a1(e):void 0,r=t?a1(t):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let u=0;u<n.length;u++)if(o=n[u],!uL(e[o],t[o]))return!1;return!0}function a1(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function uL(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((o,u)=>r[u]===o)}return e===t}function lL(e){return e.length>0?e[e.length-1]:null}function dy(e){return function J7(e){return!!e&&(e instanceof _o||Jt(e.lift)&&Jt(e.subscribe))}(e)?e:_D(e)?Da(Promise.resolve(e)):pt(e)}const sK={exact:function fL(e,t,n){if(!Wy(e.segments,t.segments)||!lE(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!fL(e.children[r],t.children[r],n))return!1;return!0},subset:hL},cL={exact:function aK(e,t){return kd(e,t)},subset:function uK(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>uL(e[n],t[n]))},ignored:()=>!0};function dL(e,t,n){return sK[n.paths](e.root,t.root,n.matrixParams)&&cL[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function hL(e,t,n){return pL(e,t,t.segments,n)}function pL(e,t,n,r){if(e.segments.length>n.length){const o=e.segments.slice(0,n.length);return!(!Wy(o,n)||t.hasChildren()||!lE(o,n,r))}if(e.segments.length===n.length){if(!Wy(e.segments,n)||!lE(e.segments,n,r))return!1;for(const o in t.children)if(!e.children[o]||!hL(e.children[o],t.children[o],r))return!1;return!0}{const o=n.slice(0,e.segments.length),u=n.slice(e.segments.length);return!!(Wy(e.segments,o)&&lE(e.segments,o,r)&&e.children[gt])&&pL(e.children[gt],t,u,r)}}function lE(e,t,n){return t.every((r,o)=>cL[n](e[o].parameters,r.parameters))}class g_{constructor(t=new tr([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=p_(this.queryParams),this._queryParamMap}toString(){return dK.serialize(this)}}class tr{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cE(this)}}class h0{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=p_(this.parameters),this._parameterMap}toString(){return yL(this)}}function Wy(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let m_=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:()=>new u1,providedIn:"root"})}}return e})();class u1{parse(t){const n=new TK(t);return new g_(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${p0(t.root,!0)}`,r=function pK(e){const t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(o=>`${dE(n)}=${dE(o)}`).join("&"):`${dE(n)}=${dE(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function fK(e){return encodeURI(e)}(t.fragment)}`:""}`}}const dK=new u1;function cE(e){return e.segments.map(t=>yL(t)).join("/")}function p0(e,t){if(!e.hasChildren())return cE(e);if(t){const n=e.children[gt]?p0(e.children[gt],!1):"",r=[];return Object.entries(e.children).forEach(([o,u])=>{o!==gt&&r.push(`${o}:${p0(u,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function cK(e,t){let n=[];return Object.entries(e.children).forEach(([r,o])=>{r===gt&&(n=n.concat(t(o,r)))}),Object.entries(e.children).forEach(([r,o])=>{r!==gt&&(n=n.concat(t(o,r)))}),n}(e,(r,o)=>o===gt?[p0(e.children[gt],!1)]:[`${o}:${p0(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[gt]?`${cE(e)}/${n[0]}`:`${cE(e)}/(${n.join("//")})`}}function gL(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dE(e){return gL(e).replace(/%3B/gi,";")}function l1(e){return gL(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fE(e){return decodeURIComponent(e)}function mL(e){return fE(e.replace(/\+/g,"%20"))}function yL(e){return`${l1(e.path)}${function hK(e){return Object.entries(e).map(([t,n])=>`;${l1(t)}=${l1(n)}`).join("")}(e.parameters)}`}const gK=/^[^\/()?;#]+/;function c1(e){const t=e.match(gK);return t?t[0]:""}const mK=/^[^\/()?;=#]+/,bK=/^[^=?&#]+/,_K=/^[^&#]+/;class TK{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tr([],{}):new tr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[gt]=new tr(t,n)),r}parseSegment(){const t=c1(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(t),new h0(fE(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=function yK(e){const t=e.match(mK);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=c1(this.remaining);o&&(r=o,this.capture(r))}t[fE(n)]=fE(r)}parseQueryParam(t){const n=function vK(e){const t=e.match(bK);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const d=function wK(e){const t=e.match(_K);return t?t[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=mL(n),u=mL(r);if(t.hasOwnProperty(o)){let d=t[o];Array.isArray(d)||(d=[d],t[o]=d),d.push(u)}else t[o]=u}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=c1(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new re(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):t&&(u=gt);const d=this.parseChildren();n[u]=1===Object.keys(d).length?d[gt]:new tr([],d),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new re(4011,!1)}}function bL(e){return e.segments.length>0?new tr([],{[gt]:e}):e}function vL(e){const t={};for(const[r,o]of Object.entries(e.children)){const u=vL(o);if(r===gt&&0===u.segments.length&&u.hasChildren())for(const[d,y]of Object.entries(u.children))t[d]=y;else(u.segments.length>0||u.hasChildren())&&(t[r]=u)}return function DK(e){if(1===e.numberOfChildren&&e.children[gt]){const t=e.children[gt];return new tr(e.segments.concat(t.segments),t.children)}return e}(new tr(e.segments,t))}function y_(e){return e instanceof g_}function _L(e){let t;const o=bL(function n(u){const d={};for(const _ of u.children){const E=n(_);d[_.outlet]=E}const y=new tr(u.url,d);return u===e&&(t=y),y}(e.root));return t??o}function wL(e,t,n,r){let o=e;for(;o.parent;)o=o.parent;if(0===t.length)return d1(o,o,o,n,r);const u=function SK(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new DL(!0,0,e);let t=0,n=!1;const r=e.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const y={};return Object.entries(u.outlets).forEach(([_,E])=>{y[_]="string"==typeof E?E.split("/"):E}),[...o,{outlets:y}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((y,_)=>{0==_&&"."===y||(0==_&&""===y?n=!0:".."===y?t++:""!=y&&o.push(y))}),o):[...o,u]},[]);return new DL(n,t,r)}(t);if(u.toRoot())return d1(o,o,new tr([],{}),n,r);const d=function IK(e,t,n){if(e.isAbsolute)return new pE(t,!0,0);if(!n)return new pE(t,!1,NaN);if(null===n.parent)return new pE(n,!0,0);const r=hE(e.commands[0])?0:1;return function xK(e,t,n){let r=e,o=t,u=n;for(;u>o;){if(u-=o,r=r.parent,!r)throw new re(4005,!1);o=r.segments.length}return new pE(r,!1,o-u)}(n,n.segments.length-1+r,e.numberOfDoubleDots)}(u,o,e),y=d.processChildren?m0(d.segmentGroup,d.index,u.commands):EL(d.segmentGroup,d.index,u.commands);return d1(o,d.segmentGroup,y,n,r)}function hE(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function g0(e){return"object"==typeof e&&null!=e&&e.outlets}function d1(e,t,n,r,o){let d,u={};r&&Object.entries(r).forEach(([_,E])=>{u[_]=Array.isArray(E)?E.map(S=>`${S}`):`${E}`}),d=e===t?n:TL(e,t,n);const y=bL(vL(d));return new g_(y,u,o)}function TL(e,t,n){const r={};return Object.entries(e.children).forEach(([o,u])=>{r[o]=u===t?n:TL(u,t,n)}),new tr(e.segments,r)}class DL{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&hE(r[0]))throw new re(4003,!1);const o=r.find(g0);if(o&&o!==lL(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pE{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function EL(e,t,n){if(e??=new tr([],{}),0===e.segments.length&&e.hasChildren())return m0(e,t,n);const r=function AK(e,t,n){let r=0,o=t;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(r>=n.length)return u;const d=e.segments[o],y=n[r];if(g0(y))break;const _=`${y}`,E=r<n.length-1?n[r+1]:null;if(o>0&&void 0===_)break;if(_&&E&&"object"==typeof E&&void 0===E.outlets){if(!IL(_,E,d))return u;r+=2}else{if(!IL(_,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(e,t,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const u=new tr(e.segments.slice(0,r.pathIndex),{});return u.children[gt]=new tr(e.segments.slice(r.pathIndex),e.children),m0(u,0,o)}return r.match&&0===o.length?new tr(e.segments,{}):r.match&&!e.hasChildren()?f1(e,t,n):r.match?m0(e,0,o):f1(e,t,n)}function m0(e,t,n){if(0===n.length)return new tr(e.segments,{});{const r=function CK(e){return g0(e[0])?e[0].outlets:{[gt]:e}}(n),o={};if(Object.keys(r).some(u=>u!==gt)&&e.children[gt]&&1===e.numberOfChildren&&0===e.children[gt].segments.length){const u=m0(e.children[gt],t,n);return new tr(e.segments,u.children)}return Object.entries(r).forEach(([u,d])=>{"string"==typeof d&&(d=[d]),null!==d&&(o[u]=EL(e.children[u],t,d))}),Object.entries(e.children).forEach(([u,d])=>{void 0===r[u]&&(o[u]=d)}),new tr(e.segments,o)}}function f1(e,t,n){const r=e.segments.slice(0,t);let o=0;for(;o<n.length;){const u=n[o];if(g0(u)){const _=OK(u.outlets);return new tr(r,_)}if(0===o&&hE(n[0])){r.push(new h0(e.segments[t].path,SL(n[0]))),o++;continue}const d=g0(u)?u.outlets[gt]:`${u}`,y=o<n.length-1?n[o+1]:null;d&&y&&hE(y)?(r.push(new h0(d,SL(y))),o+=2):(r.push(new h0(d,{})),o++)}return new tr(r,{})}function OK(e){const t={};return Object.entries(e).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(t[n]=f1(new tr([],{}),0,r))}),t}function SL(e){const t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function IL(e,t,n){return e==n.path&&kd(t,n.parameters)}const y0="imperative";var Dt=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Dt||{});class Fd{constructor(t,n){this.id=t,this.url=n}}class h1 extends Fd{constructor(t,n,r="imperative",o=null){super(t,n),this.type=Dt.NavigationStart,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ky extends Fd{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ka=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Ka||{}),p1=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(p1||{});class b_ extends Fd{constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o,this.type=Dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class b0 extends Fd{constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o,this.type=Dt.NavigationSkipped}}class gE extends Fd{constructor(t,n,r,o){super(t,n),this.error=r,this.target=o,this.type=Dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xL extends Fd{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=Dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PK extends Fd{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=Dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MK extends Fd{constructor(t,n,r,o,u){super(t,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=Dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class NK extends Fd{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=Dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RK extends Fd{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=Dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kK{constructor(t){this.route=t,this.type=Dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class FK{constructor(t){this.route=t,this.type=Dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class LK{constructor(t){this.snapshot=t,this.type=Dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $K{constructor(t){this.snapshot=t,this.type=Dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jK{constructor(t){this.snapshot=t,this.type=Dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BK{constructor(t){this.snapshot=t,this.type=Dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class g1{}class m1{constructor(t){this.url=t}}class VK{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new v0,this.attachRef=null}}let v0=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new VK,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();class CL{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=y1(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=y1(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=b1(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return b1(t,this._root).map(n=>n.value)}}function y1(e,t){if(e===t.value)return t;for(const n of t.children){const r=y1(e,n);if(r)return r}return null}function b1(e,t){if(e===t.value)return[t];for(const n of t.children){const r=b1(e,n);if(r.length)return r.unshift(t),r}return[]}class Uu{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function v_(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class AL extends CL{constructor(t,n){super(t),this.snapshot=n,w1(this,t)}toString(){return this.snapshot.toString()}}function OL(e){const t=function UK(e){const u=new _1([],{},{},"",{},gt,e,null,{});return new PL("",new Uu(u,[]))}(e),n=new pa([new h0("",{})]),r=new pa({}),o=new pa({}),u=new pa({}),d=new pa(""),y=new __(n,r,u,d,o,gt,e,t.root);return y.snapshot=t.root,new AL(new Uu(y,[]),t)}class __{constructor(t,n,r,o,u,d,y,_){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=u,this.outlet=d,this.component=y,this._futureSnapshot=_,this.title=this.dataSubject?.pipe(en(E=>E[f0]))??pt(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(en(t=>p_(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(en(t=>p_(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function v1(e,t,n="emptyOnly"){let r;const{routeConfig:o}=e;return r=null===t||"always"!==n&&""!==o?.path&&(t.component||t.routeConfig?.loadComponent)?{params:{...e.params},data:{...e.data},resolve:{...e.data,...e._resolvedData??{}}}:{params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.data,...o?.data,...e._resolvedData}},o&&NL(o)&&(r.resolve[f0]=o.title),r}class _1{get title(){return this.data?.[f0]}constructor(t,n,r,o,u,d,y,_,E){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=y,this.routeConfig=_,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=p_(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=p_(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class PL extends CL{constructor(t,n){super(n),this.url=t,w1(this,n)}toString(){return ML(this._root)}}function w1(e,t){t.value._routerState=e,t.children.forEach(n=>w1(e,n))}function ML(e){const t=e.children.length>0?` { ${e.children.map(ML).join(", ")} } `:"";return`${e.value}${t}`}function T1(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,kd(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),kd(t.params,n.params)||e.paramsSubject.next(n.params),function iK(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!kd(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.urlSubject.next(n.url),kd(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function D1(e,t){const n=kd(e.params,t.params)&&function lK(e,t){return Wy(e,t)&&e.every((n,r)=>kd(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||D1(e.parent,t.parent))}function NL(e){return"string"==typeof e.title||null===e.title}let E1=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=gt,this.activateEvents=new va,this.deactivateEvents=new va,this.attachEvents=new va,this.detachEvents=new va,this.parentContexts=fe(v0),this.location=fe(Cu),this.changeDetector=fe(DD),this.environmentInjector=fe(tu),this.inputBinder=fe(mE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=n;const o=this.location,d=n.snapshot.component,y=this.parentContexts.getOrCreateContext(this.name).children,_=new HK(n,y,o.injector);this.activated=o.createComponent(d,{index:o.length,injector:_,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ma({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ay]})}}return e})();class HK{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===__?this.route:t===v0?this.childContexts:this.parent.get(t,n)}}const mE=new be("");function _0(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const o=function GK(e,t,n){return t.children.map(r=>{for(const o of n.children)if(e.shouldReuseRoute(r.value,o.value.snapshot))return _0(e,r,o);return _0(e,r)})}(e,t,n);return new Uu(r,o)}{if(e.shouldAttach(t.value)){const u=e.retrieve(t.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=t.value,d.children=t.children.map(y=>_0(e,y)),d}}const r=function qK(e){return new __(new pa(e.url),new pa(e.params),new pa(e.queryParams),new pa(e.fragment),new pa(e.data),e.outlet,e.component,e)}(t.value),o=t.children.map(u=>_0(e,u));return new Uu(r,o)}}const kL="ngNavigationCancelingError";function FL(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=y_(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=LL(!1,Ka.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function LL(e,t){const n=new Error(`NavigationCancelingError: ${e||""}`);return n[kL]=!0,n.cancellationCode=t,n}function $L(e){return!!e&&e[kL]}let jL=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=J0({type:e,selectors:[["ng-component"]],standalone:!0,features:[pD],decls:1,vars:0,template:function(r,o){1&r&&r_(0,"router-outlet")},dependencies:[E1],encapsulation:2})}}return e})();function S1(e){const t=e.children&&e.children.map(S1),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==gt&&(n.component=jL),n}function Ld(e){return e.outlet||gt}function w0(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class eQ{constructor(t,n,r,o,u){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=u}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),T1(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const o=v_(n);t.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Object.values(o).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(t,n,r){const o=t.value,u=n?n.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(t,n,d.children)}else this.deactivateChildRoutes(t,n,r);else u&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,u=v_(t);for(const d of Object.values(u))this.deactivateRouteAndItsChildren(d,o);if(r&&r.outlet){const d=r.outlet.detach(),y=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:d,route:t,contexts:y})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,u=v_(t);for(const d of Object.values(u))this.deactivateRouteAndItsChildren(d,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){const o=v_(n);t.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new BK(u.value.snapshot))}),t.children.length&&this.forwardEvent(new $K(t.value.snapshot))}activateRoutes(t,n,r){const o=t.value,u=n?n.value:null;if(T1(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,d.children)}else this.activateChildRoutes(t,n,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const y=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(y.contexts),d.attachRef=y.componentRef,d.route=y.route.value,d.outlet&&d.outlet.attach(y.componentRef,y.route.value),T1(y.route.value),this.activateChildRoutes(t,null,d.children)}else{const y=w0(o.snapshot);d.attachRef=null,d.route=o,d.injector=y,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(t,null,d.children)}}else this.activateChildRoutes(t,null,r)}}class BL{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class yE{constructor(t,n){this.component=t,this.route=n}}function tQ(e,t,n){const r=e._root;return T0(r,t?t._root:null,n,[r.value])}function w_(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function $E(e){return null!==wy(e)}(e)?t.get(e):e:r}function T0(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=v_(t);return e.children.forEach(d=>{(function rQ(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=e.value,d=t?t.value:null,y=n?n.getContext(e.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const _=function oQ(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Wy(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Wy(e.url,t.url)||!kd(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!D1(e,t)||!kd(e.queryParams,t.queryParams);default:return!D1(e,t)}}(d,u,u.routeConfig.runGuardsAndResolvers);_?o.canActivateChecks.push(new BL(r)):(u.data=d.data,u._resolvedData=d._resolvedData),T0(e,t,u.component?y?y.children:null:n,r,o),_&&y&&y.outlet&&y.outlet.isActivated&&o.canDeactivateChecks.push(new yE(y.outlet.component,d))}else d&&D0(t,y,o),o.canActivateChecks.push(new BL(r)),T0(e,null,u.component?y?y.children:null:n,r,o)})(d,u[d.value.outlet],n,r.concat([d.value]),o),delete u[d.value.outlet]}),Object.entries(u).forEach(([d,y])=>D0(y,n.getContext(d),o)),o}function D0(e,t,n){const r=v_(e),o=e.value;Object.entries(r).forEach(([u,d])=>{D0(d,o.component?t?t.children.getContext(u):null:t,n)}),n.canDeactivateChecks.push(new yE(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}function E0(e){return"function"==typeof e}function VL(e){return e instanceof iE||"EmptyError"===e?.name}const bE=Symbol("INITIAL_VALUE");function T_(){return Rg(e=>rL(e.map(t=>t.pipe(f_(1),function Y9(...e){const t=oE(e);return zo((n,r)=>{(t?r1(e,n,t):r1(e,n)).subscribe(r)})}(bE)))).pipe(en(t=>{for(const n of t)if(!0!==n){if(n===bE)return bE;if(!1===n||n instanceof g_)return n}return!0}),Gy(t=>t!==bE),f_(1)))}function UL(e){return function R0(...e){return A_(e)}(Sa(t=>{if(y_(t))throw FL(0,t)}),en(t=>!0===t))}class I1{constructor(t){this.segmentGroup=t||null}}class x1 extends Error{constructor(t){super(),this.urlTree=t}}function D_(e){return sE(new I1(e))}class DQ{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return pt(r);if(o.numberOfChildren>1||!o.children[gt])return sE(new re(4e3,!1));o=o.children[gt]}}applyRedirectCommands(t,n,r){const o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new x1(o);return o}applyRedirectCreateUrlTree(t,n,r,o){const u=this.createSegmentGroup(t,n.root,r,o);return new g_(u,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Object.entries(t).forEach(([o,u])=>{if("string"==typeof u&&u.startsWith(":")){const y=u.substring(1);r[o]=n[y]}else r[o]=u}),r}createSegmentGroup(t,n,r,o){const u=this.createSegments(t,n.segments,r,o);let d={};return Object.entries(n.children).forEach(([y,_])=>{d[y]=this.createSegmentGroup(t,_,r,o)}),new tr(u,d)}createSegments(t,n,r,o){return n.map(u=>u.path.startsWith(":")?this.findPosParam(t,u,o):this.findOrReturn(u,r))}findPosParam(t,n,r){const o=r[n.path.substring(1)];if(!o)throw new re(4001,!1);return o}findOrReturn(t,n){let r=0;for(const o of n){if(o.path===t.path)return n.splice(r),o;r++}return t}}const C1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function EQ(e,t,n,r,o){const u=A1(e,t,n);return u.matched?(r=function KK(e,t){return e.providers&&!e._injector&&(e._injector=tx(e.providers,t,`Route: ${e.path}`)),e._injector??t}(t,r),function _Q(e,t,n,r){const o=t.canMatch;return o&&0!==o.length?pt(o.map(d=>{const y=w_(d,e);return dy(function cQ(e){return e&&E0(e.canMatch)}(y)?y.canMatch(t,n):Zg(e,()=>y(t,n)))})).pipe(T_(),UL()):pt(!0)}(r,t,n).pipe(en(d=>!0===d?u:{...C1}))):pt(u)}function A1(e,t,n){if("**"===t.path)return function SQ(e){return{matched:!0,parameters:e.length>0?lL(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...C1}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const o=(t.matcher||oK)(n,e,t);if(!o)return{...C1};const u={};Object.entries(o.posParams??{}).forEach(([y,_])=>{u[y]=_.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function HL(e,t,n,r){return n.length>0&&function CQ(e,t,n){return n.some(r=>vE(e,t,r)&&Ld(r)!==gt)}(e,n,r)?{segmentGroup:new tr(t,xQ(r,new tr(n,e.children))),slicedSegments:[]}:0===n.length&&function AQ(e,t,n){return n.some(r=>vE(e,t,r))}(e,n,r)?{segmentGroup:new tr(e.segments,IQ(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new tr(e.segments,e.children),slicedSegments:n}}function IQ(e,t,n,r){const o={};for(const u of n)if(vE(e,t,u)&&!r[Ld(u)]){const d=new tr([],{});o[Ld(u)]=d}return{...r,...o}}function xQ(e,t){const n={};n[gt]=t;for(const r of e)if(""===r.path&&Ld(r)!==gt){const o=new tr([],{});n[Ld(r)]=o}return n}function vE(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}class MQ{}class kQ{constructor(t,n,r,o,u,d,y){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=u,this.paramsInheritanceStrategy=d,this.urlSerializer=y,this.applyRedirects=new DQ(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new re(4002,`'${t.segmentGroup}'`)}recognize(){const t=HL(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(en(n=>{const r=new _1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},gt,this.rootComponentType,null,{}),o=new Uu(r,n),u=new PL("",o),d=function EK(e,t,n=null,r=null){return wL(_L(e),t,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(d),this.inheritParamsAndData(u._root,null),{state:u,tree:d}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,gt).pipe(h_(r=>{if(r instanceof x1)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof I1?this.noMatchError(r):r}))}inheritParamsAndData(t,n){const r=t.value,o=v1(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(o.params),r.data=Object.freeze(o.data),t.children.forEach(u=>this.inheritParamsAndData(u,r))}processSegmentGroup(t,n,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,o,!0).pipe(en(u=>u instanceof Uu?[u]:[]))}processChildren(t,n,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return Da(o).pipe(uE(u=>{const d=r.children[u],y=function XK(e,t){const n=e.filter(r=>Ld(r)===t);return n.push(...e.filter(r=>Ld(r)!==t)),n}(n,u);return this.processSegmentGroup(t,y,d,u)}),function J9(e,t){return zo(function X9(e,t,n,r,o){return(u,d)=>{let y=n,_=t,E=0;u.subscribe(Ao(d,S=>{const x=E++;_=y?e(_,S,x):(y=!0,S),r&&d.next(_)},o&&(()=>{y&&d.next(_),d.complete()})))}}(e,t,arguments.length>=2,!0))}((u,d)=>(u.push(...d),u)),aE(null),function eK(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Gy((o,u)=>e(o,u,r)):yd,i1(1),n?aE(t):aL(()=>new iE))}(),Ea(u=>{if(null===u)return D_(r);const d=zL(u);return function FQ(e){e.sort((t,n)=>t.value.outlet===gt?-1:n.value.outlet===gt?1:t.value.outlet.localeCompare(n.value.outlet))}(d),pt(d)}))}processSegment(t,n,r,o,u,d){return Da(n).pipe(uE(y=>this.processSegmentAgainstRoute(y._injector??t,n,y,r,o,u,d).pipe(h_(_=>{if(_ instanceof I1)return pt(null);throw _}))),qy(y=>!!y),h_(y=>{if(VL(y))return function PQ(e,t,n){return 0===t.length&&!e.children[n]}(r,o,u)?pt(new MQ):D_(r);throw y}))}processSegmentAgainstRoute(t,n,r,o,u,d,y){return function OQ(e,t,n,r){return!!(Ld(e)===r||r!==gt&&vE(t,n,e))&&A1(t,e,n).matched}(r,o,u,d)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,o,r,u,d):this.allowRedirects&&y?this.expandSegmentAgainstRouteUsingRedirect(t,o,n,r,u,d):D_(o):D_(o)}expandSegmentAgainstRouteUsingRedirect(t,n,r,o,u,d){const{matched:y,consumedSegments:_,positionalParamSegments:E,remainingSegments:S}=A1(n,o,u);if(!y)return D_(n);o.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const x=this.applyRedirects.applyRedirectCommands(_,o.redirectTo,E);return this.applyRedirects.lineralizeSegments(o,x).pipe(Ea(A=>this.processSegment(t,r,n,A.concat(S),d,!1)))}matchSegmentAgainstRoute(t,n,r,o,u){const d=EQ(n,r,o,t);return"**"===r.path&&(n.children={}),d.pipe(Rg(y=>y.matched?this.getChildConfig(t=r._injector??t,r,o).pipe(Rg(({routes:_})=>{const E=r._loadedInjector??t,{consumedSegments:S,remainingSegments:x,parameters:A}=y,P=new _1(S,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function $Q(e){return e.data||{}}(r),Ld(r),r.component??r._loadedComponent??null,r,function jQ(e){return e.resolve||{}}(r)),{segmentGroup:M,slicedSegments:$}=HL(n,S,x,_);if(0===$.length&&M.hasChildren())return this.processChildren(E,_,M).pipe(en(te=>null===te?null:new Uu(P,te)));if(0===_.length&&0===$.length)return pt(new Uu(P,[]));const K=Ld(r)===u;return this.processSegment(E,_,M,$,K?gt:u,!0).pipe(en(te=>new Uu(P,te instanceof Uu?[te]:[])))})):D_(n)))}getChildConfig(t,n,r){return n.children?pt({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?pt({routes:n._loadedRoutes,injector:n._loadedInjector}):function vQ(e,t,n,r){const o=t.canLoad;return void 0===o||0===o.length?pt(!0):pt(o.map(d=>{const y=w_(d,e);return dy(function sQ(e){return e&&E0(e.canLoad)}(y)?y.canLoad(t,n):Zg(e,()=>y(t,n)))})).pipe(T_(),UL())}(t,n,r).pipe(Ea(o=>o?this.configLoader.loadChildren(t,n).pipe(Sa(u=>{n._loadedRoutes=u.routes,n._loadedInjector=u.injector})):function TQ(e){return sE(LL(!1,Ka.GuardRejected))}())):pt({routes:[],injector:t})}}function LQ(e){const t=e.value.routeConfig;return t&&""===t.path}function zL(e){const t=[],n=new Set;for(const r of e){if(!LQ(r)){t.push(r);continue}const o=t.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),n.add(o)):t.push(r)}for(const r of n){const o=zL(r.children);t.push(new Uu(r.value,o))}return t.filter(r=>!n.has(r))}function GL(e){const t=e.children.map(n=>GL(n)).flat();return[e,...t]}function O1(e){return Rg(t=>{const n=e(t);return n?Da(n).pipe(en(()=>t)):pt(t)})}let qL=(()=>{class e{buildTitle(n){let r,o=n.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===gt);return r}getResolvedTitleForRoute(n){return n.data[f0]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:()=>fe(GQ),providedIn:"root"})}}return e})(),GQ=(()=>{class e extends qL{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(ft(Jq))}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const S0=new be("",{providedIn:"root",factory:()=>({})}),_E=new be("");let WL=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=fe(T8)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return pt(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=dy(n.loadComponent()).pipe(en(KL),Sa(u=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=u}),s1(()=>{this.componentLoaders.delete(n)})),o=new sL(r,()=>new Ks).pipe(o1());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function qQ(e,t,n,r){return dy(e.loadChildren()).pipe(en(KL),Ea(o=>o instanceof FM||Array.isArray(o)?pt(o):Da(t.compileModuleAsync(o))),en(o=>{r&&r(e);let u,d,y=!1;return Array.isArray(o)?(d=o,!0):(u=o.create(n).injector,d=u.get(_E,[],{optional:!0,self:!0}).flat()),{routes:d.map(S1),injector:u}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(s1(()=>{this.childrenLoaders.delete(r)})),d=new sL(u,()=>new Ks).pipe(o1());return this.childrenLoaders.set(r,d),d}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function KL(e){return function WQ(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let P1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:()=>fe(KQ),providedIn:"root"})}}return e})(),KQ=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const QL=new be("");let wE=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ks,this.transitionAbortSubject=new Ks,this.configLoader=fe(WL),this.environmentInjector=fe(tu),this.urlSerializer=fe(m_),this.rootContexts=fe(v0),this.location=fe(Jw),this.inputBindingEnabled=null!==fe(mE,{optional:!0}),this.titleStrategy=fe(qL),this.options=fe(S0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=fe(P1),this.createViewTransition=fe(QL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>pt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new FK(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new kK(o))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,o){return this.transitions=new pa({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:y0,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Gy(u=>0!==u.id),en(u=>({...u,extractedUrl:this.urlHandlingStrategy.extract(u.rawUrl)})),Rg(u=>{let d=!1,y=!1;return pt(u).pipe(Rg(_=>{if(this.navigationId>u.id)return this.cancelNavigationTransition(u,"",Ka.SupersededByNewNavigation),Rd;this.currentTransition=u,this.currentNavigation={id:_.id,initialUrl:_.rawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const E=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!E&&"reload"!==(_.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const x="";return this.events.next(new b0(_.id,this.urlSerializer.serialize(_.rawUrl),x,p1.IgnoredSameUrlNavigation)),_.resolve(null),Rd}if(this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return pt(_).pipe(Rg(x=>{const A=this.transitions?.getValue();return this.events.next(new h1(x.id,this.urlSerializer.serialize(x.extractedUrl),x.source,x.restoredState)),A!==this.transitions?.getValue()?Rd:Promise.resolve(x)}),function BQ(e,t,n,r,o,u){return Ea(d=>function NQ(e,t,n,r,o,u,d="emptyOnly"){return new kQ(e,t,n,r,o,d,u).recognize()}(e,t,n,r,d.extractedUrl,o,u).pipe(en(({state:y,tree:_})=>({...d,targetSnapshot:y,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Sa(x=>{u.targetSnapshot=x.targetSnapshot,u.urlAfterRedirects=x.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects};const A=new xL(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(A)}));if(E&&this.urlHandlingStrategy.shouldProcessUrl(_.currentRawUrl)){const{id:x,extractedUrl:A,source:P,restoredState:M,extras:$}=_,K=new h1(x,this.urlSerializer.serialize(A),P,M);this.events.next(K);const te=OL(this.rootComponentType).snapshot;return this.currentTransition=u={..._,targetSnapshot:te,urlAfterRedirects:A,extras:{...$,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=A,pt(u)}{const x="";return this.events.next(new b0(_.id,this.urlSerializer.serialize(_.extractedUrl),x,p1.IgnoredByUrlHandlingStrategy)),_.resolve(null),Rd}}),Sa(_=>{const E=new PK(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(E)}),en(_=>(this.currentTransition=u={..._,guards:tQ(_.targetSnapshot,_.currentSnapshot,this.rootContexts)},u)),function dQ(e,t){return Ea(n=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=n;return 0===d.length&&0===u.length?pt({...n,guardsResult:!0}):function fQ(e,t,n,r){return Da(e).pipe(Ea(o=>function bQ(e,t,n,r,o){const u=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return u&&0!==u.length?pt(u.map(y=>{const _=w0(t)??o,E=w_(y,_);return dy(function lQ(e){return e&&E0(e.canDeactivate)}(E)?E.canDeactivate(e,t,n,r):Zg(_,()=>E(e,t,n,r))).pipe(qy())})).pipe(T_()):pt(!0)}(o.component,o.route,n,t,r)),qy(o=>!0!==o,!0))}(d,r,o,e).pipe(Ea(y=>y&&function iQ(e){return"boolean"==typeof e}(y)?function hQ(e,t,n,r){return Da(t).pipe(uE(o=>r1(function gQ(e,t){return null!==e&&t&&t(new LK(e)),pt(!0)}(o.route.parent,r),function pQ(e,t){return null!==e&&t&&t(new jK(e)),pt(!0)}(o.route,r),function yQ(e,t,n){const r=t[t.length-1],u=t.slice(0,t.length-1).reverse().map(d=>function nQ(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(d)).filter(d=>null!==d).map(d=>iL(()=>pt(d.guards.map(_=>{const E=w0(d.node)??n,S=w_(_,E);return dy(function uQ(e){return e&&E0(e.canActivateChild)}(S)?S.canActivateChild(r,e):Zg(E,()=>S(r,e))).pipe(qy())})).pipe(T_())));return pt(u).pipe(T_())}(e,o.path,n),function mQ(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return pt(!0);const o=r.map(u=>iL(()=>{const d=w0(t)??n,y=w_(u,d);return dy(function aQ(e){return e&&E0(e.canActivate)}(y)?y.canActivate(t,e):Zg(d,()=>y(t,e))).pipe(qy())}));return pt(o).pipe(T_())}(e,o.route,n))),qy(o=>!0!==o,!0))}(r,u,e,t):pt(y)),en(y=>({...n,guardsResult:y})))})}(this.environmentInjector,_=>this.events.next(_)),Sa(_=>{if(u.guardsResult=_.guardsResult,y_(_.guardsResult))throw FL(0,_.guardsResult);const E=new MK(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.events.next(E)}),Gy(_=>!!_.guardsResult||(this.cancelNavigationTransition(_,"",Ka.GuardRejected),!1)),O1(_=>{if(_.guards.canActivateChecks.length)return pt(_).pipe(Sa(E=>{const S=new NK(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(S)}),Rg(E=>{let S=!1;return pt(E).pipe(function VQ(e,t){return Ea(n=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return pt(n);const u=new Set(o.map(_=>_.route)),d=new Set;for(const _ of u)if(!d.has(_))for(const E of GL(_))d.add(E);let y=0;return Da(d).pipe(uE(_=>u.has(_)?function UQ(e,t,n,r){const o=e.routeConfig,u=e._resolve;return void 0!==o?.title&&!NL(o)&&(u[f0]=o.title),function HQ(e,t,n,r){const o=a1(e);if(0===o.length)return pt({});const u={};return Da(o).pipe(Ea(d=>function zQ(e,t,n,r){const o=w0(t)??r,u=w_(e,o);return dy(u.resolve?u.resolve(t,n):Zg(o,()=>u(t,n)))}(e[d],t,n,r).pipe(qy(),Sa(y=>{u[d]=y}))),i1(1),function tK(e){return en(()=>e)}(u),h_(d=>VL(d)?Rd:sE(d)))}(u,e,t,r).pipe(en(d=>(e._resolvedData=d,e.data=v1(e,e.parent,n).resolve,null)))}(_,r,e,t):(_.data=v1(_,_.parent,e).resolve,pt(void 0))),Sa(()=>y++),i1(1),Ea(_=>y===d.size?pt(n):Rd))})}(this.paramsInheritanceStrategy,this.environmentInjector),Sa({next:()=>S=!0,complete:()=>{S||this.cancelNavigationTransition(E,"",Ka.NoDataFromResolver)}}))}),Sa(E=>{const S=new RK(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(S)}))}),O1(_=>{const E=S=>{const x=[];S.routeConfig?.loadComponent&&!S.routeConfig._loadedComponent&&x.push(this.configLoader.loadComponent(S.routeConfig).pipe(Sa(A=>{S.component=A}),en(()=>{})));for(const A of S.children)x.push(...E(A));return x};return rL(E(_.targetSnapshot.root)).pipe(aE(null),f_(1))}),O1(()=>this.afterPreactivation()),Rg(()=>{const{currentSnapshot:_,targetSnapshot:E}=u,S=this.createViewTransition?.(this.environmentInjector,_.root,E.root);return S?Da(S).pipe(en(()=>u)):pt(u)}),en(_=>{const E=function zK(e,t,n){const r=_0(e,t._root,n?n._root:void 0);return new AL(r,t)}(n.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return this.currentTransition=u={..._,targetRouterState:E},this.currentNavigation.targetRouterState=E,u}),Sa(()=>{this.events.next(new g1)}),((e,t,n,r)=>en(o=>(new eQ(t,o.targetRouterState,o.currentRouterState,n,r).activate(e),o)))(this.rootContexts,n.routeReuseStrategy,_=>this.events.next(_),this.inputBindingEnabled),f_(1),Sa({next:_=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ky(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects))),this.titleStrategy?.updateTitle(_.targetRouterState.snapshot),_.resolve(!0)},complete:()=>{d=!0}}),function nK(e){return zo((t,n)=>{kh(e).subscribe(Ao(n,()=>n.complete(),nv)),!n.closed&&t.subscribe(n)})}(this.transitionAbortSubject.pipe(Sa(_=>{throw _}))),s1(()=>{!d&&!y&&this.cancelNavigationTransition(u,"",Ka.SupersededByNewNavigation),this.currentTransition?.id===u.id&&(this.currentNavigation=null,this.currentTransition=null)}),h_(_=>{if(y=!0,$L(_))this.events.next(new b_(u.id,this.urlSerializer.serialize(u.extractedUrl),_.message,_.cancellationCode)),function WK(e){return $L(e)&&y_(e.url)}(_)?this.events.next(new m1(_.url)):u.resolve(!1);else{this.events.next(new gE(u.id,this.urlSerializer.serialize(u.extractedUrl),_,u.targetSnapshot??void 0));try{u.resolve(n.errorHandler(_))}catch(E){this.options.resolveNavigationPromiseOnError?u.resolve(!1):u.reject(E)}}return Rd}))}))}cancelNavigationTransition(n,r,o){const u=new b_(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(u),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ZQ(e){return e!==y0}let XQ=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:()=>fe(eY),providedIn:"root"})}}return e})();class JQ{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let eY=(()=>{class e extends JQ{static{this.\u0275fac=(()=>{let n;return function(o){return(n||(n=PS(e)))(o||e)}})()}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ZL=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:()=>fe(tY),providedIn:"root"})}}return e})(),tY=(()=>{class e extends ZL{constructor(){super(...arguments),this.location=fe(Jw),this.urlSerializer=fe(m_),this.options=fe(S0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=fe(P1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new g_,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=OL(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof h1)this.stateMemento=this.createStateMemento();else if(n instanceof b0)this.rawUrlTree=r.initialUrl;else if(n instanceof xL){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else n instanceof g1?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof b_&&(n.code===Ka.GuardRejected||n.code===Ka.NoDataFromResolver)?this.restoreHistory(r):n instanceof gE?this.restoreHistory(r,!0):n instanceof Ky&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){const o=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const d={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",d)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",u)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===n.finalUrl&&0===u&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(o){return(n||(n=PS(e)))(o||e)}})()}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var I0=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(I0||{});function nY(e){throw e}const rY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let jg=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=fe(TR),this.stateManager=fe(ZL),this.options=fe(S0,{optional:!0})||{},this.pendingTasks=fe(Bv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=fe(wE),this.urlSerializer=fe(m_),this.location=fe(Jw),this.urlHandlingStrategy=fe(P1),this._events=new Ks,this.errorHandler=this.options.errorHandler||nY,this.navigated=!1,this.routeReuseStrategy=fe(XQ),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=fe(_E,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!fe(mE,{optional:!0}),this.eventsSubscription=new ra,this.isNgZoneEnabled=fe(In)instanceof In&&In.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const o=this.navigationTransitions.currentTransition,u=this.navigationTransitions.currentNavigation;if(null!==o&&null!==u)if(this.stateManager.handleRouterEvent(r,u),r instanceof b_&&r.code!==Ka.Redirect&&r.code!==Ka.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ky)this.navigated=!0;else if(r instanceof m1){const d=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),y={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ZQ(o.source)};this.scheduleNavigation(d,y0,null,y,{resolve:o.resolve,reject:o.reject,promise:o.promise})}(function sY(e){return!(e instanceof g1||e instanceof m1)})(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),y0,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,o){const u={replaceUrl:!0},d=o?.navigationId?o:null;if(o){const _={...o};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const y=this.parseUrl(n);this.scheduleNavigation(y,r,d,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(S1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:y,preserveFragment:_}=r,E=_?this.currentUrlTree.fragment:d;let x,S=null;switch(y){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}null!==S&&(S=this.removeEmptyProps(S));try{x=_L(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),x=this.currentUrlTree.root}return wL(x,n,S,E??null)}navigateByUrl(n,r={skipLocationChange:!1}){const o=y_(n)?n:this.parseUrl(n),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,y0,null,r)}navigate(n,r={skipLocationChange:!1}){return function iY(e){for(let t=0;t<e.length;t++)if(null==e[t])throw new re(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(o=!0===r?{...rY}:!1===r?{...oY}:r,y_(n))return dL(this.currentUrlTree,n,o);const u=this.parseUrl(n);return dL(this.currentUrlTree,u,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,u])=>(null!=u&&(r[o]=u),r),{})}scheduleNavigation(n,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let y,_,E;d?(y=d.resolve,_=d.reject,E=d.promise):E=new Promise((x,A)=>{y=x,_=A});const S=this.pendingTasks.add();return function XL(e,t){e.events.pipe(Gy(n=>n instanceof Ky||n instanceof b_||n instanceof gE||n instanceof b0),en(n=>n instanceof Ky||n instanceof b0?I0.COMPLETE:n instanceof b_&&(n.code===Ka.Redirect||n.code===Ka.SupersededByNewNavigation)?I0.REDIRECTING:I0.FAILED),Gy(n=>n!==I0.REDIRECTING),f_(1)).subscribe(()=>{t()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(S))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:u,resolve:y,reject:_,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(x=>Promise.reject(x))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const N1=new be("");function e$(e){return e.routerState.root}function t$(){const e=fe(Va);return t=>{const n=e.get(ay);if(t!==n.components[0])return;const r=e.get(jg),o=e.get(n$);1===e.get(R1)&&r.initialNavigation(),e.get(r$,null,_t.Optional)?.setUpPreloading(),e.get(N1,null,_t.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const n$=new be("",{factory:()=>new Ks}),R1=new be("",{providedIn:"root",factory:()=>1}),r$=new be("");let gY=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=J0({type:e,selectors:[["app-root"]],standalone:!0,features:[pD],decls:13,vars:0,consts:[[1,"container"],[1,"badge"],[1,"small"],["href","https://github.com/billharrisdev/audio","target","_blank","rel","noopener",1,"link"]],template:function(r,o){1&r&&(rn(0,"div",0)(1,"h1"),Zr(2,"Audio Stem Removal "),rn(3,"span",1),Zr(4,"MVP"),on()(),rn(5,"p",2),Zr(6,"Client-side heuristic demo. For quality separation, integrate a proper ML model later."),on(),r_(7,"router-outlet"),rn(8,"footer")(9,"p"),Zr(10,"Educational demo. No server \u2013 all processing happens in your browser. "),rn(11,"a",3),Zr(12,"Source"),on()()()())},dependencies:[E1],encapsulation:2})}}return e})();class i${static encodeWav(t){const n=t.numberOfChannels,r=t.sampleRate,o=t.length,u=new Float32Array(o*n);for(let M=0;M<n;M++){const $=t.getChannelData(M);for(let K=0;K<o;K++)u[K*n+M]=$[K]}const y=2*n,E=new ArrayBuffer(44+2*u.length),S=new DataView(E);function x(M,$){for(let K=0;K<$.length;K++)S.setUint8(M+K,$.charCodeAt(K))}let A=0;x(A,"RIFF"),A+=4,S.setUint32(A,36+2*u.length,!0),A+=4,x(A,"WAVE"),A+=4,x(A,"fmt "),A+=4,S.setUint32(A,16,!0),A+=4,S.setUint16(A,1,!0),A+=2,S.setUint16(A,n,!0),A+=2,S.setUint32(A,r,!0),A+=4,S.setUint32(A,r*y,!0),A+=4,S.setUint16(A,y,!0),A+=2,S.setUint16(A,16,!0),A+=2,x(A,"data"),A+=4,S.setUint32(A,2*u.length,!0),A+=4;let P=0;for(let M=0;M<u.length;M++,P+=2){let $=Math.max(-1,Math.min(1,u[M]));S.setInt16(A+P,$<0?32768*$:32767*$,!0)}return new Blob([E],{type:"audio/wav"})}}var s$=c(622);const k1=[{name:"Demo 4-Stem (Placeholder)",id:"demo4",url:"assets/models/demo4.onnx",sampleRate:44100,chunkSize:352800,stems:["vocals","drums","bass","other"],requiresStereo:!0,description:"Example entry; supply real model file."}];let yY=(()=>{class e{constructor(){this.session=null,this.currentModel=Ad(null),this.progress=Ad(null)}loadModel(n){var r=this;return(0,f.A)(function*(){const o=function mY(e){return k1.find(t=>t.id===e)}(n);if(!o)throw new Error("Model not found");r.currentModel.set(o),r.progress.set({stage:"downloading",message:"Fetching model..."}),r.progress.set({stage:"initializing",message:"Creating session..."}),r.session=yield s$.wV.create(o.url,{executionProviders:["wasm"],graphOptimizationLevel:"all"})})()}ensureSession(){if(!this.session||!this.currentModel())throw new Error("Model not loaded")}separate(n,r){var o=this;return(0,f.A)(function*(){o.ensureSession();const u=o.currentModel(),d=o.session;if(u.requiresStereo&&n.numberOfChannels<2)throw new Error("Model requires stereo audio");let y=n;if(n.sampleRate!==u.sampleRate){const P=new OfflineAudioContext(n.numberOfChannels,Math.floor(n.duration*u.sampleRate),u.sampleRate),M=P.createBufferSource();M.buffer=n,M.connect(P.destination),M.start(),y=yield P.startRendering()}const _=y.length,E=u.chunkSize,S=Math.ceil(_/E),x={};u.stems.forEach(P=>x[P]=[]);for(let P=0;P<S;P++){const M=P*E,K=Math.min(M+E,_)-M,te=2,ee=new Float32Array(te*K);for(let lt=0;lt<te;lt++){const Pt=y.getChannelData(lt);for(let ar=0;ar<K;ar++)ee[lt*K+ar]=Pt[M+ar]}const ge=new s$.qY("float32",ee,[1,te,K]);o.progress.set({stage:"chunk",chunkIndex:P,chunkCount:S,message:`Processing chunk ${P+1}/${S}`}),r?.onProgress?.(o.progress());const ve={input:ge};let at;try{at=yield d.run(ve)}catch(lt){throw new Error("Inference failed: "+lt.message)}u.stems.forEach((lt,Pt)=>{const Ya=at[`stem_${Pt}`];if(!Ya)return;const zu=Ya.data,x0=zu.length/te;for(let Ia=0;Ia<te;Ia++){const E_=zu.subarray(Ia*x0,(Ia+1)*x0);x[lt][Ia]=x[lt][Ia]?bY(x[lt][Ia],E_):new Float32Array(E_)}})}const A=u.stems.map(P=>{const M=x[P],$=[];for(let K=0;K<2;K++)$.push(M[K]||new Float32Array(0));return{name:P,audio:$}});return o.progress.set({stage:"done",message:"Separation complete"}),r?.onProgress?.(o.progress()),A})()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function bY(e,t){const n=new Float32Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}let vY=(()=>{class e{constructor(){this.ctx=new AudioContext,this.lastTargetRemoved=null}decodeFile(n){var r=this;return(0,f.A)(function*(){const o=yield n.arrayBuffer();return yield r.ctx.decodeAudioData(o.slice(0))})()}fetchAndDecode(n){var r=this;return(0,f.A)(function*(){const o=yield fetch(n);if(!o.ok)throw new Error("HTTP "+o.status);const u=yield o.arrayBuffer();return yield r.ctx.decodeAudioData(u.slice(0))})()}removeStem(n,r,o){var u=this;return(0,f.A)(function*(){u.lastTargetRemoved=r;const d=n.sampleRate,y=new OfflineAudioContext(n.numberOfChannels,n.length,d),_=y.createBufferSource(),E=y.createBuffer(n.numberOfChannels,n.length,d);for(let M=0;M<n.numberOfChannels;M++)E.copyToChannel(n.getChannelData(M),M);_.buffer=E;let S=_;switch(r){case"vocals":if(n.numberOfChannels>=2){const M=y.createChannelSplitter(2),$=y.createGain();$.gain.value=-1;const K=y.createChannelMerger(2);_.connect(M),M.connect(K,0,0),M.connect($,1),$.connect(K,0,1),S=K;const te=y.createBiquadFilter();te.type="highpass",te.frequency.value=120;const ee=y.createBiquadFilter();ee.type="lowpass",ee.frequency.value=12e3,S.connect(te),te.connect(ee),S=ee}break;case"bass":{const M=y.createBiquadFilter();M.type="highpass",M.frequency.value=180,M.Q.value=.7,S.connect(M),S=M;break}case"guitar":{const M=y.createBiquadFilter();M.type="notch",M.frequency.value=800,M.Q.value=4;const $=y.createBiquadFilter();$.type="notch",$.frequency.value=1500,$.Q.value=4;const K=y.createBiquadFilter();K.type="notch",K.frequency.value=3e3,K.Q.value=6,S.connect(M),M.connect($),$.connect(K),S=K;break}case"drums":{const M=y.createBiquadFilter();M.type="lowpass",M.frequency.value=6e3,M.Q.value=.5;const $=y.createBiquadFilter();$.type="highpass",$.frequency.value=120,$.Q.value=.7,S.connect(M),M.connect($),S=$;break}}const x=y.createGain();if(x.gain.value=1,S.connect(x),x.connect(y.destination),_.start(),o)for(let M=0;M<5;M++)yield new Promise($=>setTimeout($,80)),o(Math.min(.95,(M+1)/6));const P=yield y.startRendering();return o?.(1),P})()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=De({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function _Y(e,t){if(1&e&&(rn(0,"div",14),Zr(1),on()),2&e){const n=ou();Yr(),qw("Loaded: ",n.fileName(),"")}}function wY(e,t){if(1&e){const n=lD();rn(0,"button",15),za("click",function(){const o=J_(n).$implicit;return ew(ou().loadSample(o))}),Zr(1),on()}if(2&e){const n=t.$implicit;Yr(),Gw(n.name)}}function TY(e,t){if(1&e&&(rn(0,"option",20),Zr(1),on()),2&e){const n=t.$implicit;Ko("value",n.id),Yr(),Gw(n.name)}}function DY(e,t){if(1&e){const n=lD();rn(0,"div",16)(1,"label",14),Zr(2,"Model: "),rn(3,"select",17),za("change",function(o){return J_(n),ew(ou().selectedModel.set(o.target.value))}),ru(4,TY,2,2,"option",18),on()(),rn(5,"div",19),Zr(6,"Experimental \u2013 requires compatible ONNX model files."),on()()}if(2&e){const n=ou();Yr(3),Ko("value",n.selectedModel()),Yr(),Ko("ngForOf",n.models)}}function EY(e,t){if(1&e&&(rn(0,"div",14),Zr(1),Rx(2,"number"),on()),2&e){const n=ou(2);Yr(),qw("Processing\u2026 ",kx(2,1,100*n.progress(),"1.0-0"),"%")}}function SY(e,t){if(1&e&&(rn(0,"div",14),Zr(1),Rx(2,"number"),on()),2&e){let n;const r=ou(2);Yr(),Cx("ML ",null==(n=r.onnx.progress())?null:n.message," (",kx(2,2,100*r.progress(),"1.0-0"),"%)")}}function IY(e,t){if(1&e&&(rn(0,"div",5),r_(1,"progress",21),ru(2,EY,3,4,"div",2)(3,SY,3,5,"div",2),on()),2&e){const n=ou();Yr(),Ko("value",n.progress()),Yr(),Ko("ngIf",!n.useML()),Yr(),Ko("ngIf",n.useML())}}function xY(e,t){if(1&e){const n=lD();rn(0,"div",0)(1,"h2"),Zr(2,"3. Result"),on(),r_(3,"audio",22),rn(4,"div",23)(5,"button",24),za("click",function(){return J_(n),ew(ou().download())}),Zr(6,"Download WAV"),on(),rn(7,"button",15),za("click",function(){return J_(n),ew(ou().processedUrl.set(null))}),Zr(8,"Discard"),on()()()}if(2&e){const n=ou();Yr(3),Ko("src",n.processedUrl(),nI)}}function CY(e,t){if(1&e&&(rn(0,"div",25),Zr(1),on()),2&e){const n=ou();Yr(),Gw(n.error())}}(function qq(e,t){return uG({rootComponent:e,...rF(t)})})(gY,{providers:[function dY(e,...t){return z_([{provide:_E,multi:!0,useValue:e},[],{provide:__,useFactory:e$,deps:[jg]},{provide:Gx,multi:!0,useFactory:t$},t.map(n=>n.\u0275providers)])}([{path:"",component:(()=>{class e{constructor(n,r){this.svc=n,this.onnx=r,this.fileName=Ad(null),this.isProcessing=Ad(!1),this.progress=Ad(0),this.error=Ad(null),this.processedUrl=Ad(null),this.originalBuffer=null,this.useML=Ad(!1),this.models=k1,this.selectedModel=Ad(k1[0]?.id||""),this.mlLoading=function EG(e,t){xu("NgSignals");const n=function Yy(e){const t=Object.create($t);t.computation=e;const n=()=>{if(U(t),N(t),t.value===Ca)throw t.error;return t.value};return n[h]=t,n}(e);return t?.equal&&(n[h].equal=t.equal),n}(()=>this.useML()&&"done"!==this.onnx.progress()?.stage&&this.isProcessing()),this.sampleClips=[{name:"CC0 Demo Clip",url:"assets/samples/cc0_demo_clip.mp3"}]}handleFile(n){var r=this;return(0,f.A)(function*(){const u=n.target.files?.[0];if(u){r.fileName.set(u.name),r.error.set(null),r.processedUrl.set(null);try{r.originalBuffer=yield r.svc.decodeFile(u)}catch(d){r.error.set("Decode failed: "+d.message)}}})()}loadSample(n){var r=this;return(0,f.A)(function*(){r.fileName.set(n.name),r.error.set(null),r.processedUrl.set(null);try{r.originalBuffer=yield r.svc.fetchAndDecode(n.url)}catch(o){r.error.set("Sample load failed: "+o.message)}})()}process(n){var r=this;return(0,f.A)(function*(){if(r.originalBuffer){r.isProcessing.set(!0),r.progress.set(0),r.error.set(null),r.processedUrl.set(null);try{if(r.useML()){(!r.onnx.currentModel()||r.onnx.currentModel().id!==r.selectedModel())&&(yield r.onnx.loadModel(r.selectedModel()));const o=yield r.onnx.separate(r.originalBuffer,{onProgress:_=>{null!=_.chunkIndex&&_.chunkCount&&r.progress.set((_.chunkIndex+1)/_.chunkCount)}}),u=r.combineStemsExcluding(o,n,r.originalBuffer.sampleRate),d=i$.encodeWav(u),y=URL.createObjectURL(d);r.processedUrl.set(y)}else{const o=yield r.svc.removeStem(r.originalBuffer,n,y=>r.progress.set(y)),u=i$.encodeWav(o),d=URL.createObjectURL(u);r.processedUrl.set(d)}}catch(o){r.error.set(o.message||"Processing failed")}finally{r.isProcessing.set(!1)}}else r.error.set("Please load a file first.")})()}combineStemsExcluding(n,r,o){const u=n.filter(E=>E.name!==r);if(!u.length)throw new Error("No stems to mix");const d=Math.max(...u.map(E=>E.audio[0].length)),_=new OfflineAudioContext(2,d,o).createBuffer(2,d,o);u.forEach(E=>{for(let S=0;S<2;S++){const x=_.getChannelData(S),A=E.audio[S];for(let P=0;P<A.length;P++)x[P]+=A[P]}});for(let E=0;E<2;E++){const S=_.getChannelData(E);let x=0;for(let A=0;A<S.length;A++)x=Math.max(x,Math.abs(S[A]));if(x>1)for(let A=0;A<S.length;A++)S[A]/=x}return _}download(){const n=this.processedUrl();if(!n)return;const r=document.createElement("a");r.href=n,r.download="output.wav",r.click()}static{this.\u0275fac=function(r){return new(r||e)(Qe(vY),Qe(yY))}}static{this.\u0275cmp=J0({type:e,selectors:[["app-source-separator"]],standalone:!0,features:[pD],decls:27,vars:11,consts:[[1,"card"],["type","file","accept","audio/*",3,"change"],["class","small",4,"ngIf"],[1,"flex","wrap",2,"margin-top","1rem"],[3,"click",4,"ngFor","ngForOf"],[2,"margin-top","1rem"],[2,"display","flex","align-items","center","gap",".5rem"],["type","checkbox",3,"change","checked"],["style","margin-top:.5rem;",4,"ngIf"],[1,"flex","stem-buttons","wrap"],[3,"click","disabled"],["style","margin-top:1rem;",4,"ngIf"],["class","card",4,"ngIf"],["class","alert",4,"ngIf"],[1,"small"],[3,"click"],[2,"margin-top",".5rem"],[3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[1,"small",2,"margin-top",".25rem","opacity",".6"],[3,"value"],["max","1",3,"value"],["controls","",2,"width","100%",3,"src"],[1,"audio-actions"],[1,"primary",3,"click"],[1,"alert"]],template:function(r,o){1&r&&(rn(0,"div",0)(1,"h2"),Zr(2,"1. Load Audio"),on(),rn(3,"input",1),za("change",function(d){return o.handleFile(d)}),on(),ru(4,_Y,2,1,"div",2),rn(5,"div",3),ru(6,wY,2,1,"button",4),on(),rn(7,"div",5)(8,"label",6)(9,"input",7),za("change",function(d){return o.useML.set(d.target.checked)}),on(),Zr(10," Use ML Model (WebAssembly) "),on()(),ru(11,DY,7,2,"div",8),on(),rn(12,"div",0)(13,"h2"),Zr(14,"2. Choose Stem To Remove"),on(),rn(15,"div",9)(16,"button",10),za("click",function(){return o.process("vocals")}),Zr(17,"Remove Vocals"),on(),rn(18,"button",10),za("click",function(){return o.process("drums")}),Zr(19,"Remove Drums"),on(),rn(20,"button",10),za("click",function(){return o.process("bass")}),Zr(21,"Remove Bass"),on(),rn(22,"button",10),za("click",function(){return o.process("guitar")}),Zr(23,"Remove Guitar"),on()(),ru(24,IY,4,3,"div",11),on(),ru(25,xY,9,1,"div",12)(26,CY,2,1,"div",13)),2&r&&(Yr(4),Ko("ngIf",o.fileName()),Yr(2),Ko("ngForOf",o.sampleClips),Yr(3),Ko("checked",o.useML()),Yr(2),Ko("ngIf",o.useML()),Yr(5),Ko("disabled",o.isProcessing()),Yr(2),Ko("disabled",o.isProcessing()),Yr(2),Ko("disabled",o.isProcessing()),Yr(2),Ko("disabled",o.isProcessing()),Yr(2),Ko("ngIf",o.isProcessing()),Yr(),Ko("ngIf",o.processedUrl()),Yr(),Ko("ngIf",o.error()))},dependencies:[Y5,Mk,Rk,$k],styles:["[_nghost-%COMP%]{display:block}progress[_ngcontent-%COMP%]{appearance:none}"]})}}return e})()},{path:"**",redirectTo:""}]),function X7(){return xu("NgEagerAnimations"),[...Y7]}()]}).catch(e=>console.error(e))},622:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{qY:()=>yt,wV:()=>Yd});var _Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(467),Hd=Object.create,an=Object.defineProperty,qd=Object.getOwnPropertyDescriptor,jd=Object.getOwnPropertyNames,Xd=Object.getPrototypeOf,Kd=Object.prototype.hasOwnProperty,Co=(i=function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')},typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(a,c)=>(typeof require<"u"?require:a)[c]}):i),O=(i,a)=>()=>(i&&(a=i(i=0)),a),mt=(i,a)=>()=>(a||i((a={exports:{}}).exports,a),a.exports),Or=(i,a)=>{for(var c in a)an(i,c,{get:a[c],enumerable:!0})},Qa=(i,a,c,f)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let b of jd(a))!Kd.call(i,b)&&b!==c&&an(i,b,{get:()=>a[b],enumerable:!(f=qd(a,b))||f.enumerable});return i},rr=(i,a,c)=>(c=null!=i?Hd(Xd(i)):{},Qa(!a&&i&&i.__esModule?c:an(c,"default",{value:i,enumerable:!0}),i)),sn=i=>Qa(an({},"__esModule",{value:!0}),i),un,ke,nr,Jd,ln,fn=O(()=>{un=new Map,ke=[],nr=(i,a,c)=>{if(!a||"function"!=typeof a.init||"function"!=typeof a.createInferenceSessionHandler)throw new TypeError("not a valid backend");{let f=un.get(i);if(void 0===f)un.set(i,{backend:a,priority:c});else{if(f.priority>c)return;if(f.priority===c&&f.backend!==a)throw new Error(`cannot register backend "${i}" using priority ${c}`)}if(c>=0){let b=ke.indexOf(i);-1!==b&&ke.splice(b,1);for(let m=0;m<ke.length;m++)if(un.get(ke[m]).priority<=c)return void ke.splice(m,0,i);ke.push(i)}}},Jd=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a){let c=un.get(a);if(!c)return"backend not found.";if(c.initialized)return c.backend;if(c.aborted)return c.error;{let f=!!c.initPromise;try{return f||(c.initPromise=c.backend.init(a)),yield c.initPromise,c.initialized=!0,c.backend}catch(b){return f||(c.error=`${b}`,c.aborted=!0),c.error}finally{delete c.initPromise}}});return function(c){return i.apply(this,arguments)}}(),ln=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a){let m,c=a.executionProviders||[],f=c.map(s=>"string"==typeof s?s:s.name),b=0===f.length?ke:f,v=[],l=new Set;for(let s of b){let g=yield Jd(s);"string"==typeof g?v.push({name:s,err:g}):(m||(m=g),m===g&&l.add(s))}if(!m)throw new Error(`no available backend found. ERR: ${v.map(s=>`[${s.name}] ${s.err}`).join(", ")}`);for(let{name:s,err:g}of v)f.includes(s)&&console.warn(`removing requested execution provider "${s}" from session options because it is not available: ${g}`);let h=c.filter(s=>l.has("string"==typeof s?s:s.name));return[m,new Proxy(a,{get:(s,g)=>"executionProviders"===g?h:Reflect.get(s,g)})]});return function(c){return i.apply(this,arguments)}}()}),ts=O(()=>{fn()}),es,rs=O(()=>{es="1.20.0"}),ns,Gt,No=O(()=>{rs(),ns="warning",Gt={wasm:{},webgl:{},webgpu:{},versions:{common:es},set logLevel(i){if(void 0!==i){if("string"!=typeof i||-1===["verbose","info","warning","error","fatal"].indexOf(i))throw new Error(`Unsupported logging level: ${i}`);ns=i}},get logLevel(){return ns}},Object.defineProperty(Gt,"logLevel",{enumerable:!0})}),z,os=O(()=>{No(),z=Gt}),is,as,ss=O(()=>{is=(i,a)=>{let c=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);c.width=i.dims[3],c.height=i.dims[2];let f=c.getContext("2d");if(null!=f){let b,m;void 0!==a?.tensorLayout&&"NHWC"===a.tensorLayout?(b=i.dims[2],m=i.dims[3]):(b=i.dims[3],m=i.dims[2]);let h,s,v=void 0!==a?.format?a.format:"RGB",l=a?.norm;void 0===l||void 0===l.mean?h=[255,255,255,255]:"number"==typeof l.mean?h=[l.mean,l.mean,l.mean,l.mean]:(h=[l.mean[0],l.mean[1],l.mean[2],0],void 0!==l.mean[3]&&(h[3]=l.mean[3])),void 0===l||void 0===l.bias?s=[0,0,0,0]:"number"==typeof l.bias?s=[l.bias,l.bias,l.bias,l.bias]:(s=[l.bias[0],l.bias[1],l.bias[2],0],void 0!==l.bias[3]&&(s[3]=l.bias[3]));let g=m*b,p=0,T=g,I=2*g,N=-1;"RGBA"===v?(p=0,T=g,I=2*g,N=3*g):"RGB"===v?(p=0,T=g,I=2*g):"RBG"===v&&(p=0,I=g,T=2*g);for(let L=0;L<m;L++)for(let U=0;U<b;U++){let se=(i.data[p++]-s[0])*h[0],Z=(i.data[T++]-s[1])*h[1],ie=(i.data[I++]-s[2])*h[2],le=-1===N?255:(i.data[N++]-s[3])*h[3];f.fillStyle="rgba("+se+","+Z+","+ie+","+le+")",f.fillRect(U,L,1,1)}if("toDataURL"in c)return c.toDataURL();throw new Error("toDataURL is not supported")}throw new Error("Can not access image data")},as=(i,a)=>{let f,c=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");if(null==c)throw new Error("Can not access image data");{let b,m,v;void 0!==a?.tensorLayout&&"NHWC"===a.tensorLayout?(b=i.dims[2],m=i.dims[1],v=i.dims[3]):(b=i.dims[3],m=i.dims[2],v=i.dims[1]);let s,g,l=void 0!==a&&void 0!==a.format?a.format:"RGB",h=a?.norm;void 0===h||void 0===h.mean?s=[255,255,255,255]:"number"==typeof h.mean?s=[h.mean,h.mean,h.mean,h.mean]:(s=[h.mean[0],h.mean[1],h.mean[2],255],void 0!==h.mean[3]&&(s[3]=h.mean[3])),void 0===h||void 0===h.bias?g=[0,0,0,0]:"number"==typeof h.bias?g=[h.bias,h.bias,h.bias,h.bias]:(g=[h.bias[0],h.bias[1],h.bias[2],0],void 0!==h.bias[3]&&(g[3]=h.bias[3]));let p=m*b;if(void 0!==a&&(void 0!==a.format&&4===v&&"RGBA"!==a.format||3===v&&"RGB"!==a.format&&"BGR"!==a.format))throw new Error("Tensor format doesn't match input tensor dims");let T=4,I=0,N=1,L=2,U=3,se=0,Z=p,ie=2*p,le=-1;"RGBA"===l?(se=0,Z=p,ie=2*p,le=3*p):"RGB"===l?(se=0,Z=p,ie=2*p):"RBG"===l&&(se=0,ie=p,Z=2*p),f=c.createImageData(b,m);for(let Oe=0;Oe<m*b;I+=T,N+=T,L+=T,U+=T,Oe++)f.data[I]=(i.data[se++]-g[0])*s[0],f.data[N]=(i.data[Z++]-g[1])*s[1],f.data[L]=(i.data[ie++]-g[2])*s[2],f.data[U]=-1===le?255:(i.data[le++]-g[3])*s[3]}return f}}),Ro,us,ls,fs,cs,ps,ds=O(()=>{cn(),Ro=(i,a)=>{if(void 0===i)throw new Error("Image buffer must be defined");if(void 0===a.height||void 0===a.width)throw new Error("Image height and width must be defined");if("NHWC"===a.tensorLayout)throw new Error("NHWC Tensor layout is not supported yet");let m,v,{height:c,width:f}=a,b=a.norm??{mean:255,bias:0};m="number"==typeof b.mean?[b.mean,b.mean,b.mean,b.mean]:[b.mean[0],b.mean[1],b.mean[2],b.mean[3]??255],v="number"==typeof b.bias?[b.bias,b.bias,b.bias,b.bias]:[b.bias[0],b.bias[1],b.bias[2],b.bias[3]??0];let l=void 0!==a.format?a.format:"RGBA",h=void 0!==a.tensorFormat&&void 0!==a.tensorFormat?a.tensorFormat:"RGB",s=c*f,g="RGBA"===h?new Float32Array(4*s):new Float32Array(3*s),p=4,T=0,I=1,N=2,L=3,U=0,se=s,Z=2*s,ie=-1;"RGB"===l&&(p=3,T=0,I=1,N=2,L=-1),"RGBA"===h?ie=3*s:"RBG"===h?(U=0,Z=s,se=2*s):"BGR"===h&&(Z=0,se=s,U=2*s);for(let le=0;le<s;le++,T+=p,N+=p,I+=p,L+=p)g[U++]=(i[T]+v[0])/m[0],g[se++]=(i[I]+v[1])/m[1],g[Z++]=(i[N]+v[2])/m[2],-1!==ie&&-1!==L&&(g[ie++]=(i[L]+v[3])/m[3]);return new St("float32",g,"RGBA"===h?[1,4,c,f]:[1,3,c,f])},us=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a,c){let l,f=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,b=typeof ImageData<"u"&&a instanceof ImageData,m=typeof ImageBitmap<"u"&&a instanceof ImageBitmap,v="string"==typeof a,h=c??{},s=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},g=p=>typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement||p instanceof OffscreenCanvas?p.getContext("2d"):null;if(f){let p=s();p.width=a.width,p.height=a.height;let T=g(p);if(null==T)throw new Error("Can not access image data");{let I=a.height,N=a.width;if(void 0!==c&&void 0!==c.resizedHeight&&void 0!==c.resizedWidth&&(I=c.resizedHeight,N=c.resizedWidth),void 0!==c){if(h=c,void 0!==c.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");h.tensorFormat="RGBA",h.height=I,h.width=N}else h.tensorFormat="RGBA",h.height=I,h.width=N;T.drawImage(a,0,0),l=T.getImageData(0,0,N,I).data}}else{if(!b){if(m){if(void 0===c)throw new Error("Please provide image config with format for Imagebitmap");let p=s();p.width=a.width,p.height=a.height;let T=g(p);if(null!=T){let I=a.height,N=a.width;return T.drawImage(a,0,0,N,I),l=T.getImageData(0,0,N,I).data,h.height=I,h.width=N,Ro(l,h)}throw new Error("Can not access image data")}if(v)return new Promise((p,T)=>{let I=s(),N=g(I);if(!a||!N)return T();let L=new Image;L.crossOrigin="Anonymous",L.src=a,L.onload=()=>{I.width=L.width,I.height=L.height,N.drawImage(L,0,0,I.width,I.height);let U=N.getImageData(0,0,I.width,I.height);h.height=I.height,h.width=I.width,p(Ro(U.data,h))}});throw new Error("Input data provided is not supported - aborted tensor creation")}{let p,T;if(void 0!==c&&void 0!==c.resizedWidth&&void 0!==c.resizedHeight?(p=c.resizedHeight,T=c.resizedWidth):(p=a.height,T=a.width),void 0!==c&&(h=c),h.format="RGBA",h.height=p,h.width=T,void 0!==c){let I=s();I.width=T,I.height=p;let N=g(I);if(null==N)throw new Error("Can not access image data");N.putImageData(a,0,0),l=N.getImageData(0,0,T,p).data}else l=a.data}}if(void 0!==l)return Ro(l,h);throw new Error("Input data provided is not supported - aborted tensor creation")});return function(c,f){return i.apply(this,arguments)}}(),ls=(i,a)=>{let{width:c,height:f,download:b,dispose:m}=a;return new St({location:"texture",type:"float32",texture:i,dims:[1,f,c,4],download:b,dispose:m})},fs=(i,a)=>{let{dataType:c,dims:f,download:b,dispose:m}=a;return new St({location:"gpu-buffer",type:c??"float32",gpuBuffer:i,dims:f,download:b,dispose:m})},cs=(i,a)=>{let{dataType:c,dims:f,download:b,dispose:m}=a;return new St({location:"ml-tensor",type:c??"float32",mlTensor:i,dims:f,download:b,dispose:m})},ps=(i,a,c)=>new St({location:"cpu-pinned",type:i,data:a,dims:c??[a.length]})}),Be,Sr,hs,ms,bs=O(()=>{Be=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),Sr=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),hs=!1,ms=()=>{if(!hs){hs=!0;let i=typeof BigInt64Array<"u"&&BigInt64Array.from,a=typeof BigUint64Array<"u"&&BigUint64Array.from,c=typeof Float16Array<"u"&&Float16Array.from;i&&(Be.set("int64",BigInt64Array),Sr.set(BigInt64Array,"int64")),a&&(Be.set("uint64",BigUint64Array),Sr.set(BigUint64Array,"uint64")),c?(Be.set("float16",Float16Array),Sr.set(Float16Array,"float16")):Be.set("float16",Uint16Array)}}}),gs,ys,xs=O(()=>{cn(),gs=i=>{let a=1;for(let c=0;c<i.length;c++){let f=i[c];if("number"!=typeof f||!Number.isSafeInteger(f))throw new TypeError(`dims[${c}] must be an integer, got: ${f}`);if(f<0)throw new RangeError(`dims[${c}] must be a non-negative integer, got: ${f}`);a*=f}return a},ys=(i,a)=>{switch(i.location){case"cpu":return new St(i.type,i.data,a);case"cpu-pinned":return new St({location:"cpu-pinned",data:i.data,type:i.type,dims:a});case"texture":return new St({location:"texture",texture:i.texture,type:i.type,dims:a});case"gpu-buffer":return new St({location:"gpu-buffer",gpuBuffer:i.gpuBuffer,type:i.type,dims:a});case"ml-tensor":return new St({location:"ml-tensor",mlTensor:i.mlTensor,type:i.type,dims:a});default:throw new Error(`tensorReshape: tensor location ${i.location} is not supported`)}}}),St,cn=O(()=>{ss(),ds(),bs(),xs(),St=class{constructor(i,a,c){let f,b;if(ms(),"object"==typeof i&&"location"in i)switch(this.dataLocation=i.location,f=i.type,b=i.dims,i.location){case"cpu-pinned":{let v=Be.get(f);if(!v)throw new TypeError(`unsupported type "${f}" to create tensor from pinned buffer`);if(!(i.data instanceof v))throw new TypeError(`buffer should be of type ${v.name}`);this.cpuData=i.data;break}case"texture":if("float32"!==f)throw new TypeError(`unsupported type "${f}" to create tensor from texture`);this.gpuTextureData=i.texture,this.downloader=i.download,this.disposer=i.dispose;break;case"gpu-buffer":if("float32"!==f&&"float16"!==f&&"int32"!==f&&"int64"!==f&&"uint32"!==f&&"uint8"!==f&&"bool"!==f&&"uint4"!==f&&"int4"!==f)throw new TypeError(`unsupported type "${f}" to create tensor from gpu buffer`);this.gpuBufferData=i.gpuBuffer,this.downloader=i.download,this.disposer=i.dispose;break;case"ml-tensor":if("float32"!==f&&"float16"!==f&&"int32"!==f&&"int64"!==f&&"uint32"!==f&&"uint64"!==f&&"int8"!==f&&"uint8"!==f&&"bool"!==f)throw new TypeError(`unsupported type "${f}" to create tensor from MLTensor`);this.mlTensorData=i.mlTensor,this.downloader=i.download,this.disposer=i.dispose;break;default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let v,l;if("string"==typeof i)if(f=i,l=c,"string"===i){if(!Array.isArray(a))throw new TypeError("A string tensor's data must be a string array.");v=a}else{let h=Be.get(i);if(void 0===h)throw new TypeError(`Unsupported tensor type: ${i}.`);if(Array.isArray(a)){if("float16"===i&&h===Uint16Array||"uint4"===i||"int4"===i)throw new TypeError(`Creating a ${i} tensor from number array is not supported. Please use ${h.name} as data.`);v="uint64"===i||"int64"===i?h.from(a,BigInt):h.from(a)}else if(a instanceof h)v=a;else{if(!(a instanceof Uint8ClampedArray))throw new TypeError(`A ${f} tensor's data must be type of ${h}`);if("uint8"!==i)throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");v=Uint8Array.from(a)}}else if(l=a,Array.isArray(i)){if(0===i.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");let h=typeof i[0];if("string"===h)f="string",v=i;else{if("boolean"!==h)throw new TypeError(`Invalid element type of data array: ${h}.`);f="bool",v=Uint8Array.from(i)}}else if(i instanceof Uint8ClampedArray)f="uint8",v=Uint8Array.from(i);else{let h=Sr.get(i.constructor);if(void 0===h)throw new TypeError(`Unsupported type for tensor data: ${i.constructor}.`);f=h,v=i}if(void 0===l)l=[v.length];else if(!Array.isArray(l))throw new TypeError("A tensor's dims must be a number array");b=l,this.cpuData=v,this.dataLocation="cpu"}let m=gs(b);if(this.cpuData&&m!==this.cpuData.length&&("uint4"!==f&&"int4"!==f||Math.ceil(m/2)!==this.cpuData.length))throw new Error(`Tensor's size(${m}) does not match data length(${this.cpuData.length}).`);this.type=f,this.dims=b,this.size=m}static fromImage(i,a){return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return us(i,a)})()}static fromTexture(i,a){return ls(i,a)}static fromGpuBuffer(i,a){return fs(i,a)}static fromMLTensor(i,a){return cs(i,a)}static fromPinnedBuffer(i,a,c){return ps(i,a,c)}toDataURL(i){return is(this,i)}toImageData(i){return as(this,i)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}getData(i){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){switch(a.ensureValid(),a.dataLocation){case"cpu":case"cpu-pinned":return a.data;case"texture":case"gpu-buffer":case"ml-tensor":if(!a.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(a.isDownloading)throw new Error("The current tensor is being downloaded.");try{a.isDownloading=!0;let c=yield a.downloader();return a.downloader=void 0,a.dataLocation="cpu",a.cpuData=c,i&&a.disposer&&(a.disposer(),a.disposer=void 0),c}finally{a.isDownloading=!1}default:throw new Error(`cannot get data from location: ${a.dataLocation}`)}})()}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if("none"===this.dataLocation)throw new Error("The tensor is disposed.")}reshape(i){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ys(this,i)}}}),yt,pn=O(()=>{cn(),yt=St}),Ts,ws,Fe,Ce,Go=O(()=>{No(),Ts=(i,a)=>{(typeof Gt.trace>"u"?!Gt.wasm.trace:!Gt.trace)||console.timeStamp(`${i}::ORT::${a}`)},ws=(i,a)=>{let c=(new Error).stack?.split(/\r\n|\r|\n/g)||[],f=!1;for(let b=0;b<c.length;b++){if(f&&!c[b].includes("TRACE_FUNC")){let m=`FUNC_${i}::${c[b].trim().split(" ")[1]}`;return a&&(m+=`::${a}`),void Ts("CPU",m)}c[b].includes("TRACE_FUNC")&&(f=!0)}},Fe=i=>{(typeof Gt.trace>"u"?!Gt.wasm.trace:!Gt.trace)||ws("BEGIN",i)},Ce=i=>{(typeof Gt.trace>"u"?!Gt.wasm.trace:!Gt.trace)||ws("END",i)}}),dn,vs=O(()=>{fn(),pn(),Go(),dn=class c${constructor(a){this.handler=a}run(a,c,f){var b=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){Fe();let m={},v={};if("object"!=typeof a||null===a||a instanceof yt||Array.isArray(a))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if("object"==typeof c){if(null===c)throw new TypeError("Unexpected argument[1]: cannot be null.");if(c instanceof yt)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(c)){if(0===c.length)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let g of c){if("string"!=typeof g)throw new TypeError("'fetches' must be a string array or an object.");if(-1===b.outputNames.indexOf(g))throw new RangeError(`'fetches' contains invalid output name: ${g}.`);m[g]=null}if("object"==typeof f&&null!==f)v=f;else if(typeof f<"u")throw new TypeError("'options' must be an object.")}else{let g=!1,p=Object.getOwnPropertyNames(c);for(let T of b.outputNames)if(-1!==p.indexOf(T)){let I=c[T];(null===I||I instanceof yt)&&(g=!0,l=!1,m[T]=I)}if(g){if("object"==typeof f&&null!==f)v=f;else if(typeof f<"u")throw new TypeError("'options' must be an object.")}else v=c}}else if(typeof c<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let g of b.inputNames)if(typeof a[g]>"u")throw new Error(`input '${g}' is missing in 'feeds'.`);if(l)for(let g of b.outputNames)m[g]=null;let h=yield b.handler.run(a,m,v),s={};for(let g in h)if(Object.hasOwnProperty.call(h,g)){let p=h[g];s[g]=p instanceof yt?p:new yt(p.type,p.data,p.dims)}return Ce(),s})()}release(){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return a.handler.dispose()})()}static create(a,c,f,b){return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){Fe();let m,v={};if("string"==typeof a){if(m=a,"object"==typeof c&&null!==c)v=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(a instanceof Uint8Array){if(m=a,"object"==typeof c&&null!==c)v=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else{if(!(a instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&a instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{let g=a,p=0,T=a.byteLength;if("object"==typeof c&&null!==c)v=c;else if("number"==typeof c){if(p=c,!Number.isSafeInteger(p))throw new RangeError("'byteOffset' must be an integer.");if(p<0||p>=g.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${g.byteLength}).`);if(T=a.byteLength-p,"number"==typeof f){if(T=f,!Number.isSafeInteger(T))throw new RangeError("'byteLength' must be an integer.");if(T<=0||p+T>g.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${g.byteLength-p}].`);if("object"==typeof b&&null!==b)v=b;else if(typeof b<"u")throw new TypeError("'options' must be an object.")}else if(typeof f<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof c<"u")throw new TypeError("'options' must be an object.");m=new Uint8Array(g,p,T)}}let[l,h]=yield ln(v),s=yield l.createInferenceSessionHandler(m,h);return Ce(),new c$(s)})()}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),Yd,Is=O(()=>{vs(),Yd=dn}),_s=O(()=>{}),Os=O(()=>{}),Ss=O(()=>{}),As=O(()=>{}),Zd,hn,Ps=O(()=>{fn(),pn(),Zd="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",hn=class d${constructor(a,c,f){this.handler=a,this.hasOptimizerModel=c,this.hasEvalModel=f}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static create(a,c){return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){let f=a.evalModel||"",b=a.optimizerModel||"",m=c||{},[v,l]=yield ln(m);if(v.createTrainingSessionHandler){let h=yield v.createTrainingSessionHandler(a.checkpointState,a.trainModel,f,b,l);return new d$(h,!!a.optimizerModel,!!a.evalModel)}throw new Error(Zd)})()}typeNarrowingForRunStep(a,c,f,b,m){let v={},l={};if("object"!=typeof f||null===f||f instanceof yt||Array.isArray(f))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let h=!0;if("object"==typeof b){if(null===b)throw new TypeError("Unexpected argument[1]: cannot be null.");if(b instanceof yt)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(b)){if(0===b.length)throw new TypeError("'fetches' cannot be an empty array.");h=!1;for(let s of b){if("string"!=typeof s)throw new TypeError("'fetches' must be a string array or an object.");if(-1===c.indexOf(s))throw new RangeError(`'fetches' contains invalid output name: ${s}.`);v[s]=null}if("object"==typeof m&&null!==m)l=m;else if(typeof m<"u")throw new TypeError("'options' must be an object.")}else{let s=!1,g=Object.getOwnPropertyNames(b);for(let p of c)if(-1!==g.indexOf(p)){let T=b[p];(null===T||T instanceof yt)&&(s=!0,h=!1,v[p]=T)}if(s){if("object"==typeof m&&null!==m)l=m;else if(typeof m<"u")throw new TypeError("'options' must be an object.")}else l=b}}else if(typeof b<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s of a)if(typeof f[s]>"u")throw new Error(`input '${s}' is missing in 'feeds'.`);if(h)for(let s of c)v[s]=null;return[v,l]}convertHandlerReturnTypeToMapOfTensors(a){let c={};for(let f in a)if(Object.hasOwnProperty.call(a,f)){let b=a[f];c[f]=b instanceof yt?b:new yt(b.type,b.data,b.dims)}return c}lazyResetGrad(){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){yield a.handler.lazyResetGrad()})()}runTrainStep(a,c,f){var b=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){let[m,v]=b.typeNarrowingForRunStep(b.trainingInputNames,b.trainingOutputNames,a,c,f),l=yield b.handler.runTrainStep(a,m,v);return b.convertHandlerReturnTypeToMapOfTensors(l)})()}runOptimizerStep(a){var c=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){if(!c.hasOptimizerModel)throw new Error("This TrainingSession has no OptimizerModel loaded.");yield c.handler.runOptimizerStep(a||{})})()}runEvalStep(a,c,f){var b=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){if(b.hasEvalModel){let[m,v]=b.typeNarrowingForRunStep(b.evalInputNames,b.evalOutputNames,a,c,f),l=yield b.handler.runEvalStep(a,m,v);return b.convertHandlerReturnTypeToMapOfTensors(l)}throw new Error("This TrainingSession has no EvalModel loaded.")})()}getParametersSize(){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(c=!0){return a.handler.getParametersSize(c)}).apply(this,arguments)}loadParametersBuffer(a){var c=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(f,b=!0){let m=yield c.getParametersSize(b);if(f.length!==4*m)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return c.handler.loadParametersBuffer(f,b)}).apply(this,arguments)}getContiguousParameters(){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(c=!0){return a.handler.getContiguousParameters(c)}).apply(this,arguments)}release(){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return a.handler.dispose()})()}}}),Qd,Es=O(()=>{Ps(),Qd=hn}),Mo={},i;Or(Mo,{InferenceSession:()=>Yd,TRACE:()=>Ts,TRACE_FUNC_BEGIN:()=>Fe,TRACE_FUNC_END:()=>Ce,Tensor:()=>yt,TrainingSession:()=>Qd,env:()=>z,registerBackend:()=>nr});var Yt=O(()=>{ts(),os(),Is(),pn(),_s(),Os(),Go(),Ss(),As(),Es()});function _e(i,a,c,f){if(void 0===a)return eh(i);if(void 0===c)mn(i,a,1);else if("number"==typeof c&&void 0===f)mn(i,a,c);else if("string"==typeof c&&void 0===f)mn(i,c,1,a);else{if("string"!=typeof c||"number"!=typeof f)throw new TypeError("input is valid");mn(i,c,f,a)}}function eh(i){return{verbose:_e.verbose.bind(null,i),info:_e.info.bind(null,i),warning:_e.warning.bind(null,i),error:_e.error.bind(null,i),fatal:_e.fatal.bind(null,i)}}function mn(i,a,c,f){let b=Ar[f||""]||Ar[""];Ls[i]<Ls[b.minimalSeverity]||(b.logDateTime&&(a=`${(new Date).toISOString()}|${a}`),th[b.provider].log(i,a,f))}var Uo,Vo,Ls,th,$s,Ar,tt,gn,yn,xn,bn,Ut=O(()=>{Uo=class{log(i,a,c){}},Vo=class{log(i,a,c){console.log(`${this.color(i)} ${c?"\x1b[35m"+c+"\x1b[0m ":""}${a}`)}color(i){switch(i){case"verbose":return"\x1b[34;40mv\x1b[0m";case"info":return"\x1b[32mi\x1b[0m";case"warning":return"\x1b[30;43mw\x1b[0m";case"error":return"\x1b[31;40me\x1b[0m";case"fatal":return"\x1b[101mf\x1b[0m";default:throw new Error(`unsupported severity: ${i}`)}}},Ls={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},th={none:new Uo,console:new Vo},Ar={"":$s={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1}},(i=>{function v(s){Ar={},l("",s||{})}function l(s,g){if("*"===s)v(g);else{let p=Ar[s]||$s;Ar[s]={provider:g.provider||p.provider,minimalSeverity:g.minimalSeverity||p.minimalSeverity,logDateTime:void 0===g.logDateTime?p.logDateTime:g.logDateTime,logSourceLocation:void 0===g.logSourceLocation?p.logSourceLocation:g.logSourceLocation}}}i.verbose=function a(s,g){i("verbose",s,g)},i.info=function c(s,g){i("info",s,g)},i.warning=function f(s,g){i("warning",s,g)},i.error=function b(s,g){i("error",s,g)},i.fatal=function m(s,g){i("fatal",s,g)},i.reset=v,i.set=l,i.setWithEnv=function h(s){let g={};s.logLevel&&(g.minimalSeverity=s.logLevel),l("",g)}})(_e||={}),tt=_e,gn=class{constructor(i,a,c,f,b,m){this.category=i,this.name=a,this.startTime=c,this.endCallback=f,this.timer=b,this.ctx=m}end(){var i=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return i.endCallback(i)})()}checkTimer(){var i=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){if(void 0===i.ctx||void 0===i.timer)throw new Error("No webgl timer found");return i.ctx.endTimer(),i.ctx.waitForQueryAndGetTime(i.timer)})()}},yn=class{constructor(i,a,c,f){this.category=i,this.name=a,this.startTime=c,this.endTime=f}},xn=class{constructor(i,a,c){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===i?1e4:i,this._flushBatchSize=void 0===a?10:a,this._flushIntervalInMilliseconds=void 0===c?5e3:c}static create(i){return void 0===i?new this:new this(i.maxNumberEvents,i.flushBatchSize,i.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=bn(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(i,a,c,f){let b=this._started?this.begin(i,a,f):void 0,m=!1,v=c();if(v&&"function"==typeof v.then)return m=!0,new Promise((l,h)=>{v.then(function(){var s=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(g){b&&(yield b.end()),l(g)});return function(g){return s.apply(this,arguments)}}(),function(){var s=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(g){b&&(yield b.end()),h(g)});return function(g){return s.apply(this,arguments)}}())});if(!m&&b){let l=b.end();if(l&&"function"==typeof l.then)return new Promise((h,s)=>{l.then(()=>{h(v)},g=>{s(g)})})}return v}begin(i,a,c){var f=this;if(!this._started)throw new Error("profiler is not started yet");if(void 0===c){let b=bn();return this.flush(b),new gn(i,a,b,m=>this.endSync(m))}{let b=c.beginTimer();return new gn(i,a,0,function(){var m=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(v){return f.end(v)});return function(v){return m.apply(this,arguments)}}(),b,c)}}end(i){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){let c=yield i.checkTimer();a._timingEvents.length<a._maxNumberEvents&&(a._timingEvents.push(new yn(i.category,i.name,i.startTime,c)),a.flush(c))})()}endSync(i){let a=bn();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new yn(i.category,i.name,i.startTime,a)),this.flush(a))}logOneEvent(i){tt.verbose(`Profiler.${i.category}`,`${(i.endTime-i.startTime).toFixed(2)}ms on event '${i.name}' at ${i.endTime.toFixed(2)}`)}flush(i){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||i-this._flushTime>=this._flushIntervalInMilliseconds){for(let a=this._flushPointer;this._flushPointer<a+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=bn()}}get started(){return this._started}},bn=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function ks(i,a,c){for(let f of c){let m=f[1],v=f[2],l=f[3],h=f[4];if(i.opType===f[0])for(let s of a)if((s.domain===m||"ai.onnx"===s.domain&&""===m)&&rh(s.version,v))return{opImpl:l,opInit:h}}throw new TypeError(`cannot resolve operator '${i.opType}' with opsets: ${a.map(f=>`${f.domain||"ai.onnx"} v${f.version}`).join(", ")}`)}function rh(i,a){if(a.endsWith("+")){let c=Number.parseInt(a.substring(0,a.length-1),10);return!isNaN(c)&&c<=i}if(2===a.split("-").length){let c=a.split("-"),f=Number.parseInt(c[0],10),b=Number.parseInt(c[1],10);return!isNaN(f)&&!isNaN(b)&&f<=i&&i<=b}return Number.parseInt(a,10)===i}var Bs=O(()=>{}),Fs=mt(i=>{i.__esModule=!0;var a=function(){function c(f){if(!f)throw new TypeError("Invalid argument; `value` has no value.");this.value=c.EMPTY,f&&c.isGuid(f)&&(this.value=f)}return c.isGuid=function(f){var b=f.toString();return f&&(f instanceof c||c.validator.test(b))},c.create=function(){return new c([c.gen(2),c.gen(1),c.gen(1),c.gen(1),c.gen(3)].join("-"))},c.createEmpty=function(){return new c("emptyguid")},c.parse=function(f){return new c(f)},c.raw=function(){return[c.gen(2),c.gen(1),c.gen(1),c.gen(1),c.gen(3)].join("-")},c.gen=function(f){for(var b="",m=0;m<f;m++)b+=(65536*(1+Math.random())|0).toString(16).substring(1);return b},c.prototype.equals=function(f){return c.isGuid(f)&&this.value===f.toString()},c.prototype.isEmpty=function(){return this.value===c.EMPTY},c.prototype.toString=function(){return this.value},c.prototype.toJSON=function(){return{value:this.value}},c.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),c.EMPTY="00000000-0000-0000-0000-000000000000",c}();i.Guid=a});function rt(i,a,c){this.low=0|i,this.high=0|a,this.unsigned=!!c}function Et(i){return!0===(i&&i.__isLong__)}function Cs(i){var a=Math.clz32(i&-i);return i?31-a:a}function Ne(i,a){var c,f,b;return a?(b=0<=(i>>>=0)&&i<256)&&(f=Rs[i])?f:(c=J(i,0,!0),b&&(Rs[i]=c),c):(b=-128<=(i|=0)&&i<128)&&(f=Ns[i])?f:(c=J(i,i<0?-1:0,!1),b&&(Ns[i]=c),c)}function zt(i,a){if(isNaN(i))return a?ye:Zt;if(a){if(i<0)return ye;if(i>=Vs)return Hs}else{if(i<=-Ms)return Ct;if(i+1>=Ms)return Ws}return i<0?zt(-i,a).neg():J(i%ir|0,i/ir|0,a)}function J(i,a,c){return new rt(i,a,c)}function Ho(i,a,c){if(0===i.length)throw Error("empty string");if("number"==typeof a?(c=a,a=!1):a=!!a,"NaN"===i||"Infinity"===i||"+Infinity"===i||"-Infinity"===i)return a?ye:Zt;if((c=c||10)<2||36<c)throw RangeError("radix");var f;if((f=i.indexOf("-"))>0)throw Error("interior hyphen");if(0===f)return Ho(i.substring(1),a,c).neg();for(var b=zt(Tn(c,8)),m=Zt,v=0;v<i.length;v+=8){var l=Math.min(8,i.length-v),h=parseInt(i.substring(v,v+l),c);if(l<8){var s=zt(Tn(c,l));m=m.mul(s).add(zt(h))}else m=(m=m.mul(b)).add(zt(h))}return m.unsigned=a,m}function Qt(i,a){return"number"==typeof i?zt(i,a):"string"==typeof i?Ho(i,a):J(i.low,i.high,"boolean"==typeof a?a:i.unsigned)}var Vt,Ns,Rs,Tn,Gs,oh,ir,Vs,Ms,Us,Zt,ye,or,zs,Wo,Ws,Hs,Ct,D,xe,qo=O(()=>{Vt=null;try{Vt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}Object.defineProperty(rt.prototype,"__isLong__",{value:!0}),rt.isLong=Et,Ns={},Rs={},rt.fromInt=Ne,rt.fromNumber=zt,rt.fromBits=J,Tn=Math.pow,rt.fromString=Ho,rt.fromValue=Qt,Ms=(Vs=(ir=(Gs=65536)*Gs)*ir)/2,Us=Ne(oh=1<<24),Zt=Ne(0),rt.ZERO=Zt,ye=Ne(0,!0),rt.UZERO=ye,or=Ne(1),rt.ONE=or,zs=Ne(1,!0),rt.UONE=zs,Wo=Ne(-1),rt.NEG_ONE=Wo,Ws=J(-1,2147483647,!1),rt.MAX_VALUE=Ws,Hs=J(-1,-1,!0),rt.MAX_UNSIGNED_VALUE=Hs,Ct=J(0,-2147483648,!1),rt.MIN_VALUE=Ct,(D=rt.prototype).toInt=function(){return this.unsigned?this.low>>>0:this.low},D.toNumber=function(){return this.unsigned?(this.high>>>0)*ir+(this.low>>>0):this.high*ir+(this.low>>>0)},D.toString=function(i){if((i=i||10)<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Ct)){var a=zt(i),c=this.div(a),f=c.mul(a).sub(this);return c.toString(i)+f.toInt().toString(i)}return"-"+this.neg().toString(i)}for(var b=zt(Tn(i,6),this.unsigned),m=this,v="";;){var l=m.div(b),s=(m.sub(l.mul(b)).toInt()>>>0).toString(i);if((m=l).isZero())return s+v;for(;s.length<6;)s="0"+s;v=""+s+v}},D.getHighBits=function(){return this.high},D.getHighBitsUnsigned=function(){return this.high>>>0},D.getLowBits=function(){return this.low},D.getLowBitsUnsigned=function(){return this.low>>>0},D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ct)?64:this.neg().getNumBitsAbs();for(var i=0!=this.high?this.high:this.low,a=31;a>0&&!(i&1<<a);a--);return 0!=this.high?a+33:a+1},D.isZero=function(){return 0===this.high&&0===this.low},D.eqz=D.isZero,D.isNegative=function(){return!this.unsigned&&this.high<0},D.isPositive=function(){return this.unsigned||this.high>=0},D.isOdd=function(){return!(1&~this.low)},D.isEven=function(){return!(1&this.low)},D.equals=function(i){return Et(i)||(i=Qt(i)),(this.unsigned===i.unsigned||this.high>>>31!=1||i.high>>>31!=1)&&this.high===i.high&&this.low===i.low},D.eq=D.equals,D.notEquals=function(i){return!this.eq(i)},D.neq=D.notEquals,D.ne=D.notEquals,D.lessThan=function(i){return this.comp(i)<0},D.lt=D.lessThan,D.lessThanOrEqual=function(i){return this.comp(i)<=0},D.lte=D.lessThanOrEqual,D.le=D.lessThanOrEqual,D.greaterThan=function(i){return this.comp(i)>0},D.gt=D.greaterThan,D.greaterThanOrEqual=function(i){return this.comp(i)>=0},D.gte=D.greaterThanOrEqual,D.ge=D.greaterThanOrEqual,D.compare=function(i){if(Et(i)||(i=Qt(i)),this.eq(i))return 0;var a=this.isNegative(),c=i.isNegative();return a&&!c?-1:!a&&c?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1},D.comp=D.compare,D.negate=function(){return!this.unsigned&&this.eq(Ct)?Ct:this.not().add(or)},D.neg=D.negate,D.add=function(i){Et(i)||(i=Qt(i));var s=0,g=0,p=0,T=0;return p+=(T+=(65535&this.low)+(65535&i.low))>>>16,g+=(p+=(this.low>>>16)+(i.low>>>16))>>>16,s+=(g+=(65535&this.high)+(65535&i.high))>>>16,s+=(this.high>>>16)+(i.high>>>16),J((p&=65535)<<16|(T&=65535),(s&=65535)<<16|(g&=65535),this.unsigned)},D.subtract=function(i){return Et(i)||(i=Qt(i)),this.add(i.neg())},D.sub=D.subtract,D.multiply=function(i){if(this.isZero())return this;if(Et(i)||(i=Qt(i)),Vt)return J(Vt.mul(this.low,this.high,i.low,i.high),Vt.get_high(),this.unsigned);if(i.isZero())return this.unsigned?ye:Zt;if(this.eq(Ct))return i.isOdd()?Ct:Zt;if(i.eq(Ct))return this.isOdd()?Ct:Zt;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(Us)&&i.lt(Us))return zt(this.toNumber()*i.toNumber(),this.unsigned);var f=65535&this.high,b=this.low>>>16,m=65535&this.low,l=65535&i.high,h=i.low>>>16,s=65535&i.low,g=0,p=0,T=0,I=0;return T+=(I+=m*s)>>>16,p+=(T+=b*s)>>>16,T&=65535,p+=(T+=m*h)>>>16,g+=(p+=f*s)>>>16,p&=65535,g+=(p+=b*h)>>>16,p&=65535,g+=(p+=m*l)>>>16,g+=(this.high>>>16)*s+f*h+b*l+m*(i.high>>>16),J((T&=65535)<<16|(I&=65535),(g&=65535)<<16|(p&=65535),this.unsigned)},D.mul=D.multiply,D.divide=function(i){if(Et(i)||(i=Qt(i)),i.isZero())throw Error("division by zero");var c,f,b;if(Vt)return this.unsigned||-2147483648!==this.high||-1!==i.low||-1!==i.high?J((this.unsigned?Vt.div_u:Vt.div_s)(this.low,this.high,i.low,i.high),Vt.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?ye:Zt;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return ye;if(i.gt(this.shru(1)))return zs;b=ye}else{if(this.eq(Ct))return i.eq(or)||i.eq(Wo)?Ct:i.eq(Ct)?or:(c=this.shr(1).div(i).shl(1)).eq(Zt)?i.isNegative()?or:Wo:(f=this.sub(i.mul(c)),b=c.add(f.div(i)));if(i.eq(Ct))return this.unsigned?ye:Zt;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();b=Zt}for(f=this;f.gte(i);){c=Math.max(1,Math.floor(f.toNumber()/i.toNumber()));for(var v=Math.ceil(Math.log(c)/Math.LN2),l=v<=48?1:Tn(2,v-48),h=zt(c),s=h.mul(i);s.isNegative()||s.gt(f);)s=(h=zt(c-=l,this.unsigned)).mul(i);h.isZero()&&(h=or),b=b.add(h),f=f.sub(s)}return b},D.div=D.divide,D.modulo=function(i){return Et(i)||(i=Qt(i)),Vt?J((this.unsigned?Vt.rem_u:Vt.rem_s)(this.low,this.high,i.low,i.high),Vt.get_high(),this.unsigned):this.sub(this.div(i).mul(i))},D.mod=D.modulo,D.rem=D.modulo,D.not=function(){return J(~this.low,~this.high,this.unsigned)},D.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},D.clz=D.countLeadingZeros,D.countTrailingZeros=function(){return this.low?Cs(this.low):Cs(this.high)+32},D.ctz=D.countTrailingZeros,D.and=function(i){return Et(i)||(i=Qt(i)),J(this.low&i.low,this.high&i.high,this.unsigned)},D.or=function(i){return Et(i)||(i=Qt(i)),J(this.low|i.low,this.high|i.high,this.unsigned)},D.xor=function(i){return Et(i)||(i=Qt(i)),J(this.low^i.low,this.high^i.high,this.unsigned)},D.shiftLeft=function(i){return Et(i)&&(i=i.toInt()),0==(i&=63)?this:i<32?J(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):J(0,this.low<<i-32,this.unsigned)},D.shl=D.shiftLeft,D.shiftRight=function(i){return Et(i)&&(i=i.toInt()),0==(i&=63)?this:i<32?J(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):J(this.high>>i-32,this.high>=0?0:-1,this.unsigned)},D.shr=D.shiftRight,D.shiftRightUnsigned=function(i){return Et(i)&&(i=i.toInt()),0==(i&=63)?this:i<32?J(this.low>>>i|this.high<<32-i,this.high>>>i,this.unsigned):J(32===i?this.high:this.high>>>i-32,0,this.unsigned)},D.shru=D.shiftRightUnsigned,D.shr_u=D.shiftRightUnsigned,D.rotateLeft=function(i){var a;return Et(i)&&(i=i.toInt()),0==(i&=63)?this:32===i?J(this.high,this.low,this.unsigned):i<32?J(this.low<<i|this.high>>>(a=32-i),this.high<<i|this.low>>>a,this.unsigned):J(this.high<<(i-=32)|this.low>>>(a=32-i),this.low<<i|this.high>>>a,this.unsigned)},D.rotl=D.rotateLeft,D.rotateRight=function(i){var a;return Et(i)&&(i=i.toInt()),0==(i&=63)?this:32===i?J(this.high,this.low,this.unsigned):i<32?J(this.high<<(a=32-i)|this.low>>>i,this.low<<a|this.high>>>i,this.unsigned):J(this.low<<(a=32-(i-=32))|this.high>>>i,this.high<<a|this.low>>>i,this.unsigned)},D.rotr=D.rotateRight,D.toSigned=function(){return this.unsigned?J(this.low,this.high,!1):this},D.toUnsigned=function(){return this.unsigned?this:J(this.low,this.high,!0)},D.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()},D.toBytesLE=function(){var i=this.high,a=this.low;return[255&a,a>>>8&255,a>>>16&255,a>>>24,255&i,i>>>8&255,i>>>16&255,i>>>24]},D.toBytesBE=function(){var i=this.high,a=this.low;return[i>>>24,i>>>16&255,i>>>8&255,255&i,a>>>24,a>>>16&255,a>>>8&255,255&a]},rt.fromBytes=function(i,a,c){return c?rt.fromBytesLE(i,a):rt.fromBytesBE(i,a)},rt.fromBytesLE=function(i,a){return new rt(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,a)},rt.fromBytesBE=function(i,a){return new rt(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],a)},xe=rt}),w,wn=O(()=>{(w={}).SIZEOF_SHORT=2,w.SIZEOF_INT=4,w.FILE_IDENTIFIER_LENGTH=4,w.SIZE_PREFIX_LENGTH=4,w.Encoding={UTF8_BYTES:1,UTF16_STRING:2},w.int32=new Int32Array(2),w.float32=new Float32Array(w.int32.buffer),w.float64=new Float64Array(w.int32.buffer),w.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],w.Long=function(i,a){this.low=0|i,this.high=0|a},w.Long.create=function(i,a){return 0==i&&0==a?w.Long.ZERO:new w.Long(i,a)},w.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},w.Long.prototype.equals=function(i){return this.low==i.low&&this.high==i.high},w.Long.ZERO=new w.Long(0,0),w.Builder=function(i){if(i)var a=i;else a=1024;this.bb=w.ByteBuffer.allocate(a),this.space=a,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},w.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},w.Builder.prototype.forceDefaults=function(i){this.force_defaults=i},w.Builder.prototype.dataBuffer=function(){return this.bb},w.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},w.Builder.prototype.prep=function(i,a){i>this.minalign&&(this.minalign=i);for(var c=1+~(this.bb.capacity()-this.space+a)&i-1;this.space<c+i+a;){var f=this.bb.capacity();this.bb=w.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-f}this.pad(c)},w.Builder.prototype.pad=function(i){for(var a=0;a<i;a++)this.bb.writeInt8(--this.space,0)},w.Builder.prototype.writeInt8=function(i){this.bb.writeInt8(this.space-=1,i)},w.Builder.prototype.writeInt16=function(i){this.bb.writeInt16(this.space-=2,i)},w.Builder.prototype.writeInt32=function(i){this.bb.writeInt32(this.space-=4,i)},w.Builder.prototype.writeInt64=function(i){this.bb.writeInt64(this.space-=8,i)},w.Builder.prototype.writeFloat32=function(i){this.bb.writeFloat32(this.space-=4,i)},w.Builder.prototype.writeFloat64=function(i){this.bb.writeFloat64(this.space-=8,i)},w.Builder.prototype.addInt8=function(i){this.prep(1,0),this.writeInt8(i)},w.Builder.prototype.addInt16=function(i){this.prep(2,0),this.writeInt16(i)},w.Builder.prototype.addInt32=function(i){this.prep(4,0),this.writeInt32(i)},w.Builder.prototype.addInt64=function(i){this.prep(8,0),this.writeInt64(i)},w.Builder.prototype.addFloat32=function(i){this.prep(4,0),this.writeFloat32(i)},w.Builder.prototype.addFloat64=function(i){this.prep(8,0),this.writeFloat64(i)},w.Builder.prototype.addFieldInt8=function(i,a,c){(this.force_defaults||a!=c)&&(this.addInt8(a),this.slot(i))},w.Builder.prototype.addFieldInt16=function(i,a,c){(this.force_defaults||a!=c)&&(this.addInt16(a),this.slot(i))},w.Builder.prototype.addFieldInt32=function(i,a,c){(this.force_defaults||a!=c)&&(this.addInt32(a),this.slot(i))},w.Builder.prototype.addFieldInt64=function(i,a,c){(this.force_defaults||!a.equals(c))&&(this.addInt64(a),this.slot(i))},w.Builder.prototype.addFieldFloat32=function(i,a,c){(this.force_defaults||a!=c)&&(this.addFloat32(a),this.slot(i))},w.Builder.prototype.addFieldFloat64=function(i,a,c){(this.force_defaults||a!=c)&&(this.addFloat64(a),this.slot(i))},w.Builder.prototype.addFieldOffset=function(i,a,c){(this.force_defaults||a!=c)&&(this.addOffset(a),this.slot(i))},w.Builder.prototype.addFieldStruct=function(i,a,c){a!=c&&(this.nested(a),this.slot(i))},w.Builder.prototype.nested=function(i){if(i!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},w.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},w.Builder.prototype.slot=function(i){this.vtable[i]=this.offset()},w.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},w.Builder.growByteBuffer=function(i){var a=i.capacity();if(3221225472&a)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var c=a<<1,f=w.ByteBuffer.allocate(c);return f.setPosition(c-a),f.bytes().set(i.bytes(),c-a),f},w.Builder.prototype.addOffset=function(i){this.prep(w.SIZEOF_INT,0),this.writeInt32(this.offset()-i+w.SIZEOF_INT)},w.Builder.prototype.startObject=function(i){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=i;for(var a=0;a<i;a++)this.vtable[a]=0;this.isNested=!0,this.object_start=this.offset()},w.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var i=this.offset(),a=this.vtable_in_use-1;a>=0&&0==this.vtable[a];a--);for(var c=a+1;a>=0;a--)this.addInt16(0!=this.vtable[a]?i-this.vtable[a]:0);this.addInt16(i-this.object_start);var b=(c+2)*w.SIZEOF_SHORT;this.addInt16(b);var m=0,v=this.space;e:for(a=0;a<this.vtables.length;a++){var l=this.bb.capacity()-this.vtables[a];if(b==this.bb.readInt16(l)){for(var h=w.SIZEOF_SHORT;h<b;h+=w.SIZEOF_SHORT)if(this.bb.readInt16(v+h)!=this.bb.readInt16(l+h))continue e;m=this.vtables[a];break}}return m?(this.space=this.bb.capacity()-i,this.bb.writeInt32(this.space,m-i)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-i,this.offset()-i)),this.isNested=!1,i},w.Builder.prototype.finish=function(i,a,c){var f=c?w.SIZE_PREFIX_LENGTH:0;if(a){var b=a;if(this.prep(this.minalign,w.SIZEOF_INT+w.FILE_IDENTIFIER_LENGTH+f),b.length!=w.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+w.FILE_IDENTIFIER_LENGTH);for(var m=w.FILE_IDENTIFIER_LENGTH-1;m>=0;m--)this.writeInt8(b.charCodeAt(m))}this.prep(this.minalign,w.SIZEOF_INT+f),this.addOffset(i),f&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},w.Builder.prototype.finishSizePrefixed=function(i,a){this.finish(i,a,!0)},w.Builder.prototype.requiredField=function(i,a){var c=this.bb.capacity()-i,f=c-this.bb.readInt32(c);if(0==this.bb.readInt16(f+a))throw new Error("FlatBuffers: field "+a+" must be set")},w.Builder.prototype.startVector=function(i,a,c){this.notNested(),this.vector_num_elems=a,this.prep(w.SIZEOF_INT,i*a),this.prep(c,i*a)},w.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},w.Builder.prototype.createString=function(i){if(i instanceof Uint8Array)var a=i;else{a=[];for(var c=0;c<i.length;){var f,b=i.charCodeAt(c++);(f=b<55296||b>=56320?b:(b<<10)+i.charCodeAt(c++)+-56613888)<128?a.push(f):(f<2048?a.push(f>>6&31|192):(f<65536?a.push(f>>12&15|224):a.push(f>>18&7|240,f>>12&63|128),a.push(f>>6&63|128)),a.push(63&f|128))}}this.addInt8(0),this.startVector(1,a.length,1),this.bb.setPosition(this.space-=a.length),c=0;for(var v=this.space,l=this.bb.bytes();c<a.length;c++)l[v++]=a[c];return this.endVector()},w.Builder.prototype.createLong=function(i,a){return w.Long.create(i,a)},w.ByteBuffer=function(i){this.bytes_=i,this.position_=0},w.ByteBuffer.allocate=function(i){return new w.ByteBuffer(new Uint8Array(i))},w.ByteBuffer.prototype.clear=function(){this.position_=0},w.ByteBuffer.prototype.bytes=function(){return this.bytes_},w.ByteBuffer.prototype.position=function(){return this.position_},w.ByteBuffer.prototype.setPosition=function(i){this.position_=i},w.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},w.ByteBuffer.prototype.readInt8=function(i){return this.readUint8(i)<<24>>24},w.ByteBuffer.prototype.readUint8=function(i){return this.bytes_[i]},w.ByteBuffer.prototype.readInt16=function(i){return this.readUint16(i)<<16>>16},w.ByteBuffer.prototype.readUint16=function(i){return this.bytes_[i]|this.bytes_[i+1]<<8},w.ByteBuffer.prototype.readInt32=function(i){return this.bytes_[i]|this.bytes_[i+1]<<8|this.bytes_[i+2]<<16|this.bytes_[i+3]<<24},w.ByteBuffer.prototype.readUint32=function(i){return this.readInt32(i)>>>0},w.ByteBuffer.prototype.readInt64=function(i){return new w.Long(this.readInt32(i),this.readInt32(i+4))},w.ByteBuffer.prototype.readUint64=function(i){return new w.Long(this.readUint32(i),this.readUint32(i+4))},w.ByteBuffer.prototype.readFloat32=function(i){return w.int32[0]=this.readInt32(i),w.float32[0]},w.ByteBuffer.prototype.readFloat64=function(i){return w.int32[w.isLittleEndian?0:1]=this.readInt32(i),w.int32[w.isLittleEndian?1:0]=this.readInt32(i+4),w.float64[0]},w.ByteBuffer.prototype.writeInt8=function(i,a){this.bytes_[i]=a},w.ByteBuffer.prototype.writeUint8=function(i,a){this.bytes_[i]=a},w.ByteBuffer.prototype.writeInt16=function(i,a){this.bytes_[i]=a,this.bytes_[i+1]=a>>8},w.ByteBuffer.prototype.writeUint16=function(i,a){this.bytes_[i]=a,this.bytes_[i+1]=a>>8},w.ByteBuffer.prototype.writeInt32=function(i,a){this.bytes_[i]=a,this.bytes_[i+1]=a>>8,this.bytes_[i+2]=a>>16,this.bytes_[i+3]=a>>24},w.ByteBuffer.prototype.writeUint32=function(i,a){this.bytes_[i]=a,this.bytes_[i+1]=a>>8,this.bytes_[i+2]=a>>16,this.bytes_[i+3]=a>>24},w.ByteBuffer.prototype.writeInt64=function(i,a){this.writeInt32(i,a.low),this.writeInt32(i+4,a.high)},w.ByteBuffer.prototype.writeUint64=function(i,a){this.writeUint32(i,a.low),this.writeUint32(i+4,a.high)},w.ByteBuffer.prototype.writeFloat32=function(i,a){w.float32[0]=a,this.writeInt32(i,w.int32[0])},w.ByteBuffer.prototype.writeFloat64=function(i,a){w.float64[0]=a,this.writeInt32(i,w.int32[w.isLittleEndian?0:1]),this.writeInt32(i+4,w.int32[w.isLittleEndian?1:0])},w.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+w.SIZEOF_INT+w.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var i="",a=0;a<w.FILE_IDENTIFIER_LENGTH;a++)i+=String.fromCharCode(this.readInt8(this.position_+w.SIZEOF_INT+a));return i},w.ByteBuffer.prototype.__offset=function(i,a){var c=i-this.readInt32(i);return a<this.readInt16(c)?this.readInt16(c+a):0},w.ByteBuffer.prototype.__union=function(i,a){return i.bb_pos=a+this.readInt32(a),i.bb=this,i},w.ByteBuffer.prototype.__string=function(i,a){i+=this.readInt32(i);var c=this.readInt32(i),f="",b=0;if(i+=w.SIZEOF_INT,a===w.Encoding.UTF8_BYTES)return this.bytes_.subarray(i,i+c);for(;b<c;){var m,v=this.readUint8(i+b++);if(v<192)m=v;else{var l=this.readUint8(i+b++);if(v<224)m=(31&v)<<6|63&l;else{var h=this.readUint8(i+b++);m=v<240?(15&v)<<12|(63&l)<<6|63&h:(7&v)<<18|(63&l)<<12|(63&h)<<6|63&this.readUint8(i+b++)}}m<65536?f+=String.fromCharCode(m):(m-=65536,f+=String.fromCharCode(55296+(m>>10),56320+(1023&m)))}return f},w.ByteBuffer.prototype.__indirect=function(i){return i+this.readInt32(i)},w.ByteBuffer.prototype.__vector=function(i){return i+this.readInt32(i)+w.SIZEOF_INT},w.ByteBuffer.prototype.__vector_len=function(i){return this.readInt32(i+this.readInt32(i))},w.ByteBuffer.prototype.__has_identifier=function(i){if(i.length!=w.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+w.FILE_IDENTIFIER_LENGTH);for(var a=0;a<w.FILE_IDENTIFIER_LENGTH;a++)if(i.charCodeAt(a)!=this.readInt8(this.position_+w.SIZEOF_INT+a))return!1;return!0},w.ByteBuffer.prototype.createLong=function(i,a){return w.Long.create(i,a)}}),F,Pr=O(()=>{wn(),(i=>{let a;(c=>{let f;(b=>{let m;var v;(v=m=b.AttributeType||={})[v.UNDEFINED=0]="UNDEFINED",v[v.FLOAT=1]="FLOAT",v[v.INT=2]="INT",v[v.STRING=3]="STRING",v[v.TENSOR=4]="TENSOR",v[v.GRAPH=5]="GRAPH",v[v.FLOATS=6]="FLOATS",v[v.INTS=7]="INTS",v[v.STRINGS=8]="STRINGS",v[v.TENSORS=9]="TENSORS",v[v.GRAPHS=10]="GRAPHS",v[v.SPARSE_TENSOR=11]="SPARSE_TENSOR",v[v.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{let m;var v;(v=m=b.DimensionValueType||={})[v.UNKNOWN=0]="UNKNOWN",v[v.VALUE=1]="VALUE",v[v.PARAM=2]="PARAM"})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{let m;var v;(v=m=b.TensorDataType||={})[v.UNDEFINED=0]="UNDEFINED",v[v.FLOAT=1]="FLOAT",v[v.UINT8=2]="UINT8",v[v.INT8=3]="INT8",v[v.UINT16=4]="UINT16",v[v.INT16=5]="INT16",v[v.INT32=6]="INT32",v[v.INT64=7]="INT64",v[v.STRING=8]="STRING",v[v.BOOL=9]="BOOL",v[v.FLOAT16=10]="FLOAT16",v[v.DOUBLE=11]="DOUBLE",v[v.UINT32=12]="UINT32",v[v.UINT64=13]="UINT64",v[v.COMPLEX64=14]="COMPLEX64",v[v.COMPLEX128=15]="COMPLEX128",v[v.BFLOAT16=16]="BFLOAT16",v[v.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",v[v.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",v[v.FLOAT8E5M2=19]="FLOAT8E5M2",v[v.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{let m;var v;(v=m=b.NodeType||={})[v.Primitive=0]="Primitive",v[v.Fused=1]="Fused"})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{let m;var v;(v=m=b.TypeInfoValue||={})[v.NONE=0]="NONE",v[v.tensor_type=1]="tensor_type",v[v.sequence_type=2]="sequence_type",v[v.map_type=3]="map_type"})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsShape(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsShape(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}dim(l,h){let s=this.bb.__offset(this.bb_pos,4);return s?(h||new i.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*l),this.bb):null}dimLength(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__vector_len(this.bb_pos+l):0}static startShape(l){l.startObject(1)}static addDim(l,h){l.addFieldOffset(0,h,0)}static createDimVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startDimVector(l,h){l.startVector(4,h,4)}static endShape(l){return l.endObject()}static createShape(l,h){return m.startShape(l),m.addDim(l,h),m.endShape(l)}}b.Shape=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsDimension(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsDimension(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}value(l){let h=this.bb.__offset(this.bb_pos,4);return h?(l||new i.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}denotation(l){let h=this.bb.__offset(this.bb_pos,6);return h?this.bb.__string(this.bb_pos+h,l):null}static startDimension(l){l.startObject(2)}static addValue(l,h){l.addFieldOffset(0,h,0)}static addDenotation(l,h){l.addFieldOffset(1,h,0)}static endDimension(l){return l.endObject()}static createDimension(l,h,s){return m.startDimension(l),m.addValue(l,h),m.addDenotation(l,s),m.endDimension(l)}}b.Dimension=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsDimensionValue(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsDimensionValue(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}dimType(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readInt8(this.bb_pos+l):0}dimValue(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readInt64(this.bb_pos+l):this.bb.createLong(0,0)}dimParam(l){let h=this.bb.__offset(this.bb_pos,8);return h?this.bb.__string(this.bb_pos+h,l):null}static startDimensionValue(l){l.startObject(3)}static addDimType(l,h){l.addFieldInt8(0,h,0)}static addDimValue(l,h){l.addFieldInt64(1,h,l.createLong(0,0))}static addDimParam(l,h){l.addFieldOffset(2,h,0)}static endDimensionValue(l){return l.endObject()}static createDimensionValue(l,h,s,g){return m.startDimensionValue(l),m.addDimType(l,h),m.addDimValue(l,s),m.addDimParam(l,g),m.endDimensionValue(l)}}b.DimensionValue=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsTensorTypeAndShape(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsTensorTypeAndShape(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}elemType(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readInt32(this.bb_pos+l):0}shape(l){let h=this.bb.__offset(this.bb_pos,6);return h?(l||new i.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}static startTensorTypeAndShape(l){l.startObject(2)}static addElemType(l,h){l.addFieldInt32(0,h,0)}static addShape(l,h){l.addFieldOffset(1,h,0)}static endTensorTypeAndShape(l){return l.endObject()}static createTensorTypeAndShape(l,h,s){return m.startTensorTypeAndShape(l),m.addElemType(l,h),m.addShape(l,s),m.endTensorTypeAndShape(l)}}b.TensorTypeAndShape=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsMapType(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsMapType(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}keyType(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readInt32(this.bb_pos+l):0}valueType(l){let h=this.bb.__offset(this.bb_pos,6);return h?(l||new i.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}static startMapType(l){l.startObject(2)}static addKeyType(l,h){l.addFieldInt32(0,h,0)}static addValueType(l,h){l.addFieldOffset(1,h,0)}static endMapType(l){return l.endObject()}static createMapType(l,h,s){return m.startMapType(l),m.addKeyType(l,h),m.addValueType(l,s),m.endMapType(l)}}b.MapType=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsSequenceType(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsSequenceType(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}elemType(l){let h=this.bb.__offset(this.bb_pos,4);return h?(l||new i.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}static startSequenceType(l){l.startObject(1)}static addElemType(l,h){l.addFieldOffset(0,h,0)}static endSequenceType(l){return l.endObject()}static createSequenceType(l,h){return m.startSequenceType(l),m.addElemType(l,h),m.endSequenceType(l)}}b.SequenceType=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(f=c.fbs||={}).EdgeEnd=class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(l,h,s,g){return l.prep(4,12),l.writeInt32(g),l.writeInt32(s),l.writeInt32(h),l.offset()}}})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsNodeEdge(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsNodeEdge(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}nodeIndex(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readUint32(this.bb_pos+l):0}inputEdges(l,h){let s=this.bb.__offset(this.bb_pos,6);return s?(h||new i.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+s)+12*l,this.bb):null}inputEdgesLength(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__vector_len(this.bb_pos+l):0}outputEdges(l,h){let s=this.bb.__offset(this.bb_pos,8);return s?(h||new i.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+s)+12*l,this.bb):null}outputEdgesLength(){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__vector_len(this.bb_pos+l):0}static startNodeEdge(l){l.startObject(3)}static addNodeIndex(l,h){l.addFieldInt32(0,h,0)}static addInputEdges(l,h){l.addFieldOffset(1,h,0)}static startInputEdgesVector(l,h){l.startVector(12,h,4)}static addOutputEdges(l,h){l.addFieldOffset(2,h,0)}static startOutputEdgesVector(l,h){l.startVector(12,h,4)}static endNodeEdge(l){return l.endObject()}static createNodeEdge(l,h,s,g){return m.startNodeEdge(l),m.addNodeIndex(l,h),m.addInputEdges(l,s),m.addOutputEdges(l,g),m.endNodeEdge(l)}}b.NodeEdge=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsNode(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsNode(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}name(l){let h=this.bb.__offset(this.bb_pos,4);return h?this.bb.__string(this.bb_pos+h,l):null}docString(l){let h=this.bb.__offset(this.bb_pos,6);return h?this.bb.__string(this.bb_pos+h,l):null}domain(l){let h=this.bb.__offset(this.bb_pos,8);return h?this.bb.__string(this.bb_pos+h,l):null}sinceVersion(){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.readInt32(this.bb_pos+l):0}index(){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readUint32(this.bb_pos+l):0}opType(l){let h=this.bb.__offset(this.bb_pos,14);return h?this.bb.__string(this.bb_pos+h,l):null}type(){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.readInt32(this.bb_pos+l):0}executionProviderType(l){let h=this.bb.__offset(this.bb_pos,18);return h?this.bb.__string(this.bb_pos+h,l):null}inputs(l,h){let s=this.bb.__offset(this.bb_pos,20);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+4*l,h):null}inputsLength(){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__vector_len(this.bb_pos+l):0}outputs(l,h){let s=this.bb.__offset(this.bb_pos,22);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+4*l,h):null}outputsLength(){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.__vector_len(this.bb_pos+l):0}attributes(l,h){let s=this.bb.__offset(this.bb_pos,24);return s?(h||new i.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*l),this.bb):null}attributesLength(){let l=this.bb.__offset(this.bb_pos,24);return l?this.bb.__vector_len(this.bb_pos+l):0}inputArgCounts(l){let h=this.bb.__offset(this.bb_pos,26);return h?this.bb.readInt32(this.bb.__vector(this.bb_pos+h)+4*l):0}inputArgCountsLength(){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.__vector_len(this.bb_pos+l):0}inputArgCountsArray(){let l=this.bb.__offset(this.bb_pos,26);return l?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+l),this.bb.__vector_len(this.bb_pos+l)):null}implicitInputs(l,h){let s=this.bb.__offset(this.bb_pos,28);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+4*l,h):null}implicitInputsLength(){let l=this.bb.__offset(this.bb_pos,28);return l?this.bb.__vector_len(this.bb_pos+l):0}static startNode(l){l.startObject(13)}static addName(l,h){l.addFieldOffset(0,h,0)}static addDocString(l,h){l.addFieldOffset(1,h,0)}static addDomain(l,h){l.addFieldOffset(2,h,0)}static addSinceVersion(l,h){l.addFieldInt32(3,h,0)}static addIndex(l,h){l.addFieldInt32(4,h,0)}static addOpType(l,h){l.addFieldOffset(5,h,0)}static addType(l,h){l.addFieldInt32(6,h,0)}static addExecutionProviderType(l,h){l.addFieldOffset(7,h,0)}static addInputs(l,h){l.addFieldOffset(8,h,0)}static createInputsVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startInputsVector(l,h){l.startVector(4,h,4)}static addOutputs(l,h){l.addFieldOffset(9,h,0)}static createOutputsVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startOutputsVector(l,h){l.startVector(4,h,4)}static addAttributes(l,h){l.addFieldOffset(10,h,0)}static createAttributesVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startAttributesVector(l,h){l.startVector(4,h,4)}static addInputArgCounts(l,h){l.addFieldOffset(11,h,0)}static createInputArgCountsVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addInt32(h[s]);return l.endVector()}static startInputArgCountsVector(l,h){l.startVector(4,h,4)}static addImplicitInputs(l,h){l.addFieldOffset(12,h,0)}static createImplicitInputsVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startImplicitInputsVector(l,h){l.startVector(4,h,4)}static endNode(l){return l.endObject()}static createNode(l,h,s,g,p,T,I,N,L,U,se,Z,ie,le){return m.startNode(l),m.addName(l,h),m.addDocString(l,s),m.addDomain(l,g),m.addSinceVersion(l,p),m.addIndex(l,T),m.addOpType(l,I),m.addType(l,N),m.addExecutionProviderType(l,L),m.addInputs(l,U),m.addOutputs(l,se),m.addAttributes(l,Z),m.addInputArgCounts(l,ie),m.addImplicitInputs(l,le),m.endNode(l)}}b.Node=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsValueInfo(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsValueInfo(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}name(l){let h=this.bb.__offset(this.bb_pos,4);return h?this.bb.__string(this.bb_pos+h,l):null}docString(l){let h=this.bb.__offset(this.bb_pos,6);return h?this.bb.__string(this.bb_pos+h,l):null}type(l){let h=this.bb.__offset(this.bb_pos,8);return h?(l||new i.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}static startValueInfo(l){l.startObject(3)}static addName(l,h){l.addFieldOffset(0,h,0)}static addDocString(l,h){l.addFieldOffset(1,h,0)}static addType(l,h){l.addFieldOffset(2,h,0)}static endValueInfo(l){return l.endObject()}static createValueInfo(l,h,s,g){return m.startValueInfo(l),m.addName(l,h),m.addDocString(l,s),m.addType(l,g),m.endValueInfo(l)}}b.ValueInfo=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsTypeInfo(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsTypeInfo(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}denotation(l){let h=this.bb.__offset(this.bb_pos,4);return h?this.bb.__string(this.bb_pos+h,l):null}valueType(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readUint8(this.bb_pos+l):0}value(l){let h=this.bb.__offset(this.bb_pos,8);return h?this.bb.__union(l,this.bb_pos+h):null}static startTypeInfo(l){l.startObject(3)}static addDenotation(l,h){l.addFieldOffset(0,h,0)}static addValueType(l,h){l.addFieldInt8(1,h,0)}static addValue(l,h){l.addFieldOffset(2,h,0)}static endTypeInfo(l){return l.endObject()}static createTypeInfo(l,h,s,g){return m.startTypeInfo(l),m.addDenotation(l,h),m.addValueType(l,s),m.addValue(l,g),m.endTypeInfo(l)}}b.TypeInfo=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsOperatorSetId(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsOperatorSetId(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}domain(l){let h=this.bb.__offset(this.bb_pos,4);return h?this.bb.__string(this.bb_pos+h,l):null}version(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readInt64(this.bb_pos+l):this.bb.createLong(0,0)}static startOperatorSetId(l){l.startObject(2)}static addDomain(l,h){l.addFieldOffset(0,h,0)}static addVersion(l,h){l.addFieldInt64(1,h,l.createLong(0,0))}static endOperatorSetId(l){return l.endObject()}static createOperatorSetId(l,h,s){return m.startOperatorSetId(l),m.addDomain(l,h),m.addVersion(l,s),m.endOperatorSetId(l)}}b.OperatorSetId=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsTensor(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsTensor(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}name(l){let h=this.bb.__offset(this.bb_pos,4);return h?this.bb.__string(this.bb_pos+h,l):null}docString(l){let h=this.bb.__offset(this.bb_pos,6);return h?this.bb.__string(this.bb_pos+h,l):null}dims(l){let h=this.bb.__offset(this.bb_pos,8);return h?this.bb.readInt64(this.bb.__vector(this.bb_pos+h)+8*l):this.bb.createLong(0,0)}dimsLength(){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__vector_len(this.bb_pos+l):0}dataType(){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.readInt32(this.bb_pos+l):0}rawData(l){let h=this.bb.__offset(this.bb_pos,12);return h?this.bb.readUint8(this.bb.__vector(this.bb_pos+h)+l):0}rawDataLength(){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__vector_len(this.bb_pos+l):0}rawDataArray(){let l=this.bb.__offset(this.bb_pos,12);return l?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+l),this.bb.__vector_len(this.bb_pos+l)):null}stringData(l,h){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+4*l,h):null}stringDataLength(){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__vector_len(this.bb_pos+l):0}static startTensor(l){l.startObject(6)}static addName(l,h){l.addFieldOffset(0,h,0)}static addDocString(l,h){l.addFieldOffset(1,h,0)}static addDims(l,h){l.addFieldOffset(2,h,0)}static createDimsVector(l,h){l.startVector(8,h.length,8);for(let s=h.length-1;s>=0;s--)l.addInt64(h[s]);return l.endVector()}static startDimsVector(l,h){l.startVector(8,h,8)}static addDataType(l,h){l.addFieldInt32(3,h,0)}static addRawData(l,h){l.addFieldOffset(4,h,0)}static createRawDataVector(l,h){l.startVector(1,h.length,1);for(let s=h.length-1;s>=0;s--)l.addInt8(h[s]);return l.endVector()}static startRawDataVector(l,h){l.startVector(1,h,1)}static addStringData(l,h){l.addFieldOffset(5,h,0)}static createStringDataVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startStringDataVector(l,h){l.startVector(4,h,4)}static endTensor(l){return l.endObject()}static createTensor(l,h,s,g,p,T,I){return m.startTensor(l),m.addName(l,h),m.addDocString(l,s),m.addDims(l,g),m.addDataType(l,p),m.addRawData(l,T),m.addStringData(l,I),m.endTensor(l)}}b.Tensor=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsSparseTensor(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsSparseTensor(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}values(l){let h=this.bb.__offset(this.bb_pos,4);return h?(l||new i.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}indices(l){let h=this.bb.__offset(this.bb_pos,6);return h?(l||new i.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}dims(l){let h=this.bb.__offset(this.bb_pos,8);return h?this.bb.readInt64(this.bb.__vector(this.bb_pos+h)+8*l):this.bb.createLong(0,0)}dimsLength(){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__vector_len(this.bb_pos+l):0}static startSparseTensor(l){l.startObject(3)}static addValues(l,h){l.addFieldOffset(0,h,0)}static addIndices(l,h){l.addFieldOffset(1,h,0)}static addDims(l,h){l.addFieldOffset(2,h,0)}static createDimsVector(l,h){l.startVector(8,h.length,8);for(let s=h.length-1;s>=0;s--)l.addInt64(h[s]);return l.endVector()}static startDimsVector(l,h){l.startVector(8,h,8)}static endSparseTensor(l){return l.endObject()}static createSparseTensor(l,h,s,g){return m.startSparseTensor(l),m.addValues(l,h),m.addIndices(l,s),m.addDims(l,g),m.endSparseTensor(l)}}b.SparseTensor=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsAttribute(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsAttribute(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}name(l){let h=this.bb.__offset(this.bb_pos,4);return h?this.bb.__string(this.bb_pos+h,l):null}docString(l){let h=this.bb.__offset(this.bb_pos,6);return h?this.bb.__string(this.bb_pos+h,l):null}type(){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt32(this.bb_pos+l):0}f(){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.readFloat32(this.bb_pos+l):0}i(){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readInt64(this.bb_pos+l):this.bb.createLong(0,0)}s(l){let h=this.bb.__offset(this.bb_pos,14);return h?this.bb.__string(this.bb_pos+h,l):null}t(l){let h=this.bb.__offset(this.bb_pos,16);return h?(l||new i.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}g(l){let h=this.bb.__offset(this.bb_pos,18);return h?(l||new i.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}floats(l){let h=this.bb.__offset(this.bb_pos,20);return h?this.bb.readFloat32(this.bb.__vector(this.bb_pos+h)+4*l):0}floatsLength(){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__vector_len(this.bb_pos+l):0}floatsArray(){let l=this.bb.__offset(this.bb_pos,20);return l?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+l),this.bb.__vector_len(this.bb_pos+l)):null}ints(l){let h=this.bb.__offset(this.bb_pos,22);return h?this.bb.readInt64(this.bb.__vector(this.bb_pos+h)+8*l):this.bb.createLong(0,0)}intsLength(){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.__vector_len(this.bb_pos+l):0}strings(l,h){let s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+4*l,h):null}stringsLength(){let l=this.bb.__offset(this.bb_pos,24);return l?this.bb.__vector_len(this.bb_pos+l):0}tensors(l,h){let s=this.bb.__offset(this.bb_pos,26);return s?(h||new i.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*l),this.bb):null}tensorsLength(){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.__vector_len(this.bb_pos+l):0}graphs(l,h){let s=this.bb.__offset(this.bb_pos,28);return s?(h||new i.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*l),this.bb):null}graphsLength(){let l=this.bb.__offset(this.bb_pos,28);return l?this.bb.__vector_len(this.bb_pos+l):0}static startAttribute(l){l.startObject(13)}static addName(l,h){l.addFieldOffset(0,h,0)}static addDocString(l,h){l.addFieldOffset(1,h,0)}static addType(l,h){l.addFieldInt32(2,h,0)}static addF(l,h){l.addFieldFloat32(3,h,0)}static addI(l,h){l.addFieldInt64(4,h,l.createLong(0,0))}static addS(l,h){l.addFieldOffset(5,h,0)}static addT(l,h){l.addFieldOffset(6,h,0)}static addG(l,h){l.addFieldOffset(7,h,0)}static addFloats(l,h){l.addFieldOffset(8,h,0)}static createFloatsVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addFloat32(h[s]);return l.endVector()}static startFloatsVector(l,h){l.startVector(4,h,4)}static addInts(l,h){l.addFieldOffset(9,h,0)}static createIntsVector(l,h){l.startVector(8,h.length,8);for(let s=h.length-1;s>=0;s--)l.addInt64(h[s]);return l.endVector()}static startIntsVector(l,h){l.startVector(8,h,8)}static addStrings(l,h){l.addFieldOffset(10,h,0)}static createStringsVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startStringsVector(l,h){l.startVector(4,h,4)}static addTensors(l,h){l.addFieldOffset(11,h,0)}static createTensorsVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startTensorsVector(l,h){l.startVector(4,h,4)}static addGraphs(l,h){l.addFieldOffset(12,h,0)}static createGraphsVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startGraphsVector(l,h){l.startVector(4,h,4)}static endAttribute(l){return l.endObject()}static createAttribute(l,h,s,g,p,T,I,N,L,U,se,Z,ie,le){return m.startAttribute(l),m.addName(l,h),m.addDocString(l,s),m.addType(l,g),m.addF(l,p),m.addI(l,T),m.addS(l,I),m.addT(l,N),m.addG(l,L),m.addFloats(l,U),m.addInts(l,se),m.addStrings(l,Z),m.addTensors(l,ie),m.addGraphs(l,le),m.endAttribute(l)}}b.Attribute=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsGraph(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsGraph(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}initializers(l,h){let s=this.bb.__offset(this.bb_pos,4);return s?(h||new i.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*l),this.bb):null}initializersLength(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__vector_len(this.bb_pos+l):0}nodeArgs(l,h){let s=this.bb.__offset(this.bb_pos,6);return s?(h||new i.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*l),this.bb):null}nodeArgsLength(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__vector_len(this.bb_pos+l):0}nodes(l,h){let s=this.bb.__offset(this.bb_pos,8);return s?(h||new i.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*l),this.bb):null}nodesLength(){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__vector_len(this.bb_pos+l):0}maxNodeIndex(){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.readUint32(this.bb_pos+l):0}nodeEdges(l,h){let s=this.bb.__offset(this.bb_pos,12);return s?(h||new i.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*l),this.bb):null}nodeEdgesLength(){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__vector_len(this.bb_pos+l):0}inputs(l,h){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+4*l,h):null}inputsLength(){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__vector_len(this.bb_pos+l):0}outputs(l,h){let s=this.bb.__offset(this.bb_pos,16);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+4*l,h):null}outputsLength(){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__vector_len(this.bb_pos+l):0}sparseInitializers(l,h){let s=this.bb.__offset(this.bb_pos,18);return s?(h||new i.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*l),this.bb):null}sparseInitializersLength(){let l=this.bb.__offset(this.bb_pos,18);return l?this.bb.__vector_len(this.bb_pos+l):0}static startGraph(l){l.startObject(8)}static addInitializers(l,h){l.addFieldOffset(0,h,0)}static createInitializersVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startInitializersVector(l,h){l.startVector(4,h,4)}static addNodeArgs(l,h){l.addFieldOffset(1,h,0)}static createNodeArgsVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startNodeArgsVector(l,h){l.startVector(4,h,4)}static addNodes(l,h){l.addFieldOffset(2,h,0)}static createNodesVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startNodesVector(l,h){l.startVector(4,h,4)}static addMaxNodeIndex(l,h){l.addFieldInt32(3,h,0)}static addNodeEdges(l,h){l.addFieldOffset(4,h,0)}static createNodeEdgesVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startNodeEdgesVector(l,h){l.startVector(4,h,4)}static addInputs(l,h){l.addFieldOffset(5,h,0)}static createInputsVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startInputsVector(l,h){l.startVector(4,h,4)}static addOutputs(l,h){l.addFieldOffset(6,h,0)}static createOutputsVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startOutputsVector(l,h){l.startVector(4,h,4)}static addSparseInitializers(l,h){l.addFieldOffset(7,h,0)}static createSparseInitializersVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startSparseInitializersVector(l,h){l.startVector(4,h,4)}static endGraph(l){return l.endObject()}static createGraph(l,h,s,g,p,T,I,N,L){return m.startGraph(l),m.addInitializers(l,h),m.addNodeArgs(l,s),m.addNodes(l,g),m.addMaxNodeIndex(l,p),m.addNodeEdges(l,T),m.addInputs(l,I),m.addOutputs(l,N),m.addSparseInitializers(l,L),m.endGraph(l)}}b.Graph=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsModel(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsModel(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}irVersion(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readInt64(this.bb_pos+l):this.bb.createLong(0,0)}opsetImport(l,h){let s=this.bb.__offset(this.bb_pos,6);return s?(h||new i.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*l),this.bb):null}opsetImportLength(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__vector_len(this.bb_pos+l):0}producerName(l){let h=this.bb.__offset(this.bb_pos,8);return h?this.bb.__string(this.bb_pos+h,l):null}producerVersion(l){let h=this.bb.__offset(this.bb_pos,10);return h?this.bb.__string(this.bb_pos+h,l):null}domain(l){let h=this.bb.__offset(this.bb_pos,12);return h?this.bb.__string(this.bb_pos+h,l):null}modelVersion(){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.readInt64(this.bb_pos+l):this.bb.createLong(0,0)}docString(l){let h=this.bb.__offset(this.bb_pos,16);return h?this.bb.__string(this.bb_pos+h,l):null}graph(l){let h=this.bb.__offset(this.bb_pos,18);return h?(l||new i.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}graphDocString(l){let h=this.bb.__offset(this.bb_pos,20);return h?this.bb.__string(this.bb_pos+h,l):null}static startModel(l){l.startObject(9)}static addIrVersion(l,h){l.addFieldInt64(0,h,l.createLong(0,0))}static addOpsetImport(l,h){l.addFieldOffset(1,h,0)}static createOpsetImportVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startOpsetImportVector(l,h){l.startVector(4,h,4)}static addProducerName(l,h){l.addFieldOffset(2,h,0)}static addProducerVersion(l,h){l.addFieldOffset(3,h,0)}static addDomain(l,h){l.addFieldOffset(4,h,0)}static addModelVersion(l,h){l.addFieldInt64(5,h,l.createLong(0,0))}static addDocString(l,h){l.addFieldOffset(6,h,0)}static addGraph(l,h){l.addFieldOffset(7,h,0)}static addGraphDocString(l,h){l.addFieldOffset(8,h,0)}static endModel(l){return l.endObject()}static createModel(l,h,s,g,p,T,I,N,L,U){return m.startModel(l),m.addIrVersion(l,h),m.addOpsetImport(l,s),m.addProducerName(l,g),m.addProducerVersion(l,p),m.addDomain(l,T),m.addModelVersion(l,I),m.addDocString(l,N),m.addGraph(l,L),m.addGraphDocString(l,U),m.endModel(l)}}b.Model=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsKernelCreateInfos(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsKernelCreateInfos(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}nodeIndices(l){let h=this.bb.__offset(this.bb_pos,4);return h?this.bb.readUint32(this.bb.__vector(this.bb_pos+h)+4*l):0}nodeIndicesLength(){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__vector_len(this.bb_pos+l):0}nodeIndicesArray(){let l=this.bb.__offset(this.bb_pos,4);return l?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+l),this.bb.__vector_len(this.bb_pos+l)):null}kernelDefHashes(l){let h=this.bb.__offset(this.bb_pos,6);return h?this.bb.readUint64(this.bb.__vector(this.bb_pos+h)+8*l):this.bb.createLong(0,0)}kernelDefHashesLength(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__vector_len(this.bb_pos+l):0}static startKernelCreateInfos(l){l.startObject(2)}static addNodeIndices(l,h){l.addFieldOffset(0,h,0)}static createNodeIndicesVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addInt32(h[s]);return l.endVector()}static startNodeIndicesVector(l,h){l.startVector(4,h,4)}static addKernelDefHashes(l,h){l.addFieldOffset(1,h,0)}static createKernelDefHashesVector(l,h){l.startVector(8,h.length,8);for(let s=h.length-1;s>=0;s--)l.addInt64(h[s]);return l.endVector()}static startKernelDefHashesVector(l,h){l.startVector(8,h,8)}static endKernelCreateInfos(l){return l.endObject()}static createKernelCreateInfos(l,h,s){return m.startKernelCreateInfos(l),m.addNodeIndices(l,h),m.addKernelDefHashes(l,s),m.endKernelCreateInfos(l)}}b.KernelCreateInfos=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsSubGraphSessionState(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsSubGraphSessionState(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}graphId(l){let h=this.bb.__offset(this.bb_pos,4);return h?this.bb.__string(this.bb_pos+h,l):null}sessionState(l){let h=this.bb.__offset(this.bb_pos,6);return h?(l||new i.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}static startSubGraphSessionState(l){l.startObject(2)}static addGraphId(l,h){l.addFieldOffset(0,h,0)}static addSessionState(l,h){l.addFieldOffset(1,h,0)}static endSubGraphSessionState(l){let h=l.endObject();return l.requiredField(h,4),h}static createSubGraphSessionState(l,h,s){return m.startSubGraphSessionState(l),m.addGraphId(l,h),m.addSessionState(l,s),m.endSubGraphSessionState(l)}}b.SubGraphSessionState=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsSessionState(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsSessionState(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}kernels(l){let h=this.bb.__offset(this.bb_pos,4);return h?(l||new i.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}subGraphSessionStates(l,h){let s=this.bb.__offset(this.bb_pos,6);return s?(h||new i.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+4*l),this.bb):null}subGraphSessionStatesLength(){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__vector_len(this.bb_pos+l):0}static startSessionState(l){l.startObject(2)}static addKernels(l,h){l.addFieldOffset(0,h,0)}static addSubGraphSessionStates(l,h){l.addFieldOffset(1,h,0)}static createSubGraphSessionStatesVector(l,h){l.startVector(4,h.length,4);for(let s=h.length-1;s>=0;s--)l.addOffset(h[s]);return l.endVector()}static startSubGraphSessionStatesVector(l,h){l.startVector(4,h,4)}static endSessionState(l){return l.endObject()}static createSessionState(l,h,s){return m.startSessionState(l),m.addKernels(l,h),m.addSubGraphSessionStates(l,s),m.endSessionState(l)}}b.SessionState=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={}),(i=>{let a;(c=>{let f;(b=>{class m{constructor(){this.bb=null,this.bb_pos=0}__init(l,h){return this.bb_pos=l,this.bb=h,this}static getRootAsInferenceSession(l,h){return(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static getSizePrefixedRootAsInferenceSession(l,h){return l.setPosition(l.position()+w.SIZE_PREFIX_LENGTH),(h||new m).__init(l.readInt32(l.position())+l.position(),l)}static bufferHasIdentifier(l){return l.__has_identifier("ORTM")}ortVersion(l){let h=this.bb.__offset(this.bb_pos,4);return h?this.bb.__string(this.bb_pos+h,l):null}model(l){let h=this.bb.__offset(this.bb_pos,6);return h?(l||new i.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}sessionState(l){let h=this.bb.__offset(this.bb_pos,8);return h?(l||new i.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+h),this.bb):null}static startInferenceSession(l){l.startObject(3)}static addOrtVersion(l,h){l.addFieldOffset(0,h,0)}static addModel(l,h){l.addFieldOffset(1,h,0)}static addSessionState(l,h){l.addFieldOffset(2,h,0)}static endInferenceSession(l){return l.endObject()}static finishInferenceSessionBuffer(l,h){l.finish(h,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(l,h){l.finish(h,"ORTM",!0)}static createInferenceSession(l,h,s,g){return m.startInferenceSession(l),m.addOrtVersion(l,h),m.addModel(l,s),m.addSessionState(l,g),m.endInferenceSession(l)}}b.InferenceSession=m})(f=c.fbs||={})})(a=i.experimental||={})})(F||={})}),js=mt((i,a)=>{a.exports=function c(f,b){for(var m=new Array(arguments.length-1),v=0,l=2,h=!0;l<arguments.length;)m[v++]=arguments[l++];return new Promise(function(s,g){m[v]=function(p){if(h)if(h=!1,p)g(p);else{for(var T=new Array(arguments.length-1),I=0;I<T.length;)T[I++]=arguments[I];s.apply(null,T)}};try{f.apply(b||null,m)}catch(p){h&&(h=!1,g(p))}})}}),Ys=mt(i=>{var a=i;a.length=function(v){var l=v.length;if(!l)return 0;for(var h=0;--l%4>1&&"="===v.charAt(l);)++h;return Math.ceil(3*v.length)/4-h};var b,c=new Array(64),f=new Array(123);for(b=0;b<64;)f[c[b]=b<26?b+65:b<52?b+71:b<62?b-4:b-59|43]=b++;a.encode=function(v,l,h){for(var I,s=null,g=[],p=0,T=0;l<h;){var N=v[l++];switch(T){case 0:g[p++]=c[N>>2],I=(3&N)<<4,T=1;break;case 1:g[p++]=c[I|N>>4],I=(15&N)<<2,T=2;break;case 2:g[p++]=c[I|N>>6],g[p++]=c[63&N],T=0}p>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,g)),p=0)}return T&&(g[p++]=c[I],g[p++]=61,1===T&&(g[p++]=61)),s?(p&&s.push(String.fromCharCode.apply(String,g.slice(0,p))),s.join("")):String.fromCharCode.apply(String,g.slice(0,p))};var m="invalid encoding";a.decode=function(v,l,h){for(var p,s=h,g=0,T=0;T<v.length;){var I=v.charCodeAt(T++);if(61===I&&g>1)break;if(void 0===(I=f[I]))throw Error(m);switch(g){case 0:p=I,g=1;break;case 1:l[h++]=p<<2|(48&I)>>4,p=I,g=2;break;case 2:l[h++]=(15&p)<<4|(60&I)>>2,p=I,g=3;break;case 3:l[h++]=(3&p)<<6|I,g=0}}if(1===g)throw Error(m);return h-s},a.test=function(v){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(v)}}),Qs=mt((i,a)=>{function c(){this._listeners={}}a.exports=c,c.prototype.on=function(f,b,m){return(this._listeners[f]||(this._listeners[f]=[])).push({fn:b,ctx:m||this}),this},c.prototype.off=function(f,b){if(void 0===f)this._listeners={};else if(void 0===b)this._listeners[f]=[];else for(var m=this._listeners[f],v=0;v<m.length;)m[v].fn===b?m.splice(v,1):++v;return this},c.prototype.emit=function(f){var b=this._listeners[f];if(b){for(var m=[],v=1;v<arguments.length;)m.push(arguments[v++]);for(v=0;v<b.length;)b[v].fn.apply(b[v++].ctx,m)}return this}}),au=mt((i,a)=>{function c(l){return typeof Float32Array<"u"?function(){var h=new Float32Array([-0]),s=new Uint8Array(h.buffer),g=128===s[3];function p(L,U,se){h[0]=L,U[se]=s[0],U[se+1]=s[1],U[se+2]=s[2],U[se+3]=s[3]}function T(L,U,se){h[0]=L,U[se]=s[3],U[se+1]=s[2],U[se+2]=s[1],U[se+3]=s[0]}function I(L,U){return s[0]=L[U],s[1]=L[U+1],s[2]=L[U+2],s[3]=L[U+3],h[0]}function N(L,U){return s[3]=L[U],s[2]=L[U+1],s[1]=L[U+2],s[0]=L[U+3],h[0]}l.writeFloatLE=g?p:T,l.writeFloatBE=g?T:p,l.readFloatLE=g?I:N,l.readFloatBE=g?N:I}():function(){function h(g,p,T,I){var N=p<0?1:0;if(N&&(p=-p),0===p)g(1/p>0?0:2147483648,T,I);else if(isNaN(p))g(2143289344,T,I);else if(p>34028234663852886e22)g((N<<31|2139095040)>>>0,T,I);else if(p<11754943508222875e-54)g((N<<31|Math.round(p/1401298464324817e-60))>>>0,T,I);else{var L=Math.floor(Math.log(p)/Math.LN2);g((N<<31|L+127<<23|8388607&Math.round(p*Math.pow(2,-L)*8388608))>>>0,T,I)}}function s(g,p,T){var I=g(p,T),N=2*(I>>31)+1,L=I>>>23&255,U=8388607&I;return 255===L?U?NaN:N*(1/0):0===L?1401298464324817e-60*N*U:N*Math.pow(2,L-150)*(U+8388608)}l.writeFloatLE=h.bind(null,f),l.writeFloatBE=h.bind(null,b),l.readFloatLE=s.bind(null,m),l.readFloatBE=s.bind(null,v)}(),typeof Float64Array<"u"?function(){var h=new Float64Array([-0]),s=new Uint8Array(h.buffer),g=128===s[7];function p(L,U,se){h[0]=L,U[se]=s[0],U[se+1]=s[1],U[se+2]=s[2],U[se+3]=s[3],U[se+4]=s[4],U[se+5]=s[5],U[se+6]=s[6],U[se+7]=s[7]}function T(L,U,se){h[0]=L,U[se]=s[7],U[se+1]=s[6],U[se+2]=s[5],U[se+3]=s[4],U[se+4]=s[3],U[se+5]=s[2],U[se+6]=s[1],U[se+7]=s[0]}function I(L,U){return s[0]=L[U],s[1]=L[U+1],s[2]=L[U+2],s[3]=L[U+3],s[4]=L[U+4],s[5]=L[U+5],s[6]=L[U+6],s[7]=L[U+7],h[0]}function N(L,U){return s[7]=L[U],s[6]=L[U+1],s[5]=L[U+2],s[4]=L[U+3],s[3]=L[U+4],s[2]=L[U+5],s[1]=L[U+6],s[0]=L[U+7],h[0]}l.writeDoubleLE=g?p:T,l.writeDoubleBE=g?T:p,l.readDoubleLE=g?I:N,l.readDoubleBE=g?N:I}():function(){function h(g,p,T,I,N,L){var U=I<0?1:0;if(U&&(I=-I),0===I)g(0,N,L+p),g(1/I>0?0:2147483648,N,L+T);else if(isNaN(I))g(0,N,L+p),g(2146959360,N,L+T);else if(I>17976931348623157e292)g(0,N,L+p),g((U<<31|2146435072)>>>0,N,L+T);else{var se;if(I<22250738585072014e-324)g((se=I/5e-324)>>>0,N,L+p),g((U<<31|se/4294967296)>>>0,N,L+T);else{var Z=Math.floor(Math.log(I)/Math.LN2);1024===Z&&(Z=1023),g(4503599627370496*(se=I*Math.pow(2,-Z))>>>0,N,L+p),g((U<<31|Z+1023<<20|1048576*se&1048575)>>>0,N,L+T)}}}function s(g,p,T,I,N){var L=g(I,N+p),U=g(I,N+T),se=2*(U>>31)+1,Z=U>>>20&2047,ie=4294967296*(1048575&U)+L;return 2047===Z?ie?NaN:se*(1/0):0===Z?5e-324*se*ie:se*Math.pow(2,Z-1075)*(ie+4503599627370496)}l.writeDoubleLE=h.bind(null,f,0,4),l.writeDoubleBE=h.bind(null,b,4,0),l.readDoubleLE=s.bind(null,m,0,4),l.readDoubleBE=s.bind(null,v,4,0)}(),l}function f(l,h,s){h[s]=255&l,h[s+1]=l>>>8&255,h[s+2]=l>>>16&255,h[s+3]=l>>>24}function b(l,h,s){h[s]=l>>>24,h[s+1]=l>>>16&255,h[s+2]=l>>>8&255,h[s+3]=255&l}function m(l,h){return(l[h]|l[h+1]<<8|l[h+2]<<16|l[h+3]<<24)>>>0}function v(l,h){return(l[h]<<24|l[h+1]<<16|l[h+2]<<8|l[h+3])>>>0}a.exports=c(c)}),su=mt((exports,module)=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(i){}return null}module.exports=inquire}),lu=mt(i=>{var a=i;a.length=function(c){for(var f=0,b=0,m=0;m<c.length;++m)(b=c.charCodeAt(m))<128?f+=1:b<2048?f+=2:55296==(64512&b)&&56320==(64512&c.charCodeAt(m+1))?(++m,f+=4):f+=3;return f},a.read=function(c,f,b){if(b-f<1)return"";for(var s,v=null,l=[],h=0;f<b;)(s=c[f++])<128?l[h++]=s:s>191&&s<224?l[h++]=(31&s)<<6|63&c[f++]:s>239&&s<365?(s=((7&s)<<18|(63&c[f++])<<12|(63&c[f++])<<6|63&c[f++])-65536,l[h++]=55296+(s>>10),l[h++]=56320+(1023&s)):l[h++]=(15&s)<<12|(63&c[f++])<<6|63&c[f++],h>8191&&((v||(v=[])).push(String.fromCharCode.apply(String,l)),h=0);return v?(h&&v.push(String.fromCharCode.apply(String,l.slice(0,h))),v.join("")):String.fromCharCode.apply(String,l.slice(0,h))},a.write=function(c,f,b){for(var v,l,m=b,h=0;h<c.length;++h)(v=c.charCodeAt(h))<128?f[b++]=v:v<2048?(f[b++]=v>>6|192,f[b++]=63&v|128):55296==(64512&v)&&56320==(64512&(l=c.charCodeAt(h+1)))?(++h,f[b++]=(v=65536+((1023&v)<<10)+(1023&l))>>18|240,f[b++]=v>>12&63|128,f[b++]=v>>6&63|128,f[b++]=63&v|128):(f[b++]=v>>12|224,f[b++]=v>>6&63|128,f[b++]=63&v|128);return b-m}}),cu=mt((i,a)=>{a.exports=function c(f,b,m){var v=m||8192,l=v>>>1,h=null,s=v;return function(g){if(g<1||g>l)return f(g);s+g>v&&(h=f(v),s=0);var p=b.call(h,s,s+=g);return 7&s&&(s=1+(7|s)),p}}}),du=mt((i,a)=>{a.exports=f;var c=Se();function f(l,h){this.lo=l>>>0,this.hi=h>>>0}var b=f.zero=new f(0,0);b.toNumber=function(){return 0},b.zzEncode=b.zzDecode=function(){return this},b.length=function(){return 1};var m=f.zeroHash="\0\0\0\0\0\0\0\0";f.fromNumber=function(l){if(0===l)return b;var h=l<0;h&&(l=-l);var s=l>>>0,g=(l-s)/4294967296>>>0;return h&&(g=~g>>>0,s=~s>>>0,++s>4294967295&&(s=0,++g>4294967295&&(g=0))),new f(s,g)},f.from=function(l){if("number"==typeof l)return f.fromNumber(l);if(c.isString(l)){if(!c.Long)return f.fromNumber(parseInt(l,10));l=c.Long.fromString(l)}return l.low||l.high?new f(l.low>>>0,l.high>>>0):b},f.prototype.toNumber=function(l){if(!l&&this.hi>>>31){var h=1+~this.lo>>>0,s=~this.hi>>>0;return h||(s=s+1>>>0),-(h+4294967296*s)}return this.lo+4294967296*this.hi},f.prototype.toLong=function(l){return c.Long?new c.Long(0|this.lo,0|this.hi,!!l):{low:0|this.lo,high:0|this.hi,unsigned:!!l}};var v=String.prototype.charCodeAt;f.fromHash=function(l){return l===m?b:new f((v.call(l,0)|v.call(l,1)<<8|v.call(l,2)<<16|v.call(l,3)<<24)>>>0,(v.call(l,4)|v.call(l,5)<<8|v.call(l,6)<<16|v.call(l,7)<<24)>>>0)},f.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},f.prototype.zzEncode=function(){var l=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^l)>>>0,this.lo=(this.lo<<1^l)>>>0,this},f.prototype.zzDecode=function(){var l=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^l)>>>0,this.hi=(this.hi>>>1^l)>>>0,this},f.prototype.length=function(){var l=this.lo,h=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return 0===s?0===h?l<16384?l<128?1:2:l<2097152?3:4:h<16384?h<128?5:6:h<2097152?7:8:s<128?9:10}}),Se=mt(i=>{var a=i;function c(b,m,v){for(var l=Object.keys(m),h=0;h<l.length;++h)(void 0===b[l[h]]||!v)&&(b[l[h]]=m[l[h]]);return b}function f(b){function m(v,l){if(!(this instanceof m))return new m(v,l);Object.defineProperty(this,"message",{get:function(){return v}}),Error.captureStackTrace?Error.captureStackTrace(this,m):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),l&&c(this,l)}return m.prototype=Object.create(Error.prototype,{constructor:{value:m,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return b},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),m}a.asPromise=js(),a.base64=Ys(),a.EventEmitter=Qs(),a.float=au(),a.inquire=su(),a.utf8=lu(),a.pool=cu(),a.LongBits=du(),a.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),a.global=a.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||i,a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isInteger=Number.isInteger||function(b){return"number"==typeof b&&isFinite(b)&&Math.floor(b)===b},a.isString=function(b){return"string"==typeof b||b instanceof String},a.isObject=function(b){return b&&"object"==typeof b},a.isset=a.isSet=function(b,m){var v=b[m];return!(null==v||!b.hasOwnProperty(m))&&("object"!=typeof v||(Array.isArray(v)?v.length:Object.keys(v).length)>0)},a.Buffer=function(){try{var b=a.inquire("buffer").Buffer;return b.prototype.utf8Write?b:null}catch{return null}}(),a._Buffer_from=null,a._Buffer_allocUnsafe=null,a.newBuffer=function(b){return"number"==typeof b?a.Buffer?a._Buffer_allocUnsafe(b):new a.Array(b):a.Buffer?a._Buffer_from(b):typeof Uint8Array>"u"?b:new Uint8Array(b)},a.Array=typeof Uint8Array<"u"?Uint8Array:Array,a.Long=a.global.dcodeIO&&a.global.dcodeIO.Long||a.global.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(b){return b?a.LongBits.from(b).toHash():a.LongBits.zeroHash},a.longFromHash=function(b,m){var v=a.LongBits.fromHash(b);return a.Long?a.Long.fromBits(v.lo,v.hi,m):v.toNumber(!!m)},a.merge=c,a.lcFirst=function(b){return b.charAt(0).toLowerCase()+b.substring(1)},a.newError=f,a.ProtocolError=f("ProtocolError"),a.oneOfGetter=function(b){for(var m={},v=0;v<b.length;++v)m[b[v]]=1;return function(){for(var l=Object.keys(this),h=l.length-1;h>-1;--h)if(1===m[l[h]]&&null!=this[l[h]])return l[h]}},a.oneOfSetter=function(b){return function(m){for(var v=0;v<b.length;++v)b[v]!==m&&delete this[b[v]]}},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a._configure=function(){var b=a.Buffer;b?(a._Buffer_from=b.from!==Uint8Array.from&&b.from||function(m,v){return new b(m,v)},a._Buffer_allocUnsafe=b.allocUnsafe||function(m){return new b(m)}):a._Buffer_from=a._Buffer_allocUnsafe=null}}),ei=mt((i,a)=>{a.exports=g;var f,c=Se(),b=c.LongBits,m=c.base64,v=c.utf8;function l(Z,ie,le){this.fn=Z,this.len=ie,this.next=void 0,this.val=le}function h(){}function s(Z){this.head=Z.head,this.tail=Z.tail,this.len=Z.len,this.next=Z.states}function g(){this.len=0,this.head=new l(h,0,0),this.tail=this.head,this.states=null}var p=function(){return c.Buffer?function(){return(g.create=function(){return new f})()}:function(){return new g}};function T(Z,ie,le){ie[le]=255&Z}function N(Z,ie){this.len=Z,this.next=void 0,this.val=ie}function L(Z,ie,le){for(;Z.hi;)ie[le++]=127&Z.lo|128,Z.lo=(Z.lo>>>7|Z.hi<<25)>>>0,Z.hi>>>=7;for(;Z.lo>127;)ie[le++]=127&Z.lo|128,Z.lo=Z.lo>>>7;ie[le++]=Z.lo}function U(Z,ie,le){ie[le]=255&Z,ie[le+1]=Z>>>8&255,ie[le+2]=Z>>>16&255,ie[le+3]=Z>>>24}g.create=p(),g.alloc=function(Z){return new c.Array(Z)},c.Array!==Array&&(g.alloc=c.pool(g.alloc,c.Array.prototype.subarray)),g.prototype._push=function(Z,ie,le){return this.tail=this.tail.next=new l(Z,ie,le),this.len+=ie,this},(N.prototype=Object.create(l.prototype)).fn=function I(Z,ie,le){for(;Z>127;)ie[le++]=127&Z|128,Z>>>=7;ie[le]=Z},g.prototype.uint32=function(Z){return this.len+=(this.tail=this.tail.next=new N((Z>>>=0)<128?1:Z<16384?2:Z<2097152?3:Z<268435456?4:5,Z)).len,this},g.prototype.int32=function(Z){return Z<0?this._push(L,10,b.fromNumber(Z)):this.uint32(Z)},g.prototype.sint32=function(Z){return this.uint32((Z<<1^Z>>31)>>>0)},g.prototype.int64=g.prototype.uint64=function(Z){var ie=b.from(Z);return this._push(L,ie.length(),ie)},g.prototype.sint64=function(Z){var ie=b.from(Z).zzEncode();return this._push(L,ie.length(),ie)},g.prototype.bool=function(Z){return this._push(T,1,Z?1:0)},g.prototype.sfixed32=g.prototype.fixed32=function(Z){return this._push(U,4,Z>>>0)},g.prototype.sfixed64=g.prototype.fixed64=function(Z){var ie=b.from(Z);return this._push(U,4,ie.lo)._push(U,4,ie.hi)},g.prototype.float=function(Z){return this._push(c.float.writeFloatLE,4,Z)},g.prototype.double=function(Z){return this._push(c.float.writeDoubleLE,8,Z)};var se=c.Array.prototype.set?function(Z,ie,le){ie.set(Z,le)}:function(Z,ie,le){for(var Oe=0;Oe<Z.length;++Oe)ie[le+Oe]=Z[Oe]};g.prototype.bytes=function(Z){var ie=Z.length>>>0;if(!ie)return this._push(T,1,0);if(c.isString(Z)){var le=g.alloc(ie=m.length(Z));m.decode(Z,le,0),Z=le}return this.uint32(ie)._push(se,ie,Z)},g.prototype.string=function(Z){var ie=v.length(Z);return ie?this.uint32(ie)._push(v.write,ie,Z):this._push(T,1,0)},g.prototype.fork=function(){return this.states=new s(this),this.head=this.tail=new l(h,0,0),this.len=0,this},g.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(h,0,0),this.len=0),this},g.prototype.ldelim=function(){var Z=this.head,ie=this.tail,le=this.len;return this.reset().uint32(le),le&&(this.tail.next=Z.next,this.tail=ie,this.len+=le),this},g.prototype.finish=function(){for(var Z=this.head.next,ie=this.constructor.alloc(this.len),le=0;Z;)Z.fn(Z.val,ie,le),le+=Z.len,Z=Z.next;return ie},g._configure=function(Z){f=Z,g.create=p(),f._configure()}}),vu=mt((i,a)=>{a.exports=b;var c=ei();(b.prototype=Object.create(c.prototype)).constructor=b;var f=Se();function b(){c.call(this)}function m(v,l,h){v.length<40?f.utf8.write(v,l,h):l.utf8Write?l.utf8Write(v,h):l.write(v,h)}b._configure=function(){b.alloc=f._Buffer_allocUnsafe,b.writeBytesBuffer=f.Buffer&&f.Buffer.prototype instanceof Uint8Array&&"set"===f.Buffer.prototype.set.name?function(v,l,h){l.set(v,h)}:function(v,l,h){if(v.copy)v.copy(l,h,0,v.length);else for(var s=0;s<v.length;)l[h++]=v[s++]}},b.prototype.bytes=function(v){f.isString(v)&&(v=f._Buffer_from(v,"base64"));var l=v.length>>>0;return this.uint32(l),l&&this._push(b.writeBytesBuffer,l,v),this},b.prototype.string=function(v){var l=f.Buffer.byteLength(v);return this.uint32(l),l&&this._push(m,l,v),this},b._configure()}),oi=mt((i,a)=>{a.exports=l;var f,c=Se(),b=c.LongBits,m=c.utf8;function v(I,N){return RangeError("index out of range: "+I.pos+" + "+(N||1)+" > "+I.len)}function l(I){this.buf=I,this.pos=0,this.len=I.length}var h=typeof Uint8Array<"u"?function(I){if(I instanceof Uint8Array||Array.isArray(I))return new l(I);throw Error("illegal buffer")}:function(I){if(Array.isArray(I))return new l(I);throw Error("illegal buffer")},s=function(){return c.Buffer?function(I){return(l.create=function(N){return c.Buffer.isBuffer(N)?new f(N):h(N)})(I)}:h};function g(){var I=new b(0,0),N=0;if(!(this.len-this.pos>4)){for(;N<3;++N){if(this.pos>=this.len)throw v(this);if(I.lo=(I.lo|(127&this.buf[this.pos])<<7*N)>>>0,this.buf[this.pos++]<128)return I}return I.lo=(I.lo|(127&this.buf[this.pos++])<<7*N)>>>0,I}for(;N<4;++N)if(I.lo=(I.lo|(127&this.buf[this.pos])<<7*N)>>>0,this.buf[this.pos++]<128)return I;if(I.lo=(I.lo|(127&this.buf[this.pos])<<28)>>>0,I.hi=(I.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return I;if(N=0,this.len-this.pos>4){for(;N<5;++N)if(I.hi=(I.hi|(127&this.buf[this.pos])<<7*N+3)>>>0,this.buf[this.pos++]<128)return I}else for(;N<5;++N){if(this.pos>=this.len)throw v(this);if(I.hi=(I.hi|(127&this.buf[this.pos])<<7*N+3)>>>0,this.buf[this.pos++]<128)return I}throw Error("invalid varint encoding")}function p(I,N){return(I[N-4]|I[N-3]<<8|I[N-2]<<16|I[N-1]<<24)>>>0}function T(){if(this.pos+8>this.len)throw v(this,8);return new b(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=s(),l.prototype._slice=c.Array.prototype.subarray||c.Array.prototype.slice,l.prototype.uint32=function(){var I=4294967295;return function(){if(I=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(I=(I|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(I=(I|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(I=(I|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(I=(I|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return I;if((this.pos+=5)>this.len)throw this.pos=this.len,v(this,10);return I}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var I=this.uint32();return I>>>1^-(1&I)},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw v(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw v(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw v(this,4);var I=c.float.readFloatLE(this.buf,this.pos);return this.pos+=4,I},l.prototype.double=function(){if(this.pos+8>this.len)throw v(this,4);var I=c.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,I},l.prototype.bytes=function(){var I=this.uint32(),N=this.pos,L=this.pos+I;if(L>this.len)throw v(this,I);if(this.pos+=I,Array.isArray(this.buf))return this.buf.slice(N,L);if(N===L){var U=c.Buffer;return U?U.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,N,L)},l.prototype.string=function(){var I=this.bytes();return m.read(I,0,I.length)},l.prototype.skip=function(I){if("number"==typeof I){if(this.pos+I>this.len)throw v(this,I);this.pos+=I}else do{if(this.pos>=this.len)throw v(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(I){switch(I){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(I=7&this.uint32());)this.skipType(I);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+I+" at offset "+this.pos)}return this},l._configure=function(I){f=I,l.create=s(),f._configure();var N=c.Long?"toLong":"toNumber";c.merge(l.prototype,{int64:function(){return g.call(this)[N](!1)},uint64:function(){return g.call(this)[N](!0)},sint64:function(){return g.call(this).zzDecode()[N](!1)},fixed64:function(){return T.call(this)[N](!0)},sfixed64:function(){return T.call(this)[N](!1)}})}}),Lu=mt((i,a)=>{a.exports=b;var c=oi();(b.prototype=Object.create(c.prototype)).constructor=b;var f=Se();function b(m){c.call(this,m)}b._configure=function(){f.Buffer&&(b.prototype._slice=f.Buffer.prototype.slice)},b.prototype.string=function(){var m=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+m,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+m,this.len))},b._configure()}),ku=mt((i,a)=>{a.exports=f;var c=Se();function f(b,m,v){if("function"!=typeof b)throw TypeError("rpcImpl must be a function");c.EventEmitter.call(this),this.rpcImpl=b,this.requestDelimited=!!m,this.responseDelimited=!!v}(f.prototype=Object.create(c.EventEmitter.prototype)).constructor=f,f.prototype.rpcCall=function b(m,v,l,h,s){if(!h)throw TypeError("request must be specified");var g=this;if(!s)return c.asPromise(b,g,m,v,l,h);if(g.rpcImpl)try{return g.rpcImpl(m,v[g.requestDelimited?"encodeDelimited":"encode"](h).finish(),function(p,T){if(p)return g.emit("error",p,m),s(p);if(null!==T){if(!(T instanceof l))try{T=l[g.responseDelimited?"decodeDelimited":"decode"](T)}catch(I){return g.emit("error",I,m),s(I)}return g.emit("data",T,m),s(null,T)}g.end(!0)})}catch(p){return g.emit("error",p,m),void setTimeout(function(){s(p)},0)}else setTimeout(function(){s(Error("already ended"))},0)},f.prototype.end=function(b){return this.rpcImpl&&(b||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),Fu=mt(i=>{i.Service=ku()}),Nu=mt((i,a)=>{a.exports={}}),Mu=mt(i=>{var a=i;function c(){a.util._configure(),a.Writer._configure(a.BufferWriter),a.Reader._configure(a.BufferReader)}a.build="minimal",a.Writer=ei(),a.BufferWriter=vu(),a.Reader=oi(),a.BufferReader=Lu(),a.util=Se(),a.rpc=Fu(),a.roots=Nu(),a.configure=c,c()}),Vu=mt((i,a)=>{a.exports=Mu()}),sr=mt((i,a)=>{var h,s,l,c=Vu(),f=c.Reader,b=c.Writer,m=c.util,v=c.roots.default||(c.roots.default={});v.onnx=((l={}).Version=(h={},(s=Object.create(h))[h[0]="_START_VERSION"]=0,s[h[1]="IR_VERSION_2017_10_10"]=1,s[h[2]="IR_VERSION_2017_10_30"]=2,s[h[3]="IR_VERSION_2017_11_3"]=3,s[h[4]="IR_VERSION_2019_1_22"]=4,s[h[5]="IR_VERSION_2019_3_18"]=5,s[h[6]="IR_VERSION_2019_9_19"]=6,s[h[7]="IR_VERSION_2020_5_8"]=7,s[h[8]="IR_VERSION_2021_7_30"]=8,s[h[9]="IR_VERSION"]=9,s),l.AttributeProto=function(){function h(s){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.name="",h.prototype.refAttrName="",h.prototype.docString="",h.prototype.type=0,h.prototype.f=0,h.prototype.i=m.Long?m.Long.fromBits(0,0,!1):0,h.prototype.s=m.newBuffer([]),h.prototype.t=null,h.prototype.g=null,h.prototype.sparseTensor=null,h.prototype.tp=null,h.prototype.floats=m.emptyArray,h.prototype.ints=m.emptyArray,h.prototype.strings=m.emptyArray,h.prototype.tensors=m.emptyArray,h.prototype.graphs=m.emptyArray,h.prototype.sparseTensors=m.emptyArray,h.prototype.typeProtos=m.emptyArray,h.create=function(s){return new h(s)},h.encode=function(s,g){if(g||(g=b.create()),null!=s.name&&Object.hasOwnProperty.call(s,"name")&&g.uint32(10).string(s.name),null!=s.f&&Object.hasOwnProperty.call(s,"f")&&g.uint32(21).float(s.f),null!=s.i&&Object.hasOwnProperty.call(s,"i")&&g.uint32(24).int64(s.i),null!=s.s&&Object.hasOwnProperty.call(s,"s")&&g.uint32(34).bytes(s.s),null!=s.t&&Object.hasOwnProperty.call(s,"t")&&v.onnx.TensorProto.encode(s.t,g.uint32(42).fork()).ldelim(),null!=s.g&&Object.hasOwnProperty.call(s,"g")&&v.onnx.GraphProto.encode(s.g,g.uint32(50).fork()).ldelim(),null!=s.floats&&s.floats.length){g.uint32(58).fork();for(var p=0;p<s.floats.length;++p)g.float(s.floats[p]);g.ldelim()}if(null!=s.ints&&s.ints.length){for(g.uint32(66).fork(),p=0;p<s.ints.length;++p)g.int64(s.ints[p]);g.ldelim()}if(null!=s.strings&&s.strings.length)for(p=0;p<s.strings.length;++p)g.uint32(74).bytes(s.strings[p]);if(null!=s.tensors&&s.tensors.length)for(p=0;p<s.tensors.length;++p)v.onnx.TensorProto.encode(s.tensors[p],g.uint32(82).fork()).ldelim();if(null!=s.graphs&&s.graphs.length)for(p=0;p<s.graphs.length;++p)v.onnx.GraphProto.encode(s.graphs[p],g.uint32(90).fork()).ldelim();if(null!=s.docString&&Object.hasOwnProperty.call(s,"docString")&&g.uint32(106).string(s.docString),null!=s.tp&&Object.hasOwnProperty.call(s,"tp")&&v.onnx.TypeProto.encode(s.tp,g.uint32(114).fork()).ldelim(),null!=s.typeProtos&&s.typeProtos.length)for(p=0;p<s.typeProtos.length;++p)v.onnx.TypeProto.encode(s.typeProtos[p],g.uint32(122).fork()).ldelim();if(null!=s.type&&Object.hasOwnProperty.call(s,"type")&&g.uint32(160).int32(s.type),null!=s.refAttrName&&Object.hasOwnProperty.call(s,"refAttrName")&&g.uint32(170).string(s.refAttrName),null!=s.sparseTensor&&Object.hasOwnProperty.call(s,"sparseTensor")&&v.onnx.SparseTensorProto.encode(s.sparseTensor,g.uint32(178).fork()).ldelim(),null!=s.sparseTensors&&s.sparseTensors.length)for(p=0;p<s.sparseTensors.length;++p)v.onnx.SparseTensorProto.encode(s.sparseTensors[p],g.uint32(186).fork()).ldelim();return g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.AttributeProto;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:T.name=s.string();break;case 21:T.refAttrName=s.string();break;case 13:T.docString=s.string();break;case 20:T.type=s.int32();break;case 2:T.f=s.float();break;case 3:T.i=s.int64();break;case 4:T.s=s.bytes();break;case 5:T.t=v.onnx.TensorProto.decode(s,s.uint32());break;case 6:T.g=v.onnx.GraphProto.decode(s,s.uint32());break;case 22:T.sparseTensor=v.onnx.SparseTensorProto.decode(s,s.uint32());break;case 14:T.tp=v.onnx.TypeProto.decode(s,s.uint32());break;case 7:if(T.floats&&T.floats.length||(T.floats=[]),2==(7&I))for(var N=s.uint32()+s.pos;s.pos<N;)T.floats.push(s.float());else T.floats.push(s.float());break;case 8:if(T.ints&&T.ints.length||(T.ints=[]),2==(7&I))for(N=s.uint32()+s.pos;s.pos<N;)T.ints.push(s.int64());else T.ints.push(s.int64());break;case 9:T.strings&&T.strings.length||(T.strings=[]),T.strings.push(s.bytes());break;case 10:T.tensors&&T.tensors.length||(T.tensors=[]),T.tensors.push(v.onnx.TensorProto.decode(s,s.uint32()));break;case 11:T.graphs&&T.graphs.length||(T.graphs=[]),T.graphs.push(v.onnx.GraphProto.decode(s,s.uint32()));break;case 23:T.sparseTensors&&T.sparseTensors.length||(T.sparseTensors=[]),T.sparseTensors.push(v.onnx.SparseTensorProto.decode(s,s.uint32()));break;case 15:T.typeProtos&&T.typeProtos.length||(T.typeProtos=[]),T.typeProtos.push(v.onnx.TypeProto.decode(s,s.uint32()));break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.name&&s.hasOwnProperty("name")&&!m.isString(s.name))return"name: string expected";if(null!=s.refAttrName&&s.hasOwnProperty("refAttrName")&&!m.isString(s.refAttrName))return"refAttrName: string expected";if(null!=s.docString&&s.hasOwnProperty("docString")&&!m.isString(s.docString))return"docString: string expected";if(null!=s.type&&s.hasOwnProperty("type"))switch(s.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:}if(null!=s.f&&s.hasOwnProperty("f")&&"number"!=typeof s.f)return"f: number expected";if(null!=s.i&&s.hasOwnProperty("i")&&!m.isInteger(s.i)&&!(s.i&&m.isInteger(s.i.low)&&m.isInteger(s.i.high)))return"i: integer|Long expected";if(null!=s.s&&s.hasOwnProperty("s")&&!(s.s&&"number"==typeof s.s.length||m.isString(s.s)))return"s: buffer expected";if(null!=s.t&&s.hasOwnProperty("t")&&(g=v.onnx.TensorProto.verify(s.t)))return"t."+g;if(null!=s.g&&s.hasOwnProperty("g")&&(g=v.onnx.GraphProto.verify(s.g)))return"g."+g;if(null!=s.sparseTensor&&s.hasOwnProperty("sparseTensor")&&(g=v.onnx.SparseTensorProto.verify(s.sparseTensor)))return"sparseTensor."+g;if(null!=s.tp&&s.hasOwnProperty("tp")&&(g=v.onnx.TypeProto.verify(s.tp)))return"tp."+g;if(null!=s.floats&&s.hasOwnProperty("floats")){if(!Array.isArray(s.floats))return"floats: array expected";for(var p=0;p<s.floats.length;++p)if("number"!=typeof s.floats[p])return"floats: number[] expected"}if(null!=s.ints&&s.hasOwnProperty("ints")){if(!Array.isArray(s.ints))return"ints: array expected";for(p=0;p<s.ints.length;++p)if(!(m.isInteger(s.ints[p])||s.ints[p]&&m.isInteger(s.ints[p].low)&&m.isInteger(s.ints[p].high)))return"ints: integer|Long[] expected"}if(null!=s.strings&&s.hasOwnProperty("strings")){if(!Array.isArray(s.strings))return"strings: array expected";for(p=0;p<s.strings.length;++p)if(!(s.strings[p]&&"number"==typeof s.strings[p].length||m.isString(s.strings[p])))return"strings: buffer[] expected"}if(null!=s.tensors&&s.hasOwnProperty("tensors")){if(!Array.isArray(s.tensors))return"tensors: array expected";for(p=0;p<s.tensors.length;++p)if(g=v.onnx.TensorProto.verify(s.tensors[p]))return"tensors."+g}if(null!=s.graphs&&s.hasOwnProperty("graphs")){if(!Array.isArray(s.graphs))return"graphs: array expected";for(p=0;p<s.graphs.length;++p)if(g=v.onnx.GraphProto.verify(s.graphs[p]))return"graphs."+g}if(null!=s.sparseTensors&&s.hasOwnProperty("sparseTensors")){if(!Array.isArray(s.sparseTensors))return"sparseTensors: array expected";for(p=0;p<s.sparseTensors.length;++p)if(g=v.onnx.SparseTensorProto.verify(s.sparseTensors[p]))return"sparseTensors."+g}if(null!=s.typeProtos&&s.hasOwnProperty("typeProtos")){if(!Array.isArray(s.typeProtos))return"typeProtos: array expected";for(p=0;p<s.typeProtos.length;++p){var g;if(g=v.onnx.TypeProto.verify(s.typeProtos[p]))return"typeProtos."+g}}return null},h.fromObject=function(s){if(s instanceof v.onnx.AttributeProto)return s;var g=new v.onnx.AttributeProto;switch(null!=s.name&&(g.name=String(s.name)),null!=s.refAttrName&&(g.refAttrName=String(s.refAttrName)),null!=s.docString&&(g.docString=String(s.docString)),s.type){default:if("number"==typeof s.type){g.type=s.type;break}break;case"UNDEFINED":case 0:g.type=0;break;case"FLOAT":case 1:g.type=1;break;case"INT":case 2:g.type=2;break;case"STRING":case 3:g.type=3;break;case"TENSOR":case 4:g.type=4;break;case"GRAPH":case 5:g.type=5;break;case"SPARSE_TENSOR":case 11:g.type=11;break;case"TYPE_PROTO":case 13:g.type=13;break;case"FLOATS":case 6:g.type=6;break;case"INTS":case 7:g.type=7;break;case"STRINGS":case 8:g.type=8;break;case"TENSORS":case 9:g.type=9;break;case"GRAPHS":case 10:g.type=10;break;case"SPARSE_TENSORS":case 12:g.type=12;break;case"TYPE_PROTOS":case 14:g.type=14}if(null!=s.f&&(g.f=Number(s.f)),null!=s.i&&(m.Long?(g.i=m.Long.fromValue(s.i)).unsigned=!1:"string"==typeof s.i?g.i=parseInt(s.i,10):"number"==typeof s.i?g.i=s.i:"object"==typeof s.i&&(g.i=new m.LongBits(s.i.low>>>0,s.i.high>>>0).toNumber())),null!=s.s&&("string"==typeof s.s?m.base64.decode(s.s,g.s=m.newBuffer(m.base64.length(s.s)),0):s.s.length>=0&&(g.s=s.s)),null!=s.t){if("object"!=typeof s.t)throw TypeError(".onnx.AttributeProto.t: object expected");g.t=v.onnx.TensorProto.fromObject(s.t)}if(null!=s.g){if("object"!=typeof s.g)throw TypeError(".onnx.AttributeProto.g: object expected");g.g=v.onnx.GraphProto.fromObject(s.g)}if(null!=s.sparseTensor){if("object"!=typeof s.sparseTensor)throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");g.sparseTensor=v.onnx.SparseTensorProto.fromObject(s.sparseTensor)}if(null!=s.tp){if("object"!=typeof s.tp)throw TypeError(".onnx.AttributeProto.tp: object expected");g.tp=v.onnx.TypeProto.fromObject(s.tp)}if(s.floats){if(!Array.isArray(s.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");g.floats=[];for(var p=0;p<s.floats.length;++p)g.floats[p]=Number(s.floats[p])}if(s.ints){if(!Array.isArray(s.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(g.ints=[],p=0;p<s.ints.length;++p)m.Long?(g.ints[p]=m.Long.fromValue(s.ints[p])).unsigned=!1:"string"==typeof s.ints[p]?g.ints[p]=parseInt(s.ints[p],10):"number"==typeof s.ints[p]?g.ints[p]=s.ints[p]:"object"==typeof s.ints[p]&&(g.ints[p]=new m.LongBits(s.ints[p].low>>>0,s.ints[p].high>>>0).toNumber())}if(s.strings){if(!Array.isArray(s.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(g.strings=[],p=0;p<s.strings.length;++p)"string"==typeof s.strings[p]?m.base64.decode(s.strings[p],g.strings[p]=m.newBuffer(m.base64.length(s.strings[p])),0):s.strings[p].length>=0&&(g.strings[p]=s.strings[p])}if(s.tensors){if(!Array.isArray(s.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(g.tensors=[],p=0;p<s.tensors.length;++p){if("object"!=typeof s.tensors[p])throw TypeError(".onnx.AttributeProto.tensors: object expected");g.tensors[p]=v.onnx.TensorProto.fromObject(s.tensors[p])}}if(s.graphs){if(!Array.isArray(s.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(g.graphs=[],p=0;p<s.graphs.length;++p){if("object"!=typeof s.graphs[p])throw TypeError(".onnx.AttributeProto.graphs: object expected");g.graphs[p]=v.onnx.GraphProto.fromObject(s.graphs[p])}}if(s.sparseTensors){if(!Array.isArray(s.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");for(g.sparseTensors=[],p=0;p<s.sparseTensors.length;++p){if("object"!=typeof s.sparseTensors[p])throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");g.sparseTensors[p]=v.onnx.SparseTensorProto.fromObject(s.sparseTensors[p])}}if(s.typeProtos){if(!Array.isArray(s.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");for(g.typeProtos=[],p=0;p<s.typeProtos.length;++p){if("object"!=typeof s.typeProtos[p])throw TypeError(".onnx.AttributeProto.typeProtos: object expected");g.typeProtos[p]=v.onnx.TypeProto.fromObject(s.typeProtos[p])}}return g},h.toObject=function(s,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.floats=[],p.ints=[],p.strings=[],p.tensors=[],p.graphs=[],p.typeProtos=[],p.sparseTensors=[]),g.defaults){if(p.name="",p.f=0,m.Long){var T=new m.Long(0,0,!1);p.i=g.longs===String?T.toString():g.longs===Number?T.toNumber():T}else p.i=g.longs===String?"0":0;g.bytes===String?p.s="":(p.s=[],g.bytes!==Array&&(p.s=m.newBuffer(p.s))),p.t=null,p.g=null,p.docString="",p.tp=null,p.type=g.enums===String?"UNDEFINED":0,p.refAttrName="",p.sparseTensor=null}if(null!=s.name&&s.hasOwnProperty("name")&&(p.name=s.name),null!=s.f&&s.hasOwnProperty("f")&&(p.f=g.json&&!isFinite(s.f)?String(s.f):s.f),null!=s.i&&s.hasOwnProperty("i")&&(p.i="number"==typeof s.i?g.longs===String?String(s.i):s.i:g.longs===String?m.Long.prototype.toString.call(s.i):g.longs===Number?new m.LongBits(s.i.low>>>0,s.i.high>>>0).toNumber():s.i),null!=s.s&&s.hasOwnProperty("s")&&(p.s=g.bytes===String?m.base64.encode(s.s,0,s.s.length):g.bytes===Array?Array.prototype.slice.call(s.s):s.s),null!=s.t&&s.hasOwnProperty("t")&&(p.t=v.onnx.TensorProto.toObject(s.t,g)),null!=s.g&&s.hasOwnProperty("g")&&(p.g=v.onnx.GraphProto.toObject(s.g,g)),s.floats&&s.floats.length){p.floats=[];for(var I=0;I<s.floats.length;++I)p.floats[I]=g.json&&!isFinite(s.floats[I])?String(s.floats[I]):s.floats[I]}if(s.ints&&s.ints.length)for(p.ints=[],I=0;I<s.ints.length;++I)p.ints[I]="number"==typeof s.ints[I]?g.longs===String?String(s.ints[I]):s.ints[I]:g.longs===String?m.Long.prototype.toString.call(s.ints[I]):g.longs===Number?new m.LongBits(s.ints[I].low>>>0,s.ints[I].high>>>0).toNumber():s.ints[I];if(s.strings&&s.strings.length)for(p.strings=[],I=0;I<s.strings.length;++I)p.strings[I]=g.bytes===String?m.base64.encode(s.strings[I],0,s.strings[I].length):g.bytes===Array?Array.prototype.slice.call(s.strings[I]):s.strings[I];if(s.tensors&&s.tensors.length)for(p.tensors=[],I=0;I<s.tensors.length;++I)p.tensors[I]=v.onnx.TensorProto.toObject(s.tensors[I],g);if(s.graphs&&s.graphs.length)for(p.graphs=[],I=0;I<s.graphs.length;++I)p.graphs[I]=v.onnx.GraphProto.toObject(s.graphs[I],g);if(null!=s.docString&&s.hasOwnProperty("docString")&&(p.docString=s.docString),null!=s.tp&&s.hasOwnProperty("tp")&&(p.tp=v.onnx.TypeProto.toObject(s.tp,g)),s.typeProtos&&s.typeProtos.length)for(p.typeProtos=[],I=0;I<s.typeProtos.length;++I)p.typeProtos[I]=v.onnx.TypeProto.toObject(s.typeProtos[I],g);if(null!=s.type&&s.hasOwnProperty("type")&&(p.type=g.enums===String?void 0===v.onnx.AttributeProto.AttributeType[s.type]?s.type:v.onnx.AttributeProto.AttributeType[s.type]:s.type),null!=s.refAttrName&&s.hasOwnProperty("refAttrName")&&(p.refAttrName=s.refAttrName),null!=s.sparseTensor&&s.hasOwnProperty("sparseTensor")&&(p.sparseTensor=v.onnx.SparseTensorProto.toObject(s.sparseTensor,g)),s.sparseTensors&&s.sparseTensors.length)for(p.sparseTensors=[],I=0;I<s.sparseTensors.length;++I)p.sparseTensors[I]=v.onnx.SparseTensorProto.toObject(s.sparseTensors[I],g);return p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.AttributeProto"},h.AttributeType=function(){var s={},g=Object.create(s);return g[s[0]="UNDEFINED"]=0,g[s[1]="FLOAT"]=1,g[s[2]="INT"]=2,g[s[3]="STRING"]=3,g[s[4]="TENSOR"]=4,g[s[5]="GRAPH"]=5,g[s[11]="SPARSE_TENSOR"]=11,g[s[13]="TYPE_PROTO"]=13,g[s[6]="FLOATS"]=6,g[s[7]="INTS"]=7,g[s[8]="STRINGS"]=8,g[s[9]="TENSORS"]=9,g[s[10]="GRAPHS"]=10,g[s[12]="SPARSE_TENSORS"]=12,g[s[14]="TYPE_PROTOS"]=14,g}(),h}(),l.ValueInfoProto=function(){function h(s){if(s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.name="",h.prototype.type=null,h.prototype.docString="",h.create=function(s){return new h(s)},h.encode=function(s,g){return g||(g=b.create()),null!=s.name&&Object.hasOwnProperty.call(s,"name")&&g.uint32(10).string(s.name),null!=s.type&&Object.hasOwnProperty.call(s,"type")&&v.onnx.TypeProto.encode(s.type,g.uint32(18).fork()).ldelim(),null!=s.docString&&Object.hasOwnProperty.call(s,"docString")&&g.uint32(26).string(s.docString),g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.ValueInfoProto;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:T.name=s.string();break;case 2:T.type=v.onnx.TypeProto.decode(s,s.uint32());break;case 3:T.docString=s.string();break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.name&&s.hasOwnProperty("name")&&!m.isString(s.name))return"name: string expected";if(null!=s.type&&s.hasOwnProperty("type")){var g=v.onnx.TypeProto.verify(s.type);if(g)return"type."+g}return null!=s.docString&&s.hasOwnProperty("docString")&&!m.isString(s.docString)?"docString: string expected":null},h.fromObject=function(s){if(s instanceof v.onnx.ValueInfoProto)return s;var g=new v.onnx.ValueInfoProto;if(null!=s.name&&(g.name=String(s.name)),null!=s.type){if("object"!=typeof s.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");g.type=v.onnx.TypeProto.fromObject(s.type)}return null!=s.docString&&(g.docString=String(s.docString)),g},h.toObject=function(s,g){g||(g={});var p={};return g.defaults&&(p.name="",p.type=null,p.docString=""),null!=s.name&&s.hasOwnProperty("name")&&(p.name=s.name),null!=s.type&&s.hasOwnProperty("type")&&(p.type=v.onnx.TypeProto.toObject(s.type,g)),null!=s.docString&&s.hasOwnProperty("docString")&&(p.docString=s.docString),p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.ValueInfoProto"},h}(),l.NodeProto=function(){function h(s){if(this.input=[],this.output=[],this.attribute=[],s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.input=m.emptyArray,h.prototype.output=m.emptyArray,h.prototype.name="",h.prototype.opType="",h.prototype.domain="",h.prototype.attribute=m.emptyArray,h.prototype.docString="",h.create=function(s){return new h(s)},h.encode=function(s,g){if(g||(g=b.create()),null!=s.input&&s.input.length)for(var p=0;p<s.input.length;++p)g.uint32(10).string(s.input[p]);if(null!=s.output&&s.output.length)for(p=0;p<s.output.length;++p)g.uint32(18).string(s.output[p]);if(null!=s.name&&Object.hasOwnProperty.call(s,"name")&&g.uint32(26).string(s.name),null!=s.opType&&Object.hasOwnProperty.call(s,"opType")&&g.uint32(34).string(s.opType),null!=s.attribute&&s.attribute.length)for(p=0;p<s.attribute.length;++p)v.onnx.AttributeProto.encode(s.attribute[p],g.uint32(42).fork()).ldelim();return null!=s.docString&&Object.hasOwnProperty.call(s,"docString")&&g.uint32(50).string(s.docString),null!=s.domain&&Object.hasOwnProperty.call(s,"domain")&&g.uint32(58).string(s.domain),g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.NodeProto;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:T.input&&T.input.length||(T.input=[]),T.input.push(s.string());break;case 2:T.output&&T.output.length||(T.output=[]),T.output.push(s.string());break;case 3:T.name=s.string();break;case 4:T.opType=s.string();break;case 7:T.domain=s.string();break;case 5:T.attribute&&T.attribute.length||(T.attribute=[]),T.attribute.push(v.onnx.AttributeProto.decode(s,s.uint32()));break;case 6:T.docString=s.string();break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.input&&s.hasOwnProperty("input")){if(!Array.isArray(s.input))return"input: array expected";for(var g=0;g<s.input.length;++g)if(!m.isString(s.input[g]))return"input: string[] expected"}if(null!=s.output&&s.hasOwnProperty("output")){if(!Array.isArray(s.output))return"output: array expected";for(g=0;g<s.output.length;++g)if(!m.isString(s.output[g]))return"output: string[] expected"}if(null!=s.name&&s.hasOwnProperty("name")&&!m.isString(s.name))return"name: string expected";if(null!=s.opType&&s.hasOwnProperty("opType")&&!m.isString(s.opType))return"opType: string expected";if(null!=s.domain&&s.hasOwnProperty("domain")&&!m.isString(s.domain))return"domain: string expected";if(null!=s.attribute&&s.hasOwnProperty("attribute")){if(!Array.isArray(s.attribute))return"attribute: array expected";for(g=0;g<s.attribute.length;++g){var p=v.onnx.AttributeProto.verify(s.attribute[g]);if(p)return"attribute."+p}}return null!=s.docString&&s.hasOwnProperty("docString")&&!m.isString(s.docString)?"docString: string expected":null},h.fromObject=function(s){if(s instanceof v.onnx.NodeProto)return s;var g=new v.onnx.NodeProto;if(s.input){if(!Array.isArray(s.input))throw TypeError(".onnx.NodeProto.input: array expected");g.input=[];for(var p=0;p<s.input.length;++p)g.input[p]=String(s.input[p])}if(s.output){if(!Array.isArray(s.output))throw TypeError(".onnx.NodeProto.output: array expected");for(g.output=[],p=0;p<s.output.length;++p)g.output[p]=String(s.output[p])}if(null!=s.name&&(g.name=String(s.name)),null!=s.opType&&(g.opType=String(s.opType)),null!=s.domain&&(g.domain=String(s.domain)),s.attribute){if(!Array.isArray(s.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(g.attribute=[],p=0;p<s.attribute.length;++p){if("object"!=typeof s.attribute[p])throw TypeError(".onnx.NodeProto.attribute: object expected");g.attribute[p]=v.onnx.AttributeProto.fromObject(s.attribute[p])}}return null!=s.docString&&(g.docString=String(s.docString)),g},h.toObject=function(s,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.input=[],p.output=[],p.attribute=[]),g.defaults&&(p.name="",p.opType="",p.docString="",p.domain=""),s.input&&s.input.length){p.input=[];for(var T=0;T<s.input.length;++T)p.input[T]=s.input[T]}if(s.output&&s.output.length)for(p.output=[],T=0;T<s.output.length;++T)p.output[T]=s.output[T];if(null!=s.name&&s.hasOwnProperty("name")&&(p.name=s.name),null!=s.opType&&s.hasOwnProperty("opType")&&(p.opType=s.opType),s.attribute&&s.attribute.length)for(p.attribute=[],T=0;T<s.attribute.length;++T)p.attribute[T]=v.onnx.AttributeProto.toObject(s.attribute[T],g);return null!=s.docString&&s.hasOwnProperty("docString")&&(p.docString=s.docString),null!=s.domain&&s.hasOwnProperty("domain")&&(p.domain=s.domain),p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.NodeProto"},h}(),l.TrainingInfoProto=function(){function h(s){if(this.initializationBinding=[],this.updateBinding=[],s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.initialization=null,h.prototype.algorithm=null,h.prototype.initializationBinding=m.emptyArray,h.prototype.updateBinding=m.emptyArray,h.create=function(s){return new h(s)},h.encode=function(s,g){if(g||(g=b.create()),null!=s.initialization&&Object.hasOwnProperty.call(s,"initialization")&&v.onnx.GraphProto.encode(s.initialization,g.uint32(10).fork()).ldelim(),null!=s.algorithm&&Object.hasOwnProperty.call(s,"algorithm")&&v.onnx.GraphProto.encode(s.algorithm,g.uint32(18).fork()).ldelim(),null!=s.initializationBinding&&s.initializationBinding.length)for(var p=0;p<s.initializationBinding.length;++p)v.onnx.StringStringEntryProto.encode(s.initializationBinding[p],g.uint32(26).fork()).ldelim();if(null!=s.updateBinding&&s.updateBinding.length)for(p=0;p<s.updateBinding.length;++p)v.onnx.StringStringEntryProto.encode(s.updateBinding[p],g.uint32(34).fork()).ldelim();return g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.TrainingInfoProto;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:T.initialization=v.onnx.GraphProto.decode(s,s.uint32());break;case 2:T.algorithm=v.onnx.GraphProto.decode(s,s.uint32());break;case 3:T.initializationBinding&&T.initializationBinding.length||(T.initializationBinding=[]),T.initializationBinding.push(v.onnx.StringStringEntryProto.decode(s,s.uint32()));break;case 4:T.updateBinding&&T.updateBinding.length||(T.updateBinding=[]),T.updateBinding.push(v.onnx.StringStringEntryProto.decode(s,s.uint32()));break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.initialization&&s.hasOwnProperty("initialization")&&(g=v.onnx.GraphProto.verify(s.initialization)))return"initialization."+g;if(null!=s.algorithm&&s.hasOwnProperty("algorithm")&&(g=v.onnx.GraphProto.verify(s.algorithm)))return"algorithm."+g;if(null!=s.initializationBinding&&s.hasOwnProperty("initializationBinding")){if(!Array.isArray(s.initializationBinding))return"initializationBinding: array expected";for(var p=0;p<s.initializationBinding.length;++p)if(g=v.onnx.StringStringEntryProto.verify(s.initializationBinding[p]))return"initializationBinding."+g}if(null!=s.updateBinding&&s.hasOwnProperty("updateBinding")){if(!Array.isArray(s.updateBinding))return"updateBinding: array expected";for(p=0;p<s.updateBinding.length;++p){var g;if(g=v.onnx.StringStringEntryProto.verify(s.updateBinding[p]))return"updateBinding."+g}}return null},h.fromObject=function(s){if(s instanceof v.onnx.TrainingInfoProto)return s;var g=new v.onnx.TrainingInfoProto;if(null!=s.initialization){if("object"!=typeof s.initialization)throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");g.initialization=v.onnx.GraphProto.fromObject(s.initialization)}if(null!=s.algorithm){if("object"!=typeof s.algorithm)throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");g.algorithm=v.onnx.GraphProto.fromObject(s.algorithm)}if(s.initializationBinding){if(!Array.isArray(s.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");g.initializationBinding=[];for(var p=0;p<s.initializationBinding.length;++p){if("object"!=typeof s.initializationBinding[p])throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");g.initializationBinding[p]=v.onnx.StringStringEntryProto.fromObject(s.initializationBinding[p])}}if(s.updateBinding){if(!Array.isArray(s.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");for(g.updateBinding=[],p=0;p<s.updateBinding.length;++p){if("object"!=typeof s.updateBinding[p])throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");g.updateBinding[p]=v.onnx.StringStringEntryProto.fromObject(s.updateBinding[p])}}return g},h.toObject=function(s,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.initializationBinding=[],p.updateBinding=[]),g.defaults&&(p.initialization=null,p.algorithm=null),null!=s.initialization&&s.hasOwnProperty("initialization")&&(p.initialization=v.onnx.GraphProto.toObject(s.initialization,g)),null!=s.algorithm&&s.hasOwnProperty("algorithm")&&(p.algorithm=v.onnx.GraphProto.toObject(s.algorithm,g)),s.initializationBinding&&s.initializationBinding.length){p.initializationBinding=[];for(var T=0;T<s.initializationBinding.length;++T)p.initializationBinding[T]=v.onnx.StringStringEntryProto.toObject(s.initializationBinding[T],g)}if(s.updateBinding&&s.updateBinding.length)for(p.updateBinding=[],T=0;T<s.updateBinding.length;++T)p.updateBinding[T]=v.onnx.StringStringEntryProto.toObject(s.updateBinding[T],g);return p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.TrainingInfoProto"},h}(),l.ModelProto=function(){function h(s){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.irVersion=m.Long?m.Long.fromBits(0,0,!1):0,h.prototype.opsetImport=m.emptyArray,h.prototype.producerName="",h.prototype.producerVersion="",h.prototype.domain="",h.prototype.modelVersion=m.Long?m.Long.fromBits(0,0,!1):0,h.prototype.docString="",h.prototype.graph=null,h.prototype.metadataProps=m.emptyArray,h.prototype.trainingInfo=m.emptyArray,h.prototype.functions=m.emptyArray,h.create=function(s){return new h(s)},h.encode=function(s,g){if(g||(g=b.create()),null!=s.irVersion&&Object.hasOwnProperty.call(s,"irVersion")&&g.uint32(8).int64(s.irVersion),null!=s.producerName&&Object.hasOwnProperty.call(s,"producerName")&&g.uint32(18).string(s.producerName),null!=s.producerVersion&&Object.hasOwnProperty.call(s,"producerVersion")&&g.uint32(26).string(s.producerVersion),null!=s.domain&&Object.hasOwnProperty.call(s,"domain")&&g.uint32(34).string(s.domain),null!=s.modelVersion&&Object.hasOwnProperty.call(s,"modelVersion")&&g.uint32(40).int64(s.modelVersion),null!=s.docString&&Object.hasOwnProperty.call(s,"docString")&&g.uint32(50).string(s.docString),null!=s.graph&&Object.hasOwnProperty.call(s,"graph")&&v.onnx.GraphProto.encode(s.graph,g.uint32(58).fork()).ldelim(),null!=s.opsetImport&&s.opsetImport.length)for(var p=0;p<s.opsetImport.length;++p)v.onnx.OperatorSetIdProto.encode(s.opsetImport[p],g.uint32(66).fork()).ldelim();if(null!=s.metadataProps&&s.metadataProps.length)for(p=0;p<s.metadataProps.length;++p)v.onnx.StringStringEntryProto.encode(s.metadataProps[p],g.uint32(114).fork()).ldelim();if(null!=s.trainingInfo&&s.trainingInfo.length)for(p=0;p<s.trainingInfo.length;++p)v.onnx.TrainingInfoProto.encode(s.trainingInfo[p],g.uint32(162).fork()).ldelim();if(null!=s.functions&&s.functions.length)for(p=0;p<s.functions.length;++p)v.onnx.FunctionProto.encode(s.functions[p],g.uint32(202).fork()).ldelim();return g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.ModelProto;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:T.irVersion=s.int64();break;case 8:T.opsetImport&&T.opsetImport.length||(T.opsetImport=[]),T.opsetImport.push(v.onnx.OperatorSetIdProto.decode(s,s.uint32()));break;case 2:T.producerName=s.string();break;case 3:T.producerVersion=s.string();break;case 4:T.domain=s.string();break;case 5:T.modelVersion=s.int64();break;case 6:T.docString=s.string();break;case 7:T.graph=v.onnx.GraphProto.decode(s,s.uint32());break;case 14:T.metadataProps&&T.metadataProps.length||(T.metadataProps=[]),T.metadataProps.push(v.onnx.StringStringEntryProto.decode(s,s.uint32()));break;case 20:T.trainingInfo&&T.trainingInfo.length||(T.trainingInfo=[]),T.trainingInfo.push(v.onnx.TrainingInfoProto.decode(s,s.uint32()));break;case 25:T.functions&&T.functions.length||(T.functions=[]),T.functions.push(v.onnx.FunctionProto.decode(s,s.uint32()));break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.irVersion&&s.hasOwnProperty("irVersion")&&!m.isInteger(s.irVersion)&&!(s.irVersion&&m.isInteger(s.irVersion.low)&&m.isInteger(s.irVersion.high)))return"irVersion: integer|Long expected";if(null!=s.opsetImport&&s.hasOwnProperty("opsetImport")){if(!Array.isArray(s.opsetImport))return"opsetImport: array expected";for(var g=0;g<s.opsetImport.length;++g)if(p=v.onnx.OperatorSetIdProto.verify(s.opsetImport[g]))return"opsetImport."+p}if(null!=s.producerName&&s.hasOwnProperty("producerName")&&!m.isString(s.producerName))return"producerName: string expected";if(null!=s.producerVersion&&s.hasOwnProperty("producerVersion")&&!m.isString(s.producerVersion))return"producerVersion: string expected";if(null!=s.domain&&s.hasOwnProperty("domain")&&!m.isString(s.domain))return"domain: string expected";if(null!=s.modelVersion&&s.hasOwnProperty("modelVersion")&&!m.isInteger(s.modelVersion)&&!(s.modelVersion&&m.isInteger(s.modelVersion.low)&&m.isInteger(s.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=s.docString&&s.hasOwnProperty("docString")&&!m.isString(s.docString))return"docString: string expected";if(null!=s.graph&&s.hasOwnProperty("graph")&&(p=v.onnx.GraphProto.verify(s.graph)))return"graph."+p;if(null!=s.metadataProps&&s.hasOwnProperty("metadataProps")){if(!Array.isArray(s.metadataProps))return"metadataProps: array expected";for(g=0;g<s.metadataProps.length;++g)if(p=v.onnx.StringStringEntryProto.verify(s.metadataProps[g]))return"metadataProps."+p}if(null!=s.trainingInfo&&s.hasOwnProperty("trainingInfo")){if(!Array.isArray(s.trainingInfo))return"trainingInfo: array expected";for(g=0;g<s.trainingInfo.length;++g)if(p=v.onnx.TrainingInfoProto.verify(s.trainingInfo[g]))return"trainingInfo."+p}if(null!=s.functions&&s.hasOwnProperty("functions")){if(!Array.isArray(s.functions))return"functions: array expected";for(g=0;g<s.functions.length;++g){var p;if(p=v.onnx.FunctionProto.verify(s.functions[g]))return"functions."+p}}return null},h.fromObject=function(s){if(s instanceof v.onnx.ModelProto)return s;var g=new v.onnx.ModelProto;if(null!=s.irVersion&&(m.Long?(g.irVersion=m.Long.fromValue(s.irVersion)).unsigned=!1:"string"==typeof s.irVersion?g.irVersion=parseInt(s.irVersion,10):"number"==typeof s.irVersion?g.irVersion=s.irVersion:"object"==typeof s.irVersion&&(g.irVersion=new m.LongBits(s.irVersion.low>>>0,s.irVersion.high>>>0).toNumber())),s.opsetImport){if(!Array.isArray(s.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");g.opsetImport=[];for(var p=0;p<s.opsetImport.length;++p){if("object"!=typeof s.opsetImport[p])throw TypeError(".onnx.ModelProto.opsetImport: object expected");g.opsetImport[p]=v.onnx.OperatorSetIdProto.fromObject(s.opsetImport[p])}}if(null!=s.producerName&&(g.producerName=String(s.producerName)),null!=s.producerVersion&&(g.producerVersion=String(s.producerVersion)),null!=s.domain&&(g.domain=String(s.domain)),null!=s.modelVersion&&(m.Long?(g.modelVersion=m.Long.fromValue(s.modelVersion)).unsigned=!1:"string"==typeof s.modelVersion?g.modelVersion=parseInt(s.modelVersion,10):"number"==typeof s.modelVersion?g.modelVersion=s.modelVersion:"object"==typeof s.modelVersion&&(g.modelVersion=new m.LongBits(s.modelVersion.low>>>0,s.modelVersion.high>>>0).toNumber())),null!=s.docString&&(g.docString=String(s.docString)),null!=s.graph){if("object"!=typeof s.graph)throw TypeError(".onnx.ModelProto.graph: object expected");g.graph=v.onnx.GraphProto.fromObject(s.graph)}if(s.metadataProps){if(!Array.isArray(s.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(g.metadataProps=[],p=0;p<s.metadataProps.length;++p){if("object"!=typeof s.metadataProps[p])throw TypeError(".onnx.ModelProto.metadataProps: object expected");g.metadataProps[p]=v.onnx.StringStringEntryProto.fromObject(s.metadataProps[p])}}if(s.trainingInfo){if(!Array.isArray(s.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");for(g.trainingInfo=[],p=0;p<s.trainingInfo.length;++p){if("object"!=typeof s.trainingInfo[p])throw TypeError(".onnx.ModelProto.trainingInfo: object expected");g.trainingInfo[p]=v.onnx.TrainingInfoProto.fromObject(s.trainingInfo[p])}}if(s.functions){if(!Array.isArray(s.functions))throw TypeError(".onnx.ModelProto.functions: array expected");for(g.functions=[],p=0;p<s.functions.length;++p){if("object"!=typeof s.functions[p])throw TypeError(".onnx.ModelProto.functions: object expected");g.functions[p]=v.onnx.FunctionProto.fromObject(s.functions[p])}}return g},h.toObject=function(s,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.opsetImport=[],p.metadataProps=[],p.trainingInfo=[],p.functions=[]),g.defaults){if(m.Long){var T=new m.Long(0,0,!1);p.irVersion=g.longs===String?T.toString():g.longs===Number?T.toNumber():T}else p.irVersion=g.longs===String?"0":0;p.producerName="",p.producerVersion="",p.domain="",m.Long?(T=new m.Long(0,0,!1),p.modelVersion=g.longs===String?T.toString():g.longs===Number?T.toNumber():T):p.modelVersion=g.longs===String?"0":0,p.docString="",p.graph=null}if(null!=s.irVersion&&s.hasOwnProperty("irVersion")&&(p.irVersion="number"==typeof s.irVersion?g.longs===String?String(s.irVersion):s.irVersion:g.longs===String?m.Long.prototype.toString.call(s.irVersion):g.longs===Number?new m.LongBits(s.irVersion.low>>>0,s.irVersion.high>>>0).toNumber():s.irVersion),null!=s.producerName&&s.hasOwnProperty("producerName")&&(p.producerName=s.producerName),null!=s.producerVersion&&s.hasOwnProperty("producerVersion")&&(p.producerVersion=s.producerVersion),null!=s.domain&&s.hasOwnProperty("domain")&&(p.domain=s.domain),null!=s.modelVersion&&s.hasOwnProperty("modelVersion")&&(p.modelVersion="number"==typeof s.modelVersion?g.longs===String?String(s.modelVersion):s.modelVersion:g.longs===String?m.Long.prototype.toString.call(s.modelVersion):g.longs===Number?new m.LongBits(s.modelVersion.low>>>0,s.modelVersion.high>>>0).toNumber():s.modelVersion),null!=s.docString&&s.hasOwnProperty("docString")&&(p.docString=s.docString),null!=s.graph&&s.hasOwnProperty("graph")&&(p.graph=v.onnx.GraphProto.toObject(s.graph,g)),s.opsetImport&&s.opsetImport.length){p.opsetImport=[];for(var I=0;I<s.opsetImport.length;++I)p.opsetImport[I]=v.onnx.OperatorSetIdProto.toObject(s.opsetImport[I],g)}if(s.metadataProps&&s.metadataProps.length)for(p.metadataProps=[],I=0;I<s.metadataProps.length;++I)p.metadataProps[I]=v.onnx.StringStringEntryProto.toObject(s.metadataProps[I],g);if(s.trainingInfo&&s.trainingInfo.length)for(p.trainingInfo=[],I=0;I<s.trainingInfo.length;++I)p.trainingInfo[I]=v.onnx.TrainingInfoProto.toObject(s.trainingInfo[I],g);if(s.functions&&s.functions.length)for(p.functions=[],I=0;I<s.functions.length;++I)p.functions[I]=v.onnx.FunctionProto.toObject(s.functions[I],g);return p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.ModelProto"},h}(),l.StringStringEntryProto=function(){function h(s){if(s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.key="",h.prototype.value="",h.create=function(s){return new h(s)},h.encode=function(s,g){return g||(g=b.create()),null!=s.key&&Object.hasOwnProperty.call(s,"key")&&g.uint32(10).string(s.key),null!=s.value&&Object.hasOwnProperty.call(s,"value")&&g.uint32(18).string(s.value),g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.StringStringEntryProto;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:T.key=s.string();break;case 2:T.value=s.string();break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){return"object"!=typeof s||null===s?"object expected":null!=s.key&&s.hasOwnProperty("key")&&!m.isString(s.key)?"key: string expected":null!=s.value&&s.hasOwnProperty("value")&&!m.isString(s.value)?"value: string expected":null},h.fromObject=function(s){if(s instanceof v.onnx.StringStringEntryProto)return s;var g=new v.onnx.StringStringEntryProto;return null!=s.key&&(g.key=String(s.key)),null!=s.value&&(g.value=String(s.value)),g},h.toObject=function(s,g){g||(g={});var p={};return g.defaults&&(p.key="",p.value=""),null!=s.key&&s.hasOwnProperty("key")&&(p.key=s.key),null!=s.value&&s.hasOwnProperty("value")&&(p.value=s.value),p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.StringStringEntryProto"},h}(),l.TensorAnnotation=function(){function h(s){if(this.quantParameterTensorNames=[],s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.tensorName="",h.prototype.quantParameterTensorNames=m.emptyArray,h.create=function(s){return new h(s)},h.encode=function(s,g){if(g||(g=b.create()),null!=s.tensorName&&Object.hasOwnProperty.call(s,"tensorName")&&g.uint32(10).string(s.tensorName),null!=s.quantParameterTensorNames&&s.quantParameterTensorNames.length)for(var p=0;p<s.quantParameterTensorNames.length;++p)v.onnx.StringStringEntryProto.encode(s.quantParameterTensorNames[p],g.uint32(18).fork()).ldelim();return g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.TensorAnnotation;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:T.tensorName=s.string();break;case 2:T.quantParameterTensorNames&&T.quantParameterTensorNames.length||(T.quantParameterTensorNames=[]),T.quantParameterTensorNames.push(v.onnx.StringStringEntryProto.decode(s,s.uint32()));break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.tensorName&&s.hasOwnProperty("tensorName")&&!m.isString(s.tensorName))return"tensorName: string expected";if(null!=s.quantParameterTensorNames&&s.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(s.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var g=0;g<s.quantParameterTensorNames.length;++g){var p=v.onnx.StringStringEntryProto.verify(s.quantParameterTensorNames[g]);if(p)return"quantParameterTensorNames."+p}}return null},h.fromObject=function(s){if(s instanceof v.onnx.TensorAnnotation)return s;var g=new v.onnx.TensorAnnotation;if(null!=s.tensorName&&(g.tensorName=String(s.tensorName)),s.quantParameterTensorNames){if(!Array.isArray(s.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");g.quantParameterTensorNames=[];for(var p=0;p<s.quantParameterTensorNames.length;++p){if("object"!=typeof s.quantParameterTensorNames[p])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");g.quantParameterTensorNames[p]=v.onnx.StringStringEntryProto.fromObject(s.quantParameterTensorNames[p])}}return g},h.toObject=function(s,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.quantParameterTensorNames=[]),g.defaults&&(p.tensorName=""),null!=s.tensorName&&s.hasOwnProperty("tensorName")&&(p.tensorName=s.tensorName),s.quantParameterTensorNames&&s.quantParameterTensorNames.length){p.quantParameterTensorNames=[];for(var T=0;T<s.quantParameterTensorNames.length;++T)p.quantParameterTensorNames[T]=v.onnx.StringStringEntryProto.toObject(s.quantParameterTensorNames[T],g)}return p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.TensorAnnotation"},h}(),l.GraphProto=function(){function h(s){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.node=m.emptyArray,h.prototype.name="",h.prototype.initializer=m.emptyArray,h.prototype.sparseInitializer=m.emptyArray,h.prototype.docString="",h.prototype.input=m.emptyArray,h.prototype.output=m.emptyArray,h.prototype.valueInfo=m.emptyArray,h.prototype.quantizationAnnotation=m.emptyArray,h.create=function(s){return new h(s)},h.encode=function(s,g){if(g||(g=b.create()),null!=s.node&&s.node.length)for(var p=0;p<s.node.length;++p)v.onnx.NodeProto.encode(s.node[p],g.uint32(10).fork()).ldelim();if(null!=s.name&&Object.hasOwnProperty.call(s,"name")&&g.uint32(18).string(s.name),null!=s.initializer&&s.initializer.length)for(p=0;p<s.initializer.length;++p)v.onnx.TensorProto.encode(s.initializer[p],g.uint32(42).fork()).ldelim();if(null!=s.docString&&Object.hasOwnProperty.call(s,"docString")&&g.uint32(82).string(s.docString),null!=s.input&&s.input.length)for(p=0;p<s.input.length;++p)v.onnx.ValueInfoProto.encode(s.input[p],g.uint32(90).fork()).ldelim();if(null!=s.output&&s.output.length)for(p=0;p<s.output.length;++p)v.onnx.ValueInfoProto.encode(s.output[p],g.uint32(98).fork()).ldelim();if(null!=s.valueInfo&&s.valueInfo.length)for(p=0;p<s.valueInfo.length;++p)v.onnx.ValueInfoProto.encode(s.valueInfo[p],g.uint32(106).fork()).ldelim();if(null!=s.quantizationAnnotation&&s.quantizationAnnotation.length)for(p=0;p<s.quantizationAnnotation.length;++p)v.onnx.TensorAnnotation.encode(s.quantizationAnnotation[p],g.uint32(114).fork()).ldelim();if(null!=s.sparseInitializer&&s.sparseInitializer.length)for(p=0;p<s.sparseInitializer.length;++p)v.onnx.SparseTensorProto.encode(s.sparseInitializer[p],g.uint32(122).fork()).ldelim();return g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.GraphProto;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:T.node&&T.node.length||(T.node=[]),T.node.push(v.onnx.NodeProto.decode(s,s.uint32()));break;case 2:T.name=s.string();break;case 5:T.initializer&&T.initializer.length||(T.initializer=[]),T.initializer.push(v.onnx.TensorProto.decode(s,s.uint32()));break;case 15:T.sparseInitializer&&T.sparseInitializer.length||(T.sparseInitializer=[]),T.sparseInitializer.push(v.onnx.SparseTensorProto.decode(s,s.uint32()));break;case 10:T.docString=s.string();break;case 11:T.input&&T.input.length||(T.input=[]),T.input.push(v.onnx.ValueInfoProto.decode(s,s.uint32()));break;case 12:T.output&&T.output.length||(T.output=[]),T.output.push(v.onnx.ValueInfoProto.decode(s,s.uint32()));break;case 13:T.valueInfo&&T.valueInfo.length||(T.valueInfo=[]),T.valueInfo.push(v.onnx.ValueInfoProto.decode(s,s.uint32()));break;case 14:T.quantizationAnnotation&&T.quantizationAnnotation.length||(T.quantizationAnnotation=[]),T.quantizationAnnotation.push(v.onnx.TensorAnnotation.decode(s,s.uint32()));break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.node&&s.hasOwnProperty("node")){if(!Array.isArray(s.node))return"node: array expected";for(var g=0;g<s.node.length;++g)if(p=v.onnx.NodeProto.verify(s.node[g]))return"node."+p}if(null!=s.name&&s.hasOwnProperty("name")&&!m.isString(s.name))return"name: string expected";if(null!=s.initializer&&s.hasOwnProperty("initializer")){if(!Array.isArray(s.initializer))return"initializer: array expected";for(g=0;g<s.initializer.length;++g)if(p=v.onnx.TensorProto.verify(s.initializer[g]))return"initializer."+p}if(null!=s.sparseInitializer&&s.hasOwnProperty("sparseInitializer")){if(!Array.isArray(s.sparseInitializer))return"sparseInitializer: array expected";for(g=0;g<s.sparseInitializer.length;++g)if(p=v.onnx.SparseTensorProto.verify(s.sparseInitializer[g]))return"sparseInitializer."+p}if(null!=s.docString&&s.hasOwnProperty("docString")&&!m.isString(s.docString))return"docString: string expected";if(null!=s.input&&s.hasOwnProperty("input")){if(!Array.isArray(s.input))return"input: array expected";for(g=0;g<s.input.length;++g)if(p=v.onnx.ValueInfoProto.verify(s.input[g]))return"input."+p}if(null!=s.output&&s.hasOwnProperty("output")){if(!Array.isArray(s.output))return"output: array expected";for(g=0;g<s.output.length;++g)if(p=v.onnx.ValueInfoProto.verify(s.output[g]))return"output."+p}if(null!=s.valueInfo&&s.hasOwnProperty("valueInfo")){if(!Array.isArray(s.valueInfo))return"valueInfo: array expected";for(g=0;g<s.valueInfo.length;++g)if(p=v.onnx.ValueInfoProto.verify(s.valueInfo[g]))return"valueInfo."+p}if(null!=s.quantizationAnnotation&&s.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(s.quantizationAnnotation))return"quantizationAnnotation: array expected";for(g=0;g<s.quantizationAnnotation.length;++g){var p;if(p=v.onnx.TensorAnnotation.verify(s.quantizationAnnotation[g]))return"quantizationAnnotation."+p}}return null},h.fromObject=function(s){if(s instanceof v.onnx.GraphProto)return s;var g=new v.onnx.GraphProto;if(s.node){if(!Array.isArray(s.node))throw TypeError(".onnx.GraphProto.node: array expected");g.node=[];for(var p=0;p<s.node.length;++p){if("object"!=typeof s.node[p])throw TypeError(".onnx.GraphProto.node: object expected");g.node[p]=v.onnx.NodeProto.fromObject(s.node[p])}}if(null!=s.name&&(g.name=String(s.name)),s.initializer){if(!Array.isArray(s.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(g.initializer=[],p=0;p<s.initializer.length;++p){if("object"!=typeof s.initializer[p])throw TypeError(".onnx.GraphProto.initializer: object expected");g.initializer[p]=v.onnx.TensorProto.fromObject(s.initializer[p])}}if(s.sparseInitializer){if(!Array.isArray(s.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");for(g.sparseInitializer=[],p=0;p<s.sparseInitializer.length;++p){if("object"!=typeof s.sparseInitializer[p])throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");g.sparseInitializer[p]=v.onnx.SparseTensorProto.fromObject(s.sparseInitializer[p])}}if(null!=s.docString&&(g.docString=String(s.docString)),s.input){if(!Array.isArray(s.input))throw TypeError(".onnx.GraphProto.input: array expected");for(g.input=[],p=0;p<s.input.length;++p){if("object"!=typeof s.input[p])throw TypeError(".onnx.GraphProto.input: object expected");g.input[p]=v.onnx.ValueInfoProto.fromObject(s.input[p])}}if(s.output){if(!Array.isArray(s.output))throw TypeError(".onnx.GraphProto.output: array expected");for(g.output=[],p=0;p<s.output.length;++p){if("object"!=typeof s.output[p])throw TypeError(".onnx.GraphProto.output: object expected");g.output[p]=v.onnx.ValueInfoProto.fromObject(s.output[p])}}if(s.valueInfo){if(!Array.isArray(s.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(g.valueInfo=[],p=0;p<s.valueInfo.length;++p){if("object"!=typeof s.valueInfo[p])throw TypeError(".onnx.GraphProto.valueInfo: object expected");g.valueInfo[p]=v.onnx.ValueInfoProto.fromObject(s.valueInfo[p])}}if(s.quantizationAnnotation){if(!Array.isArray(s.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(g.quantizationAnnotation=[],p=0;p<s.quantizationAnnotation.length;++p){if("object"!=typeof s.quantizationAnnotation[p])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");g.quantizationAnnotation[p]=v.onnx.TensorAnnotation.fromObject(s.quantizationAnnotation[p])}}return g},h.toObject=function(s,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.node=[],p.initializer=[],p.input=[],p.output=[],p.valueInfo=[],p.quantizationAnnotation=[],p.sparseInitializer=[]),g.defaults&&(p.name="",p.docString=""),s.node&&s.node.length){p.node=[];for(var T=0;T<s.node.length;++T)p.node[T]=v.onnx.NodeProto.toObject(s.node[T],g)}if(null!=s.name&&s.hasOwnProperty("name")&&(p.name=s.name),s.initializer&&s.initializer.length)for(p.initializer=[],T=0;T<s.initializer.length;++T)p.initializer[T]=v.onnx.TensorProto.toObject(s.initializer[T],g);if(null!=s.docString&&s.hasOwnProperty("docString")&&(p.docString=s.docString),s.input&&s.input.length)for(p.input=[],T=0;T<s.input.length;++T)p.input[T]=v.onnx.ValueInfoProto.toObject(s.input[T],g);if(s.output&&s.output.length)for(p.output=[],T=0;T<s.output.length;++T)p.output[T]=v.onnx.ValueInfoProto.toObject(s.output[T],g);if(s.valueInfo&&s.valueInfo.length)for(p.valueInfo=[],T=0;T<s.valueInfo.length;++T)p.valueInfo[T]=v.onnx.ValueInfoProto.toObject(s.valueInfo[T],g);if(s.quantizationAnnotation&&s.quantizationAnnotation.length)for(p.quantizationAnnotation=[],T=0;T<s.quantizationAnnotation.length;++T)p.quantizationAnnotation[T]=v.onnx.TensorAnnotation.toObject(s.quantizationAnnotation[T],g);if(s.sparseInitializer&&s.sparseInitializer.length)for(p.sparseInitializer=[],T=0;T<s.sparseInitializer.length;++T)p.sparseInitializer[T]=v.onnx.SparseTensorProto.toObject(s.sparseInitializer[T],g);return p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.GraphProto"},h}(),l.TensorProto=function(){function h(s){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.dims=m.emptyArray,h.prototype.dataType=0,h.prototype.segment=null,h.prototype.floatData=m.emptyArray,h.prototype.int32Data=m.emptyArray,h.prototype.stringData=m.emptyArray,h.prototype.int64Data=m.emptyArray,h.prototype.name="",h.prototype.docString="",h.prototype.rawData=m.newBuffer([]),h.prototype.externalData=m.emptyArray,h.prototype.dataLocation=0,h.prototype.doubleData=m.emptyArray,h.prototype.uint64Data=m.emptyArray,h.create=function(s){return new h(s)},h.encode=function(s,g){if(g||(g=b.create()),null!=s.dims&&s.dims.length){g.uint32(10).fork();for(var p=0;p<s.dims.length;++p)g.int64(s.dims[p]);g.ldelim()}if(null!=s.dataType&&Object.hasOwnProperty.call(s,"dataType")&&g.uint32(16).int32(s.dataType),null!=s.segment&&Object.hasOwnProperty.call(s,"segment")&&v.onnx.TensorProto.Segment.encode(s.segment,g.uint32(26).fork()).ldelim(),null!=s.floatData&&s.floatData.length){for(g.uint32(34).fork(),p=0;p<s.floatData.length;++p)g.float(s.floatData[p]);g.ldelim()}if(null!=s.int32Data&&s.int32Data.length){for(g.uint32(42).fork(),p=0;p<s.int32Data.length;++p)g.int32(s.int32Data[p]);g.ldelim()}if(null!=s.stringData&&s.stringData.length)for(p=0;p<s.stringData.length;++p)g.uint32(50).bytes(s.stringData[p]);if(null!=s.int64Data&&s.int64Data.length){for(g.uint32(58).fork(),p=0;p<s.int64Data.length;++p)g.int64(s.int64Data[p]);g.ldelim()}if(null!=s.name&&Object.hasOwnProperty.call(s,"name")&&g.uint32(66).string(s.name),null!=s.rawData&&Object.hasOwnProperty.call(s,"rawData")&&g.uint32(74).bytes(s.rawData),null!=s.doubleData&&s.doubleData.length){for(g.uint32(82).fork(),p=0;p<s.doubleData.length;++p)g.double(s.doubleData[p]);g.ldelim()}if(null!=s.uint64Data&&s.uint64Data.length){for(g.uint32(90).fork(),p=0;p<s.uint64Data.length;++p)g.uint64(s.uint64Data[p]);g.ldelim()}if(null!=s.docString&&Object.hasOwnProperty.call(s,"docString")&&g.uint32(98).string(s.docString),null!=s.externalData&&s.externalData.length)for(p=0;p<s.externalData.length;++p)v.onnx.StringStringEntryProto.encode(s.externalData[p],g.uint32(106).fork()).ldelim();return null!=s.dataLocation&&Object.hasOwnProperty.call(s,"dataLocation")&&g.uint32(112).int32(s.dataLocation),g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.TensorProto;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:if(T.dims&&T.dims.length||(T.dims=[]),2==(7&I))for(var N=s.uint32()+s.pos;s.pos<N;)T.dims.push(s.int64());else T.dims.push(s.int64());break;case 2:T.dataType=s.int32();break;case 3:T.segment=v.onnx.TensorProto.Segment.decode(s,s.uint32());break;case 4:if(T.floatData&&T.floatData.length||(T.floatData=[]),2==(7&I))for(N=s.uint32()+s.pos;s.pos<N;)T.floatData.push(s.float());else T.floatData.push(s.float());break;case 5:if(T.int32Data&&T.int32Data.length||(T.int32Data=[]),2==(7&I))for(N=s.uint32()+s.pos;s.pos<N;)T.int32Data.push(s.int32());else T.int32Data.push(s.int32());break;case 6:T.stringData&&T.stringData.length||(T.stringData=[]),T.stringData.push(s.bytes());break;case 7:if(T.int64Data&&T.int64Data.length||(T.int64Data=[]),2==(7&I))for(N=s.uint32()+s.pos;s.pos<N;)T.int64Data.push(s.int64());else T.int64Data.push(s.int64());break;case 8:T.name=s.string();break;case 12:T.docString=s.string();break;case 9:T.rawData=s.bytes();break;case 13:T.externalData&&T.externalData.length||(T.externalData=[]),T.externalData.push(v.onnx.StringStringEntryProto.decode(s,s.uint32()));break;case 14:T.dataLocation=s.int32();break;case 10:if(T.doubleData&&T.doubleData.length||(T.doubleData=[]),2==(7&I))for(N=s.uint32()+s.pos;s.pos<N;)T.doubleData.push(s.double());else T.doubleData.push(s.double());break;case 11:if(T.uint64Data&&T.uint64Data.length||(T.uint64Data=[]),2==(7&I))for(N=s.uint32()+s.pos;s.pos<N;)T.uint64Data.push(s.uint64());else T.uint64Data.push(s.uint64());break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.dims&&s.hasOwnProperty("dims")){if(!Array.isArray(s.dims))return"dims: array expected";for(var g=0;g<s.dims.length;++g)if(!(m.isInteger(s.dims[g])||s.dims[g]&&m.isInteger(s.dims[g].low)&&m.isInteger(s.dims[g].high)))return"dims: integer|Long[] expected"}if(null!=s.dataType&&s.hasOwnProperty("dataType")&&!m.isInteger(s.dataType))return"dataType: integer expected";if(null!=s.segment&&s.hasOwnProperty("segment")&&(p=v.onnx.TensorProto.Segment.verify(s.segment)))return"segment."+p;if(null!=s.floatData&&s.hasOwnProperty("floatData")){if(!Array.isArray(s.floatData))return"floatData: array expected";for(g=0;g<s.floatData.length;++g)if("number"!=typeof s.floatData[g])return"floatData: number[] expected"}if(null!=s.int32Data&&s.hasOwnProperty("int32Data")){if(!Array.isArray(s.int32Data))return"int32Data: array expected";for(g=0;g<s.int32Data.length;++g)if(!m.isInteger(s.int32Data[g]))return"int32Data: integer[] expected"}if(null!=s.stringData&&s.hasOwnProperty("stringData")){if(!Array.isArray(s.stringData))return"stringData: array expected";for(g=0;g<s.stringData.length;++g)if(!(s.stringData[g]&&"number"==typeof s.stringData[g].length||m.isString(s.stringData[g])))return"stringData: buffer[] expected"}if(null!=s.int64Data&&s.hasOwnProperty("int64Data")){if(!Array.isArray(s.int64Data))return"int64Data: array expected";for(g=0;g<s.int64Data.length;++g)if(!(m.isInteger(s.int64Data[g])||s.int64Data[g]&&m.isInteger(s.int64Data[g].low)&&m.isInteger(s.int64Data[g].high)))return"int64Data: integer|Long[] expected"}if(null!=s.name&&s.hasOwnProperty("name")&&!m.isString(s.name))return"name: string expected";if(null!=s.docString&&s.hasOwnProperty("docString")&&!m.isString(s.docString))return"docString: string expected";if(null!=s.rawData&&s.hasOwnProperty("rawData")&&!(s.rawData&&"number"==typeof s.rawData.length||m.isString(s.rawData)))return"rawData: buffer expected";if(null!=s.externalData&&s.hasOwnProperty("externalData")){if(!Array.isArray(s.externalData))return"externalData: array expected";for(g=0;g<s.externalData.length;++g){var p;if(p=v.onnx.StringStringEntryProto.verify(s.externalData[g]))return"externalData."+p}}if(null!=s.dataLocation&&s.hasOwnProperty("dataLocation"))switch(s.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=s.doubleData&&s.hasOwnProperty("doubleData")){if(!Array.isArray(s.doubleData))return"doubleData: array expected";for(g=0;g<s.doubleData.length;++g)if("number"!=typeof s.doubleData[g])return"doubleData: number[] expected"}if(null!=s.uint64Data&&s.hasOwnProperty("uint64Data")){if(!Array.isArray(s.uint64Data))return"uint64Data: array expected";for(g=0;g<s.uint64Data.length;++g)if(!(m.isInteger(s.uint64Data[g])||s.uint64Data[g]&&m.isInteger(s.uint64Data[g].low)&&m.isInteger(s.uint64Data[g].high)))return"uint64Data: integer|Long[] expected"}return null},h.fromObject=function(s){if(s instanceof v.onnx.TensorProto)return s;var g=new v.onnx.TensorProto;if(s.dims){if(!Array.isArray(s.dims))throw TypeError(".onnx.TensorProto.dims: array expected");g.dims=[];for(var p=0;p<s.dims.length;++p)m.Long?(g.dims[p]=m.Long.fromValue(s.dims[p])).unsigned=!1:"string"==typeof s.dims[p]?g.dims[p]=parseInt(s.dims[p],10):"number"==typeof s.dims[p]?g.dims[p]=s.dims[p]:"object"==typeof s.dims[p]&&(g.dims[p]=new m.LongBits(s.dims[p].low>>>0,s.dims[p].high>>>0).toNumber())}if(null!=s.dataType&&(g.dataType=0|s.dataType),null!=s.segment){if("object"!=typeof s.segment)throw TypeError(".onnx.TensorProto.segment: object expected");g.segment=v.onnx.TensorProto.Segment.fromObject(s.segment)}if(s.floatData){if(!Array.isArray(s.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(g.floatData=[],p=0;p<s.floatData.length;++p)g.floatData[p]=Number(s.floatData[p])}if(s.int32Data){if(!Array.isArray(s.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(g.int32Data=[],p=0;p<s.int32Data.length;++p)g.int32Data[p]=0|s.int32Data[p]}if(s.stringData){if(!Array.isArray(s.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(g.stringData=[],p=0;p<s.stringData.length;++p)"string"==typeof s.stringData[p]?m.base64.decode(s.stringData[p],g.stringData[p]=m.newBuffer(m.base64.length(s.stringData[p])),0):s.stringData[p].length>=0&&(g.stringData[p]=s.stringData[p])}if(s.int64Data){if(!Array.isArray(s.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(g.int64Data=[],p=0;p<s.int64Data.length;++p)m.Long?(g.int64Data[p]=m.Long.fromValue(s.int64Data[p])).unsigned=!1:"string"==typeof s.int64Data[p]?g.int64Data[p]=parseInt(s.int64Data[p],10):"number"==typeof s.int64Data[p]?g.int64Data[p]=s.int64Data[p]:"object"==typeof s.int64Data[p]&&(g.int64Data[p]=new m.LongBits(s.int64Data[p].low>>>0,s.int64Data[p].high>>>0).toNumber())}if(null!=s.name&&(g.name=String(s.name)),null!=s.docString&&(g.docString=String(s.docString)),null!=s.rawData&&("string"==typeof s.rawData?m.base64.decode(s.rawData,g.rawData=m.newBuffer(m.base64.length(s.rawData)),0):s.rawData.length>=0&&(g.rawData=s.rawData)),s.externalData){if(!Array.isArray(s.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(g.externalData=[],p=0;p<s.externalData.length;++p){if("object"!=typeof s.externalData[p])throw TypeError(".onnx.TensorProto.externalData: object expected");g.externalData[p]=v.onnx.StringStringEntryProto.fromObject(s.externalData[p])}}switch(s.dataLocation){default:if("number"==typeof s.dataLocation){g.dataLocation=s.dataLocation;break}break;case"DEFAULT":case 0:g.dataLocation=0;break;case"EXTERNAL":case 1:g.dataLocation=1}if(s.doubleData){if(!Array.isArray(s.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(g.doubleData=[],p=0;p<s.doubleData.length;++p)g.doubleData[p]=Number(s.doubleData[p])}if(s.uint64Data){if(!Array.isArray(s.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(g.uint64Data=[],p=0;p<s.uint64Data.length;++p)m.Long?(g.uint64Data[p]=m.Long.fromValue(s.uint64Data[p])).unsigned=!0:"string"==typeof s.uint64Data[p]?g.uint64Data[p]=parseInt(s.uint64Data[p],10):"number"==typeof s.uint64Data[p]?g.uint64Data[p]=s.uint64Data[p]:"object"==typeof s.uint64Data[p]&&(g.uint64Data[p]=new m.LongBits(s.uint64Data[p].low>>>0,s.uint64Data[p].high>>>0).toNumber(!0))}return g},h.toObject=function(s,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.dims=[],p.floatData=[],p.int32Data=[],p.stringData=[],p.int64Data=[],p.doubleData=[],p.uint64Data=[],p.externalData=[]),g.defaults&&(p.dataType=0,p.segment=null,p.name="",g.bytes===String?p.rawData="":(p.rawData=[],g.bytes!==Array&&(p.rawData=m.newBuffer(p.rawData))),p.docString="",p.dataLocation=g.enums===String?"DEFAULT":0),s.dims&&s.dims.length){p.dims=[];for(var T=0;T<s.dims.length;++T)p.dims[T]="number"==typeof s.dims[T]?g.longs===String?String(s.dims[T]):s.dims[T]:g.longs===String?m.Long.prototype.toString.call(s.dims[T]):g.longs===Number?new m.LongBits(s.dims[T].low>>>0,s.dims[T].high>>>0).toNumber():s.dims[T]}if(null!=s.dataType&&s.hasOwnProperty("dataType")&&(p.dataType=s.dataType),null!=s.segment&&s.hasOwnProperty("segment")&&(p.segment=v.onnx.TensorProto.Segment.toObject(s.segment,g)),s.floatData&&s.floatData.length)for(p.floatData=[],T=0;T<s.floatData.length;++T)p.floatData[T]=g.json&&!isFinite(s.floatData[T])?String(s.floatData[T]):s.floatData[T];if(s.int32Data&&s.int32Data.length)for(p.int32Data=[],T=0;T<s.int32Data.length;++T)p.int32Data[T]=s.int32Data[T];if(s.stringData&&s.stringData.length)for(p.stringData=[],T=0;T<s.stringData.length;++T)p.stringData[T]=g.bytes===String?m.base64.encode(s.stringData[T],0,s.stringData[T].length):g.bytes===Array?Array.prototype.slice.call(s.stringData[T]):s.stringData[T];if(s.int64Data&&s.int64Data.length)for(p.int64Data=[],T=0;T<s.int64Data.length;++T)p.int64Data[T]="number"==typeof s.int64Data[T]?g.longs===String?String(s.int64Data[T]):s.int64Data[T]:g.longs===String?m.Long.prototype.toString.call(s.int64Data[T]):g.longs===Number?new m.LongBits(s.int64Data[T].low>>>0,s.int64Data[T].high>>>0).toNumber():s.int64Data[T];if(null!=s.name&&s.hasOwnProperty("name")&&(p.name=s.name),null!=s.rawData&&s.hasOwnProperty("rawData")&&(p.rawData=g.bytes===String?m.base64.encode(s.rawData,0,s.rawData.length):g.bytes===Array?Array.prototype.slice.call(s.rawData):s.rawData),s.doubleData&&s.doubleData.length)for(p.doubleData=[],T=0;T<s.doubleData.length;++T)p.doubleData[T]=g.json&&!isFinite(s.doubleData[T])?String(s.doubleData[T]):s.doubleData[T];if(s.uint64Data&&s.uint64Data.length)for(p.uint64Data=[],T=0;T<s.uint64Data.length;++T)p.uint64Data[T]="number"==typeof s.uint64Data[T]?g.longs===String?String(s.uint64Data[T]):s.uint64Data[T]:g.longs===String?m.Long.prototype.toString.call(s.uint64Data[T]):g.longs===Number?new m.LongBits(s.uint64Data[T].low>>>0,s.uint64Data[T].high>>>0).toNumber(!0):s.uint64Data[T];if(null!=s.docString&&s.hasOwnProperty("docString")&&(p.docString=s.docString),s.externalData&&s.externalData.length)for(p.externalData=[],T=0;T<s.externalData.length;++T)p.externalData[T]=v.onnx.StringStringEntryProto.toObject(s.externalData[T],g);return null!=s.dataLocation&&s.hasOwnProperty("dataLocation")&&(p.dataLocation=g.enums===String?void 0===v.onnx.TensorProto.DataLocation[s.dataLocation]?s.dataLocation:v.onnx.TensorProto.DataLocation[s.dataLocation]:s.dataLocation),p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.TensorProto"},h.DataType=function(){var s={},g=Object.create(s);return g[s[0]="UNDEFINED"]=0,g[s[1]="FLOAT"]=1,g[s[2]="UINT8"]=2,g[s[3]="INT8"]=3,g[s[4]="UINT16"]=4,g[s[5]="INT16"]=5,g[s[6]="INT32"]=6,g[s[7]="INT64"]=7,g[s[8]="STRING"]=8,g[s[9]="BOOL"]=9,g[s[10]="FLOAT16"]=10,g[s[11]="DOUBLE"]=11,g[s[12]="UINT32"]=12,g[s[13]="UINT64"]=13,g[s[14]="COMPLEX64"]=14,g[s[15]="COMPLEX128"]=15,g[s[16]="BFLOAT16"]=16,g[s[17]="FLOAT8E4M3FN"]=17,g[s[18]="FLOAT8E4M3FNUZ"]=18,g[s[19]="FLOAT8E5M2"]=19,g[s[20]="FLOAT8E5M2FNUZ"]=20,g}(),h.Segment=function(){function s(g){if(g)for(var p=Object.keys(g),T=0;T<p.length;++T)null!=g[p[T]]&&(this[p[T]]=g[p[T]])}return s.prototype.begin=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.end=m.Long?m.Long.fromBits(0,0,!1):0,s.create=function(g){return new s(g)},s.encode=function(g,p){return p||(p=b.create()),null!=g.begin&&Object.hasOwnProperty.call(g,"begin")&&p.uint32(8).int64(g.begin),null!=g.end&&Object.hasOwnProperty.call(g,"end")&&p.uint32(16).int64(g.end),p},s.encodeDelimited=function(g,p){return this.encode(g,p).ldelim()},s.decode=function(g,p){g instanceof f||(g=f.create(g));for(var T=void 0===p?g.len:g.pos+p,I=new v.onnx.TensorProto.Segment;g.pos<T;){var N=g.uint32();switch(N>>>3){case 1:I.begin=g.int64();break;case 2:I.end=g.int64();break;default:g.skipType(7&N)}}return I},s.decodeDelimited=function(g){return g instanceof f||(g=new f(g)),this.decode(g,g.uint32())},s.verify=function(g){return"object"!=typeof g||null===g?"object expected":null==g.begin||!g.hasOwnProperty("begin")||m.isInteger(g.begin)||g.begin&&m.isInteger(g.begin.low)&&m.isInteger(g.begin.high)?null==g.end||!g.hasOwnProperty("end")||m.isInteger(g.end)||g.end&&m.isInteger(g.end.low)&&m.isInteger(g.end.high)?null:"end: integer|Long expected":"begin: integer|Long expected"},s.fromObject=function(g){if(g instanceof v.onnx.TensorProto.Segment)return g;var p=new v.onnx.TensorProto.Segment;return null!=g.begin&&(m.Long?(p.begin=m.Long.fromValue(g.begin)).unsigned=!1:"string"==typeof g.begin?p.begin=parseInt(g.begin,10):"number"==typeof g.begin?p.begin=g.begin:"object"==typeof g.begin&&(p.begin=new m.LongBits(g.begin.low>>>0,g.begin.high>>>0).toNumber())),null!=g.end&&(m.Long?(p.end=m.Long.fromValue(g.end)).unsigned=!1:"string"==typeof g.end?p.end=parseInt(g.end,10):"number"==typeof g.end?p.end=g.end:"object"==typeof g.end&&(p.end=new m.LongBits(g.end.low>>>0,g.end.high>>>0).toNumber())),p},s.toObject=function(g,p){p||(p={});var T={};if(p.defaults){if(m.Long){var I=new m.Long(0,0,!1);T.begin=p.longs===String?I.toString():p.longs===Number?I.toNumber():I}else T.begin=p.longs===String?"0":0;m.Long?(I=new m.Long(0,0,!1),T.end=p.longs===String?I.toString():p.longs===Number?I.toNumber():I):T.end=p.longs===String?"0":0}return null!=g.begin&&g.hasOwnProperty("begin")&&(T.begin="number"==typeof g.begin?p.longs===String?String(g.begin):g.begin:p.longs===String?m.Long.prototype.toString.call(g.begin):p.longs===Number?new m.LongBits(g.begin.low>>>0,g.begin.high>>>0).toNumber():g.begin),null!=g.end&&g.hasOwnProperty("end")&&(T.end="number"==typeof g.end?p.longs===String?String(g.end):g.end:p.longs===String?m.Long.prototype.toString.call(g.end):p.longs===Number?new m.LongBits(g.end.low>>>0,g.end.high>>>0).toNumber():g.end),T},s.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},s.getTypeUrl=function(g){return void 0===g&&(g="type.googleapis.com"),g+"/onnx.TensorProto.Segment"},s}(),h.DataLocation=function(){var s={},g=Object.create(s);return g[s[0]="DEFAULT"]=0,g[s[1]="EXTERNAL"]=1,g}(),h}(),l.SparseTensorProto=function(){function h(s){if(this.dims=[],s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.values=null,h.prototype.indices=null,h.prototype.dims=m.emptyArray,h.create=function(s){return new h(s)},h.encode=function(s,g){if(g||(g=b.create()),null!=s.values&&Object.hasOwnProperty.call(s,"values")&&v.onnx.TensorProto.encode(s.values,g.uint32(10).fork()).ldelim(),null!=s.indices&&Object.hasOwnProperty.call(s,"indices")&&v.onnx.TensorProto.encode(s.indices,g.uint32(18).fork()).ldelim(),null!=s.dims&&s.dims.length){g.uint32(26).fork();for(var p=0;p<s.dims.length;++p)g.int64(s.dims[p]);g.ldelim()}return g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.SparseTensorProto;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:T.values=v.onnx.TensorProto.decode(s,s.uint32());break;case 2:T.indices=v.onnx.TensorProto.decode(s,s.uint32());break;case 3:if(T.dims&&T.dims.length||(T.dims=[]),2==(7&I))for(var N=s.uint32()+s.pos;s.pos<N;)T.dims.push(s.int64());else T.dims.push(s.int64());break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){if("object"!=typeof s||null===s)return"object expected";var g;if(null!=s.values&&s.hasOwnProperty("values")&&(g=v.onnx.TensorProto.verify(s.values)))return"values."+g;if(null!=s.indices&&s.hasOwnProperty("indices")&&(g=v.onnx.TensorProto.verify(s.indices)))return"indices."+g;if(null!=s.dims&&s.hasOwnProperty("dims")){if(!Array.isArray(s.dims))return"dims: array expected";for(var p=0;p<s.dims.length;++p)if(!(m.isInteger(s.dims[p])||s.dims[p]&&m.isInteger(s.dims[p].low)&&m.isInteger(s.dims[p].high)))return"dims: integer|Long[] expected"}return null},h.fromObject=function(s){if(s instanceof v.onnx.SparseTensorProto)return s;var g=new v.onnx.SparseTensorProto;if(null!=s.values){if("object"!=typeof s.values)throw TypeError(".onnx.SparseTensorProto.values: object expected");g.values=v.onnx.TensorProto.fromObject(s.values)}if(null!=s.indices){if("object"!=typeof s.indices)throw TypeError(".onnx.SparseTensorProto.indices: object expected");g.indices=v.onnx.TensorProto.fromObject(s.indices)}if(s.dims){if(!Array.isArray(s.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");g.dims=[];for(var p=0;p<s.dims.length;++p)m.Long?(g.dims[p]=m.Long.fromValue(s.dims[p])).unsigned=!1:"string"==typeof s.dims[p]?g.dims[p]=parseInt(s.dims[p],10):"number"==typeof s.dims[p]?g.dims[p]=s.dims[p]:"object"==typeof s.dims[p]&&(g.dims[p]=new m.LongBits(s.dims[p].low>>>0,s.dims[p].high>>>0).toNumber())}return g},h.toObject=function(s,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.dims=[]),g.defaults&&(p.values=null,p.indices=null),null!=s.values&&s.hasOwnProperty("values")&&(p.values=v.onnx.TensorProto.toObject(s.values,g)),null!=s.indices&&s.hasOwnProperty("indices")&&(p.indices=v.onnx.TensorProto.toObject(s.indices,g)),s.dims&&s.dims.length){p.dims=[];for(var T=0;T<s.dims.length;++T)p.dims[T]="number"==typeof s.dims[T]?g.longs===String?String(s.dims[T]):s.dims[T]:g.longs===String?m.Long.prototype.toString.call(s.dims[T]):g.longs===Number?new m.LongBits(s.dims[T].low>>>0,s.dims[T].high>>>0).toNumber():s.dims[T]}return p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.SparseTensorProto"},h}(),l.TensorShapeProto=function(){function h(s){if(this.dim=[],s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.dim=m.emptyArray,h.create=function(s){return new h(s)},h.encode=function(s,g){if(g||(g=b.create()),null!=s.dim&&s.dim.length)for(var p=0;p<s.dim.length;++p)v.onnx.TensorShapeProto.Dimension.encode(s.dim[p],g.uint32(10).fork()).ldelim();return g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.TensorShapeProto;s.pos<p;){var I=s.uint32();I>>>3==1?(T.dim&&T.dim.length||(T.dim=[]),T.dim.push(v.onnx.TensorShapeProto.Dimension.decode(s,s.uint32()))):s.skipType(7&I)}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.dim&&s.hasOwnProperty("dim")){if(!Array.isArray(s.dim))return"dim: array expected";for(var g=0;g<s.dim.length;++g){var p=v.onnx.TensorShapeProto.Dimension.verify(s.dim[g]);if(p)return"dim."+p}}return null},h.fromObject=function(s){if(s instanceof v.onnx.TensorShapeProto)return s;var g=new v.onnx.TensorShapeProto;if(s.dim){if(!Array.isArray(s.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");g.dim=[];for(var p=0;p<s.dim.length;++p){if("object"!=typeof s.dim[p])throw TypeError(".onnx.TensorShapeProto.dim: object expected");g.dim[p]=v.onnx.TensorShapeProto.Dimension.fromObject(s.dim[p])}}return g},h.toObject=function(s,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.dim=[]),s.dim&&s.dim.length){p.dim=[];for(var T=0;T<s.dim.length;++T)p.dim[T]=v.onnx.TensorShapeProto.Dimension.toObject(s.dim[T],g)}return p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.TensorShapeProto"},h.Dimension=function(){function s(p){if(p)for(var T=Object.keys(p),I=0;I<T.length;++I)null!=p[T[I]]&&(this[T[I]]=p[T[I]])}var g;return s.prototype.dimValue=null,s.prototype.dimParam=null,s.prototype.denotation="",Object.defineProperty(s.prototype,"value",{get:m.oneOfGetter(g=["dimValue","dimParam"]),set:m.oneOfSetter(g)}),s.create=function(p){return new s(p)},s.encode=function(p,T){return T||(T=b.create()),null!=p.dimValue&&Object.hasOwnProperty.call(p,"dimValue")&&T.uint32(8).int64(p.dimValue),null!=p.dimParam&&Object.hasOwnProperty.call(p,"dimParam")&&T.uint32(18).string(p.dimParam),null!=p.denotation&&Object.hasOwnProperty.call(p,"denotation")&&T.uint32(26).string(p.denotation),T},s.encodeDelimited=function(p,T){return this.encode(p,T).ldelim()},s.decode=function(p,T){p instanceof f||(p=f.create(p));for(var I=void 0===T?p.len:p.pos+T,N=new v.onnx.TensorShapeProto.Dimension;p.pos<I;){var L=p.uint32();switch(L>>>3){case 1:N.dimValue=p.int64();break;case 2:N.dimParam=p.string();break;case 3:N.denotation=p.string();break;default:p.skipType(7&L)}}return N},s.decodeDelimited=function(p){return p instanceof f||(p=new f(p)),this.decode(p,p.uint32())},s.verify=function(p){if("object"!=typeof p||null===p)return"object expected";var T={};if(null!=p.dimValue&&p.hasOwnProperty("dimValue")&&(T.value=1,!(m.isInteger(p.dimValue)||p.dimValue&&m.isInteger(p.dimValue.low)&&m.isInteger(p.dimValue.high))))return"dimValue: integer|Long expected";if(null!=p.dimParam&&p.hasOwnProperty("dimParam")){if(1===T.value)return"value: multiple values";if(T.value=1,!m.isString(p.dimParam))return"dimParam: string expected"}return null!=p.denotation&&p.hasOwnProperty("denotation")&&!m.isString(p.denotation)?"denotation: string expected":null},s.fromObject=function(p){if(p instanceof v.onnx.TensorShapeProto.Dimension)return p;var T=new v.onnx.TensorShapeProto.Dimension;return null!=p.dimValue&&(m.Long?(T.dimValue=m.Long.fromValue(p.dimValue)).unsigned=!1:"string"==typeof p.dimValue?T.dimValue=parseInt(p.dimValue,10):"number"==typeof p.dimValue?T.dimValue=p.dimValue:"object"==typeof p.dimValue&&(T.dimValue=new m.LongBits(p.dimValue.low>>>0,p.dimValue.high>>>0).toNumber())),null!=p.dimParam&&(T.dimParam=String(p.dimParam)),null!=p.denotation&&(T.denotation=String(p.denotation)),T},s.toObject=function(p,T){T||(T={});var I={};return T.defaults&&(I.denotation=""),null!=p.dimValue&&p.hasOwnProperty("dimValue")&&(I.dimValue="number"==typeof p.dimValue?T.longs===String?String(p.dimValue):p.dimValue:T.longs===String?m.Long.prototype.toString.call(p.dimValue):T.longs===Number?new m.LongBits(p.dimValue.low>>>0,p.dimValue.high>>>0).toNumber():p.dimValue,T.oneofs&&(I.value="dimValue")),null!=p.dimParam&&p.hasOwnProperty("dimParam")&&(I.dimParam=p.dimParam,T.oneofs&&(I.value="dimParam")),null!=p.denotation&&p.hasOwnProperty("denotation")&&(I.denotation=p.denotation),I},s.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},s.getTypeUrl=function(p){return void 0===p&&(p="type.googleapis.com"),p+"/onnx.TensorShapeProto.Dimension"},s}(),h}(),l.TypeProto=function(){function h(g){if(g)for(var p=Object.keys(g),T=0;T<p.length;++T)null!=g[p[T]]&&(this[p[T]]=g[p[T]])}var s;return h.prototype.tensorType=null,h.prototype.sequenceType=null,h.prototype.mapType=null,h.prototype.optionalType=null,h.prototype.sparseTensorType=null,h.prototype.denotation="",Object.defineProperty(h.prototype,"value",{get:m.oneOfGetter(s=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:m.oneOfSetter(s)}),h.create=function(g){return new h(g)},h.encode=function(g,p){return p||(p=b.create()),null!=g.tensorType&&Object.hasOwnProperty.call(g,"tensorType")&&v.onnx.TypeProto.Tensor.encode(g.tensorType,p.uint32(10).fork()).ldelim(),null!=g.sequenceType&&Object.hasOwnProperty.call(g,"sequenceType")&&v.onnx.TypeProto.Sequence.encode(g.sequenceType,p.uint32(34).fork()).ldelim(),null!=g.mapType&&Object.hasOwnProperty.call(g,"mapType")&&v.onnx.TypeProto.Map.encode(g.mapType,p.uint32(42).fork()).ldelim(),null!=g.denotation&&Object.hasOwnProperty.call(g,"denotation")&&p.uint32(50).string(g.denotation),null!=g.sparseTensorType&&Object.hasOwnProperty.call(g,"sparseTensorType")&&v.onnx.TypeProto.SparseTensor.encode(g.sparseTensorType,p.uint32(66).fork()).ldelim(),null!=g.optionalType&&Object.hasOwnProperty.call(g,"optionalType")&&v.onnx.TypeProto.Optional.encode(g.optionalType,p.uint32(74).fork()).ldelim(),p},h.encodeDelimited=function(g,p){return this.encode(g,p).ldelim()},h.decode=function(g,p){g instanceof f||(g=f.create(g));for(var T=void 0===p?g.len:g.pos+p,I=new v.onnx.TypeProto;g.pos<T;){var N=g.uint32();switch(N>>>3){case 1:I.tensorType=v.onnx.TypeProto.Tensor.decode(g,g.uint32());break;case 4:I.sequenceType=v.onnx.TypeProto.Sequence.decode(g,g.uint32());break;case 5:I.mapType=v.onnx.TypeProto.Map.decode(g,g.uint32());break;case 9:I.optionalType=v.onnx.TypeProto.Optional.decode(g,g.uint32());break;case 8:I.sparseTensorType=v.onnx.TypeProto.SparseTensor.decode(g,g.uint32());break;case 6:I.denotation=g.string();break;default:g.skipType(7&N)}}return I},h.decodeDelimited=function(g){return g instanceof f||(g=new f(g)),this.decode(g,g.uint32())},h.verify=function(g){if("object"!=typeof g||null===g)return"object expected";var p={};if(null!=g.tensorType&&g.hasOwnProperty("tensorType")&&(p.value=1,T=v.onnx.TypeProto.Tensor.verify(g.tensorType)))return"tensorType."+T;if(null!=g.sequenceType&&g.hasOwnProperty("sequenceType")){if(1===p.value)return"value: multiple values";if(p.value=1,T=v.onnx.TypeProto.Sequence.verify(g.sequenceType))return"sequenceType."+T}if(null!=g.mapType&&g.hasOwnProperty("mapType")){if(1===p.value)return"value: multiple values";if(p.value=1,T=v.onnx.TypeProto.Map.verify(g.mapType))return"mapType."+T}if(null!=g.optionalType&&g.hasOwnProperty("optionalType")){if(1===p.value)return"value: multiple values";if(p.value=1,T=v.onnx.TypeProto.Optional.verify(g.optionalType))return"optionalType."+T}if(null!=g.sparseTensorType&&g.hasOwnProperty("sparseTensorType")){if(1===p.value)return"value: multiple values";var T;if(p.value=1,T=v.onnx.TypeProto.SparseTensor.verify(g.sparseTensorType))return"sparseTensorType."+T}return null!=g.denotation&&g.hasOwnProperty("denotation")&&!m.isString(g.denotation)?"denotation: string expected":null},h.fromObject=function(g){if(g instanceof v.onnx.TypeProto)return g;var p=new v.onnx.TypeProto;if(null!=g.tensorType){if("object"!=typeof g.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");p.tensorType=v.onnx.TypeProto.Tensor.fromObject(g.tensorType)}if(null!=g.sequenceType){if("object"!=typeof g.sequenceType)throw TypeError(".onnx.TypeProto.sequenceType: object expected");p.sequenceType=v.onnx.TypeProto.Sequence.fromObject(g.sequenceType)}if(null!=g.mapType){if("object"!=typeof g.mapType)throw TypeError(".onnx.TypeProto.mapType: object expected");p.mapType=v.onnx.TypeProto.Map.fromObject(g.mapType)}if(null!=g.optionalType){if("object"!=typeof g.optionalType)throw TypeError(".onnx.TypeProto.optionalType: object expected");p.optionalType=v.onnx.TypeProto.Optional.fromObject(g.optionalType)}if(null!=g.sparseTensorType){if("object"!=typeof g.sparseTensorType)throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");p.sparseTensorType=v.onnx.TypeProto.SparseTensor.fromObject(g.sparseTensorType)}return null!=g.denotation&&(p.denotation=String(g.denotation)),p},h.toObject=function(g,p){p||(p={});var T={};return p.defaults&&(T.denotation=""),null!=g.tensorType&&g.hasOwnProperty("tensorType")&&(T.tensorType=v.onnx.TypeProto.Tensor.toObject(g.tensorType,p),p.oneofs&&(T.value="tensorType")),null!=g.sequenceType&&g.hasOwnProperty("sequenceType")&&(T.sequenceType=v.onnx.TypeProto.Sequence.toObject(g.sequenceType,p),p.oneofs&&(T.value="sequenceType")),null!=g.mapType&&g.hasOwnProperty("mapType")&&(T.mapType=v.onnx.TypeProto.Map.toObject(g.mapType,p),p.oneofs&&(T.value="mapType")),null!=g.denotation&&g.hasOwnProperty("denotation")&&(T.denotation=g.denotation),null!=g.sparseTensorType&&g.hasOwnProperty("sparseTensorType")&&(T.sparseTensorType=v.onnx.TypeProto.SparseTensor.toObject(g.sparseTensorType,p),p.oneofs&&(T.value="sparseTensorType")),null!=g.optionalType&&g.hasOwnProperty("optionalType")&&(T.optionalType=v.onnx.TypeProto.Optional.toObject(g.optionalType,p),p.oneofs&&(T.value="optionalType")),T},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(g){return void 0===g&&(g="type.googleapis.com"),g+"/onnx.TypeProto"},h.Tensor=function(){function g(p){if(p)for(var T=Object.keys(p),I=0;I<T.length;++I)null!=p[T[I]]&&(this[T[I]]=p[T[I]])}return g.prototype.elemType=0,g.prototype.shape=null,g.create=function(p){return new g(p)},g.encode=function(p,T){return T||(T=b.create()),null!=p.elemType&&Object.hasOwnProperty.call(p,"elemType")&&T.uint32(8).int32(p.elemType),null!=p.shape&&Object.hasOwnProperty.call(p,"shape")&&v.onnx.TensorShapeProto.encode(p.shape,T.uint32(18).fork()).ldelim(),T},g.encodeDelimited=function(p,T){return this.encode(p,T).ldelim()},g.decode=function(p,T){p instanceof f||(p=f.create(p));for(var I=void 0===T?p.len:p.pos+T,N=new v.onnx.TypeProto.Tensor;p.pos<I;){var L=p.uint32();switch(L>>>3){case 1:N.elemType=p.int32();break;case 2:N.shape=v.onnx.TensorShapeProto.decode(p,p.uint32());break;default:p.skipType(7&L)}}return N},g.decodeDelimited=function(p){return p instanceof f||(p=new f(p)),this.decode(p,p.uint32())},g.verify=function(p){if("object"!=typeof p||null===p)return"object expected";if(null!=p.elemType&&p.hasOwnProperty("elemType")&&!m.isInteger(p.elemType))return"elemType: integer expected";if(null!=p.shape&&p.hasOwnProperty("shape")){var T=v.onnx.TensorShapeProto.verify(p.shape);if(T)return"shape."+T}return null},g.fromObject=function(p){if(p instanceof v.onnx.TypeProto.Tensor)return p;var T=new v.onnx.TypeProto.Tensor;if(null!=p.elemType&&(T.elemType=0|p.elemType),null!=p.shape){if("object"!=typeof p.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");T.shape=v.onnx.TensorShapeProto.fromObject(p.shape)}return T},g.toObject=function(p,T){T||(T={});var I={};return T.defaults&&(I.elemType=0,I.shape=null),null!=p.elemType&&p.hasOwnProperty("elemType")&&(I.elemType=p.elemType),null!=p.shape&&p.hasOwnProperty("shape")&&(I.shape=v.onnx.TensorShapeProto.toObject(p.shape,T)),I},g.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},g.getTypeUrl=function(p){return void 0===p&&(p="type.googleapis.com"),p+"/onnx.TypeProto.Tensor"},g}(),h.Sequence=function(){function g(p){if(p)for(var T=Object.keys(p),I=0;I<T.length;++I)null!=p[T[I]]&&(this[T[I]]=p[T[I]])}return g.prototype.elemType=null,g.create=function(p){return new g(p)},g.encode=function(p,T){return T||(T=b.create()),null!=p.elemType&&Object.hasOwnProperty.call(p,"elemType")&&v.onnx.TypeProto.encode(p.elemType,T.uint32(10).fork()).ldelim(),T},g.encodeDelimited=function(p,T){return this.encode(p,T).ldelim()},g.decode=function(p,T){p instanceof f||(p=f.create(p));for(var I=void 0===T?p.len:p.pos+T,N=new v.onnx.TypeProto.Sequence;p.pos<I;){var L=p.uint32();L>>>3==1?N.elemType=v.onnx.TypeProto.decode(p,p.uint32()):p.skipType(7&L)}return N},g.decodeDelimited=function(p){return p instanceof f||(p=new f(p)),this.decode(p,p.uint32())},g.verify=function(p){if("object"!=typeof p||null===p)return"object expected";if(null!=p.elemType&&p.hasOwnProperty("elemType")){var T=v.onnx.TypeProto.verify(p.elemType);if(T)return"elemType."+T}return null},g.fromObject=function(p){if(p instanceof v.onnx.TypeProto.Sequence)return p;var T=new v.onnx.TypeProto.Sequence;if(null!=p.elemType){if("object"!=typeof p.elemType)throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");T.elemType=v.onnx.TypeProto.fromObject(p.elemType)}return T},g.toObject=function(p,T){T||(T={});var I={};return T.defaults&&(I.elemType=null),null!=p.elemType&&p.hasOwnProperty("elemType")&&(I.elemType=v.onnx.TypeProto.toObject(p.elemType,T)),I},g.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},g.getTypeUrl=function(p){return void 0===p&&(p="type.googleapis.com"),p+"/onnx.TypeProto.Sequence"},g}(),h.Map=function(){function g(p){if(p)for(var T=Object.keys(p),I=0;I<T.length;++I)null!=p[T[I]]&&(this[T[I]]=p[T[I]])}return g.prototype.keyType=0,g.prototype.valueType=null,g.create=function(p){return new g(p)},g.encode=function(p,T){return T||(T=b.create()),null!=p.keyType&&Object.hasOwnProperty.call(p,"keyType")&&T.uint32(8).int32(p.keyType),null!=p.valueType&&Object.hasOwnProperty.call(p,"valueType")&&v.onnx.TypeProto.encode(p.valueType,T.uint32(18).fork()).ldelim(),T},g.encodeDelimited=function(p,T){return this.encode(p,T).ldelim()},g.decode=function(p,T){p instanceof f||(p=f.create(p));for(var I=void 0===T?p.len:p.pos+T,N=new v.onnx.TypeProto.Map;p.pos<I;){var L=p.uint32();switch(L>>>3){case 1:N.keyType=p.int32();break;case 2:N.valueType=v.onnx.TypeProto.decode(p,p.uint32());break;default:p.skipType(7&L)}}return N},g.decodeDelimited=function(p){return p instanceof f||(p=new f(p)),this.decode(p,p.uint32())},g.verify=function(p){if("object"!=typeof p||null===p)return"object expected";if(null!=p.keyType&&p.hasOwnProperty("keyType")&&!m.isInteger(p.keyType))return"keyType: integer expected";if(null!=p.valueType&&p.hasOwnProperty("valueType")){var T=v.onnx.TypeProto.verify(p.valueType);if(T)return"valueType."+T}return null},g.fromObject=function(p){if(p instanceof v.onnx.TypeProto.Map)return p;var T=new v.onnx.TypeProto.Map;if(null!=p.keyType&&(T.keyType=0|p.keyType),null!=p.valueType){if("object"!=typeof p.valueType)throw TypeError(".onnx.TypeProto.Map.valueType: object expected");T.valueType=v.onnx.TypeProto.fromObject(p.valueType)}return T},g.toObject=function(p,T){T||(T={});var I={};return T.defaults&&(I.keyType=0,I.valueType=null),null!=p.keyType&&p.hasOwnProperty("keyType")&&(I.keyType=p.keyType),null!=p.valueType&&p.hasOwnProperty("valueType")&&(I.valueType=v.onnx.TypeProto.toObject(p.valueType,T)),I},g.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},g.getTypeUrl=function(p){return void 0===p&&(p="type.googleapis.com"),p+"/onnx.TypeProto.Map"},g}(),h.Optional=function(){function g(p){if(p)for(var T=Object.keys(p),I=0;I<T.length;++I)null!=p[T[I]]&&(this[T[I]]=p[T[I]])}return g.prototype.elemType=null,g.create=function(p){return new g(p)},g.encode=function(p,T){return T||(T=b.create()),null!=p.elemType&&Object.hasOwnProperty.call(p,"elemType")&&v.onnx.TypeProto.encode(p.elemType,T.uint32(10).fork()).ldelim(),T},g.encodeDelimited=function(p,T){return this.encode(p,T).ldelim()},g.decode=function(p,T){p instanceof f||(p=f.create(p));for(var I=void 0===T?p.len:p.pos+T,N=new v.onnx.TypeProto.Optional;p.pos<I;){var L=p.uint32();L>>>3==1?N.elemType=v.onnx.TypeProto.decode(p,p.uint32()):p.skipType(7&L)}return N},g.decodeDelimited=function(p){return p instanceof f||(p=new f(p)),this.decode(p,p.uint32())},g.verify=function(p){if("object"!=typeof p||null===p)return"object expected";if(null!=p.elemType&&p.hasOwnProperty("elemType")){var T=v.onnx.TypeProto.verify(p.elemType);if(T)return"elemType."+T}return null},g.fromObject=function(p){if(p instanceof v.onnx.TypeProto.Optional)return p;var T=new v.onnx.TypeProto.Optional;if(null!=p.elemType){if("object"!=typeof p.elemType)throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");T.elemType=v.onnx.TypeProto.fromObject(p.elemType)}return T},g.toObject=function(p,T){T||(T={});var I={};return T.defaults&&(I.elemType=null),null!=p.elemType&&p.hasOwnProperty("elemType")&&(I.elemType=v.onnx.TypeProto.toObject(p.elemType,T)),I},g.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},g.getTypeUrl=function(p){return void 0===p&&(p="type.googleapis.com"),p+"/onnx.TypeProto.Optional"},g}(),h.SparseTensor=function(){function g(p){if(p)for(var T=Object.keys(p),I=0;I<T.length;++I)null!=p[T[I]]&&(this[T[I]]=p[T[I]])}return g.prototype.elemType=0,g.prototype.shape=null,g.create=function(p){return new g(p)},g.encode=function(p,T){return T||(T=b.create()),null!=p.elemType&&Object.hasOwnProperty.call(p,"elemType")&&T.uint32(8).int32(p.elemType),null!=p.shape&&Object.hasOwnProperty.call(p,"shape")&&v.onnx.TensorShapeProto.encode(p.shape,T.uint32(18).fork()).ldelim(),T},g.encodeDelimited=function(p,T){return this.encode(p,T).ldelim()},g.decode=function(p,T){p instanceof f||(p=f.create(p));for(var I=void 0===T?p.len:p.pos+T,N=new v.onnx.TypeProto.SparseTensor;p.pos<I;){var L=p.uint32();switch(L>>>3){case 1:N.elemType=p.int32();break;case 2:N.shape=v.onnx.TensorShapeProto.decode(p,p.uint32());break;default:p.skipType(7&L)}}return N},g.decodeDelimited=function(p){return p instanceof f||(p=new f(p)),this.decode(p,p.uint32())},g.verify=function(p){if("object"!=typeof p||null===p)return"object expected";if(null!=p.elemType&&p.hasOwnProperty("elemType")&&!m.isInteger(p.elemType))return"elemType: integer expected";if(null!=p.shape&&p.hasOwnProperty("shape")){var T=v.onnx.TensorShapeProto.verify(p.shape);if(T)return"shape."+T}return null},g.fromObject=function(p){if(p instanceof v.onnx.TypeProto.SparseTensor)return p;var T=new v.onnx.TypeProto.SparseTensor;if(null!=p.elemType&&(T.elemType=0|p.elemType),null!=p.shape){if("object"!=typeof p.shape)throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");T.shape=v.onnx.TensorShapeProto.fromObject(p.shape)}return T},g.toObject=function(p,T){T||(T={});var I={};return T.defaults&&(I.elemType=0,I.shape=null),null!=p.elemType&&p.hasOwnProperty("elemType")&&(I.elemType=p.elemType),null!=p.shape&&p.hasOwnProperty("shape")&&(I.shape=v.onnx.TensorShapeProto.toObject(p.shape,T)),I},g.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},g.getTypeUrl=function(p){return void 0===p&&(p="type.googleapis.com"),p+"/onnx.TypeProto.SparseTensor"},g}(),h}(),l.OperatorSetIdProto=function(){function h(s){if(s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.domain="",h.prototype.version=m.Long?m.Long.fromBits(0,0,!1):0,h.create=function(s){return new h(s)},h.encode=function(s,g){return g||(g=b.create()),null!=s.domain&&Object.hasOwnProperty.call(s,"domain")&&g.uint32(10).string(s.domain),null!=s.version&&Object.hasOwnProperty.call(s,"version")&&g.uint32(16).int64(s.version),g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.OperatorSetIdProto;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:T.domain=s.string();break;case 2:T.version=s.int64();break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){return"object"!=typeof s||null===s?"object expected":null!=s.domain&&s.hasOwnProperty("domain")&&!m.isString(s.domain)?"domain: string expected":null==s.version||!s.hasOwnProperty("version")||m.isInteger(s.version)||s.version&&m.isInteger(s.version.low)&&m.isInteger(s.version.high)?null:"version: integer|Long expected"},h.fromObject=function(s){if(s instanceof v.onnx.OperatorSetIdProto)return s;var g=new v.onnx.OperatorSetIdProto;return null!=s.domain&&(g.domain=String(s.domain)),null!=s.version&&(m.Long?(g.version=m.Long.fromValue(s.version)).unsigned=!1:"string"==typeof s.version?g.version=parseInt(s.version,10):"number"==typeof s.version?g.version=s.version:"object"==typeof s.version&&(g.version=new m.LongBits(s.version.low>>>0,s.version.high>>>0).toNumber())),g},h.toObject=function(s,g){g||(g={});var p={};if(g.defaults)if(p.domain="",m.Long){var T=new m.Long(0,0,!1);p.version=g.longs===String?T.toString():g.longs===Number?T.toNumber():T}else p.version=g.longs===String?"0":0;return null!=s.domain&&s.hasOwnProperty("domain")&&(p.domain=s.domain),null!=s.version&&s.hasOwnProperty("version")&&(p.version="number"==typeof s.version?g.longs===String?String(s.version):s.version:g.longs===String?m.Long.prototype.toString.call(s.version):g.longs===Number?new m.LongBits(s.version.low>>>0,s.version.high>>>0).toNumber():s.version),p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.OperatorSetIdProto"},h}(),l.OperatorStatus=function(){var h={},s=Object.create(h);return s[h[0]="EXPERIMENTAL"]=0,s[h[1]="STABLE"]=1,s}(),l.FunctionProto=function(){function h(s){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],s)for(var g=Object.keys(s),p=0;p<g.length;++p)null!=s[g[p]]&&(this[g[p]]=s[g[p]])}return h.prototype.name="",h.prototype.input=m.emptyArray,h.prototype.output=m.emptyArray,h.prototype.attribute=m.emptyArray,h.prototype.attributeProto=m.emptyArray,h.prototype.node=m.emptyArray,h.prototype.docString="",h.prototype.opsetImport=m.emptyArray,h.prototype.domain="",h.create=function(s){return new h(s)},h.encode=function(s,g){if(g||(g=b.create()),null!=s.name&&Object.hasOwnProperty.call(s,"name")&&g.uint32(10).string(s.name),null!=s.input&&s.input.length)for(var p=0;p<s.input.length;++p)g.uint32(34).string(s.input[p]);if(null!=s.output&&s.output.length)for(p=0;p<s.output.length;++p)g.uint32(42).string(s.output[p]);if(null!=s.attribute&&s.attribute.length)for(p=0;p<s.attribute.length;++p)g.uint32(50).string(s.attribute[p]);if(null!=s.node&&s.node.length)for(p=0;p<s.node.length;++p)v.onnx.NodeProto.encode(s.node[p],g.uint32(58).fork()).ldelim();if(null!=s.docString&&Object.hasOwnProperty.call(s,"docString")&&g.uint32(66).string(s.docString),null!=s.opsetImport&&s.opsetImport.length)for(p=0;p<s.opsetImport.length;++p)v.onnx.OperatorSetIdProto.encode(s.opsetImport[p],g.uint32(74).fork()).ldelim();if(null!=s.domain&&Object.hasOwnProperty.call(s,"domain")&&g.uint32(82).string(s.domain),null!=s.attributeProto&&s.attributeProto.length)for(p=0;p<s.attributeProto.length;++p)v.onnx.AttributeProto.encode(s.attributeProto[p],g.uint32(90).fork()).ldelim();return g},h.encodeDelimited=function(s,g){return this.encode(s,g).ldelim()},h.decode=function(s,g){s instanceof f||(s=f.create(s));for(var p=void 0===g?s.len:s.pos+g,T=new v.onnx.FunctionProto;s.pos<p;){var I=s.uint32();switch(I>>>3){case 1:T.name=s.string();break;case 4:T.input&&T.input.length||(T.input=[]),T.input.push(s.string());break;case 5:T.output&&T.output.length||(T.output=[]),T.output.push(s.string());break;case 6:T.attribute&&T.attribute.length||(T.attribute=[]),T.attribute.push(s.string());break;case 11:T.attributeProto&&T.attributeProto.length||(T.attributeProto=[]),T.attributeProto.push(v.onnx.AttributeProto.decode(s,s.uint32()));break;case 7:T.node&&T.node.length||(T.node=[]),T.node.push(v.onnx.NodeProto.decode(s,s.uint32()));break;case 8:T.docString=s.string();break;case 9:T.opsetImport&&T.opsetImport.length||(T.opsetImport=[]),T.opsetImport.push(v.onnx.OperatorSetIdProto.decode(s,s.uint32()));break;case 10:T.domain=s.string();break;default:s.skipType(7&I)}}return T},h.decodeDelimited=function(s){return s instanceof f||(s=new f(s)),this.decode(s,s.uint32())},h.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.name&&s.hasOwnProperty("name")&&!m.isString(s.name))return"name: string expected";if(null!=s.input&&s.hasOwnProperty("input")){if(!Array.isArray(s.input))return"input: array expected";for(var g=0;g<s.input.length;++g)if(!m.isString(s.input[g]))return"input: string[] expected"}if(null!=s.output&&s.hasOwnProperty("output")){if(!Array.isArray(s.output))return"output: array expected";for(g=0;g<s.output.length;++g)if(!m.isString(s.output[g]))return"output: string[] expected"}if(null!=s.attribute&&s.hasOwnProperty("attribute")){if(!Array.isArray(s.attribute))return"attribute: array expected";for(g=0;g<s.attribute.length;++g)if(!m.isString(s.attribute[g]))return"attribute: string[] expected"}if(null!=s.attributeProto&&s.hasOwnProperty("attributeProto")){if(!Array.isArray(s.attributeProto))return"attributeProto: array expected";for(g=0;g<s.attributeProto.length;++g)if(p=v.onnx.AttributeProto.verify(s.attributeProto[g]))return"attributeProto."+p}if(null!=s.node&&s.hasOwnProperty("node")){if(!Array.isArray(s.node))return"node: array expected";for(g=0;g<s.node.length;++g)if(p=v.onnx.NodeProto.verify(s.node[g]))return"node."+p}if(null!=s.docString&&s.hasOwnProperty("docString")&&!m.isString(s.docString))return"docString: string expected";if(null!=s.opsetImport&&s.hasOwnProperty("opsetImport")){if(!Array.isArray(s.opsetImport))return"opsetImport: array expected";for(g=0;g<s.opsetImport.length;++g){var p;if(p=v.onnx.OperatorSetIdProto.verify(s.opsetImport[g]))return"opsetImport."+p}}return null!=s.domain&&s.hasOwnProperty("domain")&&!m.isString(s.domain)?"domain: string expected":null},h.fromObject=function(s){if(s instanceof v.onnx.FunctionProto)return s;var g=new v.onnx.FunctionProto;if(null!=s.name&&(g.name=String(s.name)),s.input){if(!Array.isArray(s.input))throw TypeError(".onnx.FunctionProto.input: array expected");g.input=[];for(var p=0;p<s.input.length;++p)g.input[p]=String(s.input[p])}if(s.output){if(!Array.isArray(s.output))throw TypeError(".onnx.FunctionProto.output: array expected");for(g.output=[],p=0;p<s.output.length;++p)g.output[p]=String(s.output[p])}if(s.attribute){if(!Array.isArray(s.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");for(g.attribute=[],p=0;p<s.attribute.length;++p)g.attribute[p]=String(s.attribute[p])}if(s.attributeProto){if(!Array.isArray(s.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");for(g.attributeProto=[],p=0;p<s.attributeProto.length;++p){if("object"!=typeof s.attributeProto[p])throw TypeError(".onnx.FunctionProto.attributeProto: object expected");g.attributeProto[p]=v.onnx.AttributeProto.fromObject(s.attributeProto[p])}}if(s.node){if(!Array.isArray(s.node))throw TypeError(".onnx.FunctionProto.node: array expected");for(g.node=[],p=0;p<s.node.length;++p){if("object"!=typeof s.node[p])throw TypeError(".onnx.FunctionProto.node: object expected");g.node[p]=v.onnx.NodeProto.fromObject(s.node[p])}}if(null!=s.docString&&(g.docString=String(s.docString)),s.opsetImport){if(!Array.isArray(s.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");for(g.opsetImport=[],p=0;p<s.opsetImport.length;++p){if("object"!=typeof s.opsetImport[p])throw TypeError(".onnx.FunctionProto.opsetImport: object expected");g.opsetImport[p]=v.onnx.OperatorSetIdProto.fromObject(s.opsetImport[p])}}return null!=s.domain&&(g.domain=String(s.domain)),g},h.toObject=function(s,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.input=[],p.output=[],p.attribute=[],p.node=[],p.opsetImport=[],p.attributeProto=[]),g.defaults&&(p.name="",p.docString="",p.domain=""),null!=s.name&&s.hasOwnProperty("name")&&(p.name=s.name),s.input&&s.input.length){p.input=[];for(var T=0;T<s.input.length;++T)p.input[T]=s.input[T]}if(s.output&&s.output.length)for(p.output=[],T=0;T<s.output.length;++T)p.output[T]=s.output[T];if(s.attribute&&s.attribute.length)for(p.attribute=[],T=0;T<s.attribute.length;++T)p.attribute[T]=s.attribute[T];if(s.node&&s.node.length)for(p.node=[],T=0;T<s.node.length;++T)p.node[T]=v.onnx.NodeProto.toObject(s.node[T],g);if(null!=s.docString&&s.hasOwnProperty("docString")&&(p.docString=s.docString),s.opsetImport&&s.opsetImport.length)for(p.opsetImport=[],T=0;T<s.opsetImport.length;++T)p.opsetImport[T]=v.onnx.OperatorSetIdProto.toObject(s.opsetImport[T],g);if(null!=s.domain&&s.hasOwnProperty("domain")&&(p.domain=s.domain),s.attributeProto&&s.attributeProto.length)for(p.attributeProto=[],T=0;T<s.attributeProto.length;++T)p.attributeProto[T]=v.onnx.AttributeProto.toObject(s.attributeProto[T],g);return p},h.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},h.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/onnx.FunctionProto"},h}(),l),a.exports=v});function ur(i,a){if(!i)throw new Error("string"==typeof a?a:a())}function kr(i){return(new TextDecoder).decode(i)}var ot,Me,ai,kt,Sn,At,Rt,B,$r,Ue,Ve,ze,Y=O(()=>{wn(),qo(),ot=rr(sr()),We(),Me=class{static arraysEqual(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;c++)if(i[c]!==a[c])return!1;return!0}},ai=class{static preprocessInputShapes(i,a){return[1===i.length?[1,i[0]]:i,1===a.length?[a[0],1]:a]}static postprocessOutputShape(i,a,c){1===a&&i.splice(i.length-2,1),1===c&&i.pop()}static calcMatMulShape(i,a){return i[1]!==a[0]?void 0:[i[0],a[1]]}},kt=class C0{static calcShape(a,c,f=!1){let b=a.length,m=c.length;if(0===b)return c;if(0===m)return a;let v=Math.max(a.length,c.length),l=new Array(v);if(f){if(b<2||m<2)return;let h=ai.calcMatMulShape([a[b-2],a[b-1]],[c[m-2],c[m-1]]);if(void 0===h)return;[l[v-2],l[v-1]]=h}for(let h=f?3:1;h<=v;h++){let s=b-h<0?1:a[b-h],g=m-h<0?1:c[m-h];if(s!==g&&s>1&&g>1)return;l[v-h]=Math.max(s,g)}return l}static index(a,c){let f=new Array(c.length);return C0.fillIndex(a,c,f),f}static fillIndex(a,c,f){let b=a.length-c.length;for(let m=0;m<c.length;m++)f[m]=a[b+m]%c[m]}static calc(a,c,f,b,m){let v=C0.calcShape(a.dims,c.dims);if(v){if(b&&!B.areEqual(v,a.dims))return;let l=B.size(v),h=b?a:new bt(v,m||a.type);if(0===v.length)h.set([],f(a.get([]),c.get([])));else{let U,s=new Array(v.length),g=new Array(a.dims.length),p=new Array(c.dims.length),T=0,I=0,N=!1,L=!1;0===a.dims.length&&(T=a.get([]),N=!0),0===c.dims.length&&(I=c.get([]),L=!0);for(let se=0;se<l;se++){U=se;for(let Z=v.length-1;Z>=0;Z--)s[Z]=U%v[Z],U=Math.floor(U/v[Z]);N||(C0.fillIndex(s,a.dims,g),T=a.get(g)),L||(C0.fillIndex(s,c.dims,p),I=c.get(p)),h.set(s,f(T,I))}}return h}}static isValidBroadcast(a,c){let f=a.length,b=c.length;if(f>b)return!1;for(let m=1;m<=f;m++)if(1!==a[f-m]&&a[f-m]!==c[b-m])return!1;return!0}static getBroadcastDims(a,c){let f=a.length,b=[];for(let m=0;m<f;m++){let v=f-1-m;(c[c.length-1-m]||1)>1&&1===(a[v]||1)&&b.unshift(v)}return b}},Sn=class{static getShapeOfGemmResult(i,a,c,f,b){if(2!==i.length||2!==c.length)throw new Error("shape need to be of size 2");let m,v,l;a?(m=i[1],v=i[0]):(m=i[0],v=i[1]);let h=-1;if(f?(l=c[0],h=1):(l=c[1],h=0),c[h]!==v)throw new Error("dimension mismatch");if(m<=0||l<=0||v<=0)throw new Error("invalid shape specified");if(b&&!kt.isValidBroadcast(b,[m,l]))throw new Error("gemm: invalid bias shape for broadcast");return[m,l,v]}},At=class L1{static tensorDataTypeFromProto(a){switch(a){case ot.onnx.TensorProto.DataType.INT8:return"int8";case ot.onnx.TensorProto.DataType.UINT8:return"uint8";case ot.onnx.TensorProto.DataType.BOOL:return"bool";case ot.onnx.TensorProto.DataType.INT16:return"int16";case ot.onnx.TensorProto.DataType.UINT16:return"uint16";case ot.onnx.TensorProto.DataType.INT32:return"int32";case ot.onnx.TensorProto.DataType.UINT32:return"uint32";case ot.onnx.TensorProto.DataType.FLOAT:return"float32";case ot.onnx.TensorProto.DataType.DOUBLE:return"float64";case ot.onnx.TensorProto.DataType.STRING:return"string";case ot.onnx.TensorProto.DataType.INT64:return"int32";case ot.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ot.onnx.TensorProto.DataType[a]}`)}}static tensorDataTypeStringToEnum(a){switch(a){case"int8":return ot.onnx.TensorProto.DataType.INT8;case"uint8":return ot.onnx.TensorProto.DataType.UINT8;case"bool":return ot.onnx.TensorProto.DataType.BOOL;case"int16":return ot.onnx.TensorProto.DataType.INT16;case"uint16":return ot.onnx.TensorProto.DataType.UINT16;case"int32":return ot.onnx.TensorProto.DataType.INT32;case"uint32":return ot.onnx.TensorProto.DataType.UINT32;case"float32":return ot.onnx.TensorProto.DataType.FLOAT;case"float64":return ot.onnx.TensorProto.DataType.DOUBLE;case"string":return ot.onnx.TensorProto.DataType.STRING;case"int64":return ot.onnx.TensorProto.DataType.INT64;case"uint64":return ot.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${a}`)}}static tensorDimsFromProto(a){return a.map(c=>xe.isLong(c)?c.toNumber():c)}static tensorValueTypeFromProto(a){return{tensorType:L1.tensorDataTypeFromProto(a.elemType),shape:{dims:L1.tensorDimsFromProto(a.shape.dim.map(c=>c.dimValue))}}}static tensorDimsFromORTFormat(a){let c=[];for(let f=0;f<a.dimsLength();f++)c.push(Rt.longToNumber(a.dims(f)));return c}static tensorAttributesFromORTFormat(a){let c=[];for(let f=0;f<a.attributesLength();f++)c.push(a.attributes(f));return c}},Rt=class{static longToNumber(i,a){return xe.isLong(i)?i.toNumber():i instanceof w.Long?xe.fromValue({low:i.low,high:i.high,unsigned:a??!1}).toNumber():i}static isLong(i){return xe.isLong(i)||i instanceof w.Long}},B=class hy{static size(a){return hy.getSizeFromDimensionRange(a,0,a.length)}static sizeFromDimension(a,c){if(c<0||c>a.length)throw new Error(`invalid dimension of ${c} for sizeFromDimension as Tensor has ${a.length} dimensions.`);return hy.getSizeFromDimensionRange(a,c,a.length)}static sizeToDimension(a,c){if(c<0||c>a.length)throw new Error(`invalid dimension of ${c} for sizeToDimension as Tensor has ${a.length} dimensions.`);return hy.getSizeFromDimensionRange(a,0,c)}static getSizeFromDimensionRange(a,c,f){let b=1;for(let m=c;m<f;m++){if(a[m]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");b*=a[m]}return b}static computeStrides(a){let c=a.length;if(0===c)return[];if(1===c)return[1];let f=new Array(c);f[c-1]=1,f[c-2]=a[c-1];for(let b=c-3;b>=0;--b)f[b]=f[b+1]*a[b+1];return f}static transpose(a){return a.slice().reverse()}static indicesToOffset(a,c,f){void 0===f&&(f=a.length);let b=0;for(let m=0;m<f;++m)b+=c[m]*a[m];return b}static offsetToIndices(a,c){let f=c.length;if(0===f)return[];if(1===f)return[a*c[0]];let b=new Array(c.length);for(let m=0;m<b.length-1;++m)b[m]=Math.floor(a/c[m]),a-=b[m]*c[m];return b[b.length-1]=a,b}static normalizeAxis(a,c){if(a<-c&&a>=c)throw new Error("unsupported axis for this operation.");return a<0?a+c:a}static normalizeAxes(a,c){return a.map(f=>this.normalizeAxis(f,c))}static incrementIndex(a,c,f){if(0===c.length||0===a.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===f)f=c.length;else if(f<=0||f>c.length)throw new Error("Incorrect axis to increment on");for(let b=f-1;b>=0&&(a[b]++,!(a[b]<c[b]));--b)a[b]=0}static calculateReshapedDims(a,c){if(0===c.length){if(0===a.length||1===hy.size(a))return[];throw new Error("cannot reshape to a scalar Tensor")}let f=c.length,b=new Array(f),m=-1,v=1;for(let h=0;h<f;h++){if(c[h]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===c[h]){if(-1!==m)throw new Error("at most one dimension in shape hints can be -1");m=h}else{if(0===c[h]){if(h>=a.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");b[h]=a[h]}else b[h]=c[h];v*=b[h]}}let l=hy.size(a);if(-1!==m){if(l%v!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${a}] Output shape: [${c}]`);b[m]=l/v}else if(v!==l)throw new Error("reshapedDims and originalDims don't have matching sizes");return b}static sortBasedOnPerm(a,c){return c?c.map(f=>a[f]):a.slice().reverse()}static padShape(a,c){let f=a.length;return a.map((b,m)=>b+c[m]+c[m+f])}static areEqual(a,c){return a.length===c.length&&a.every((f,b)=>f===c[b])}static validateDimsAndCalcSize(a){if(a.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let c=1;for(let f of a){if(!Number.isInteger(f))throw new TypeError(`Invalid shape: ${f} is not an integer`);if(f<0||f>2147483647)throw new TypeError(`Invalid shape: length ${f} is not allowed`);c*=f}return c}static flattenShape(a,c){c<0&&(c+=a.length);let f=a.reduce((m,v)=>m*v,1),b=a.slice(c).reduce((m,v)=>m*v,1);return[f/b,b]}static squeezeShape(a,c){let f=new Array;c=hy.normalizeAxes(c,a.length);for(let b=0;b<a.length;b++){let m=c.indexOf(b)>=0;if(m&&1!==a[b])throw new Error("squeeze an axis of size different than 1");(0===c.length&&a[b]>1||c.length>0&&!m)&&f.push(a[b])}return f}static unsqueezeShape(a,c){let f=new Array(a.length+c.length);f.fill(0);for(let m=0;m<c.length;m++){let v=hy.normalizeAxis(c[m],f.length);if(v>=f.length)throw new Error("'axes' has an out of range axis");if(0!==f[v])throw new Error("'axes' has a duplicate axis");f[v]=1}let b=0;for(let m=0;m<f.length;m++)0===f[m]&&(f[m]=a[b++]);if(b!==a.length)throw new Error("the unsqueezed dimension could not be established");return f}},$r=class f${static splitShape(a,c,f,b){if(0===f.length){if(!b)throw new Error("need to know number of outputs when the 'split' attribute is not specified");f$.determineSplit(a[c],b,f)}let m=[],v=[0];for(let l=0;l<f.length;++l){0!==l&&v.push(v[l-1]+f[l-1]);let h=a.slice();h[c]=f[l],m.push(h)}return[m,v]}static determineSplit(a,c,f){if(a%c!=0)throw new Error("cannot split tensor to equal sized parts");for(let b=0;b<c;++b)f.push(a/c)}},Ue=class A0{static adjustPoolAttributes(a,c,f,b,m,v){if(!a&&f.length!==c.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(a)for(let l=0;l<c.length-2;l++)l>=f.length?f.push(c[l+2]):f[l]=c[l+2];for(let l=0;l<f.length;l++)if(l<b.length){if(b[l]<0)throw new Error("strides should be greater than or equal to 1")}else b.push(1);for(let l=0;l<f.length;l++)if(l<m.length){if(m[l]<0)throw new Error("dilations should be greater than or equal to 1")}else m.push(1);for(let l=0;l<2*f.length;l++)if(l<v.length){if(v[l]<0)throw new Error("pad should be greater than or equal to 1")}else v.push(0);for(let l=0;l<f.length;l++){if(f[l]<=0)throw new Error("kernel shapes need to be greater than 0");if(v[l]>=f[l]||v[l+f.length]>=f[l])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(a,c,f,b,m,v){if(v){if(m.length!==2*(a.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(c.length!==a.length-2)throw new Error("length of strides should be the length of data dimensions");if(b.length!==a.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let l=0;l<a.length-2;l++)A0.adjustPadAndReturnShape(a[l+2],c[l],f[l],b[l],m,l,l+a.length-2,v)}}static computePoolOutputShape(a,c,f,b,m,v,l){if(c.length<=0)throw new Error("input shape must be of size greater than 0");let h=[c[0],c[1]];return A0.computeShapeHelper(a,c,h,f,b,m,v,l),h}static computeConvOutputShape(a,c,f,b,m,v,l){if(a.length<=0||c.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let h=[a[0],c[0]];return A0.computeShapeHelper(!1,a,h,f,b,m,v,l),h}static computeShapeHelper(a,c,f,b,m,v,l,h){if(a)for(let s=0;s<c.length-2;s++)f.push(1);else for(let s=0;s<c.length-2;s++)f.push(A0.adjustPadAndReturnShape(c[s+2],b[s],m[s],v[s],l,s,s+c.length-2,h))}static adjustPadAndReturnShape(a,c,f,b,m,v,l,h){let s=f*(b-1)+1;if(!h||"NOTSET"===h)return Math.floor((a+m[v]+m[l]-s)/c+1);switch(h){case"VALID":return m[v]=0,m[l]=0,Math.floor((a-s)/c+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==f)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let g=((a+c-1)/c-1)*c+b-a;return m[v]=Math.floor("SAME_LOWER"===h?(g+1)/2:g/2),m[l]=g-m[v],Math.floor((a+g-b)/c+1)}default:throw new Error("Unsupported AutoPad type")}}},Ve=-34028234663852886e22,ze=34028234663852886e22});function hh(i){switch(i){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${i}`)}}function Wu(i){switch(i){case H.onnx.TensorProto.DataType.UINT8:case H.onnx.TensorProto.DataType.INT8:case H.onnx.TensorProto.DataType.BOOL:return 1;case H.onnx.TensorProto.DataType.UINT16:case H.onnx.TensorProto.DataType.INT16:return 2;case H.onnx.TensorProto.DataType.FLOAT:case H.onnx.TensorProto.DataType.INT32:case H.onnx.TensorProto.DataType.UINT32:return 4;case H.onnx.TensorProto.DataType.INT64:case H.onnx.TensorProto.DataType.DOUBLE:case H.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${H.onnx.TensorProto.DataType[i]}`)}}function mh(i,a){return new(ju(a))(i)}function ju(i){switch(i){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function ui(i,a){if(a===H.onnx.TensorProto.DataType.INT64||a===si.TensorDataType.INT64){if(i.greaterThanOrEqual(2147483648)||i.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(a!==H.onnx.TensorProto.DataType.UINT32&&a!==si.TensorDataType.UINT32&&a!==H.onnx.TensorProto.DataType.UINT64&&a!==si.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${H.onnx.TensorProto.DataType[a]}`);if(i.greaterThanOrEqual(4294967296)||i.lessThan(0))throw new TypeError("uint64 is not supported")}return i.toNumber()}function Hu(i,a,c){switch(a){case H.onnx.TensorProto.DataType.BOOL:case H.onnx.TensorProto.DataType.UINT8:return i.getUint8(c);case H.onnx.TensorProto.DataType.INT8:return i.getInt8(c);case H.onnx.TensorProto.DataType.UINT16:return i.getUint16(c,!0);case H.onnx.TensorProto.DataType.INT16:return i.getInt16(c,!0);case H.onnx.TensorProto.DataType.FLOAT:return i.getFloat32(c,!0);case H.onnx.TensorProto.DataType.INT32:return i.getInt32(c,!0);case H.onnx.TensorProto.DataType.UINT32:return i.getUint32(c,!0);case H.onnx.TensorProto.DataType.INT64:return ui(xe.fromBits(i.getUint32(c,!0),i.getUint32(c+4,!0),!1),a);case H.onnx.TensorProto.DataType.DOUBLE:return i.getFloat64(c,!0);case H.onnx.TensorProto.DataType.UINT64:return ui(xe.fromBits(i.getUint32(c,!0),i.getUint32(c+4,!0),!0),a);default:throw new Error(`cannot read from DataView for type ${H.onnx.TensorProto.DataType[a]}`)}}var qu,H,si,bt,We=O(()=>{qu=rr(Fs()),qo(),Pr(),H=rr(sr()),Y(),si=F.experimental.fbs,bt=class DE{constructor(a,c,f,b,m,v=qu.Guid.create()){this.dims=a,this.type=c,this.dataProvider=f,this.asyncDataProvider=b,this.cache=m,this.dataId=v,this.size=B.validateDimsAndCalcSize(a);let l=this.size,h=void 0===f&&void 0===b&&void 0===m;if(void 0!==m&&m.length!==l)throw new RangeError("Input dims doesn't match data length.");if("string"===c){if(!(void 0===m||Array.isArray(m)&&m.every(s=>"string"==typeof s)))throw new TypeError("cache should be a string array");h&&(this.cache=new Array(l))}else{if(void 0!==m){let s=ju(c);if(!(m instanceof s))throw new TypeError(`cache should be type ${s.name}`)}if(h){let s=new ArrayBuffer(l*hh(c));this.cache=mh(s,c)}}}get data(){if(void 0===this.cache){let a=this.dataProvider(this.dataId);if(a.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=a}return this.cache}get stringData(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")}get(a){return this.data[B.indicesToOffset(a,this.strides)]}set(a,c){this.data[B.indicesToOffset(a,this.strides)]=c}getData(){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return void 0===a.cache&&(a.cache=yield a.asyncDataProvider(a.dataId)),a.cache})()}get strides(){return this._strides||(this._strides=B.computeStrides(this.dims)),this._strides}static fromProto(a){if(!a)throw new Error("cannot construct Value from an empty tensor");let c=At.tensorDataTypeFromProto(a.dataType),f=At.tensorDimsFromProto(a.dims),b=new DE(f,c);if("string"===c)a.stringData.forEach((m,v)=>{b.data[v]=kr(m)});else if(a.rawData&&"number"==typeof a.rawData.byteLength&&a.rawData.byteLength>0){let m=b.data,v=new DataView(a.rawData.buffer,a.rawData.byteOffset,a.rawData.byteLength),l=Wu(a.dataType),h=a.rawData.byteLength/l;if(a.rawData.byteLength%l!=0)throw new Error("invalid buffer length");if(m.length!==h)throw new Error("buffer length mismatch");for(let s=0;s<h;s++){let g=Hu(v,a.dataType,s*l);m[s]=g}}else{let m;switch(a.dataType){case H.onnx.TensorProto.DataType.FLOAT:m=a.floatData;break;case H.onnx.TensorProto.DataType.INT32:case H.onnx.TensorProto.DataType.INT16:case H.onnx.TensorProto.DataType.UINT16:case H.onnx.TensorProto.DataType.INT8:case H.onnx.TensorProto.DataType.UINT8:case H.onnx.TensorProto.DataType.BOOL:m=a.int32Data;break;case H.onnx.TensorProto.DataType.INT64:m=a.int64Data;break;case H.onnx.TensorProto.DataType.DOUBLE:m=a.doubleData;break;case H.onnx.TensorProto.DataType.UINT32:case H.onnx.TensorProto.DataType.UINT64:m=a.uint64Data;break;default:throw new Error("unspecific error")}if(null==m)throw new Error("failed to populate data from a tensorproto value");let v=b.data;if(v.length!==m.length)throw new Error("array length mismatch");for(let l=0;l<m.length;l++){let h=m[l];v[l]=xe.isLong(h)?ui(h,a.dataType):h}}return b}static fromData(a,c,f){return new DE(c,f,void 0,void 0,a)}static fromOrtTensor(a){if(!a)throw new Error("cannot construct Value from an empty tensor");let c=At.tensorDimsFromORTFormat(a),f=At.tensorDataTypeFromProto(a.dataType()),b=new DE(c,f);if("string"===f)for(let m=0;m<a.stringDataLength();m++)b.data[m]=a.stringData(m);else if(a.rawDataArray()&&"number"==typeof a.rawDataLength()&&a.rawDataLength()>0){let m=b.data,v=new DataView(a.rawDataArray().buffer,a.rawDataArray().byteOffset,a.rawDataLength()),l=Wu(a.dataType()),h=a.rawDataLength()/l;if(a.rawDataLength()%l!=0)throw new Error("invalid buffer length");if(m.length!==h)throw new Error("buffer length mismatch");for(let s=0;s<h;s++){let g=Hu(v,a.dataType(),s*l);m[s]=g}}return b}}});function G(i){return 1===i?bh:gh}function Xu(i){let a=G(i);return`${a.version}\n      precision highp float;\n      ${a.attribute} vec3 position;\n      ${a.attribute} vec2 textureCoord;\n\n      ${a.varyingVertex} vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }`}function Ku(i){let a=G(i);return`${a.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${a.varyingFrag} vec2 TexCoords;\n    ${a.outputDeclaration}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    `}function Ju(i,a){return`\n  void main() {\n    int indices[${a}];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ${G(i).output} = result;\n  }\n  `}var bh,gh,ut=O(()=>{bh={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},gh={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),j=O(()=>{});function li(i){return _li.apply(this,arguments)}function _li(){return _li=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(i,a=(f=>0),c){return new Promise((f,b)=>{let m=0,v=()=>{if(i())return void f();m++;let l=a(m);null!=c&&m>=c?b():setTimeout(v,l)};v()})}),_li.apply(this,arguments)}function An(i){return ur(typeof i<"u"&&0!==i.length,()=>"empty string found for sampler name"),"get"+i.charAt(0).toUpperCase()+i.slice(1)}function Yu(i){return ur(typeof i<"u"&&0!==i.length,()=>"empty string found for sampler name"),"get"+i.charAt(0).toUpperCase()+i.slice(1)+"AtOutCoords"}function lr(i,a){let c=JSON.parse(JSON.stringify(i));return c=a,c}function fr(i,a){return a.map(c=>i[c]).join(", ")}function Bt(i){if(i<=1)return"int";if(2===i)return"ivec2";if(3===i)return"ivec3";if(4===i)return"ivec4";if(5===i)return"ivec5";if(6===i)return"ivec6";throw Error(`GPU for rank ${i} is not yet supported`)}function ne(i=6){return["x","y","z","w","u","v"].slice(0,i)}var pe=O(()=>{Y()});function yh(i,a){return ne(a).map(c=>`${i}.${c}`)}function cr(i,a){return 1===a?[i]:yh(i,a)}function de(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}var He=O(()=>{pe()});function Th(i,a,c){if(0===i)return"false";if(1===i)return`rc > ${a[0]}`;let f="";for(let b=i-2;b<i;b++)f+=`${c[b]} >= ${a[b-i+2]}`,b<i-1&&(f+="||");return f}function wh(i,a){let c=i.length;if(0===c)return"getA(), 0, 0, 0";if(1===c)return`getA(rc),\n            rc + 1 >= ${i[0]} ? 0. : getA(rc + 1),\n            0, 0`;let l="";if(c>2)for(let h=0;h<c-2;++h)l+=`${a[h]},`;return`getA(${l}r, c),\n          rEdge ? 0. : getA(${l}rp1, c),\n          cEdge ? 0. : getA(${l}r, cp1),\n          rEdge || cEdge ? 0. : getA(${l}rp1, cp1)`}function vh(i,a,c,f){return 0===i||1===i?"":`\n    int r = ${a[i-2]};\n    int c = ${a[i-1]};\n    int rp1 = ${a[i-2]} + 1;\n    int cp1 = ${a[i-1]} + 1;\n    bool rEdge = rp1 >= ${f};\n    bool cEdge = cp1 >= ${c};\n    `}var Zu,xh,Qu,tl=O(()=>{ut(),j(),pe(),He(),Zu={name:"pack",inputNames:["A"],inputTypes:[1]},xh=(i,a)=>{let s,c=G(i.session.backend.glContext.version),f=a.dims,b=f.length,m=a.dims.length,v=Bt(m),l=cr("rc",m),h=vh(m,l,f[f.length-2],f[f.length-1]);s=0===b?[1,1]:1===b?[f[0],1]:[f[m-1],f[m-2]];let g=Th(m,s,l),p=wh(f,l),T=`\n        void main() {\n          ${v} rc = getOutputCoords();\n\n          if(${g}) {\n            ${c.output} = vec4(0);\n          } else {\n            ${h}\n\n            ${c.output} = vec4(${p});\n          }\n        }\n      `;return{...Zu,hasMain:!0,output:{dims:a.dims,type:a.type,textureType:2},shaderSource:T}},Qu=(i,a)=>({...Zu,get:()=>xh(i,a)})});function fi(i){if(0===i.length)return[1,1,1];let a=1;for(let c=0;c<i.length-2;++c)a*=i[c];return[a,i.length>1?i[i.length-2]:1,i[i.length-1]]}function rl(i,a){let c=!1;return c=0===i.length||0===a.length||(i.length<2||a.length<2?i[i.length-1]===a[a.length-1]:i[i.length-1]===a[a.length-1]&&i[i.length-2]===a[a.length-2]),c}function Oh(i){let a=B.computeStrides(i),c=["b","r","c"],f="index";return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${a.map((b,m)=>`int ${c[m]} = ${f} / ${b}; ${m===a.length-1?`int ${c[m+1]} = ${f} - ${c[m]} * ${b}`:`index -= ${c[m]} * ${b}`};`).join("")}\n      return ivec3(b, r, c);\n    }\n  `}function Sh(i){let a=B.computeStrides(i);return`\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ${a[0]} + coords.z * ${a[1]} + coords.y;\n  }\n`}var Ih,_h,el,nl=O(()=>{Y(),ut(),j(),He(),Ih=i=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${i}`}),_h=(i,a,c,f)=>{let b=a.dims,m=f,v="";for(let s=0;s<4;s++){let g="";switch(s){case 0:g="outputCoords = rc;";break;case 1:g="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:g="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:g="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}v+=`\n        ${g}\n        ${s>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${s}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ${s>0?"}":""}\n      `}let l=G(i.session.backend.glContext.version),h=`\n      ${Oh(b)}\n      ${Sh(m)}\n      ${de()}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ${m[2]};\n        int cols = ${m[1]};\n\n        ${v}\n        ${l.output} = result;\n      }\n    `;return{...c,output:{dims:m,type:a.type,textureType:2},shaderSource:h,hasMain:!0}},el=(i,a,c)=>{let f=Ih(c);return{...f,get:()=>_h(i,a,f,c)}}}),ci,ol=O(()=>{ut(),j(),ci=(i,a)=>{let c=a.shape,f=G(i.session.backend.glContext.version);return i.executeProgram({name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:c,type:a.tensor.type,textureType:3},shaderSource:`\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ${f.texture2D}(X,TexCoords).r;\n      ${f.output} = encodeAsUint8(value);\n    }`,hasMain:!0},[a.tensor])}});function Ph(i,a){if(1===i)return"rc";let c="";for(let f=0;f<i;f++)c+=a[f],f<i-1&&(c+=",");return c}var il,Ah,al,sl=O(()=>{ut(),j(),pe(),He(),il={name:"unpack",inputNames:["A"],inputTypes:[2]},Ah=(i,a)=>{let c=a.dims.length,f=cr("rc",c),b=f.slice(-2),m=Bt(c),v=de(),l=0===a.dims.length?"":Ph(c,f),h=c<=1?"rc":`vec2(${b.join(",")})`,g=`\n    ${v}\n    void main() {\n      ${m} rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(${l});\n\n       ${G(i.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${h}), 0, 0, 0);\n     }\n   `;return{...il,hasMain:!0,output:{dims:a.dims,type:a.type,textureType:0},shaderSource:g}},al=(i,a)=>({...il,get:()=>Ah(i,a)})}),Pn,Br,En,Fr=O(()=>{Ut(),Pn=class{constructor(i,a=1){if(1===a)this.internalFormat=i.R32F,this.format=i.RED,this.textureType=i.FLOAT,this.channelSize=a;else{if(4!==a)throw new Error(`Invalid number of channels: ${a}`);this.internalFormat=i.RGBA32F,this.format=i.RGBA,this.textureType=i.FLOAT,this.channelSize=a}}encode(i,a){let c,f;return i.constructor!==Float32Array&&(tt.warning("Encoder","data was not of type Float32; creating new Float32Array"),f=new Float32Array(i)),a*this.channelSize>i.length?(tt.warning("Encoder","Source data too small. Allocating larger array"),f=i,c=this.allocate(a*this.channelSize),f.forEach((b,m)=>c[m]=b)):(f=i,c=f),c}allocate(i){return new Float32Array(4*i)}decode(i,a){return 1===this.channelSize?i.filter((c,f)=>f%4==0).subarray(0,a):i.subarray(0,a)}},Br=class{constructor(i,a=1,c){if(1!==a&&4!==a)throw new Error(`Invalid number of channels: ${a}`);this.internalFormat=i.RGBA,this.format=i.RGBA,this.channelSize=a,this.textureType=c||i.FLOAT}encode(i,a){let c=i;return 1===this.channelSize&&(tt.verbose("Encoder","Exploding into a larger array"),c=this.allocate(a),i.forEach((f,b)=>c[4*b]=f)),c}allocate(i){return new Float32Array(4*i)}decode(i,a){return 1===this.channelSize?i.filter((c,f)=>f%4==0).subarray(0,a):i.subarray(0,a)}},En=class{constructor(i,a=1){if(this.channelSize=4,1===a)this.internalFormat=i.ALPHA,this.format=i.ALPHA,this.textureType=i.UNSIGNED_BYTE,this.channelSize=a;else{if(4!==a)throw new Error(`Invalid number of channels: ${a}`);this.internalFormat=i.RGBA,this.format=i.RGBA,this.textureType=i.UNSIGNED_BYTE,this.channelSize=a}}encode(i,a){return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}allocate(i){return new Uint8Array(i*this.channelSize)}decode(i,a){if(i instanceof Uint8Array)return i.subarray(0,a);throw new Error(`Invalid array type: ${i.constructor}`)}}}),Cr,ul,pi,ll=O(()=>{Y(),j(),Cr=(i,a,c)=>{let f=0===c||1===c?1:4,b=2===c,m=1===c||2===c,v=4===c?a.length-1:void 0,l=4===c?a.map((h,s)=>s===a.length-1?4*h:h):void 0;return pi(i,a,f,l,{isPacked:b,reverseWH:m,breakAxis:v})},ul=(i,a,c)=>{let f=Cr(i,a,c);return[f.width,f.height]},pi=(i,a,c=1,f,b)=>{let m=!(!b||!b.isPacked),[v,l]=i.computeTextureWH(m&&f||a,b),h=a.length,s=a.slice(0);if(0===h&&(s=[1]),1===c)f=a;else if(m){if(4!==c)throw new Error("a packed texture must be 4-channel");f=a,h>0&&(s[h-1]=Math.ceil(s[h-1]/2)),h>1&&(s[h-2]=Math.ceil(s[h-2]/2))}else if(!f)throw new Error("Unpacked shape is needed when using channels > 1");return{width:v,height:l,channels:c,isPacked:m,shape:s,strides:B.computeStrides(s),unpackedShape:f,reversedWH:b&&b.reverseWH}}}),Dh,Dn,cl=O(()=>{Ut(),We(),Y(),tl(),nl(),ol(),sl(),Fr(),ll(),j(),Dh=(i,a)=>{let c=a.map(b=>`${b.unpackedShape.join(",")};${b.width}x${b.height}`).join("_"),f=i.name;return i.cacheHint&&(f+="["+i.cacheHint+"]"),f+=":"+c,f},Dn=class{constructor(i){this.session=i,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(i,a){return ul(this.session.layoutStrategy,i,a)}executeProgram(i,a){if(a.length<i.inputNames.length)throw new Error(`Input size mustn't be less than ${i.inputNames.length}.`);if(i.inputNames.length!==i.inputTypes.length)throw new Error("input names size does not match input types");let c=[];for(let h=0;h<i.inputNames.length;++h)c[h]=this.getOrCreateTextureData(a[h],i.inputTypes[h]);let f=Dh(i,c),b=this.session.programManager.getArtifact(f),m=b?b.programInfo:"function"==typeof i.get?i.get():i,v=Cr(this.session.layoutStrategy,m.output.dims,m.output.textureType),l=this.createTextureData(v,m.output.type);return b||(b=this.session.programManager.build(m,c,l),this.session.programManager.setArtifact(f,b)),this.runProgram(b,c,l),l}run(i,a){return this.executeProgram(i,a).tensor}runProgram(i,a,c){for(let f=0;f<a.length;++f)if(!!a[f].isPacked!=(2===i.programInfo.inputTypes[f]))throw new Error(`input[${f}] property packed inconsistent`);if(!!c.isPacked!=(2===i.programInfo.output.textureType))throw new Error("output property packed inconsistent");this.session.programManager.run(i,a,c)}getOrCreateTextureData(i,a){let c=this.getTextureData(i.dataId,2===a);if(!c&&(c=this.getTextureData(i.dataId,2!==a),c))return 2===a?this.pack(c):this.unpack(c);if(!c){let f=Cr(this.session.layoutStrategy,i.dims,a);if(4===a){let b=i.dims;if(4===b.length){let m=[b[0],Math.ceil(b[1]*b[2]*b[3]/4)],v=Cr(this.session.layoutStrategy,m,a),l=i.numberData;if(b[1]*b[2]*b[3]%4!=0){let h=b[0],s=b[1]*b[2]*b[3],g=4*Math.ceil(1*s/4);l=new Float32Array(h*g);for(let T=0;T<h;++T){let I=T*s,N=T*g+T%1*s;l.set(i.numberData.subarray(I,I+s),N)}}return this.createTextureData(v,i.type,l,i,1)}}if(2===a){let b=pi(this.session.layoutStrategy,i.dims,1,[],{reverseWH:!0}),m=this.createTextureData(b,i.type,i.numberData,i,1);c=this.pack(m)}else c=this.createTextureData(f,i.type,i.numberData,i,1)}return c}createTextureDataFromLayoutBindTensor(i,a,c,f){return this.createTextureData(i,a,c,f,1)}createTextureData(i,a,c,f,b){tt.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(i)}]`);let m=this.session.textureManager.createTextureFromLayout(a,i,c,b);return this.createTextureDataFromTexture(i,a,m,f)}reshapeUnpacked(i,a){let c=this.getOrCreateTextureData(i,0),f={channels:c.channels,height:c.height,width:c.width,shape:0!==a.length?a:[1],strides:B.computeStrides(a),unpackedShape:a};return this.createTextureDataFromTexture(f,i.type,c.texture).tensor}reshapePacked(i,a){let c=this.getOrCreateTextureData(i,2);if(rl(i.dims,a)){let l={channels:c.channels,height:c.height,width:c.width,shape:0!==a.length?a:[1],strides:B.computeStrides(a),unpackedShape:a,isPacked:!0};return this.createTextureDataFromTexture(l,i.type,c.texture).tensor}let f=fi(i.dims),b=fi(a),m=this.reshapePacked(i,f),v=this.run(el(this,m,b),[m]);return this.reshapePacked(v,a)}cast(i,a){let c=this.getOrCreateTextureData(i,0);return this.createTextureDataFromTexture(c,a,c.texture).tensor}createTextureDataFromTexture(i,a,c,f,b){var m=this;let v={...i,tensor:f||new bt(i.unpackedShape,a,l=>this.readTexture(v),function(){var l=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(h){return m.readTextureAsync(v)});return function(h){return l.apply(this,arguments)}}(),void 0,b),texture:c};return this.setTextureData(v.tensor.dataId,v,i.isPacked),v}getTextureData(i,a=!1){return this.session.isInitializer(i)?this.session.getTextureData(i,a):a?this.packedTextureDataCache.get(i):this.unpackedTextureDataCache.get(i)}setTextureData(i,a,c=!1){this.session.isInitializer(i)?this.session.setTextureData(i,a,c):(c?this.packedTextureDataCache:this.unpackedTextureDataCache).set(i,a)}isTextureLayoutCached(i,a=!1){return!!this.getTextureData(i.dataId,a)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(i=>this.session.textureManager.releaseTexture(i)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(i=>this.session.textureManager.releaseTexture(i)),this.unpackedTextureDataCache=new Map}readTexture(i){return i.isPacked?this.readTexture(this.unpack(i)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(i,i.tensor.type,i.channels):this.session.textureManager.readUint8TextureAsFloat(ci(this,i))}readTextureAsync(i){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return i.isPacked?a.readTextureAsync(a.unpack(i)):a.session.backend.glContext.isFloat32DownloadSupported?a.session.textureManager.readTextureAsync(i,i.tensor.type,i.channels):a.session.textureManager.readUint8TextureAsFloat(ci(a,i))})()}pack(i){return this.executeProgram(Qu(this,i.tensor),[i.tensor])}unpack(i){return this.executeProgram(al(this,i.tensor),[i.tensor])}}}),di,W,It=O(()=>{di=class{constructor(i){Object.assign(this,i)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(i=>`${this[i]}`).join(";")),this.key}},W=i=>new di(i)}),pl,dl,hl,Lh,$h,ml=O(()=>{It(),ut(),j(),pl={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},dl=(i,a,c)=>($h(a),[i.run({...pl,cacheHint:c.cacheKey,get:()=>Lh(i,a,c)},a)]),hl=i=>{let a=i.attributes.getFloat("epsilon",1e-5),c=i.attributes.getFloat("momentum",.9),f=i.attributes.getInt("spatial",1);return W({epsilon:a,momentum:c,spatial:f})},Lh=(i,a,c)=>{let f=G(i.session.backend.glContext.version),b=a[0].dims.length,[m,v]=i.calculateTextureWidthAndHeight(a[1].dims,0),l=`\n  float process(int[${b}] indices) {\n    vec2 position = offsetToCoords(indices[1], ${m}, ${v});\n    float scale = getColorAsFloat(${f.texture2D}(Scale, position));\n    float mean = getColorAsFloat(${f.texture2D}(Mean, position));\n    float variance = getColorAsFloat(${f.texture2D}(Variance, position));\n    float b = getColorAsFloat(${f.texture2D}(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${c.epsilon})) ) + b;\n  }`;return{...pl,output:{dims:a[0].dims,type:a[0].type,textureType:0},shaderSource:l}},$h=i=>{if(!i||5!==i.length)throw new Error("BatchNormalization requires 5 inputs.");let a=i[0],c=i[1],f=i[2],b=i[3],m=i[4];if(a.dims.length<3||1!==c.dims.length||1!==f.dims.length||1!==b.dims.length||1!==m.dims.length)throw new Error("invalid input shape.");if(c.dims[0]!==a.dims[1]||f.dims[0]!==a.dims[1]||b.dims[0]!==a.dims[1]||m.dims[0]!==a.dims[1])throw new Error("invalid input shape.");if("float32"!==a.type&&"float64"!==a.type||"float32"!==c.type&&"float64"!==c.type||"float32"!==f.type&&"float64"!==f.type||"float32"!==b.type&&"float64"!==b.type||"float32"!==m.type&&"float64"!==m.type)throw new Error("invalid input tensor types.")}}),Ln,Ht,k,Nr,$n,Te=O(()=>{Ln=class{constructor(i,a,c,f){this.glContext=i,this.programInfo=a,this.inputTextureLayouts=c,this.outputTextureLayout=f}},Ht=class{constructor(i){this.context=i}},k=class{constructor(i,a){this.routineBody=i,this.dependencies=a}},Nr=class{constructor(i,a,c){this.name=i,this.dependencies=c||[],a&&(this.routineBody=a)}addDependency(i){i&&this.dependencies.push(i)}},$n=class{static returnOrderedNodes(i){if(!i||0===i.length)return[];if(1===i.length)return i;let a=new Set,c=new Set,f=new Array;return this.createOrderedNodes(i,a,c,f),f}static createOrderedNodes(i,a,c,f){for(let b=0;b<i.length;++b)this.dfsTraverse(i[b],a,c,f)}static dfsTraverse(i,a,c,f){if(!i||c.has(i.name))return;if(a.has(i.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");a.add(i.name);let b=i.dependencies;if(b&&b.length>0)for(let m=0;m<b.length;++m)this.dfsTraverse(b[m],a,c,f);f.push(i),c.add(i.name),a.delete(i.name)}}});function Bh(){let i="add_";return{body:`\n  float ${i}(float a, float b) {\n    return a + b;\n  }\n  vec4 ${i}(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  `,name:i,type:0}}function Fh(){let i="div_";return{body:`\n  float ${i}(float a, float b) {\n    return a / b;\n  }\n  vec4 ${i}(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  `,name:i,type:0}}function Ch(){let i="mul_";return{body:`\n  float ${i}(float a, float b) {\n    return a * b;\n  }\n  vec4 ${i}(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  `,name:i,type:0}}function Nh(){let i="sub_";return{body:`\n  float ${i}(float a, float b) {\n    return a - b;\n  }\n  vec4 ${i}(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  `,name:i,type:0}}function Rh(){let i="equal_";return{body:`\n  float ${i}(float a, float b) {\n    return float(a == b);\n  }\n  vec4 ${i}(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  `,name:i,type:0}}function Gh(){let i="greater_";return{body:`\n  float ${i}(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ${i}(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  `,name:i,type:0}}function Mh(){let i="less_";return{body:`\n  float ${i}(float a, float b) {\n    return float(a < b);\n  }\n  vec4 ${i}(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  `,name:i,type:0}}function Uh(){let i="and_";return{body:`\n  float ${i}(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 ${i}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  `,name:i,type:0}}function Vh(){let i="or_";return{body:`\n  float ${i}(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 ${i}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  `,name:i,type:0}}function zh(){let i="xor_";return{body:`\n  float ${i}(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 ${i}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  `,name:i,type:0}}function Wh(){return qh("pow")}function Hh(){let i="prelu_";return{body:`\n  float ${i}(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 ${i}(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  `,name:i,type:0}}function qh(i){let a=`${i}_`;return{body:`\n  float ${a}(float a, float b) {\n    return ${i}(a, b);\n  }\n  vec4 ${a}(vec4 v1, vec4 v2) {\n    return ${i}(v1, v2);\n  }\n  `,name:a,type:0}}var qt,jh,bl,gl,yl,xl,Tl,wl,vl,Il,_l,Ol,Sl,Al,Pl=O(()=>{Y(),Te(),ut(),j(),qt=(i,a,c,f=a[0].type,b)=>{let m=i.session.pack?2:0;return{name:c.name,inputNames:["A","B"],inputTypes:[m,m],cacheHint:b,get:()=>jh(i,a,c,f)}},jh=(i,a,c,f=a[0].type)=>{let b=i.session.pack?2:0,m=!B.areEqual(a[0].dims,a[1].dims),v=a[0].dims,l=i.session.pack;if(m){let g=kt.calcShape(a[0].dims,a[1].dims,!1);if(!g)throw new Error("Can't perform binary op on the given tensors");v=g;let p=v.length,T=0!==a[0].dims.length?a[0].dims.length:1,I=0!==a[1].dims.length?a[1].dims.length:1,N=0!==a[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",L=0!==a[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",U=G(i.session.backend.glContext.version);return{name:c.name,inputNames:["A","B"],inputTypes:[b,b],output:{dims:v,type:f,textureType:b},shaderSource:l?`\n      ${c.body}\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ${c.name}(a, b);\n        ${U.output} = result;\n      }`:`\n      ${c.body}\n      float process(int indices[${p}]) {\n        int aindices[${T}];\n        int bindices[${I}];\n        ${N}\n        ${L}\n        return ${c.name}(_A(aindices), _B(bindices));\n      }`,hasMain:l}}let h=G(i.session.backend.glContext.version);return{name:c.name,inputNames:["A","B"],inputTypes:[b,b],output:{dims:a[0].dims,type:f,textureType:b},shaderSource:`\n    ${c.body}\n    void main() {\n      vec4 v1 = ${h.texture2D}(A, TexCoords);\n      vec4 v2 = ${h.texture2D}(B, TexCoords);\n      vec4 result = ${c.name}(v1, v2);\n      ${h.output} = result;\n    }\n    `,hasMain:!0}},bl=(i,a)=>[i.run(qt(i,a,Bh()),a)],gl=(i,a)=>[i.run(qt(i,a,Uh(),"bool"),a)],yl=(i,a)=>[i.run(qt(i,a,Fh()),a)],xl=(i,a)=>[i.run(qt(i,a,Rh(),"bool"),a)],Tl=(i,a)=>[i.run(qt(i,a,Gh(),"bool"),a)],wl=(i,a)=>[i.run(qt(i,a,Mh(),"bool"),a)],vl=(i,a)=>[i.run(qt(i,a,Ch()),a)],Il=(i,a)=>[i.run(qt(i,a,Vh(),"bool"),a)],_l=(i,a)=>[i.run(qt(i,a,Wh()),a)],Ol=(i,a)=>[i.run(qt(i,a,Hh()),a)],Sl=(i,a)=>[i.run(qt(i,a,Nh()),a)],Al=(i,a)=>[i.run(qt(i,a,zh(),"bool"),a)]}),El,Dl,Kh,Ll=O(()=>{Y(),El=(i,a,c)=>(Kh(a),[i.cast(a[0],c)]),Dl=i=>At.tensorDataTypeFromProto(i.attributes.getInt("to")),Kh=i=>{if(!i||1!==i.length)throw new Error("Cast requires 1 input.");if("string"===i[0].type)throw new Error("Invalid input type.")}}),Jh,Yh,$l,kn,kl=O(()=>{ut(),j(),pe(),He(),Jh=(i,a)=>({name:"Concat (packed)",inputNames:Array.from({length:i},(c,f)=>`X${f}`),inputTypes:Array(i).fill(2),cacheHint:a}),Yh=(i,a,c,f)=>{let b=c[0].dims.slice();if(f>=b.length||f<-1*b.length)throw new Error("axis specified for concat doesn't match input dimensionality");f<0&&(f=b.length+f);let m=b.slice(0);for(let Oe=1;Oe<c.length;Oe++){let Io=c[Oe].dims.slice();for(let Zo=0;Zo<b.length;Zo++)if(Zo===f)m[f]+=Io[Zo];else if(b[Zo]!==Io[Zo])throw new Error("non concat dimensions must match")}let v=m.length,l=cr("coords",v),h=Bt(v),s=de(),g=c.map(Oe=>Oe.dims),p=ne(v),T=new Array(g.length-1);T[0]=g[0][f];for(let Oe=1;Oe<T.length;Oe++)T[Oe]=T[Oe-1]+g[Oe][f];let I=p[f],N=p.slice(-2),L=p.join(),U=`if (${I} < ${T[0]}) {\n        return getChannel(\n            getX0(${L}), vec2(${N.join()}));\n        }`;for(let Oe=1;Oe<T.length;Oe++){let Io=T[Oe-1];U+=`\n            if (${I} < ${T[Oe]}  && ${I} >= ${T[Oe-1]}) {\n              return getChannel(\n                getX${Oe}(${kn(p,I,Io)}),\n                vec2(${kn(N,I,Io)}));\n            }`}let Z=T[T.length-1];U+=`\n            return getChannel(\n              getX${T.length}(${kn(p,I,Z)}),\n              vec2(${kn(N,I,Z)}));`;let ie=G(i.session.backend.glContext.version),le=`\n          ${s}\n          float getValue(${p.map(Oe=>"int "+Oe)}) {\n            ${U}\n          }\n\n          void main() {\n            ${h} coords = getOutputCoords();\n            int lastDim = coords.${p[v-1]};\n            coords.${p[v-1]} = coords.${p[v-2]};\n            coords.${p[v-2]} = lastDim;\n\n            vec4 result = vec4(getValue(${l}), 0., 0., 0.);\n\n            ${l[v-1]} = ${l[v-1]} + 1;\n            if (${l[v-1]} < ${m[v-1]}) {\n              result.g = getValue(${l});\n            }\n\n            ${l[v-2]} = ${l[v-2]} + 1;\n            if (${l[v-2]} < ${m[v-2]}) {\n              result.a = getValue(${l});\n            }\n\n            ${l[v-1]} = ${l[v-1]} - 1;\n            if (${l[v-2]} < ${m[v-2]} &&\n                ${l[v-1]} < ${m[v-1]}) {\n              result.b = getValue(${l});\n            }\n            ${ie.output} = result;\n          }\n        `;return{...a,output:{dims:m,type:c[0].type,textureType:2},shaderSource:le,hasMain:!0}},$l=(i,a,c)=>{let f=Jh(a.length,c.cacheKey);return{...f,get:()=>Yh(i,f,a,c.axis)}},kn=(i,a,c)=>{let f=i.indexOf(a);return i.map((b,m)=>m===f?`${b} - ${c}`:b).join()}}),Bl,Zh,Qh,tm,Fl,em,rm,nm,Cl,om,Nl=O(()=>{It(),j(),kl(),Bl=(i,a,c)=>(om(a),i.session.pack&&a[0].dims.length>1?[i.run($l(i,a,c),a)]:[i.run(tm(i,a,c),a)]),Zh=(i,a)=>({name:"Concat",inputNames:Array.from({length:i},(c,f)=>`X${f}`),inputTypes:Array(i).fill(0),cacheHint:a}),Qh=(i,a,c,f)=>{let b=c[0].dims.slice();if(f>=b.length||f<-1*b.length)throw new Error("axis specified for concat doesn't match input dimensionality");f<0&&(f=b.length+f);let m=b.slice(0);for(let I=1;I<c.length;I++){let N=c[I].dims.slice();for(let L=0;L<b.length;L++)if(L===f)m[f]+=N[L];else if(b[L]!==N[L])throw new Error("non concat dimensions must match")}let v=m.length,l=new Array(c.length),h=0;for(let I=0;I<l.length;++I)h+=c[I].dims[f],l[I]=h;let s="";s=c.length<5?Fl(l):em(l);let g=rm(c.length,v),p=nm(l);return{...a,output:{dims:m,type:c[0].type,textureType:0},shaderSource:`\n        ${g}\n        ${p}\n        ${s}\n        float process(int indices[${v}]) {\n          int textureIndex = getTextureWhereDataResides (indices[${f}]);\n\n          if(textureIndex != 0) {\n            indices[${f}] = indices[${f}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }`}},tm=(i,a,c)=>{let f=Zh(a.length,c.cacheKey);return{...f,get:()=>Qh(i,f,a,c.axis)}},Fl=i=>`int getTextureWhereDataResides(int index) {\n      ${i.map((a,c)=>`if(index<${a}) {return ${c};}\n`).join("")}\n    }`,em=i=>Fl(i),rm=(i,a)=>{let c=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${a}]) {`];for(let f=0;f<i;++f)c.push(0===f?`\tif (textureIndex == ${f}) { return _X${f}(indices); }`:f===i-1?`\telse { return _X${f}(indices); }`:`\telse if (textureIndex == ${f}) { return _X${f}(indices); }`);return c.push("\t}"),c.join("\n")},nm=i=>{let a=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let c=0;c<i.length;++c)a.push(0===c?`\tif (index == ${c}) { return ${i[c]}; }`:c===i.length-1?`\telse { return ${i[c]}; }`:`\telse if (index == ${c}) { return ${i[c]}; }`);return a.push("\t}"),a.join("\n")},Cl=i=>W({axis:i.attributes.getInt("axis")}),om=i=>{if(!i||i.length<1)throw new Error("too few inputs");let a=i[0].type,c=i[0].dims.length;if("string"===a)throw new Error("string tensor is not supported yet");for(let f of i){if(f.type!==a)throw new Error("input tensors should be one type");if(f.dims.length!==c)throw new Error("input tensors should have the same shape")}}});function im(){return jt("abs")}function am(){return jt("acos")}function sm(){return jt("asin")}function um(){return jt("atan")}function lm(){return jt("ceil")}function fm(){return jt("cos")}function cm(i){let a="elu";return{body:`\n  const float alpha = float(${i});\n\n  float ${a}_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 ${a}_(vec4 v) {\n    return vec4(${a}_(v.x), ${a}_(v.y), ${a}_(v.z), ${a}_(v.w));\n  }\n  `,name:a,type:0}}function pm(){return jt("exp")}function dm(){return jt("floor")}function hi(i,a){let c="clip";return{body:`\n  const float min = float(${i});\n  const float max = float(${a});\n\n  float ${c}_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 ${c}_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  `,name:c,type:0}}function hm(){let i="indentity";return{body:`\n  float ${i}_(float a) {\n    return a;\n  }\n  vec4 ${i}_(vec4 v) {\n    return v;\n  }\n  `,name:i,type:0}}function mm(i){let a="leakyRelu";return{body:`\n  const float alpha = float(${i});\n\n  float ${a}_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ${a}_(vec4 v) {\n    return vec4(${a}_(v.x), ${a}_(v.y), ${a}_(v.z), ${a}_(v.w));\n  }\n  `,name:a,type:0}}function bm(){return jt("log")}function gm(){let i="neg";return{body:`\n  float ${i}_(float a) {\n    return -a;\n  }\n  vec4 ${i}_(vec4 v) {\n    return -v;\n  }\n  `,name:i,type:0}}function ym(){let i="not";return{body:`\n  float ${i}_(float a) {\n    return float( ! bool(a) );\n  }\n  bool ${i}_(bool a) {\n    return !a;\n  }\n  vec4 ${i}_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 ${i}_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  `,name:i,type:0}}function xm(){return jt("sin")}function mi(){let i="relu";return{body:`\n  float ${i}_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 ${i}_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  `,name:i,type:0}}function bi(){let i="sigmoid";return{body:`\n  float ${i}_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 ${i}_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  `,name:i,type:0}}function Tm(){return jt("sqrt")}function wm(){return jt("tan")}function vm(){let i="tanh";return{body:`\n  float ${i}_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 ${i}_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  `,name:i,type:0}}function jt(i){return{body:`\n  float ${i}_(float a) {\n    return ${i}(a);\n  }\n  vec4 ${i}_(vec4 v) {\n    return ${i}(v);\n  }\n  `,name:i,type:0}}var Im,dt,Rl,Gl,Ml,Ul,gi,Vl,zl,_m,Wl,Hl,ql,jl,Xl,Kl,yi,Jl,Yl,Zl,Ql,tf,ef,rf,nf,of,af,sf,xi=O(()=>{It(),Y(),Te(),ut(),j(),Im=(i,a,c,f)=>{let b=i.session.pack?2:0,m=G(i.session.backend.glContext.version);return{...a,output:{dims:c.dims,type:c.type,textureType:b},shaderSource:`\n     ${f.body}\n     void main() {\n       vec4 v = ${m.texture2D}(A, TexCoords);\n       v = ${f.name}_(v);\n       ${m.output} = v;\n     }\n     `,hasMain:!0}},dt=(i,a,c,f)=>{let m={name:c.name,inputTypes:[i.session.pack?2:0],inputNames:["A"],cacheHint:f};return{...m,get:()=>Im(i,m,a,c)}},Rl=(i,a)=>[i.run(dt(i,a[0],im()),a)],Gl=(i,a)=>[i.run(dt(i,a[0],am()),a)],Ml=(i,a)=>[i.run(dt(i,a[0],sm()),a)],Ul=(i,a)=>[i.run(dt(i,a[0],um()),a)],gi=(i,a,c)=>[i.run(dt(i,a[0],hi(c.min,c.max),c.cacheKey),a)],Vl=i=>W({min:i.attributes.getFloat("min",Ve),max:i.attributes.getFloat("max",ze)}),zl=(i,a)=>{let c=_m(i,a);return gi(i,[a[0]],c)},_m=(i,a)=>{if(a.length>=3&&(!i.session.isInitializer(a[1].dataId)||!i.session.isInitializer(a[2].dataId)))throw new Error("dynamic clip attributes are not allowed");return W({min:a.length>=3?a[1].numberData[0]:Ve,max:a.length>=3?a[2].numberData[0]:ze})},Wl=(i,a)=>[i.run(dt(i,a[0],lm()),a)],Hl=(i,a)=>[i.run(dt(i,a[0],fm()),a)],ql=(i,a,c)=>[i.run(dt(i,a[0],cm(c.alpha),c.cacheKey),a)],jl=i=>W({alpha:i.attributes.getFloat("alpha",1)}),Xl=(i,a)=>[i.run(dt(i,a[0],pm()),a)],Kl=(i,a)=>[i.run(dt(i,a[0],dm()),a)],yi=(i,a)=>[i.run(dt(i,a[0],hm()),a)],Jl=(i,a,c)=>[i.run(dt(i,a[0],mm(c.alpha),c.cacheKey),a)],Yl=i=>W({alpha:i.attributes.getFloat("alpha",.01)}),Zl=(i,a)=>[i.run(dt(i,a[0],bm()),a)],Ql=(i,a)=>[i.run(dt(i,a[0],gm()),a)],tf=(i,a)=>[i.run(dt(i,a[0],ym()),a)],ef=(i,a)=>[i.run(dt(i,a[0],mi()),a)],rf=(i,a)=>[i.run(dt(i,a[0],bi()),a)],nf=(i,a)=>[i.run(dt(i,a[0],xm()),a)],of=(i,a)=>[i.run(dt(i,a[0],Tm()),a)],af=(i,a)=>[i.run(dt(i,a[0],wm()),a)],sf=(i,a)=>[i.run(dt(i,a[0],vm()),a)]});function he(i){let a;switch(i.activation){case"Relu":a=mi();break;case"Sigmoid":a=bi();break;case"Clip":a=hi(i.clipMin,i.clipMax);break;default:return{activationFunction:"",applyActivation:""}}return{activationFunction:a.body,applyActivation:`value = ${a.name}_(value);`}}var pr,qe=O(()=>{Y(),xi(),pr=i=>{let a=i.getString("activation","");if("Clip"===a){let[c,f]=i.getFloats("activation_params",[Ve,ze]);return{activation:a,clipMax:f,clipMin:c,activationCacheKey:`${a}:${c},${f}`}}return{activation:a,activationCacheKey:a}}}),Sm,Am,uf,lf=O(()=>{Ut(),ut(),j(),Bn(),qe(),Sm=(i,a)=>({name:"GroupedConv",inputNames:i?["X","W","Bias"]:["X","W"],inputTypes:i?[0,0,0]:[0,0],cacheHint:a}),Am=(i,a,c,f)=>{let b=a.length>2?"value += getBias(output_channel);":"",m=a[0].dims.slice(),v=a[1].dims.slice(),l=v[0]/f.group;tt.verbose("GroupedConv",`autpPad:${f.autoPad}, dilations:${f.dilations}, group:${f.group}, kernelShape:${f.kernelShape}, pads:${f.pads}, strides:${f.strides}`);let h=dr(m,v,f.dilations,f.pads,f.strides),s=G(i.session.backend.glContext.version),{activationFunction:g,applyActivation:p}=he(f);return{...c,output:{dims:h,type:a[0].type,textureType:0},shaderSource:`\n  const ivec2 strides = ivec2(${f.strides[0]}, ${f.strides[1]});\n  const ivec2 pads = ivec2(${f.pads[0]}, ${f.pads[1]});\n  ${g}\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ${l};\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ${v[1]}; wInChannel++) {\n      int input_channel = group_id * ${v[1]} + wInChannel;\n      for (int wHeight = 0; wHeight < ${v[2]}; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ${f.dilations[0]};\n\n        if (xHeight < 0 || xHeight >= ${m[2]}) {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ${v[3]}; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ${f.dilations[1]};\n          if (xWidth < 0 || xWidth >= ${m[3]}) {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${b}\n    ${p}\n    ${s.output} = vec4(value, .0, .0, .0);\n  }\n`,hasMain:!0}},uf=(i,a,c)=>{let f=Sm(a.length>2,c.cacheKey);return{...f,get:()=>Am(i,a,f,c)}}}),Pm,Em,ff,cf=O(()=>{ut(),j(),He(),Pm=i=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:i}),Em=(i,a,c,f,b,m)=>{let v=c.dims,l=f.dims,g=b.length,p=[l[1]*l[2]*l[3],b[2]*b[3]],T=l[2]*l[3],I=de(),N=G(i.session.backend.glContext.version),L="";for(let se=0;se<=1;se++)for(let Z=0;Z<=1;Z++)L+=`\n            blockIndex = rc.x + ${Z};\n            pos = rc.y + ${se};\n\n            if(blockIndex < ${p[1]} && pos < ${p[0]}) {\n              offsetY = int(blockIndex / (${b[g-1]})) * ${m.strides[0]} -\n                ${m.pads[0]};\n              d0 = offsetY + ${m.dilations[0]} * (imod(pos, ${T}) / ${l[2]});\n\n              if(d0 < ${v[2]} && d0 >= 0) {\n                offsetX = imod(blockIndex, ${b[g-1]}) * ${m.strides[1]} -\n                  ${m.pads[1]};\n                d1 = offsetX + ${m.dilations[1]} * imod(imod(pos, ${T}), ${l[2]});\n\n                if(d1 < ${v[3]} && d1 >= 0) {\n\n                  ch = int(float(pos)/ ${T}.);\n                    innerDims = vec2(d0, d1);\n                    result[${2*se+Z}] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          `;return{...a,output:{dims:p,type:c.type,textureType:2},shaderSource:`\n      ${I}\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ${L}\n          ${N.output} = result;\n      }\n            `,hasMain:!0}},ff=(i,a,c,f,b)=>{let m=Pm(b.cacheKey);return{...m,get:()=>Em(i,m,a,c,f,b)}}});function Lm(i,a,c){let f=a[0].dims,b=a[1].dims,m=kt.calcShape(f,b,!0);if(!m)throw new Error("Can't use matmul on the given tensors");let v=Bt(m.length),l=ne(),{activationFunction:h,applyActivation:s}=he(c),g=a.length>2,p=g?"value += getBiasForMatmul();":"",T=g?`${wi(v,l,a[2].dims,m,!1)}`:"",N=f.length,L=b.length;return{...i,output:{dims:m,type:a[0].type,textureType:0},shaderSource:`\n    ${h}\n    ${T}\n    float process(int indices[${m.length}]) {\n        int a[${N}];\n        int b[${L}];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<${f[f.length-1]}; ++k) {\n            a[${N-1}] = k;\n            b[${L-2}] = k;\n            value += _A(a) * _B(b);\n        }\n        ${p}\n        ${s}\n        return value;\n    }`}}function Ti(i,a){let c=Dm(i.length>2,a.activationCacheKey);return{...c,get:()=>Lm(c,i,a)}}function wi(i,a,c,f,b){let m="",v=c.length,l=f.length,h=l-v;m=l<2&&v>0?"coords":c.map((T,I)=>`coords.${a[I+h]}`).join(", ");let s=kt.getBroadcastDims(c,f).map(T=>`coords.${a[T+h]} = 0;`).join("\n"),p="vec4(outputValue.xx, outputValue.yy)";return 1===B.size(c)&&(p="vec4(outputValue.x)"),b?`\nvec4 getBiasForMatmul() {\n  ${i} coords = getOutputCoords();\n  ${s}\n  vec4 outputValue = getBias(${m});\n  return ${p};\n}`:`\nfloat getBiasForMatmul() {\n  ${i} coords = getOutputCoords();\n  ${s}\n  return getBias(coords.x);\n}`}var pf,df,Dm,$m,Fn=O(()=>{Y(),j(),pe(),qe(),vi(),pf=(i,a,c)=>($m(a),i.session.pack?[i.run(Cn(i,a,c),a)]:[i.run(Ti(a,c),a)]),df=i=>pr(i.attributes),Dm=(i,a)=>({name:"MatMul",inputNames:i?["A","B","Bias"]:["A","B"],inputTypes:i?[0,0,0]:[0,0],cacheHint:a}),$m=i=>{if(!i||2!==i.length)throw new Error("MatMul requires 2 inputs.");if(i[0].dims[i[0].dims.length-1]!==i[1].dims[i[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==i[0].type&&"float64"!==i[0].type||"float32"!==i[1].type&&"float64"!==i[1].type)throw new Error("inputs should be float type");if(i[0].type!==i[1].type)throw new Error("inputs types should match")}});function Fm(i,a,c,f){let b=[],m=[],v=c[0].dims,l=c[1].dims,h=v.length,s=l.length,g=f.length,p=g-h,T=g-s;b=v.map((Z,ie)=>`coords.${a[ie+p]}`),b[h-1]="i*2",b.join(", "),m=l.map((Z,ie)=>`coords.${a[ie+T]}`),m[s-2]="i*2",m.join(", ");let I=kt.getBroadcastDims(v,f),N=kt.getBroadcastDims(l,f),L=I.map(Z=>`coords.${a[Z+p]} = 0;`).join("\n"),U=N.map(Z=>`coords.${a[Z+T]} = 0;`).join("\n"),se=`int lastDim = coords.${a[g-1]};\n  coords.${a[g-1]} = coords.${a[g-2]};\n  coords.${a[g-2]} = lastDim;`;return`\nvec4 getAAtOutCoordsMatmul(int i) {\n  ${i} coords = getOutputCoords();\n  ${se}\n  ${L}\n  vec4 outputValue = getA(${b});\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ${i} coords = getOutputCoords();\n  ${se}\n  ${U}\n  vec4 outputValue = getB(${m});\n  return outputValue;\n}`}function Cm(i,a){let c="";for(let f=0;f<a-2;f++)c+=`rc.${i[f]}, `;return c+=`rc.${i[a-2]}, i*2`,c}function Nm(i,a){let c="";for(let f=0;f<a-2;f++)c+=`rc.${i[f]}, `;return c+=`i*2, rc.${i[a-1]}`,c}var km,Bm,Cn,vi=O(()=>{Y(),ut(),j(),pe(),qe(),Fn(),km=(i,a)=>({name:"MatMul (packed)",inputNames:i?["A","B","Bias"]:["A","B"],inputTypes:i?[2,2,2]:[2,2],cacheHint:a}),Bm=(i,a,c,f)=>{let b=c.length>2,m=b?"value += getBiasForMatmul();":"",v=c[0].dims,l=c[1].dims,h=kt.calcShape(v,l,!0),s=!B.areEqual(c[0].dims,c[1].dims);if(!h)throw new Error("Can't use matmul on the given tensors");let p=Math.ceil(v[v.length-1]/2),T=v.length,I=l.length,N=G(i.session.backend.glContext.version),L=Bt(h.length),U=h.length,se=ne(),{activationFunction:Z,applyActivation:ie}=he(f),le=b?`${wi(L,se,c[2].dims,h,!0)}`:"",Oe=s?`${Fm(L,se,c,h)}`:"",Io=s?"getAAtOutCoordsMatmul(i)":`getA(${Cm(se,T)})`,Zo=s?"getBAtOutCoordsMatmul(i)":`getB(${Nm(se,I)})`;return{...a,output:{dims:h,type:c[0].type,textureType:2},shaderSource:`\n            ${Oe}\n            ${le}\n            ${Z}\n            void main() {\n              ${s?"":`${L} rc =\n          getOutputCoords(); int lastDim = rc.${se[U-1]}; rc.${se[U-1]} =\n          rc.${se[U-2]}; rc.${se[U-2]} = lastDim;\n      `}\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ${p}; i++) {\n                vec4 a = ${Io};\n                vec4 b = ${Zo};\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ${m}\n              ${ie}\n              ${N.output} = value;\n            }`,hasMain:!0}},Cn=(i,a,c)=>{let f=km(a.length>2,c.activationCacheKey);return{...f,get:()=>Bm(i,f,a,c)}}}),hf,mf=O(()=>{Bn(),cf(),vi(),hf=(i,a,c)=>{let b=a[1].dims,m=dr(a[0].dims,b,c.dilations,c.pads,c.strides),v=i.run(ff(i,a[0],a[1],m,c),[a[0]]),l=i.reshapePacked(a[1],[b[0],b[1]*b[2]*b[3]]),h=3===a.length?[l,v,a[2]]:[l,v],s=i.run(Cn(i,h,c),h);return i.reshapePacked(s,m)}}),Rm,Gm,bf,Ii,_i=O(()=>{j(),Rm=i=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:i}),Gm=(i,a,c,f,b,m)=>{let v=c.dims,h=b.length;return{...a,output:{dims:Ii(v,f.dims,b,4),type:c.type,textureType:4},shaderSource:`\n        const int XC = ${v[1]};\n        const int XH = ${v[2]};\n        const int XW = ${v[3]};\n        const int KH = ${m.kernelShape[0]};\n        const int KW = ${m.kernelShape[1]};\n        const int dilationH = ${m.dilations[0]};\n        const int dilationW = ${m.dilations[1]};\n        const int strideH = ${m.strides[0]};\n        const int strideW = ${m.strides[1]};\n        const int padH = ${m.pads[0]};\n        const int padW = ${m.pads[1]};\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[${h}]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[${v.length}];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        `}},bf=(i,a,c,f,b)=>{let m=Rm(b.cacheKey);return{...m,get:()=>Gm(i,m,a,c,f,b)}},Ii=(i,a,c,f=4)=>[c[0],c[2],c[3],Math.ceil(i[1]*a[2]*a[3]/f)]}),Mm,Um,gf,yf=O(()=>{Y(),ut(),j(),qe(),_i(),Mm=(i,a)=>({name:"ConvDotProduct",inputNames:i?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:i?[0,4,0]:[0,4],cacheKey:a.activationCacheKey}),Um=(i,a,c,f,b)=>{let m=c[0].dims,v=c[1].dims,l=[v[0],Math.ceil(m[1]*v[2]*v[3]/4)],h=Ii(m,v,f),[s,g]=i.calculateTextureWidthAndHeight(l,4),p=B.computeStrides(h),[T,I]=i.calculateTextureWidthAndHeight(h,4),N=f.length,L=c.length<3?"0.0":"_B(b)",U=Math.ceil(m[1]*v[2]*v[3]/4),{activationFunction:se,applyActivation:Z}=he(b),ie=G(i.session.backend.glContext.version);return{...a,output:{dims:f,type:c[0].type,textureType:0},shaderSource:`\n${se}\nfloat process(int indices[${N}]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ${p[0]} + im2col[1] * ${p[1]} + im2col[2] * ${p[2]};\n  int kernelOffset = indices[1] * ${l[1]};\n  float value = ${L};\n  for (int i = 0; i < ${U}; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ${T}, ${I});\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ${s}, ${g});\n    value += dot(${ie.texture2D}(Im2Col, im2colCoords), ${ie.texture2D}(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ${Z}\n  return value;\n}`}},gf=(i,a,c,f)=>{let b=Mm(a.length>2,f);return{...b,get:()=>Um(i,b,a,c,f)}}}),dr,Oi,Vm,zm,Wm,Hm,Si,qm,Bn=O(()=>{It(),Y(),lf(),mf(),yf(),qe(),_i(),Fn(),dr=(i,a,c,f,b)=>{let m=i[0],v=i.slice(2),l=v.length,h=a[0],s=a.slice(2).map((p,T)=>p+(p-1)*(c[T]-1)),g=v.map((p,T)=>p+f[T]+f[T+l]).map((p,T)=>Math.floor((p-s[T]+b[T])/b[T]));return[m,h].concat(...g)},Oi=(i,a,c)=>(qm(a,c),Vm(i,a,c)),Vm=(i,a,c)=>{let f=Hm(c,a),b=i.session.pack,m=1===f.kernelShape[0]&&1===f.kernelShape[1];return f.group>1?[i.run(uf(i,a,f),a)]:m&&b?[zm(i,a,f)]:b&&4===a[0].dims.length&&1===a[0].dims[0]&&!m?[hf(i,a,f)]:[Wm(i,a,f)]},zm=(i,a,c)=>{let f=a[0].dims,b=a[1].dims,m=dr(f,b,c.dilations,c.pads,c.strides),v=i.reshapeUnpacked(a[0],[f[1],f[2]*f[3]]),l=i.reshapeUnpacked(a[1],[b[0],b[1]]),h=a.length>2?[l,v,a[2]]:[l,v],s=i.run(Ti(h,c),h);return i.reshapeUnpacked(s,m)},Wm=(i,a,c)=>{let m=dr(a[0].dims,a[1].dims,c.dilations,c.pads,c.strides),v=i.run(bf(i,a[0],a[1],m,c),[a[0]]),l=3===a.length?[v,a[1],a[2]]:[v,a[1]];return i.run(gf(i,a,m,c),l)},Hm=(i,a)=>{let c=i.kernelShape.slice();if(0===i.kernelShape.length)for(let m=2;m<a[1].dims.length;++m)c.push(a[1].dims[m]);let f=i.pads.slice();Ue.adjustPadsBasedOnAutoPad(a[0].dims,i.strides,i.dilations,c,f,i.autoPad);let b=Object.assign({},i);return Object.assign(b,{kernelShape:c,pads:f,cacheKey:i.cacheKey}),b},Si=i=>{let a=i.attributes,c=pr(a),f=a.getString("auto_pad","NOTSET"),b=a.getInts("dilations",[1,1]),m=a.getInt("group",1),v=a.getInts("kernel_shape",[]),l=a.getInts("pads",[0,0,0,0]),h=a.getInts("strides",[1,1]);return W({autoPad:f,dilations:b,group:m,kernelShape:v,pads:l,strides:h,...c})},qm=(i,a)=>{if(!i||2!==i.length&&3!==i.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==i[0].dims.length||4!==i[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(i[0].dims[1]!==i[1].dims[1]*a.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===i.length&&(1!==i[2].dims.length||i[1].dims[0]!==i[2].dims[0]))throw new Error("invalid bias");let b=i[0].dims.length-2;if(a.dilations.length!==b)throw new Error(`dilations should be ${b}D`);if(a.strides.length!==b)throw new Error(`strides should be ${b}D`);if(a.pads.length!==2*b)throw new Error(`pads should be ${2*b}D`);if(0!==a.kernelShape.length&&a.kernelShape.length!==i[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==i[0].type||"float32"!==i[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===i.length&&"float32"!==i[2].type)throw new Error("Conv input(bias) should be float tensor")}}),jm,Xm,Km,xf,Jm,Ym,Zm,Qm,tb,eb,Tf,rb,wf=O(()=>{It(),ut(),j(),qe(),jm=(i,a,c,f,b,m)=>(i-1)*a+c+(f-1)*b+1-m,Xm=(i,a,c,f,b)=>{let m=Math.floor(i/2);"SAME_UPPER"===a?(c[f]=m,c[b]=i-m):"SAME_LOWER"===a&&(c[f]=i-m,c[b]=m)},Km=(i,a,c,f,b,m,v,l)=>{let h=i.length-2,s=0===l.length;for(let g=0;g<h;++g){let T=jm(i[g+2],m[g],b[g],a[g],c[g],s?i[g+2]*m[g]:l[g]);Xm(T,f,b,g,g+h),s&&l.push(m[g]*(i[g+2]-1)+v[g]+(a[g]-1)*c[g]+1-b[g]-b[g+h])}},xf=(i,a,c)=>(rb(a,c),Jm(i,a,c)),Jm=(i,a,c)=>{let f=eb(c,a);return[tb(i,a,f)]},Ym=(i,a)=>({name:"ConvTranspose",inputNames:i?["X","W","B"]:["X","W"],inputTypes:i?[0,0,0]:[0,0],cacheHint:a}),Zm=(i,a,c,f)=>{let b=a.length>2?"getB(output_channel)":"0.0",m=a[0].dims,v=a[1].dims,l=v[1],h=v[0]/f.group,s=[a[0].dims[0],a[1].dims[1]*f.group,...f.outputShape],g=G(i.session.backend.glContext.version),{activationFunction:p,applyActivation:T}=he(f);return{...c,output:{dims:s,type:a[0].type,textureType:0},shaderSource:`\n  const ivec2 strides = ivec2(${f.strides[0]}, ${f.strides[1]});\n  const ivec2 pads = ivec2(${f.pads[0]}, ${f.pads[1]});\n  ${p}\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n\n    ivec2 loc = coords.zw + pads;\n\n    int group_id = output_channel / ${l};\n    int wOutChannel = output_channel - group_id * ${l};\n\n    float value = ${b};\n    for (int inChannelOffset = 0; inChannelOffset < ${h}; inChannelOffset++) {\n      int input_channel = group_id * ${h} + inChannelOffset;\n      for (int wWOff = 0; wWOff < ${v[2]}; wWOff++) {\n        for (int wHOff = 0; wHOff < ${v[3]}; wHOff++) {\n          ivec2 wOff = ivec2(wWOff * ${f.dilations[0]}, wHOff * ${f.dilations[1]});\n          ivec2 wLoc = loc - wOff;\n          ivec2 wLocIn = wLoc / strides;\n          if (\n            wLocIn * strides == wLoc &&\n            wLocIn.x >= 0 && wLocIn.x < ${m[2]} &&\n            wLocIn.y >= 0 && wLocIn.y < ${m[3]}\n          ) {\n            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);\n            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);\n            value += xVal * wVal;\n          }\n        }\n      }\n    }\n    ${T}\n    ${g.output} = vec4(value, .0, .0, .0);\n  }\n`,hasMain:!0}},Qm=(i,a,c)=>{let f=Ym(a.length>2,c.cacheKey);return{...f,get:()=>Zm(i,a,f,c)}},tb=(i,a,c)=>i.run(Qm(i,a,c),a),eb=(i,a)=>{let c=i.kernelShape.slice();if(0===i.kernelShape.length)for(let l=2;l<a[1].dims.length;++l)c.push(a[1].dims[l]);let f=i.pads.slice(),b=i.outputShape.slice();Km(a[0].dims,c,i.dilations,i.autoPad,f,i.strides,i.outputPadding,b);let v=Object.assign({},i);return Object.assign(v,{kernelShape:c,pads:f,outputShape:b,cacheKey:i.cacheKey}),v},Tf=i=>{let a=i.attributes,c=pr(a),f=a.getString("auto_pad","NOTSET"),b=a.getInts("dilations",[1,1]),m=a.getInt("group",1),v=a.getInts("kernel_shape",[]),l=a.getInts("output_padding",[0,0]),h=a.getInts("output_shape",[]),s=a.getInts("pads",[0,0,0,0]),g=a.getInts("strides",[1,1]);return W({autoPad:f,dilations:b,group:m,kernelShape:v,outputPadding:l,outputShape:h,pads:s,strides:g,...c})},rb=(i,a)=>{if(!i||2!==i.length&&3!==i.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==i[0].dims.length||4!==i[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(i[0].dims[1]!==i[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===i.length&&(1!==i[2].dims.length||i[2].dims[0]!==i[1].dims[1]*a.group))throw new Error("invalid bias");let m=i[0].dims.length-2;if(a.dilations.length!==m)throw new Error(`dilations should be ${m}D`);if(a.strides.length!==m)throw new Error(`strides should be ${m}D`);if(a.pads.length!==2*m)throw new Error(`pads should be ${2*m}D`);if(a.outputPadding.length!==m)throw new Error(`output_padding should be ${m}D`);if(0!==a.kernelShape.length&&a.kernelShape.length!==i[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==a.outputShape.length&&a.outputShape.length!==i[0].dims.length-2)throw new Error("invalid output shape");if("float32"!==i[0].type||"float32"!==i[1].type)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===i.length&&"float32"!==i[2].type)throw new Error("ConvTranspose input(bias) should be float tensor")}}),vf,je,If,nb,_f,ob,ib,ab,Nn=O(()=>{It(),Y(),j(),vf={name:"Transpose",inputNames:["A"],inputTypes:[0]},je=(i,a,c)=>(ab(a),[i.run({...vf,cacheHint:c.cacheKey,get:()=>nb(i,a[0],c.perm)},a)]),If=i=>W({perm:i.attributes.getInts("perm",[])}),nb=(i,a,c)=>{let f=a.dims;c=_f(f,c);let b=ob(f,c),m=f.length,v=`\n      ${ib("perm",c,m)}\n      float process(int indices[${m}]) {\n        int a[${m}];\n        perm(a, indices);\n        return _A(a);\n      }`;return{...vf,output:{dims:b,type:a.type,textureType:0},shaderSource:v}},_f=(i,a)=>(a&&a.length!==i.length&&(a=[...i.keys()].reverse()),a),ob=(i,a)=>(a=_f(i,a),B.sortBasedOnPerm(i,a)),ib=(i,a,c)=>{let f=[];f.push(`void ${i}(out int a[${c}], int src[${c}]) {`);for(let b=0;b<c;++b)f.push(`\ta[${a[b]}]=src[${b}];`);return f.push("\t}"),f.join("\n")},ab=i=>{if(!i||1!==i.length)throw new Error("Transpose requires 1 input.");if("float32"!==i[0].type&&"float64"!==i[0].type)throw new Error("input should be float tensor")}}),Of,Sf,sb,Af=O(()=>{Nn(),Of=(i,a,c)=>{sb(a);let f=c.blocksize,b=f*f,m="DCR"===c.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],l=i.reshapeUnpacked(a[0],"DCR"===c.mode?[a[0].dims[0],f,f,a[0].dims[1]/b,a[0].dims[2],a[0].dims[3]]:[a[0].dims[0],a[0].dims[1]/b,f,f,a[0].dims[2],a[0].dims[3]]),h={perm:m,cacheKey:`${m}`},[s]=je(i,[l],h);return[i.reshapeUnpacked(s,[a[0].dims[0],a[0].dims[1]/b,a[0].dims[2]*f,a[0].dims[3]*f])]},Sf=i=>{let a=i.attributes.getInt("blocksize");if(a<1)throw new Error(`blocksize must be >= 1, but got : ${a} for DepthToSpace`);let c=i.attributes.getString("mode","DCR");if("DCR"!==c&&"CRD"!==c)throw new Error(`unrecognized mode: ${c} for DepthToSpace`);return{mode:c,blocksize:a}},sb=i=>{if(1!==i.length)throw new Error(`DepthToSpace expect 1 inputs, but got ${i.length}`);if("string"===i[0].type||4!==i[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),Pf,Ef,ub,Df=O(()=>{Y(),Pf=(i,a,c)=>{ub(a,c);let f=B.flattenShape(a[0].dims,c);return[i.reshapeUnpacked(a[0],f)]},Ef=i=>i.attributes.getInt("axis",1),ub=(i,a)=>{if(!i||1!==i.length)throw new Error("Flatten requires 1 input.");let c=i[0].dims.length;if(0===c)throw new Error("scalar tensor is not supported.");if(a<-c||a>c)throw new Error("Invalid axis");if("string"===i[0].type)throw new Error("string tensor is not supported.")}}),Pe,Rr=O(()=>{Pe=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),Lf,$f,lb,fb,cb,pb,kf=O(()=>{It(),Rr(),Y(),j(),Lf=(i,a,c)=>(pb(a,c.axis),[i.run(cb(i,a,c),a)]),$f=i=>W({axis:i.attributes.getInt("axis",0)}),lb={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},fb=(i,a,c,f)=>{let b=c[0].dims.slice(),m=c[1].dims.slice(),v=new Array(b.length+m.length-1);f=B.normalizeAxis(f,b.length);let l=[];for(let T=0;T<v.length;T++)T<f?(v[T]=b[T],l.push(`inputIdx[${T}] = outputIdx[${T}];`)):T<f+m.length?(v[T]=m[T-f],l.push(`indexDataIdx[${T-f}] = outputIdx[${T}];`)):(v[T]=b[T-m.length+1],l.push(`inputIdx[${T-m.length+1}] = outputIdx[${T}];`));let p=`\n      float process(int outputIdx[${v.length||1}]) {\n        int inputIdx[${b.length}];\n        int indexDataIdx[${m.length||1}];\n        indexDataIdx[0] = 0;\n        ${l.join("\n        ")}\n        int idx = int(_B(indexDataIdx));\n        inputIdx[${f}] = idx < 0 ? idx + ${b[f]} : idx;\n        return _A(inputIdx);\n      }`;return{...a,output:{dims:v,type:c[0].type,textureType:0},shaderSource:p}},cb=(i,a,c)=>{let f={...lb,cacheHint:c.cacheKey};return{...f,get:()=>fb(i,f,a,c.axis)}},pb=(i,a)=>{if(!i||2!==i.length)throw new Error("Gather requires 2 inputs.");let c=i[0].dims.length;if(c<1)throw new Error("Invalid input shape.");if(a<-c||a>c-1)throw new Error("Invalid axis.");if(-1===Pe.indexOf(i[0].type))throw new Error("Invaid input type.");if("int32"!==i[1].type&&"int16"!==i[1].type)throw new Error("Invaid input type.")}}),Ai,Bf,Ff,Cf,db,hb,mb,Nf=O(()=>{It(),Y(),j(),Ai=(i,a,c)=>(mb(a,c),[i.run(db(a,c),a)]),Bf=(i,a)=>{let c=0!==i.attributes.getInt("transA",0),f=0!==i.attributes.getInt("transB",0),b=i.attributes.getFloat("alpha",1),m=i.attributes.getFloat("beta",1);return W({transA:c,transB:f,alpha:b,beta:m,isOptionalC:a})},Ff=i=>Bf(i,!1),Cf=i=>Bf(i,!0),db=(i,a)=>{let c={name:"Gemm",inputNames:3===i.length?["A","B","C"]:["A","B"],inputTypes:3===i.length?[0,0,0]:[0,0],key:a.cacheKey};return{...c,get:()=>hb(c,i,a)}},hb=(i,a,c)=>{let f=a[0].dims.slice(),b=a[1].dims.slice(),[m,v]=Sn.getShapeOfGemmResult(f,c.transA,b,c.transB,3===a.length?a[2].dims:void 0),l=[m,v];if(!l)throw new Error("Can't use gemm on the given tensors");let h=f[f.length-1],s="";c.transA&&(h=f[0]),c.transA&&c.transB?s="value += _A_T(a) * _B_T(b);":c.transA&&!c.transB?s="value += _A_T(a) * _B(b);":!c.transA&&c.transB?s="value += _A(a) * _B_T(b);":!c.transA&&!c.transB&&(s="value += _A(a) * _B(b);");let g=l.length;return{...i,output:{dims:l,type:a[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:c.alpha},{name:"beta",type:"float",data:c.beta}],shaderSource:`\n      float process(int indices[${g}]) {\n          int a[${g}];\n          int b[${g}];\n          ${3===a.length?`int c[${a[2].dims.length}];`:""}\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ${3===a.length?"bcastIndices_C(indices, c);":""}\n\n          float value = 0.0;\n          for (int k=0; k<${h}; ++k) {\n              a[${g-1}] = k;\n              b[${g-2}] = k;\n              ${s}\n          }\n\n          value = value * alpha;\n          ${3===a.length?"value += beta * _C(c);":""}\n          return value;\n      }`}},mb=(i,a)=>{if(!i)throw new Error("Input is missing");if(a.isOptionalC&&(i.length<2||i.length>3))throw new Error("Invaid input shape.");if(!a.isOptionalC&&3!==i.length)throw new Error("Gemm requires 3 inputs");if(3===i.length&&1!==i[2].dims.length&&2!==i[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==i[0].type&&"float64"!==i[0].type||"float32"!==i[1].type&&"float64"!==i[1].type||3===i.length&&"float32"!==i[2].type&&"float64"!==i[2].type)throw new Error("Invalid input type.");if(i[0].type!==i[1].type||3===i.length&&i[0].type!==i[2].type)throw new Error("Input types are mismatched")}}),Rf,Gf,bb,gb,yb,xb,Tb,Mf=O(()=>{It(),j(),Rf=(i,a,c)=>(Tb(a),[i.run(yb(i,a,c),a)]),Gf=i=>{let a=i.attributes.getFloat("scale"),c=i.attributes.getFloats("bias");return W({scale:a,bias:c})},bb={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},gb=(i,a,c,f)=>{let b=c[0].dims.slice(),m=b.length,v=`\n      ${xb(f.bias.length)}\n      float process(int indices[${m}]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }`;return{...a,output:{dims:b,type:c[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:f.bias.length,data:f.bias},{name:"scale",type:"float",data:f.scale}],shaderSource:v}},yb=(i,a,c)=>{let f={...bb,cacheHint:c.cacheKey};return{...f,get:()=>gb(i,f,a,c)}},xb=i=>{let a=[`float getBias(float bias[${i}], int channel) {`];for(let c=0;c<i;++c)a.push(0===c?`\tif (channel == ${c}) { return bias[${c}]; }`:c===i-1?`\telse { return bias[${c}]; }`:`\telse if (channel == ${c}) { return bias[${c}]; }`);return a.push("\t}"),a.join("\n")},Tb=i=>{if(!i||1!==i.length)throw new Error("ImageScaler requires 1 input.");if(4!==i[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==i[0].type&&"float64"!==i[0].type)throw new Error("Invalid input type.")}}),Vf,zf,Uf,wb,vb,Ib,_b,Ob,Sb,Wf=O(()=>{ut(),j(),Vf=(i,a,c)=>{Sb(a);let f=i.run(vb(a[0]),a);return[i.run(Ob(i,a[0],c,f.dims),[a[0],f,a[1],a[2]])]},zf=i=>i.attributes.getFloat("epsilon",1e-5),Uf={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},wb=(i,a)=>{let c=a.dims.slice(),b=c[2]*c[3];return{...i,output:{dims:[c[0],c[1]],type:a.type,textureType:4},shaderSource:`\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<${c[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${c[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(${b});\n        temp = 0.0;\n        for(int a2=0; a2<${c[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${c[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(${b});\n\n        return v;\n      }`}},vb=i=>({...Uf,get:()=>wb(Uf,i)}),Ib={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},_b=(i,a,c,f,b)=>{let m=G(i.session.backend.glContext.version),[v,l]=i.calculateTextureWidthAndHeight(b,4),[h,s]=[v/4,l];return{...a,output:{dims:c.dims,type:c.type,textureType:0},variables:[{name:"epsilon",type:"float",data:f}],shaderSource:`\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ${h}, ${s});\n        return ${m.texture2D}(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }`}},Ob=(i,a,c,f)=>{let b={...Ib,cacheHint:`${c}`};return{...b,get:()=>_b(i,b,a,c,f)}},Sb=i=>{if(!i||3!==i.length)throw new Error("InstanceNormalization requires 3 inputs.");let a=i[0],c=i[1],f=i[2];if(a.dims.length<3||1!==c.dims.length||1!==f.dims.length)throw new Error("Invalid input shape.");if(c.dims[0]!==a.dims[1]||f.dims[0]!==a.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==a.type&&"float64"!==a.type||"float32"!==c.type&&"float64"!==c.type||"float32"!==f.type&&"float64"!==f.type)throw new Error("Invalid input type.");if(4!==i[0].dims.length)throw new Error("Only support 4-D input shape.")}});function Ab(i,a){let c=i[0].dims[1],s=`\n    float process(int indices[${i[0].dims.length}]) {\n        int c = indices[1];\n        float x = _X(indices);\n        float square_sum = 0.0;\n\n        for (int i = ${-Math.floor((a.size-1)/2)}; i <= ${Math.ceil((a.size-1)/2)}; i++) {\n          int idx = c + i;\n          if (c >= 0 && c < ${c}) {\n            indices[1] = idx;\n            float j = _X(indices);\n            square_sum += j * j;\n          }\n        }\n        return x / pow(float(${a.bias}) + float(${a.alpha}) / float(${a.size}) * square_sum, float(${a.beta}));\n    }`;return{...jf,cacheHint:a.cacheKey,output:{dims:i[0].dims,type:i[0].type,textureType:0},shaderSource:s}}function Pb(i,a){return{...jf,cacheHint:a.cacheKey,get:()=>Ab(i,a)}}var Hf,qf,jf,Eb,Xf=O(()=>{It(),j(),Hf=(i,a,c)=>(Eb(a),[i.run(Pb(a,c),a)]),qf=i=>{let a=i.attributes.getFloat("alpha",1e-4),c=i.attributes.getFloat("beta",.75),f=i.attributes.getFloat("bias",1),b=i.attributes.getInt("size");return W({alpha:a,beta:c,bias:f,size:b})},jf={name:"LRN",inputNames:["X"],inputTypes:[0]},Eb=i=>{if(!i||1!==i.length)throw new Error("LRN requires 1 input.");if(4!==i[0].dims.length)throw new Error('currently only support LRN for input with "NCHW" format');if("float32"!==i[0].type)throw new Error("input should be float type")}}),Db,Pi,Kf,Jf,Yf,Lb,$b,kb,Bb,Fb,Cb,Nb,Rb,Zf=O(()=>{It(),Y(),ut(),j(),Db={name:"Pad",inputNames:["A"],inputTypes:[0]},Pi=(i,a,c)=>(kb(a),[i.run({...Db,cacheHint:c.cacheKey,get:()=>$b(i,a[0],c)},a)]),Kf=i=>{let a=i.attributes.getString("mode","constant"),c=i.attributes.getFloat("value",0),f=i.attributes.getInts("pads");return W({mode:a,value:c,pads:f})},Jf=(i,a,c)=>{Bb(a);let f=Lb(i,a,c);return Pi(i,[a[0]],f)},Yf=i=>i.attributes.getString("mode","constant"),Lb=(i,a,c)=>{if(!i.session.isInitializer(a[1].dataId)||a.length>=3&&!i.session.isInitializer(a[2].dataId))throw new Error("dynamic pad attributes are not allowed");let f=Array.from(a[1].integerData);return W({mode:c,pads:f,value:a.length>=3?a[2].floatData[0]:0})},$b=(i,a,c)=>{let f=B.padShape(a.dims.slice(),c.pads),b=f.length,m=`\n      ${Fb(i,a,c)}\n      float process(int[${b}] indices) {\n          return padA(indices);\n      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:f,type:a.type,textureType:0},shaderSource:m}},kb=i=>{if(!i||1!==i.length)throw new Error("Pad requires 1 input");if("float32"!==i[0].type&&"float64"!==i[0].type)throw new Error("Invalid input type.")},Bb=i=>{if(!i||2!==i.length&&3!==i.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==i[1].type)throw new Error("Invalid input type.");if(i.length>=3&&"string"===i[2].type)throw new Error("Invalid input type.")},Fb=(i,a,c)=>{let f=G(i.session.backend.glContext.version),[b,m]=i.calculateTextureWidthAndHeight(a.dims,0),v=B.computeStrides(a.dims);switch(c.mode){case"constant":return Cb(f,a.dims,v,b,m,c.pads,c.value);case"reflect":return Nb(f,a.dims,v,b,m,c.pads);case"edge":return Rb(f,a.dims,v,b,m,c.pads);default:throw new Error("Invalid mode")}},Cb=(i,a,c,f,b,m,v)=>{let l=a.length,h="";for(let s=l-1;s>=0;--s)h+=`\n        k = m[${s}] - ${m[s]};\n        if (k < 0)  return constant;\n        if (k >= ${a[s]}) return constant;\n        offset += k * ${c[s]};\n        `;return`\n      float padA(int m[${l}]) {\n        const float constant = float(${v});\n        int offset = 0;\n        int k = 0;\n        ${h}\n        vec2 coords = offsetToCoords(offset, ${f}, ${b});\n        float value = getColorAsFloat(${i.texture2D}(A, coords));\n        return value;\n      }\n      `},Nb=(i,a,c,f,b,m)=>{let v=a.length,l="";for(let h=v-1;h>=0;--h)l+=`\n        k = m[${h}] - ${m[h]};\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ${2*(a[h]-1)};\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ${a[h]}) { k = _2n_1 - k; }\n        }\n        offset += k * ${c[h]};\n        `;return`\n      float padA(int m[${v}]) {\n        int offset = 0;\n        int k = 0;\n        ${l}\n        vec2 coords = offsetToCoords(offset, ${f}, ${b});\n        float value = getColorAsFloat(${i.texture2D}(A, coords));\n        return value;\n      }\n      `},Rb=(i,a,c,f,b,m)=>{let v=a.length,l="";for(let h=v-1;h>=0;--h)l+=`\n        k = m[${h}] - ${m[h]};\n        if (k < 0)  k = 0;\n        if (k >= ${a[h]}) k = ${a[h]-1};\n        offset += k * ${c[h]};\n      `;return`\n      float padA(int m[${v}]) {\n        int offset = 0;\n        int k = 0;\n        ${l}\n        vec2 coords = offsetToCoords(offset, ${f}, ${b});\n        float value = getColorAsFloat(${i.texture2D}(A, coords));\n        return value;\n      }\n      `}}),tc,ec,rc,nc,oc,ic,ac,sc,uc,Gb,Qf,lc,Gn,fc,Rn,Mb,cc=O(()=>{It(),Y(),j(),tc=(i,a,c)=>{Gn(a);let f={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:c.cacheKey};return[i.run({...f,get:()=>rc(a,f,!1,c)},a)]},ec=i=>{let a=i.attributes.getString("auto_pad","NOTSET"),c=i.attributes.getInt("ceil_mode",0),f=0!==i.attributes.getInt("count_include_pad",0),b=i.attributes.getInts("kernel_shape"),m=i.attributes.getInts("strides",[]),v=i.attributes.getInts("pads",[]);if(0!==c)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return W({autoPad:a,ceilMode:c,countIncludePad:f,kernelShape:b,strides:m,pads:v})},rc=(i,a,c,f)=>{let[b,m]=uc(i,f,c),v=B.size(b.kernelShape),h="";h+=b.countIncludePad?`value /= float(${v});`:`value /= float(${v} - pad);`;let s=`\n        ${fc(i[0].dims,b,"value += _X(x);",h,"0.0")}\n      `;return{...a,output:{dims:m,type:i[0].type,textureType:0},shaderSource:s}},nc=(i,a,c)=>{Gn(a);let f={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${c.countIncludePad}`};return[i.run({...f,get:()=>rc(a,f,!0,c)},a)]},oc=i=>{let a=0!==i.attributes.getInt("count_include_pad",0);return W({autoPad:"",ceilMode:0,countIncludePad:a,kernelShape:[],strides:[],pads:[]})},ic=(i,a,c)=>{Gn(a);let f={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:c.cacheKey};return[i.run({...f,get:()=>sc(a,f,!1,c)},a)]},ac=i=>{let a=i.attributes.getString("auto_pad","NOTSET"),c=i.attributes.getInt("ceil_mode",0),f=i.attributes.getInts("kernel_shape"),b=i.attributes.getInts("strides",[]),m=i.attributes.getInts("pads",[]),v=i.attributes.getInt("storage_order",0),l=i.attributes.getInts("dilations",[]);if(0!==v)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==c)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return W({autoPad:a,ceilMode:c,countIncludePad:!1,kernelShape:f,strides:b,pads:m,storageOrder:v,dilations:l})},sc=(i,a,c,f)=>{let[b,m]=uc(i,f,c),h=`\n      ${fc(i[0].dims,b,"\n      value = max(_X(x), value);\n    ","","-1e5")}\n    `;return{...a,output:{dims:m,type:i[0].type,textureType:0},shaderSource:h}},uc=(i,a,c)=>{let f=i[0].dims.slice(),b=Object.hasOwnProperty.call(a,"dilations"),m=a.kernelShape.slice(),v=a.strides.slice(),l=b?a.dilations.slice():[],h=a.pads.slice();Ue.adjustPoolAttributes(c,f,m,v,l,h);let s=Ue.computePoolOutputShape(c,f,v,l,m,h,a.autoPad),g=Object.assign({},a);return Object.assign(g,b?{kernelShape:m,strides:v,pads:h,dilations:l,cacheKey:a.cacheKey}:{kernelShape:m,strides:v,pads:h,cacheKey:a.cacheKey}),[g,s]},Gb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},Qf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},lc=(i,a)=>(Gn(a),[i.run({...Qf,get:()=>sc(a,Qf,!0,Gb)},a)]),Gn=i=>{if(!i||1!==i.length)throw new Error("Pool ops requires 1 input.");if("float32"!==i[0].type&&"float64"!==i[0].type)throw new Error("Invalid input type.")},fc=(i,a,c,f,b)=>{let m=i.length;if(a.kernelShape.length<=2){let v=a.kernelShape[a.kernelShape.length-1],l=a.strides[a.strides.length-1],h=a.pads[a.pads.length/2-1],p="",T="",I="";if(p=h+a.pads[a.pads.length-1]!==0?`\n          for (int i = 0; i < ${v}; i++) {\n            x[${m} - 1] = indices[${m} - 1] * ${l} - ${h} + i;\n            if (x[${m} - 1] < 0 || x[${m} - 1] >= ${i[m-1]}) {\n              pad++;\n              continue;\n            }\n            ${c}\n          }`:`\n          for (int i = 0; i < ${v}; i++) {\n            x[${m} - 1] = indices[${m} - 1] * ${l} - ${h} + i;\n            ${c}\n          }`,2===a.kernelShape.length){let N=a.kernelShape[a.kernelShape.length-2],L=a.strides[a.strides.length-2],U=a.pads[a.pads.length/2-2];T=U+a.pads[a.pads.length-2]!==0?`\n            for (int j = 0; j < ${N}; j++) {\n              x[${m} - 2] = indices[${m} - 2] * ${L} - ${U} + j;\n              if (x[${m} - 2] < 0 || x[${m} - 2] >= ${i[m-2]}) {\n                pad+= ${v};\n                continue;\n              }\n          `:`\n            for (int j = 0; j < ${N}; j++) {\n              x[${m} - 2] = indices[${m} - 2] * ${L} - ${U} + j;\n            `,I="\n          }\n        "}return`\n        float process(int indices[${m}]) {\n          int x[${m}];\n          copyVec(indices, x);\n\n          float value = ${b};\n          int pad = 0;\n          ${T}\n          ${p}\n          ${I}\n          ${f}\n          return value;\n        }\n      `}{let v=B.size(a.kernelShape),l=B.computeStrides(a.kernelShape),h=l.length,s=a.pads.length,g=Mb(h),p=Rn(i,"inputDims"),T=Rn(a.pads,"pads"),I=Rn(l,"kernelStrides"),N=Rn(a.strides,"strides"),U="";return U=a.pads.reduce((se,Z)=>se+Z)?`\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ${c}\n          }`:`\n          }\n          ${c}\n        `,`\n        ${g}\n        float process(int indices[${m}]) {\n          int x[${m}];\n          copyVec(indices, x);\n          int offset[${h}];\n          int pads[${s}];\n          int inputDims[${m}];\n          int kernelStrides[${h}];\n          int strides[${h}];\n          ${T}\n          ${p}\n          ${N}\n          ${I}\n\n          float value = ${b};\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ${v}; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ${m} - ${h}; j < ${m}; j++) {\n              x[j] = indices[j] * strides[j - ${m} + ${h}]\n                + offset[j - ${m} + ${h}] - pads[j - 2];\n              ${U}\n          }\n          ${f}\n\n          return value;\n        }\n      `}},Rn=(i,a)=>{let c="";for(let f=0;f<i.length;f++)c+=`\n      ${a}[${f}] = ${i[f]};\n    `;return c},Mb=i=>`\n  void offsetToIndices(int offset, int[${i}] strides, out int[${i}] indices) {\n    if (${i} == 0) {\n      return;\n    }\n    for (int i = 0; i < ${i} - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[${i} - 1] = offset;\n  }`}),Xe,Ee,Ub,Vb,pc,dc,hc,mc,bc,gc,yc,xc=O(()=>{It(),Rr(),Y(),j(),Xe=(i,a,c,f,b)=>{Vb(a);let m={name:f,inputNames:["A"],inputTypes:[0]};return[i.run({...m,cacheHint:c.cacheKey,get:()=>Ub(i,a,c,f,b,m)},a)]},Ee=i=>{let a=i.attributes.getInts("axes",[]),c=1===i.attributes.getInt("keepdims",1);return W({axes:a,keepDims:c})},Ub=(i,a,c,f,b,m)=>{let v=[],l=a[0].dims.length||1,h=[],s=B.normalizeAxes(c.axes,a[0].dims.length),g=b(a,s),p=g[1];for(let I=0;I<a[0].dims.length;I++)s.indexOf(I)>=0||0===s.length?(c.keepDims&&v.push(1),p=`\n          for(int j${I} = 0; j${I} < ${a[0].dims[I]}; j${I}++) {\n            inputIdx[${I}] = j${I};\n            ${p}\n          }`):(h.push(`inputIdx[${I}] = outputIdx[${v.length}];`),v.push(a[0].dims[I]));let T=`\n      float process(int outputIdx[${v.length||1}]) {\n        float value;                 // final result\n        int inputIdx[${l}];      // addressing input data\n        ${h.join("\n")}\n        ${g[0]}       // init ops for reduce max/min\n        ${p}\n        ${g[2]}       // final computation for reduce mean\n        return value;\n      }`;return{...m,output:{dims:v,type:a[0].type,textureType:0},shaderSource:T}},Vb=i=>{if(!i||1!==i.length)throw new Error("Reduce op requires 1 input.");if(-1===Pe.indexOf(i[0].type))throw new Error("Invalid input type.")},pc=(i,a,c)=>Xe(i,a,c,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),dc=(i,a,c)=>Xe(i,a,c,"ReduceMean",(f,b)=>{let m=1;for(let v=0;v<f[0].dims.length;v++)(b.indexOf(v)>=0||0===b.length)&&(m*=f[0].dims[v]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${m}.;`]}),hc=(i,a,c)=>Xe(i,a,c,"ReduceMax",(f,b)=>{let m=[];for(let v=0;v<f[0].dims.length;v++)(b.indexOf(v)>=0||0===b.length)&&m.push(`inputIdx[${v}] = 0;`);return[`${m.join("\n")}\nvalue = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),mc=(i,a,c)=>Xe(i,a,c,"ReduceMin",(f,b)=>{let m=[];for(let v=0;v<f[0].dims.length;v++)(b.indexOf(v)>=0||0===b.length)&&m.push(`inputIdx[${v}] = 0;`);return[`${m.join("\n")}\nvalue = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),bc=(i,a,c)=>Xe(i,a,c,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),gc=(i,a,c)=>Xe(i,a,c,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),yc=(i,a,c)=>Xe(i,a,c,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),Tc,wc=O(()=>{Y(),Tc=(i,a)=>{let c=B.calculateReshapedDims(a[0].dims,a[1].integerData);return i.session.pack?[i.reshapePacked(a[0],c)]:[i.reshapeUnpacked(a[0],c)]}}),vc,Ei,Ic,_c,Gr,zb,Di,Mn,Li=O(()=>{It(),ut(),j(),vc={name:"Upsample",inputNames:["X"],inputTypes:[0]},Ei=(i,a,c)=>(Di(a,c),[i.run({...vc,cacheHint:c.cacheKey,get:()=>zb(i,a,c)},a)]),Ic=i=>Gr(i,7),_c=i=>Gr(i,9),Gr=(i,a)=>{let c=a>=10,f=i.attributes.getString("mode","nearest");if("nearest"!==f&&"linear"!==f&&(a<11||"cubic"!==f))throw new Error(`unrecognized mode: ${f}`);let b=[];a<9&&(b=i.attributes.getFloats("scales"),Mn(b,f,c));let m=i.attributes.getFloat("extrapolation_value",0),v=a>10?i.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(v))throw new Error(`coordinate_transform_mode '${v}' is not supported`);let l="tf_crop_and_resize"===v,h=l,s="nearest"===f&&a>=11?i.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(s))throw new Error(`nearest_mode '${s}' is not supported`);let g=i.attributes.getFloat("cubic_coeff_a",-.75),p=0!==i.attributes.getInt("exclude_outside",0);if(p&&"cubic"!==f)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let I=0,N=0,L=0;return a>10?i.inputs.length>2?(I=1,N=2,L=3):(N=1,L=2):9===a&&(N=1),W({opset:a,isResize:c,mode:f,scales:b,extrapolationValue:m,coordinateTransformMode:v,useExtrapolation:h,needRoiInput:l,nearestMode:s,cubicCoefficientA:g,excludeOutside:p,useNearest2xOptimization:a<11||"nearest"===f&&"asymmetric"===v&&"floor"===s,roiInputIdx:I,scalesInputIdx:N,sizesInputIdx:L})},zb=(i,a,c)=>{let f=G(i.session.backend.glContext.version),[b,m]=i.calculateTextureWidthAndHeight(a[0].dims,0),v=a[0].dims.map((L,U)=>Math.floor(L*c.scales[U])),[l,h]=i.calculateTextureWidthAndHeight(v,0),s=v.length,g=new Array(s),p=new Array(s),T=`\n      int output_pitches[${s}];\n      int input_pitches[${s}];\n      `;for(let L=s-1;L>=0;L--)g[L]=L===s-1?1:g[L+1]*v[L+1],p[L]=L===s-1?1:p[L+1]*a[0].dims[L+1],T+=`\n        output_pitches[${L}] = ${g[L]};\n        input_pitches[${L}] = ${p[L]};\n        `;let I=`\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ${b}, ${m});\n        float value = getColorAsFloat(${f.texture2D}(X, coords));\n        return value;\n      }\n      `,N="nearest"===c.mode?`\n    ${I}\n    float process(int indices[${s}]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${l}, ${h});\n\n      ${T}\n\n      int d, m;\n      for (int dim = 0; dim < ${s}; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }`:4===s?`\n    ${I}\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${l}, ${h});\n\n      ${T}\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (${a[0].dims[2]} - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }`:`\n    ${I}\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${l}, ${h});\n\n      ${T}\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (${a[0].dims[0]} - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }`;return{...vc,output:{dims:v,type:a[0].type,textureType:0},shaderSource:N,variables:[{name:"scales",type:"int",arrayLength:c.scales.length,data:c.scales.map(L=>Math.ceil(L))}]}},Di=(i,a)=>{if(!i||a.opset<9&&1!==i.length||a.opset>=9&&a.opset<11&&2!==i.length||a.opset>=11&&i.length<2)throw new Error("invalid inputs.");if(a.scales.length>0&&i[0].dims.length!==a.scales.length)throw new Error("Invalid input shape.");if("string"===i[0].type)throw new Error("Invalid input tensor types.")},Mn=(i,a,c)=>{if(c){for(let f of i)if(f<=0)throw new Error("Scale value should be greater than 0.")}else for(let f of i)if(f<1)throw new Error("Scale value should be greater than or equal to 1.");if(!("linear"!==a&&"cubic"!==a||2===i.length||4===i.length&&1===i[0]&&1===i[1]))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${c?"Resize":"Upsample"} opeartor.`)}}),$i,ki,Oc,Sc,Wb,Hb,qb,jb,Ac=O(()=>{ut(),j(),pe(),He(),Li(),$i={name:"Resize",inputNames:["A"],inputTypes:[2]},ki=(i,a,c)=>(Di(a,c),[i.run({...$i,cacheHint:c.cacheKey,get:()=>Wb(i,a,c)},a)]),Oc=i=>Gr(i,10),Sc=i=>Gr(i,11),Wb=(i,a,c)=>{let f=G(i.session.backend.glContext.version),[b,m]=Hb(a,c);if(b.every(Z=>1===Z)&&"tf_crop_and_resize"!==c.coordinateTransformMode)return{...$i,output:{dims:m,type:a[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {\n                    vec4 v = ${f.texture2D}(X, TexCoords);\n                    ${f.output} = v;\n                }`};let v=m.length;if(v<2)throw new Error(`output dimension should be at least 2, but got ${v}`);let l=m[v-2],h=m[v-1],s=a[0].dims;if(v!==s.length)throw new Error(`output dimension should match input ${s.length}, but got ${v}`);let g=s[v-2],p=s[v-1],T=b[v-2],I=b[v-1],N="";if("linear"!==c.mode)throw new Error(`resize (packed) does not support mode: '${c.mode}'`);switch(c.coordinateTransformMode){case"asymmetric":N="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":N="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":N=`\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 fcoords = vec4(coords);\n                        return vec4(\n                            ${h}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,\n                            ${l}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,\n                            ${h}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,\n                            ${l}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0\n                          );\n                    }\n                `;break;case"align_corners":N=`\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(${h}.0 - 1.0, ${l}.0 - 1.0, ${h}.0 - 1.0,\n                            ${l}.0 - 1.0);\n                        vec4 original = vec4(${p}.0 - 1.0, ${g}.0 - 1.0, ${p}.0 - 1.0,\n                            ${g}.0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${c.coordinateTransformMode}'`)}let L=Bt(v),se=`\n            const vec2 inputWH = vec2(${g}.0, ${p}.0);\n            const vec4 scaleWHWH = vec4(float(${T}), float(${I}), float(${T}), float(${I}));\n            ${de()}\n            ${N}\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ${L} rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ${l-1};\n                bool hasNextCol = rc.z < ${h-1};\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ${f.output} = vec4(newValue);\n            }\n        `;return{...$i,output:{dims:m,type:a[0].type,textureType:2},hasMain:!0,shaderSource:se}},Hb=(i,a)=>{let b,c=i[0].dims,f=a.scales;if(0===f.length){let v=i[a.scalesInputIdx];if(v&&0!==v.size){if(i[a.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");f=qb(v,a.mode,a.isResize)}else{let l=i[a.sizesInputIdx];if(!l||0===l.size)throw new Error("Either scales or sizes MUST be provided as input.");b=Array.from(l.integerData),f=jb(b,c,a.mode,a.isResize)}}else if(i[a.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let m=b||c.map((v,l)=>Math.floor(v*f[l]));return[f,m]},qb=(i,a,c)=>{let f=Array.from(i.floatData);return Mn(f,a,c),f},jb=(i,a,c,f)=>{let b=a.length,m=new Array(b);for(let v=0,l=b;v<l;v++)if(0===a[v]){if(0!==i[v])throw new Error("Input dim is zero but required output dim is non-zero.");m[v]=1}else m[v]=i[v]/a[v];return Mn(m,c,f),m}}),Pc,Xb,Ec=O(()=>{We(),Pc=(i,a)=>(Xb(a),[new bt([a[0].dims.length],"int32",void 0,void 0,new Int32Array(a[0].dims))]),Xb=i=>{if(!i||1!==i.length)throw new Error("Shape requires 1 input.")}}),Bi,Dc,Lc,$c,Kb,kc,Jb,Yb,Bc=O(()=>{It(),Rr(),Y(),j(),Bi={name:"Slice",inputNames:["A"],inputTypes:[0]},Dc=(i,a,c)=>(Kb(a),[i.run({...Bi,cacheHint:c.cacheKey,get:()=>$c(i,a[0],c)},a)]),Lc=i=>{let a=i.attributes.getInts("starts"),c=i.attributes.getInts("ends"),f=i.attributes.getInts("axes",[]);return W({starts:a,ends:c,axes:f})},$c=(i,a,c)=>{let f=0===c.axes.length?a.dims.slice(0).map((g,p)=>p):c.axes,b=B.normalizeAxes(f,a.dims.length),m=c.starts.map((g,p)=>g>a.dims[b[p]]-1?a.dims[b[p]]:B.normalizeAxis(g,a.dims[b[p]])),v=c.ends.map((g,p)=>g>a.dims[b[p]]-1?a.dims[b[p]]:B.normalizeAxis(g,a.dims[b[p]])),l=a.dims.slice(),h=[];for(let g=0;g<b.length;g++)l[b[g]]=v[g]-m[g],m[g]>0&&h.push(`outputIdx[${b[g]}] += ${m[g]};`);let s=`\n      float process(int outputIdx[${l.length}]) {\n        ${h.join("\n      ")}\n        return _A(outputIdx);\n      }`;return{...Bi,output:{dims:l,type:a.type,textureType:0},shaderSource:s}},Kb=i=>{if(!i||1!==i.length)throw new Error("Slice requires 1 input.");if(-1===Pe.indexOf(i[0].type))throw new Error("Invalid input type.")},kc=(i,a)=>{Yb(a);let c=Jb(i,a);return[i.run({...Bi,cacheHint:c.cacheKey,get:()=>$c(i,a[0],c)},[a[0]])]},Jb=(i,a)=>{if(!i.session.isInitializer(a[1].dataId)||!i.session.isInitializer(a[2].dataId)||a.length>=4&&!i.session.isInitializer(a[3].dataId)||a.length>=5&&!i.session.isInitializer(a[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(a.length>=5&&a[4].integerData.some(v=>1!==v))throw new Error("currently non-1 steps is not supported for Slice");let c=Array.from(a[1].integerData),f=Array.from(a[2].integerData),b=a.length>=4?Array.from(a[3].integerData):[];return{starts:c,ends:f,axes:b,cacheKey:`${b};${c};${f}`}},Yb=i=>{if(!i||i.length<3||i.length>5)throw new Error("Invalid input number.");if("int32"!==i[1].type||1!==i[1].dims.length)throw new Error("Invalid input type.");if("int32"!==i[2].type||1!==i[2].dims.length)throw new Error("Invalid input type.");if(i.length>=4&&("int32"!==i[3].type||1!==i[3].dims.length))throw new Error("Invalid input type.");if(i.length>=5&&("int32"!==i[4].type||1!==i[4].dims.length))throw new Error("Invalid input type.")}}),Fc,Cc,Nc,Rc,Gc,Mc,Uc,Vc,Zb,Qb,tg,zc,Wc=O(()=>{It(),Y(),ut(),j(),Nn(),Fc={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Cc={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Nc={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Rc=(i,a,c)=>{zc(a);let f=a[0].dims.slice(),b=B.normalizeAxis(c.axis,f.length),m=B.sizeToDimension(f,b),v=B.sizeFromDimension(f,b);return Vc(i,a,c,m,v)},Gc=i=>W({axis:i.attributes.getInt("axis",1)}),Mc=i=>W({axis:i.attributes.getInt("axis",-1)}),Uc=(i,a,c)=>{zc(a);let g,f=a[0].dims.slice(),b=B.normalizeAxis(c.axis,f.length),m=f.length,v=b!==m-1,l=[],h=[],s=[];v&&(h=Array.from({length:m}).map((N,L)=>L),h[b]=m-1,h[m-1]=b,h.map(N=>l.push(f[N])),g=W({perm:h}),s=je(i,a,g));let p=B.sizeToDimension(v?l:f,m-1),T=B.sizeFromDimension(v?l:f,m-1),I=Vc(i,v?s:a,c,p,T);return v?je(i,I,g):I},Vc=(i,a,c,f,b)=>{let m=Zb(i,a[0],f,b,[f]),v=i.run({...Fc,cacheHint:c.cacheKey,get:()=>m},a),l=Qb(i,a[0],f,b,m.output.dims,[f]),h=i.run({...Cc,cacheHint:c.cacheKey,get:()=>l},[a[0],v]),s=tg(i,a[0],f,b,m.output.dims,l.output.dims);return[i.run({...Nc,cacheHint:c.cacheKey,get:()=>s},[a[0],v,h])]},Zb=(i,a,c,f,b)=>{let[m,v]=i.calculateTextureWidthAndHeight(a.dims,0),l=b.length;if(c<1||f<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==b.length)throw new Error("Dimensionality of the output should be 1");if(b[0]!==c)throw new Error("Shape of the output should be equal to logical row count");let h=G(i.session.backend.glContext.version),s=`\n      float process(int[${l}] indices) {\n        int logical_row_start_offset = indices[0] * ${f};\n\n        float max = getColorAsFloat(${h.texture2D}(A, offsetToCoords(logical_row_start_offset, ${m},\n        ${v} )));\n        for(int i=1; i<${f}; ++i)\n        {\n          float current = getColorAsFloat(${h.texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${m}, ${v})));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }`;return{...Fc,output:{dims:b,type:a.type,textureType:0},shaderSource:s}},Qb=(i,a,c,f,b,m)=>{let[v,l]=i.calculateTextureWidthAndHeight(a.dims,0),h=m.length;if(c<1||f<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==m.length)throw new Error("Dimensionality of the output should be 1");if(m[0]!==c)throw new Error("Shape of the output should be equal to logical row count");if(1!==b.length)throw new Error("Dimensionality of the intermediate results should be 1");if(b[0]!==c)throw new Error("Shape of the intermediate results should be equal to logical row count");let g=`\n      float process(int[${h}] indices) {\n        int logical_row_start_offset = indices[0] * ${f};\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<${f}; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(${G(i.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${v}, ${l}))) - max);\n        }\n\n        return norm_factor;\n      }`;return{...Cc,output:{dims:m,type:a.type,textureType:0},shaderSource:g}},tg=(i,a,c,f,b,m)=>{let[v,l]=i.calculateTextureWidthAndHeight(a.dims,0),h=a.dims.length;if(c<1||f<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==b.length||1!==m.length)throw new Error("Dimensionality of the intermediate results should be 1");if(b[0]!==c||m[0]!==c)throw new Error("Shape of the intermediate results should be equal to logical row count");let s=`\n      float process(int[${h}] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ${v}, ${l});\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ${f};\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }`;return{...Nc,output:{dims:a.dims,type:a.type,textureType:0},shaderSource:s}},zc=i=>{if(!i||1!==i.length)throw new Error("Softmax requires 1 input.");if("float32"!==i[0].type&&"float64"!==i[0].type)throw new Error("Invalid input type")}}),Hc,qc,jc,eg,rg,ng,Xc=O(()=>{It(),Y(),j(),Hc={name:"Split",inputNames:["A"],inputTypes:[0]},qc=(i,a,c)=>{ng(a);let f=B.normalizeAxis(c.axis,a[0].dims.length),b=eg(i,a,f,c),m=[];for(let v=0;v<b;++v)m.push(i.run({...Hc,cacheHint:`${c.cacheKey};${v}`,get:()=>rg(i,a[0],c,f,v)},a));return m},jc=i=>{let a=i.attributes.getInt("axis",0),c=i.attributes.getInts("split",[]);return W({axis:a,split:c,numOutputs:i.outputs.length})},eg=(i,a,c,f)=>{let[,b]=$r.splitShape(a[0].dims,c,f.split,f.numOutputs);return b.length},rg=(i,a,c,f,b)=>{let[m,v]=$r.splitShape(a.dims,f,c.split,c.numOutputs),h=m[b],s=`\n      float process(int indices[${h.length}]) {\n        indices[${f}] += ${v[b]};\n        return _A(indices);\n      }\n    `;return{...Hc,cacheHint:`${c.cacheKey}:${b}`,output:{dims:h,type:a.type,textureType:0},shaderSource:s}},ng=i=>{if(!i||1!==i.length)throw new Error("Split requires one input.");if("int8"!==i[0].type&&"uint8"!==i[0].type&&"int16"!==i[0].type&&"uint16"!==i[0].type&&"int32"!==i[0].type&&"uint32"!==i[0].type&&"float32"!==i[0].type&&"float64"!==i[0].type&&"bool"!==i[0].type)throw new Error("Invalid input type.")}}),Fi,Kc,Jc,og,ig,Yc=O(()=>{Y(),Fi=(i,a,c)=>{og(a);let f=B.squeezeShape(a[0].dims,c);return[i.reshapeUnpacked(a[0],f)]},Kc=(i,a)=>(ig(a),Fi(i,[a[0]],Array.from(a[1].integerData))),Jc=i=>i.attributes.getInts("axes"),og=i=>{if(!i||1!==i.length)throw new Error("Squeeze requires 1 input.");if("string"===i[0].type)throw new Error("invalid input tensor types.")},ig=i=>{if(!i||2!==i.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==i[1].type)throw new Error("Invalid input type.")}}),Zc,ag,sg,Qc=O(()=>{ut(),j(),Zc=(i,a)=>{sg(a);let c={name:"Sum",inputNames:a.map((f,b)=>`X${b}`),inputTypes:new Array(a.length).fill(0)};return[i.run({...c,get:()=>ag(i,a,c)},a)]},ag=(i,a,c)=>{let f=G(i.session.backend.glContext.version),b=a[0].dims.slice(),m=`\n      void main() {\n        vec4 result = ${a.map((v,l)=>`${f.texture2D}(X${l},TexCoords)`).join(" + ")};\n        ${f.output} = result;\n      }\n    `;return{...c,output:{dims:b,type:a[0].type,textureType:0},hasMain:!0,shaderSource:m}},sg=i=>{if(!i||0===i.length)throw new Error("Sum requires inputs.");let a=i[0].dims.length;for(let c=1;c<i.length;c++){if(a!==i[c].dims.length)throw new Error("Input shapes are mismatched.");for(let f=0;f<a;f++)if(i[0].dims[f]!==i[c].dims[f])throw new Error("Input shapes are not matched.")}if("float32"!==i[0].type&&"float64"!==i[0].type)throw new Error("Invalid input type.");for(let c=1;c<i.length;c++)if(i[0].type!==i[c].type)throw new Error("Input types are not matched.")}}),tp,ug,lg,ep=O(()=>{Rr(),j(),tp=(i,a)=>{lg(a);let c={name:"Tile",inputNames:["A"],inputTypes:[0]};return[i.run({...c,get:()=>ug(i,a,c)},a)]},ug=(i,a,c)=>{let f=a[0].dims.slice(),b=new Array(f.length),m=[];for(let h=0;h<f.length;h++)b[h]=f[h]*a[1].numberData[h],m.push(`inputIdx[${h}] = int(mod(float(outputIdx[${h}]), ${f[h]}.));`);let v=b.length,l=`\n      float process(int outputIdx[${v}]) {\n        int inputIdx[${v}];\n        ${m.join("\n")}\n        return _A(inputIdx);\n      }\n    `;return{...c,output:{dims:b,type:a[0].type,textureType:0},shaderSource:l}},lg=i=>{if(!i||2!==i.length)throw new Error("Tile requires 2 input.");if(1!==i[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(i[1].dims[0]!==i[0].dims.length)throw new Error("Invalid input shape.");if(-1===Pe.indexOf(i[0].type))throw new Error("Invalid input type.");if("int32"!==i[1].type&&"int16"!==i[1].type)throw new Error("Invalid repeat type.")}}),Ci,rp,np,fg,cg,op=O(()=>{Y(),Ci=(i,a,c)=>{fg(a);let f=B.unsqueezeShape(a[0].dims,c);return[i.reshapeUnpacked(a[0],f)]},rp=(i,a)=>(cg(a),Ci(i,[a[0]],Array.from(a[1].integerData))),np=i=>i.attributes.getInts("axes"),fg=i=>{if(!i||1!==i.length)throw new Error("Unsqueeze requires 1 input.");if("string"===i[0].type)throw new Error("invalid input tensor types.")},cg=i=>{if(!i||2!==i.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==i[1].type)throw new Error("Invalid input type.")}}),ip,ap=O(()=>{ml(),Pl(),Ll(),Nl(),Bn(),wf(),Af(),Df(),kf(),Nf(),Mf(),Wf(),Xf(),Fn(),Zf(),cc(),xc(),wc(),Ac(),Ec(),Bc(),Wc(),Xc(),Yc(),Qc(),ep(),Nn(),xi(),op(),Li(),ip=[["Abs","","6+",Rl],["Acos","","7+",Gl],["Add","","7+",bl],["And","","7+",gl],["Asin","","7+",Ml],["Atan","","7+",Ul],["AveragePool","","7+",tc,ec],["BatchNormalization","","7+",dl,hl],["Cast","","6+",El,Dl],["Ceil","","6+",Wl],["Clip","","6-10",gi,Vl],["Clip","","11+",zl],["Concat","","4+",Bl,Cl],["Conv","","1+",Oi,Si],["ConvTranspose","","1+",xf,Tf],["Cos","","7+",Hl],["Div","","7+",yl],["Dropout","","7+",yi],["DepthToSpace","","1+",Of,Sf],["Equal","","7+",xl],["Elu","","6+",ql,jl],["Exp","","6+",Xl],["Flatten","","1+",Pf,Ef],["Floor","","6+",Kl],["FusedConv","com.microsoft","1+",Oi,Si],["Gather","","1+",Lf,$f],["Gemm","","7-10",Ai,Ff],["Gemm","","11+",Ai,Cf],["GlobalAveragePool","","1+",nc,oc],["GlobalMaxPool","","1+",lc],["Greater","","7+",Tl],["Identity","","1+",yi],["ImageScaler","","1+",Rf,Gf],["InstanceNormalization","","6+",Vf,zf],["LeakyRelu","","6+",Jl,Yl],["Less","","7+",wl],["LRN","","1+",Hf,qf],["Log","","6+",Zl],["MatMul","","1+",pf,df],["MaxPool","","1+",ic,ac],["Mul","","7+",vl],["Neg","","6+",Ql],["Not","","1+",tf],["Or","","7+",Il],["Pad","","2-10",Pi,Kf],["Pad","","11+",Jf,Yf],["Pow","","7+",_l],["PRelu","","7+",Ol],["ReduceLogSum","","1+",gc,Ee],["ReduceMax","","1+",hc,Ee],["ReduceMean","","1+",dc,Ee],["ReduceMin","","1+",mc,Ee],["ReduceProd","","1+",bc,Ee],["ReduceSum","","1-12",pc,Ee],["ReduceSumSquare","","1+",yc,Ee],["Relu","","6+",ef],["Reshape","","5+",Tc],["Resize","","10",ki,Oc],["Resize","","11+",ki,Sc],["Shape","","1+",Pc],["Sigmoid","","6+",rf],["Sin","","7+",nf],["Slice","","10+",kc],["Slice","","1-9",Dc,Lc],["Softmax","","1-12",Rc,Gc],["Softmax","","13+",Uc,Mc],["Split","","2-12",qc,jc],["Sqrt","","6+",of],["Squeeze","","1-12",Fi,Jc],["Squeeze","","13+",Kc],["Sub","","7+",Sl],["Sum","","6+",Zc],["Tan","","7+",af],["Tanh","","6+",sf],["Tile","","6+",tp],["Transpose","","1+",je,If],["Upsample","","7-8",Ei,Ic],["Upsample","","9",Ei,_c],["Unsqueeze","","1-12",Ci,np],["Unsqueeze","","13+",rp],["Xor","","7+",Al]]});function up(i){let c,a={};for(;null!==(c=sp.exec(i));){let f=c[3].split(",").map(b=>{let m=b.trim().split(" ");return m&&2===m.length?{type:m[0],name:m[1]}:null}).filter(b=>null!==b);a[c[2]]={params:f,body:c[4]}}for(let f in a){let b=pg.replace("__FUNC__",f),m=new RegExp(b,"gm");for(;null!==(c=m.exec(i));){let v=c[1],l=c[2],h=c[3].split(","),s=v?`${v} ${l};`:"",g=a[f].body,p="";a[f].params.forEach((I,N)=>{I&&(p+=`${I.type} ${I.name} = ${h[N]};\n`)}),g=`${p}\n ${g}`,g=g.replace("return",`${l} = `),i=i.replace(c[0],`\n      ${s}\n      {\n        ${g}\n      }\n      `)}}return i.replace(sp,"")}var sp,pg,lp=O(()=>{sp=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,pg="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function hr(i,a){let c=[],f=[],b=null!=a&&Array.isArray(a)&&0===a.length,m=null==a||b?null:dg(a,i).sort(),v=0;for(let l=0;l<i.length;++l){if(null!=m){if(m[v]===l&&1!==i[l])throw new Error(`Can't squeeze axis ${l} since its dim '${i[l]}' is not 1`);(null==m[v]||m[v]>l)&&1===i[l]&&(c.push(i[l]),f.push(l)),m[v]<=l&&v++}1!==i[l]&&(c.push(i[l]),f.push(l))}return{newShape:c,keptDims:f}}function dg(i,a){let c=a.length;return ur((i=null==i?a.map((f,b)=>b):[].concat(i)).every(f=>f>=-c&&f<c),()=>`All values in axis param must be in range [-${c}, ${c}) but got axis ${i}`),ur(i.every(hg),()=>`All values in axis param must be integers but got axis ${i}`),i.map(f=>f<0?c+f:f)}function hg(i){return i%1==0}function mg(i){if(0===i.length)return 1;let a=i[0];for(let c=1;c<i.length;c++)a*=i[c];return a}function fp(i){let a=Math.ceil(Math.sqrt(i));return[a,Math.ceil(i/a)]}var Un,Ni=O(()=>{Ut(),Y(),Un=class{constructor(i){this.maxTextureSize=i}computeTextureWH(i,a){let c=this.computeTexture(i,a);return a&&a.isPacked&&(c[0]/=2,c[1]/=2),a&&a.reverseWH?[c[1],c[0]]:c}computeTexture(i,a){let c=a&&a.isPacked;if(0===i.length)return c?[2,2]:[1,1];let f=this.maxTextureSize;if(a&&void 0!==a.breakAxis){let v=a.breakAxis>=i.length?1:i.slice(a.breakAxis).reduce((h,s)=>h*s),l=a.breakAxis<=0?1:i.slice(0,a.breakAxis).reduce((h,s)=>h*s);if(!(v>f||l>f))return[v,l];tt.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${i}, breakAxis:${a.breakAxis}`)}let b=i.slice(0);c&&(f*=2,b=b.map((v,l)=>l>=b.length-2?b[l]%2==0?b[l]:b[l]+1:b[l]),1===b.length&&(b=[2,b[0]])),2!==b.length&&(b=hr(b).newShape);let m=mg(b);return b.length<=1&&m<=f?[1,m]:2===b.length&&b[0]<=f&&b[1]<=f?b:3===b.length&&b[0]*b[1]<=f&&b[2]<=f?[b[0]*b[1],b[2]]:3===b.length&&b[0]<=f&&b[1]*b[2]<=f?[b[0],b[1]*b[2]]:4===b.length&&b[0]*b[1]*b[2]<=f&&b[3]<=f?[b[0]*b[1]*b[2],b[3]]:4===b.length&&b[0]<=f&&b[1]*b[2]*b[3]<=f?[b[0],b[1]*b[2]*b[3]]:c?fp(m/4).map(v=>2*v):fp(m)}}}),Vn,cp=O(()=>{Y(),Te(),ut(),Ni(),pe(),Vn=class extends Ht{constructor(i){super(i)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new k("\n      vec2 offsetToCoords(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      ")}}coordsToOffset(){return{coordsToOffset:new k("\n      int coordsToOffset(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      ")}}getOutputSamplingSnippet(){let i=this.context.outputTextureLayout;return i.isPacked?this.getPackedOutputSamplingSnippet(i):this.getUnpackedOutputSamplingSnippet(i)}getPackedOutputSamplingSnippet(i){let a=i.unpackedShape,c=[i.width,i.height],f={},b="getOutputCoords";switch(a.length){case 0:f[b]=this.getOutputScalarCoords();break;case 1:f[b]=this.getOutputPacked1DCoords(a,c);break;case 2:f[b]=this.getOutputPacked2DCoords(a,c);break;case 3:f[b]=this.getOutputPacked3DCoords(a,c);break;default:f[b]=this.getOutputPackedNDCoords(a,c)}let m=`\n      void setOutput(vec4 val) {\n        ${G(this.context.glContext.version).output} = val;\n      }\n    `;return f.floatTextureSetRGBA=new k(m),f}getUnpackedOutputSamplingSnippet(i){let a=i.unpackedShape,c=[i.width,i.height],f={},b="getOutputCoords";switch(a.length){case 0:f[b]=this.getOutputScalarCoords();break;case 1:f[b]=this.getOutputUnpacked1DCoords(a,c);break;case 2:f[b]=this.getOutputUnpacked2DCoords(a,c);break;case 3:f[b]=this.getOutputUnpacked3DCoords(a,c);break;case 4:f[b]=this.getOutputUnpacked4DCoords(a,c);break;case 5:f[b]=this.getOutputUnpacked5DCoords(a,c);break;case 6:f[b]=this.getOutputUnpacked6DCoords(a,c);break;default:throw new Error(`Unsupported output dimensionality: ${a.length}`)}let m=`\n        void setOutput(float val) {\n          ${G(this.context.glContext.version).output} = vec4(val, 0, 0, 0);\n        }\n    `;return f.floatTextureSetR=new k(m),f}getOutputScalarCoords(){return new k("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")}getOutputPacked1DCoords(i,a){let c=a,f="";return 1===c[0]?(f=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ${c[1]}.0);\n          }\n        `,new k(f)):1===c[1]?(f=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ${c[0]}.0);\n          }\n        `,new k(f)):(f=`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(${c[0]}, ${c[1]}));\n          return 2 * (resTexRC.y * ${c[0]} + resTexRC.x);\n        }\n      `,new k(f))}getOutputPacked2DCoords(i,a){let c="";if(Me.arraysEqual(i,a))return c=`\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(${a[0]}, ${a[1]}));\n        }\n      `,new k(c);let f=a,b=Math.ceil(i[1]/2);return c=`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${f[0]}, ${f[1]}));\n\n          int index = resTexRC.y * ${f[0]} + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${b}) * 2;\n          int c = 2 * (index / ${b});\n\n          return ivec2(r, c);\n        }\n      `,new k(c)}getOutputPacked3DCoords(i,a){let c=[a[0],a[1]],f=Math.ceil(i[2]/2),b=f*Math.ceil(i[1]/2);return new k(`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${c[0]}, ${c[1]}));\n          int index = resTexRC.y * ${c[0]} + resTexRC.x;\n\n          int b = index / ${b};\n          index -= b * ${b};\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${f}) * 2;\n          int c = 2 * (index / ${f});\n\n          return ivec3(b, r, c);\n        }\n      `)}getOutputPackedNDCoords(i,a){let c=[a[0],a[1]],f=Math.ceil(i[i.length-1]/2),b=f*Math.ceil(i[i.length-2]/2),m=b,v="",l="b, r, c";for(let s=2;s<i.length-1;s++)m*=i[i.length-s-1],v=`\n      int b${s} = index / ${m};\n      index -= b${s} * ${m};\n    `+v,l=`b${s}, `+l;return new k(`\n      ivec${i.length} getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(${c[0]}, ${c[1]}));\n        int index = resTexRC.y * ${c[0]} + resTexRC.x;\n\n        ${v}\n\n        int b = index / ${b};\n        index -= b * ${b};\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ${f}) * 2;\n        int c = 2 * (index / ${f});\n\n        return ivec${i.length}(${l});\n      }\n    `)}getOutputUnpacked1DCoords(i,a){return new k(`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${a[0]}, ${a[1]}));\n          return resTexRC.y * ${a[0]} + resTexRC.x;\n        }\n      `)}getOutputUnpacked2DCoords(i,a){return new k(`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${a[0]}, ${a[1]}));\n          int index = resTexRC.y * ${a[0]} + resTexRC.x;\n          int r = index / ${i[1]};\n          int c = index - r * ${i[1]};\n          return ivec2(r, c);\n        }\n      `)}getOutputUnpacked3DCoords(i,a){let c="",f=i.length,b=null;f<2&&(b=[]),b=new Array(f-1),b[f-2]=i[f-1];for(let l=f-3;l>=0;--l)b[l]=b[l+1]*i[l+1];let m=["r","c","d"],v=b.map((l,h)=>`int ${m[h]} = index / ${l}; ${h===b.length-1?`int ${m[h+1]} = index - ${m[h]} * ${l}`:`index -= ${m[h]} * ${l}`};`).join("");return c=`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${a[0]}, ${a[1]}));\n          int index = resTexRC.y * ${a[0]} + resTexRC.x;\n          ${v}\n          return ivec3(r, c, d);\n        }\n      `,new k(c)}getOutputUnpacked4DCoords(i,a){let c="",f=i.length,b=null;f<2&&(b=[]),b=new Array(f-1),b[f-2]=i[f-1];for(let l=f-3;l>=0;--l)b[l]=b[l+1]*i[l+1];let m=["r","c","d","d2"],v=b.map((l,h)=>`int ${m[h]} = index / ${l}; ${h===b.length-1?`int ${m[h+1]} = index - ${m[h]} * ${l}`:`index -= ${m[h]} * ${l}`};`).join("");return c=`\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${a[0]}, ${a[1]}));\n          int index = resTexRC.y * ${a[0]} + resTexRC.x;\n          ${v}\n          return ivec4(r, c, d, d2);\n        }\n      `,new k(c)}getOutputUnpacked5DCoords(i,a){let c="",f=i.length,b=null;f<2&&(b=[]),b=new Array(f-1),b[f-2]=i[f-1];for(let l=f-3;l>=0;--l)b[l]=b[l+1]*i[l+1];let m=["r","c","d","d2","d3"],v=b.map((l,h)=>`int ${m[h]} = index / ${l}; ${h===b.length-1?`int ${m[h+1]} = index - ${m[h]} * ${l}`:`index -= ${m[h]} * ${l}`};`).join("");return c=`\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${a[0]}, ${a[1]}));\n          int index = resTexRC.y * ${a[0]} + resTexRC.x;\n          ${v}\n          return ivec5(r, c, d, d2, d3);\n        }\n      `,new k(c)}getOutputUnpacked6DCoords(i,a){let c="",f=i.length,b=null;f<2&&(b=[]),b=new Array(f-1),b[f-2]=i[f-1];for(let l=f-3;l>=0;--l)b[l]=b[l+1]*i[l+1];let m=["r","c","d","d2","d3","d4"],v=b.map((l,h)=>`int ${m[h]} = index / ${l}; ${h===b.length-1?`int ${m[h+1]} = index - ${m[h]} * ${l}`:`index -= ${m[h]} * ${l}`};`).join("");return c=`\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(${a[0]}, ${a[1]}));\n         int index = resTexRC.y * ${a[0]} + resTexRC.x;\n         ${v}\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     `,new k(c)}getCommonUtilFuncs(){let i={},a="uvFromFlat";i[a]=new k("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),a="packedUVfrom1D",i[a]=new k("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),a="packedUVfrom2D",i[a]=new k("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),a="packedUVfrom3D",i[a]=new k("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),a="sampleTexture";let c=G(this.context.glContext.version);return i[a]=new k(`\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ${c.texture2D}(textureSampler, uv).r;\n        }`),i}getInputsSamplingSnippets(){let i={},a=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((c,f)=>{let b=this.context.inputTextureLayouts[f],m=An(c);i[m]=b.isPacked?this.getPackedSamplerFromInput(m,c,b):this.getUnpackedSamplerFromInput(m,c,b);let v=Yu(c);b.unpackedShape.length<=a.unpackedShape.length&&(i[v]=b.isPacked?this.getPackedSamplerAtOutputCoords(v,b,a,c):this.getUnpackedSamplerAtOutputCoords(v,b,a,c))}),i}getPackedSamplerAtOutputCoords(i,a,c,f){let T,b=a.unpackedShape,m=c.unpackedShape,v=An(f),l=b.length,h=m.length,s=kt.getBroadcastDims(b,m),g=Bt(h),p=h-l,I=ne();T=0===l?"":h<2&&s.length>=1?"coords = 0;":s.map(le=>`coords.${I[le+p]} = 0;`).join("\n");let N="";N=h<2&&l>0?"coords":b.map((le,Oe)=>`coords.${I[Oe+p]}`).join(", ");let L="return outputValue;",U=1===B.size(b),se=1===B.size(m);if(1!==l||U||se){if(U&&!se)L=1===h?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(s.length){let le=l-2,Oe=l-1;s.indexOf(le)>-1&&s.indexOf(Oe)>-1?L="return vec4(outputValue.x);":s.indexOf(le)>-1?L="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(Oe)>-1&&(L="return vec4(outputValue.xx, outputValue.zz);")}}else L="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";return new k(`\n      vec4 ${i}() {\n        ${g} coords = getOutputCoords();\n        \n        int lastDim = coords.${I[h-1]};\n        coords.${I[h-1]} = coords.${I[h-2]};\n        coords.${I[h-2]} = lastDim;\n      \n        ${T}\n        vec4 outputValue = ${v}(${N});\n        ${L}\n      }\n    `,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(i,a,c,f){let b=[c.width,c.height],m=[a.width,a.height],v=a.unpackedShape.length,l=c.unpackedShape.length,h=a.unpackedShape,s=c.unpackedShape,g=An(f);if(v===l&&Me.arraysEqual(m,b))return new k(`\n          float ${i}() {\n            return sampleTexture(${f}, TexCoords);\n          }\n        `,["coordinates.sampleTexture"]);let N,p=Bt(l),T=kt.getBroadcastDims(h,s),I=l-v,L=ne();N=0===v?"":l<2&&T.length>=1?"coords = 0;":T.map(Z=>`coords.${L[Z+I]} = 0;`).join("\n");let U="";return U=l<2&&v>0?"coords":a.unpackedShape.map((Z,ie)=>`coords.${L[ie+I]}`).join(", "),new k(`\n        float ${i}() {\n          ${p} coords = getOutputCoords();\n          ${N}\n          return ${g}(${U});\n        }\n      `,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(i,a,c){switch(c.unpackedShape.length){case 0:return this.getPackedSamplerScalar(i,a);case 1:return this.getPackedSampler1D(i,a,c);case 2:return this.getPackedSampler2D(i,a,c);case 3:return this.getPackedSampler3D(i,a,c);default:return this.getPackedSamplerND(i,a,c)}}getUnpackedSamplerFromInput(i,a,c){let f=c.unpackedShape;switch(f.length){case 0:return this.getUnpackedSamplerScalar(i,a,c);case 1:return this.getUnpackedSampler1D(i,a,c);case 2:return this.getUnpackedSampler2D(i,a,c);case 3:return this.getUnpackedSampler3D(i,a,c);case 4:return this.getUnpackedSampler4D(i,a,c);case 5:return this.getUnpackedSampler5D(i,a,c);case 6:return this.getUnpackedSampler6D(i,a,c);default:throw new Error(`Unsupported dimension ${f.length}-D`)}}getPackedSamplerScalar(i,a){let c=G(this.context.glContext.version);return new k(`\n          vec4 ${i}() {\n            return ${c.texture2D}(${a}, halfCR);\n          }\n        `)}getPackedSampler1D(i,a,c){let f=[c.width,c.height],b=[f[1],f[0]],m=G(this.context.glContext.version);return new k(`vec4 ${i}(int index) {\n      vec2 uv = packedUVfrom1D(\n      ${b[0]}, ${b[1]}, index);\n      return ${m.texture2D}(${a}, uv);\n    }`,["coordinates.packedUVfrom1D"])}getPackedSampler2D(i,a,c){let f=c.unpackedShape,b=[c.width,c.height],m=G(this.context.glContext.version),v=b[0],l=b[1];if(null!=b&&Me.arraysEqual(f,b))return new k(`vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${v}.0);\n        return ${m.texture2D}(${a}, uv);\n      }`);let h=b,s=Math.ceil(f[1]/2);return new k(`vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${h[1]}, ${h[0]}, ${s}, row, col);\n      return ${m.texture2D}(${a}, uv);\n    }`,["coordinates.packedUVfrom2D"])}getPackedSampler3D(i,a,c){let f=c.unpackedShape,b=[c.width,c.height],m=[b[0],b[1]],v=G(this.context.glContext.version);if(1===f[0]){let T=f.slice(1),I=[1,2],N=lr(f,T),L=["b","row","col"],U=JSON.parse(JSON.stringify(c));U.unpackedShape=N;let se=this.getPackedSamplerFromInput(i,a,U),Z=`${se.routineBody}\n      vec4 ${i}(int b, int row, int col) {\n        return ${i}(${fr(L,I)});\n      } `;return new k(Z,se.dependencies)}let l=m[0],h=m[1],s=Math.ceil(f[2]/2),g=s*Math.ceil(f[1]/2);return new k(`vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${h}, ${l}, ${g}, ${s}, b, row, col);\n      return ${v.texture2D}(${a}, uv);}`,["coordinates.packedUVfrom3D"])}getPackedSamplerND(i,a,c){let f=c.unpackedShape,b=f.length,m=[c.width,c.height],v=G(this.context.glContext.version),l=[m[0],m[1]],h=l[1],s=l[0],g=Math.ceil(f[b-1]/2),p=g*Math.ceil(f[b-2]/2),T="int b, int row, int col",I=`b * ${p} + (row / 2) * ${g} + (col / 2)`;for(let L=2;L<b-1;L++)T=`int b${L}, `+T,p*=f[b-L-1],I=`b${L} * ${p} + `+I;return new k(`vec4 ${i}(${T}) {\n      int index = ${I};\n      int texR = index / ${s};\n      int texC = index - texR * ${s};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}, ${h});\n      return ${v.texture2D}(${a}, uv);\n    }`)}getUnpackedSamplerScalar(i,a,c){let[f,b]=[c.width,c.height];return 1===f&&1===b?new k(`\n          float ${i}() {\n            return sampleTexture(${a}, halfCR);\n          }\n        `,["coordinates.sampleTexture"]):new k(`\n        float ${i}() {\n          int offset_${a} = coordsToOffset(TexCoords, ${f}, ${b});\n          vec2 uv = uvFromFlat(${f}, ${b}, offset_${a});\n          return sampleTexture(${a}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(i,a,c){let f=c.width,b=c.height;return 1===b&&1===f?new k(`\n        float ${i}(int index) {\n          return sampleTexture(${a}, halfCR);\n        }\n      `,["coordinates.sampleTexture"]):1===b?new k(`\n          float ${i}(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ${f}.0, 0.5);\n            return sampleTexture(${a}, uv);\n          }\n        `,["coordinates.sampleTexture"]):1===f?new k(`\n          float ${i}(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${b}.0);\n            return sampleTexture(${a}, uv);\n          }\n        `,["coordinates.sampleTexture"]):new k(`\n        float ${i}(int index) {\n          vec2 uv = uvFromFlat(${f}, ${b}, index);\n          return sampleTexture(${a}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(i,a,c){let f=c.unpackedShape,b=[c.height,c.width];if(null!=b&&Me.arraysEqual(f,b))return new k(`\n          float ${i}(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(${b[1]}.0, ${b[0]}.0);\n            return sampleTexture(${a}, uv);\n          }\n        `,["coordinates.sampleTexture"]);let{newShape:m,keptDims:v}=hr(f);if(m.length<f.length){let p=lr(f,m),T=JSON.parse(JSON.stringify(c));T.unpackedShape=p;let I=["col","row"],N=`\n          ${this.getUnpackedSamplerFromInput(i,a,T).routineBody}\n          float ${i}(int row, int col) {\n            return ${i}(${fr(I,v)});\n          }\n        `;return new k(N,["coordinates.sampleTexture"])}let h=b[1],s=b[0];return 1===s?new k(`\n          float ${i}(int row, int col) {\n            int offset_${a} = coordsToOffset(TexCoords, ${h}, ${s});\n            float index = dot(vec3(row, col, offset_${a}), vec3(${f[1]}, 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ${h}.0);\n            return sampleTexture(${a}, uv);\n          }\n        `,["coordinates.sampleTexture","coordinates.coordsToOffset"]):1===h?new k(`\n          float ${i}(int row, int col) {\n            int offset_${a} = coordsToOffset(TexCoords, ${h}, ${s});\n            float index = dot(vec3(row, col, offset_${a}), vec3(${f[1]}, 1, 1));\n            vec2 uv = vec2((index + 0.5) / ${s}.0, 0.5);\n            return sampleTexture(${a}, uv);\n          }\n        `,["coordinates.sampleTexture","coordinates.coordsToOffset"]):new k(`\n        float ${i}(int row, int col) {\n          int index = col * ${f[1]} + row;\n          vec2 uv = uvFromFlat(${h}, ${s}, index);\n          return sampleTexture(${a}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(i,a,c){let f=c.unpackedShape,b=f[1]*f[2],m=f[2],{newShape:v,keptDims:l}=hr(f);if(v.length<f.length){let T=lr(f,v),I=["batch","col","row"],N=JSON.parse(JSON.stringify(c));N.unpackedShape=T;let L=this.getUnpackedSamplerFromInput(i,a,N),U=l.reverse(),se=`\n          ${L.routineBody}\n          float ${i}(int batch, int row, int col) {\n            return ${i}(${fr(I,U)});\n          }\n        `;return new k(se,L.dependencies)}return new k(`\n          float ${i}(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ${b} + col * ${m} + row;\n            vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);\n            return sampleTexture(${a}, uv);\n          }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(i,a,c){let f=c.unpackedShape,b=f[3],m=f[2]*b;return new k(`\n        float ${i}(int row, int col, int depth, int depth2) {\n          int index = row * ${f[1]*m} + col * ${m} +\n              depth2 * ${b} + depth;\n          vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);\n          return sampleTexture(${a}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(i,a,c){let f=c.unpackedShape,b=f[4],m=f[3]*b,v=f[2]*m,l=f[1]*v,{newShape:h,keptDims:s}=hr(f);if(h.length<f.length){let I=lr(f,h),N=["row","col","depth","depth2","depth3"],L=JSON.parse(JSON.stringify(c));L.unpackedShape=I;let U=`\n          ${this.getUnpackedSamplerFromInput(i,a,L).routineBody}\n          float ${i}(int row, int col, int depth, int depth2, int depth3) {\n            return ${i}(${fr(N,s)});\n          }\n        `;return new k(U,["coordinates.sampleTexture","coordinates.uvFromFlat"])}return new k(`\n        float ${i}(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ${l} + col * ${v} + depth * ${m} +\n          depth3 * ${b} + depth2;\n          vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);\n          return sampleTexture(${a}, uv);\n        }\n      `,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(i,a,c){let f=c.unpackedShape,b=f[5],m=f[4]*b,v=f[3]*m,l=f[2]*v,h=f[1]*l,{newShape:s,keptDims:g}=hr(f);if(s.length<f.length){let N=lr(f,s),L=["row","col","depth","depth2","depth3","depth4"],U=JSON.parse(JSON.stringify(c));U.unpackedShape=N;let se=`\n            ${this.getUnpackedSamplerFromInput(i,a,U).routineBody}\n            float ${i}(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ${i}(${fr(L,g)});\n            }\n          `;return new k(se,["coordinates.sampleTexture","coordinates.uvFromFlat"])}return new k(`\n          float ${i}(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ${h} + col * ${l} + depth * ${v} +\n            depth2 * ${m} + depth3 * ${b} + depth4;\n            vec2 uv = uvFromFlat(${c.width}, ${c.height}, index);\n            return sampleTexture(${a}, uv);\n          }\n        `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let i=this.context.outputTextureLayout,a=i.shape.length,c=i.strides,f=i.width,b=i.height,m=[];for(let l=0;l<a-1;++l)m.push(`\n        c[${l}] = offset / ${c[l]};`),m.push(`\n        offset -= c[${l}] * ${c[l]};`);m.push(`\n        c[${a-1}] = offset;`);let v=`\n      void toVec(vec2 texCoords, out int c[${a}]) {\n        int offset = coordsToOffset(texCoords, ${f}, ${b});\n        ${m.join("")}\n      }\n      void toVec(int offset, out int c[${a}]) {\n        ${m.join("")}\n      }\n    `;return{toVec:new k(v,["coordinates.coordsToOffset"])}}valueFrom(){let i={};return this.context.programInfo.inputNames.forEach((a,c)=>{let f=this.context.inputTextureLayouts[c],b=(f.unpackedShape.length>0?f.unpackedShape:f.shape).length,m=`_${a}`;i[m]=new k(this.getValueFromSingle(a,b,f.width,f.height,!1),[`shapeUtils.indicesToOffset${m}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),m+="_T",i[m]=new k(this.getValueFromSingle(a,b,f.width,f.height,!0),[`shapeUtils.indicesToOffset${m}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),i}getValueFromSingle(i,a,c,f,b){let m=`_${i}`;return b&&(m+="_T"),`\n        float ${m}(int m[${a}]) {\n          int offset = indicesToOffset${m}(m);\n          vec2 coords = offsetToCoords(offset, ${c}, ${f});\n          float value = getColorAsFloat(${G(this.context.glContext.version).texture2D}(${i}, coords));\n          return value;\n        }\n        `}getPackedValueFrom(i,a,c,f,b){let m=`_${i}_Pack`;return b&&(m+="_T"),`\n        vec4 ${m}(int m[${a}]) {\n          int offset = indicesToOffset_${i}(m);\n          vec2 coords = offsetToCoords(offset, ${c}, ${f});\n          return ${G(this.context.glContext.version).texture2D}(${i}, coords);\n        }\n        `}}}),zn,pp=O(()=>{Te(),zn=class $1 extends Ht{constructor(a){super(a)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new k("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}}decodeFloat32(){return{decode:new k("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}}encodeUint8(){let a=$1.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new k(`\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ${a}\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        `)}}decodeUint8(){let a=$1.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new k(`\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ${a}\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        `)}}static isLittleEndian(){let a=new ArrayBuffer(4),c=new Uint32Array(a),f=new Uint8Array(a);if(c[0]=3735928559,239===f[0])return!0;if(222===f[0])return!1;throw new Error("unknown endianness")}}}),Wn,dp=O(()=>{Te(),ut(),Wn=class extends Ht{constructor(i){super(i)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let i=G(this.context.glContext.version);return{setFragColor:new k(`\n        void setFragColor(float value) {\n            ${i.output} = encode(value);\n        }\n        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new k("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}}}}),Hn,hp=O(()=>{Te(),Hn=class O0 extends Ht{constructor(a){super(a)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let a=this.context.outputTextureLayout.shape.length,c={};return this.context.programInfo.inputNames.forEach((f,b)=>{let m=this.context.inputTextureLayouts[b].unpackedShape;if(m.length<=a){let v=m.length,l=a-v,h=`bcastIndices_${f}`,s="";for(let p=0;p<v;++p)s+=`\n          realIndices[${p}] = int( mod(float(bcastedIndices[${l+p}]), ${m[p]}.0) );\n          `;c[h]=new k(`\n        void ${h} (int bcastedIndices[${a}], out int realIndices[${v}]) {\n          ${s}\n        }\n        `)}}),c}bcastMatmulIndex(){let a=this.context.outputTextureLayout.shape.length,c={};return this.context.programInfo.inputNames.forEach((f,b)=>{let m=this.context.inputTextureLayouts[b].shape;if(!(m.length<2||m.length>a)){let v=m.length,l=a-v,h=`bcastMatmulIndices_${f}`,s="";for(let p=0;p<v-2;++p)s+=`\n          realIndices[${p}] = int( mod(float(bcastedIndices[${l+p}]), ${m[p]}.0) );\n          `;c[h]=new k(`\n        void ${h}(int bcastedIndices[${a}], out int realIndices[${v}]) {\n          ${s}\n          realIndices[${v-1}] = bcastedIndices[${a-1}];\n          realIndices[${v-2}] = bcastedIndices[${a-2}];\n        }\n        `)}}),c}indicesToOffset(){let a={};return this.context.programInfo.inputNames.forEach((c,f)=>{let m=this.context.inputTextureLayouts[f].strides,v=this.context.inputTextureLayouts[f].shape.length,l=`indicesToOffset_${c}`;a[l]=new k(O0.indexToOffsetSingle(l,v,m)),l=`indicesToOffset_${c}_T`,a[l]=new k(O0.indexToOffsetSingle(l,v,m.slice().reverse()))}),a}static indexToOffsetSingle(a,c,f){let b="";for(let m=c-1;m>=0;--m)b+=`\n        offset += indices[${m}] * ${f[m]};\n        `;return`\n      int ${a}(int indices[${c}]) {\n        int offset = 0;\n        ${b}\n        return offset;\n      }\n      `}offsetToIndices(){let a={};return this.context.programInfo.inputNames.forEach((c,f)=>{let m=this.context.inputTextureLayouts[f].strides,v=this.context.inputTextureLayouts[f].shape.length,l=`offsetToIndices_${c}`;a[l]=new k(O0.offsetToIndicesSingle(l,v,m)),l=`offsetToIndices_${c}_T`,a[l]=new k(O0.offsetToIndicesSingle(l,v,m.slice().reverse()))}),a}static offsetToIndicesSingle(a,c,f){let b=[];for(let m=0;m<c-1;++m)b.push(`\n      indices[${m}] = offset / ${f[m]};`),b.push(`\n        offset -= indices[${m}] * ${f[m]};`);return b.push(`\n      indices[${c-1}] = offset;`),`\n      void ${a}(int offset, out int indices[${c}]) {\n        ${b.join("")}\n      }\n      `}incrementIndices(){let a={};return this.context.programInfo.inputNames.forEach((c,f)=>{let b=this.context.inputTextureLayouts[f].shape,m=b.length,v=`incrementIndices_${c}`,l="";for(let s=0;s<m;++s)l+=`\n        shape[${s}] = ${b[s]};`;a[v]=new k(`\n        void ${v}(int axis, out int indices[${m}]) {\n          int shape[${m}];\n          ${l};\n          for(int i = ${m} -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        `)}),a}}}),qn,mp=O(()=>{Te(),qn=class extends Ht{constructor(i){super(i)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let i=this.context.outputTextureLayout.shape.length,a={add:"+=",sub:"-=",mul:"*=",div:"/="},c={};for(let f in a){let b=`${f}Vec`,m="";for(let l=0;l<i;++l)m+=`\n          dest[${l}] ${a[f]} src[${l}];\n          `;c[b]=new k(`\n        void ${b}(int src[${i}], out int dest[${i}]) {\n          ${m}\n        }\n        `)}return c}copyVec(){let i=this.context.outputTextureLayout.shape.length,a="";for(let f=0;f<i;++f)a+=`\n        dest[${f}] = src[${f}];\n        `;return{copyVec:new k(`\n      void copyVec(int src[${i}], out int dest[${i}]) {\n        ${a}\n      }\n      `)}}setVecItem(){let i=this.context.outputTextureLayout.shape.length,a=`\n        if(index < 0)\n            index =${i} + index;\n        if (index == 0)\n            m[0] = value;\n        `;for(let f=1;f<i-1;++f)a+=`\n        else if (index == ${f})\n            m[${f}] = value;\n            `;return a+=`\n        else\n            m[${i-1}] = value;\n        `,{setVecItem:new k(`\n      void setVecItem(out int m[${i}], int index, int value) {\n        ${a}\n      }\n        `)}}getVecItem(){let i=this.context.outputTextureLayout.shape.length,a=`\n        if(index < 0)\n            index = ${i} + index;\n        if (index == 0)\n            return m[0];\n      `;for(let f=1;f<i-1;++f)a+=`\n        else if (index == ${f})\n            return m[${f}];\n      `;return a+=`\n        else\n            return m[${i-1}];\n        `,{getVecItem:new k(`\n      int getVecItem(int m[${i}], int index) {\n        ${a}\n      }\n    `)}}}}),Ri,bp=O(()=>{cp(),pp(),dp(),hp(),mp(),Ri={encoding:zn,fragcolor:Wn,vec:qn,shapeUtils:Hn,coordinates:Vn}}),jn,gp=O(()=>{Te(),lp(),bp(),ut(),jn=class{constructor(i,a,c,f){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new Ln(i,a,c,f),Object.keys(Ri).forEach(m=>{let v=new Ri[m](this.context);this.libs[m]=v});let b=this.glslLibRoutineDependencyGraph;for(let m in this.libs){let v=this.libs[m].getFunctions();for(let l in v){let s,h=m+"."+l;b[h]?(s=b[h],s.routineBody=v[l].routineBody):(s=new Nr(h,v[l].routineBody),b[h]=s);let g=v[l].dependencies;if(g)for(let p=0;p<g.length;++p)if(b[g[p]])s.addDependency(b[g[p]]);else{let T=new Nr(g[p]);b[g[p]]=T,s.addDependency(T)}}}}preprocess(){let i=this.context.programInfo,a=i.shaderSource;return this.context.programInfo.hasMain||(a=`${a}\n      ${Ju(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),a=up(a),`${Ku(this.context.glContext.version)}\n    ${this.getUniforms(i.inputNames,i.variables)}\n    ${this.getImports(a)}\n    ${a}`}getImports(i){let a=this.selectGlslLibRoutinesToBeIncluded(i);if(0===a.length)return"";let c="";for(let f=0;f<a.length;++f){if(!a[f].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${a[f].name}`);c+=a[f].routineBody+"\n"}return c}selectGlslLibRoutinesToBeIncluded(i){let a=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(c=>{let f=c.split(".")[1];-1!==i.indexOf(f)&&a.push(this.glslLibRoutineDependencyGraph[c])}),$n.returnOrderedNodes(a)}getUniforms(i,a){let c=[];if(i)for(let f of i)c.push(`uniform sampler2D ${f};`);if(a)for(let f of a)c.push(`uniform ${f.type} ${f.name}${f.arrayLength?`[${f.arrayLength}]`:""};`);return c.join("\n")}}}),Xn,yp=O(()=>{Yt(),Ut(),gp(),ut(),Xn=class{constructor(i,a,c){this.profiler=i,this.glContext=a,this.textureLayoutStrategy=c,this.repo=new Map,this.attributesBound=!1}getArtifact(i){return this.repo.get(i)}setArtifact(i,a){this.repo.set(i,a)}run(i,a,c){this.profiler.event("op",`ProgramManager.run ${i.programInfo.name??"unknown kernel"}`,()=>{this.glContext.gl.useProgram(i.program);try{this.bindOutput(c),this.attributesBound||this.bindAttributes(i.attribLocations),this.bindUniforms(i.uniformLocations,i.programInfo.variables??[],a)}catch(m){throw tt.error("ProgramManager",i.programInfo.shaderSource),m}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(i=>this.glContext.deleteProgram(i.program))}build(i,a,c){return this.profiler.event("backend","ProgramManager.build",()=>{let f=new jn(this.glContext,i,a,c),b=f.preprocess(),m=this.compile(b);return{programInfo:i,program:m,uniformLocations:this.getUniformLocations(m,f.context.programInfo.inputNames,f.context.programInfo.variables),attribLocations:this.getAttribLocations(m)}})}compile(i){if(!this.vertexShader){tt.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let f=Xu(this.glContext.version);this.vertexShader=this.glContext.compileShader(f,this.glContext.gl.VERTEX_SHADER)}z.debug&&tt.verbose("ProrgramManager",`FragShader:\n${i}\n`);let a=this.glContext.compileShader(i,this.glContext.gl.FRAGMENT_SHADER),c=this.glContext.createProgram(this.vertexShader,a);return this.glContext.deleteShader(a),c}bindOutput(i){let a=i.width,c=i.height;tt.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${a}/${c}, shape=${i.shape}, type=${i.tensor.type}`),this.glContext.attachFramebuffer(i.texture,a,c)}bindAttributes(i){this.glContext.setVertexAttributes(i.position,i.textureCoord),this.attributesBound=!0}bindUniforms(i,a,c){let f=this.glContext.gl,b=0;for(let{name:m,type:v,location:l,arrayLength:h}of i){let s=a.find(g=>g.name===m)?.data;if("sampler2D"!==v&&!s)throw new Error(`variable '${m}' does not have data defined in program info`);switch(v){case"sampler2D":this.bindTexture(c[b],l,b),b++;break;case"float":h?f.uniform1fv(l,s):f.uniform1f(l,s);break;case"int":h?f.uniform1iv(l,s):f.uniform1i(l,s);break;default:throw new Error(`Uniform not implemented: ${v}`)}}}bindTexture(i,a,c){this.glContext.bindTextureToUniform(i.texture,c,a)}getAttribLocations(i){return{position:this.getAttribLocation(i,"position"),textureCoord:this.getAttribLocation(i,"textureCoord")}}getUniformLocations(i,a,c){let f=[];if(a)for(let b of a)f.push({name:b,type:"sampler2D",location:this.getUniformLocation(i,b)});if(c)for(let b of c)f.push({...b,location:this.getUniformLocation(i,b.name)});return f}getUniformLocation(i,a){let c=this.glContext.gl.getUniformLocation(i,a);if(null===c)throw new Error(`Uniform ${a} not found.`);return c}getAttribLocation(i,a){return this.glContext.gl.getAttribLocation(i,a)}}}),Kn,xp=O(()=>{Ut(),Fr(),Kn=class{constructor(i,a,c,f){this.glContext=i,this.layoutStrategy=a,this.profiler=c,this.config=f,this.pendingRead=new Map,f.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(i,a,c,f){let b=this.toEncoderType(i),m=this.glContext.getEncoder(b,a.channels||1,f);if(a.isPacked&&1===f)throw new Error("not implemented");let h,s,v=a.width,l=a.height;if(this.config.reuseTextures){h=`${v}x${l}_${m.format}_${m.internalFormat}_${m.textureType}`,s=this.inUseTextures.get(h),s||(s=[],this.inUseTextures.set(h,s));let p=this.idleTextures.get(h);if(p&&p.length>0){let T=p.pop();return s.push(T),1===f&&this.glContext.updateTexture(T,v,l,m,this.toTextureData(i,c)),T}}tt.verbose("TextureManager",`Creating new texture of size ${a.width}x${a.height}`);let g=this.glContext.allocateTexture(v,l,m,this.toTextureData(i,c));return this.config.reuseTextures&&(s.push(g),this.textureLookup.set(g,h)),g}readTexture(i,a,c){return c||(c=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let f=i.shape.reduce((m,v)=>m*v)*c,b=this.glContext.readTexture(i.texture,i.width,i.height,f,this.toEncoderType(a),c);return this.toTensorData(a,b)})}readTextureAsync(i,a,c){var f=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){let b=i.tensor.dataId;if(c||(c=1),f.pendingRead.has(b)){let m=f.pendingRead.get(b);return new Promise(v=>m?.push(v))}return f.profiler.event("backend","TextureManager.readTextureAsync",(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){f.pendingRead.set(b,[]);let m=i.shape.reduce((s,g)=>s*g)*c;yield f.glContext.createAndWaitForFence();let v=f.glContext.readTexture(i.texture,i.width,i.height,m,f.toEncoderType(a),c),l=f.toTensorData(a,v),h=f.pendingRead.get(b);return f.pendingRead.delete(b),h?.forEach(s=>s(l)),l}))})()}readUint8TextureAsFloat(i){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let a=i.shape.reduce((f,b)=>f*b),c=this.glContext.readTexture(i.texture,i.width,i.height,4*a,"byte",4);return new Float32Array(c.buffer,c.byteOffset,a)})}releaseTexture(i,a){let c;if(this.config.reuseTextures&&(c=this.textureLookup.get(i.texture),c)){a&&this.textureLookup.delete(c);let f=this.inUseTextures.get(c);if(f){let b=f.indexOf(i.texture);if(-1!==b){f.splice(b,1);let m=this.idleTextures.get(c);m||(m=[],this.idleTextures.set(c,m)),m.push(i.texture)}}}(!c||a)&&(tt.verbose("TextureManager",`Deleting texture of size ${i.width}x${i.height}`),this.glContext.deleteTexture(i.texture))}toTensorData(i,a){switch(i){case"int16":return a instanceof Int16Array?a:Int16Array.from(a);case"int32":return a instanceof Int32Array?a:Int32Array.from(a);case"int8":return a instanceof Int8Array?a:Int8Array.from(a);case"uint16":return a instanceof Uint16Array?a:Uint16Array.from(a);case"uint32":return a instanceof Uint32Array?a:Uint32Array.from(a);case"uint8":case"bool":return a instanceof Uint8Array?a:Uint8Array.from(a);case"float32":return a instanceof Float32Array?a:Float32Array.from(a);case"float64":return a instanceof Float64Array?a:Float64Array.from(a);default:throw new Error(`TensorData type ${i} is not supported`)}}toTextureData(i,a){if(a)return a instanceof Float32Array?a:new Float32Array(a)}toEncoderType(i){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),Jn,Tp=O(()=>{Ut(),Bs(),cl(),ap(),yp(),Ni(),xp(),Jn=class{constructor(i,a){this.backend=i,this.context=a,this.layoutStrategy=new Un(i.glContext.maxTextureSize),this.programManager=new Xn(this.context.profiler,i.glContext,this.layoutStrategy),this.textureManager=new Kn(i.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===i.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=i.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Dn(this)}onGraphInitialized(i){let a=i.getValues().filter(c=>-1===c.from&&c.tensor).map(c=>c.tensor.dataId);this.initializers=new Set(a)}isInitializer(i){return!!this.initializers&&this.initializers.has(i)}addInitializer(i){this.initializers.add(i)}getTextureData(i,a){return a?this.packedTextureDataCache.get(i):this.unpackedTextureDataCache.get(i)}setTextureData(i,a,c=!1){tt.verbose("WebGLSessionHandler","Storing Texture data in cache"),c?this.packedTextureDataCache.set(i,a):this.unpackedTextureDataCache.set(i,a)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(i=>this.textureManager.releaseTexture(i,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(i=>this.textureManager.releaseTexture(i,!0)),this.unpackedTextureDataCache=new Map}resolve(i,a,c){let f=ks(i,a,ip);return{impl:f.opImpl,context:f.opInit?f.opInit(i,c):i}}}});function bg(i){let a=0;for(;a<i.length&&i[a]();++a);return a-1}var Mr,wp=O(()=>{Yt(),Fr(),Fr(),pe(),Mr=class{constructor(i,a){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=i,this.version=a,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(i,a,c,f){let b=this.gl,m=b.createTexture();b.bindTexture(b.TEXTURE_2D,m),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);let v=f?c.encode(f,i*a):null;return b.texImage2D(b.TEXTURE_2D,0,c.internalFormat,i,a,0,c.format,c.textureType,v),this.checkError(),m}updateTexture(i,a,c,f,b){let m=this.gl;m.bindTexture(m.TEXTURE_2D,i);let v=f.encode(b,a*c);m.texSubImage2D(m.TEXTURE_2D,0,0,0,a,c,f.format,f.textureType,v),this.checkError()}attachFramebuffer(i,a,c){let f=this.gl;f.bindTexture(f.TEXTURE_2D,i),f.bindFramebuffer(f.FRAMEBUFFER,this.framebuffer),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,i,0),this.checkError(),f.viewport(0,0,a,c),f.scissor(0,0,a,c)}readTexture(i,a,c,f,b,m){let v=this.gl;m||(m=1),this.frameBufferBound||this.attachFramebuffer(i,a,c);let l=this.getEncoder(b,m),h=l.allocate(a*c);return v.bindTexture(v.TEXTURE_2D,i),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,i,0),v.readPixels(0,0,a,c,v.RGBA,l.textureType,h),this.checkError(),l.decode(h,f)}isFramebufferReady(){return!0}getActiveTexture(){let i=this.gl;return"TEXTURE"+(i.getParameter(this.gl.ACTIVE_TEXTURE)-i.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(i,a){let c=this.gl;c.vertexAttribPointer(i,3,c.FLOAT,!1,20,0),c.enableVertexAttribArray(i),-1!==a&&(c.vertexAttribPointer(a,2,c.FLOAT,!1,20,12),c.enableVertexAttribArray(a)),this.checkError()}createProgram(i,a){let c=this.gl,f=c.createProgram();return c.attachShader(f,i),c.attachShader(f,a),c.linkProgram(f),f}compileShader(i,a){let c=this.gl,f=c.createShader(a);if(!f)throw new Error(`createShader() returned null with type ${a}`);if(c.shaderSource(f,i),c.compileShader(f),!1===c.getShaderParameter(f,c.COMPILE_STATUS))throw new Error(`Failed to compile shader: ${c.getShaderInfoLog(f)}\nShader source:\n${i}`);return f}deleteShader(i){this.gl.deleteShader(i)}bindTextureToUniform(i,a,c){let f=this.gl;f.activeTexture(f.TEXTURE0+a),this.checkError(),f.bindTexture(f.TEXTURE_2D,i),this.checkError(),f.uniform1i(c,a),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(z.debug){let i=this.gl,a=i.getError(),c="";switch(a){case i.NO_ERROR:return;case i.INVALID_ENUM:c="INVALID_ENUM";break;case i.INVALID_VALUE:c="INVALID_VALUE";break;case i.INVALID_OPERATION:c="INVALID_OPERATION";break;case i.INVALID_FRAMEBUFFER_OPERATION:c="INVALID_FRAMEBUFFER_OPERATION";break;case i.OUT_OF_MEMORY:c="OUT_OF_MEMORY";break;case i.CONTEXT_LOST_WEBGL:c="CONTEXT_LOST_WEBGL";break;default:c=`Unknown WebGL Error: ${a.toString(16)}`}throw new Error(c)}}deleteTexture(i){this.gl.deleteTexture(i)}deleteProgram(i){this.gl.deleteProgram(i)}getEncoder(i,a,c=0){if(2===this.version)return new Pn(this.gl,a);switch(i){case"float":return 1===c||this.isRenderFloat32Supported?new Br(this.gl,a):new Br(this.gl,a,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new En(this.gl,a);default:throw new Error(`Invalid dataType: ${i}`)}}clearActiveTextures(){let i=this.gl;for(let a=0;a<this.maxTextureImageUnits;++a)i.activeTexture(i.TEXTURE0+a),i.bindTexture(i.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(this.framebuffer),i.bindBuffer(i.ARRAY_BUFFER,null),i.deleteBuffer(this.vertexbuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),i.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let i=this.gl,a=i.createBuffer();if(!a)throw new Error("createBuffer() returned null");let c=this.createDefaultGeometry();return i.bindBuffer(i.ARRAY_BUFFER,a),i.bufferData(i.ARRAY_BUFFER,c,i.STATIC_DRAW),this.checkError(),a}createFramebuffer(){let i=this.gl.createFramebuffer();if(!i)throw new Error("createFramebuffer returned null");return i}queryVitalParameters(){let i=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS)}getExtensions(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let i=this.gl,a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texImage2D(i.TEXTURE_2D,0,2===this.version?i.RGBA32F:i.RGBA,1,1,0,i.RGBA,i.FLOAT,null);let f=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,f),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a,0);let b=i.checkFramebufferStatus(i.FRAMEBUFFER)===i.FRAMEBUFFER_COMPLETE;return i.bindTexture(i.TEXTURE_2D,null),i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteTexture(a),i.deleteFramebuffer(f),b}checkRenderFloat32(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let a,c,f,b,m,i=this.gl;try{return a=i.createTexture(),c=i.createFramebuffer(),i.bindTexture(i.TEXTURE_2D,a),i.texImage2D(i.TEXTURE_2D,0,2===this.version?i.RGBA32F:i.RGBA,1,1,0,i.RGBA,i.FLOAT,null),i.bindFramebuffer(i.FRAMEBUFFER,c),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a,0),i.enable(i.BLEND),f=i.createShader(i.VERTEX_SHADER),!!(f&&(i.shaderSource(f,"void main(){}"),i.compileShader(f),b=i.createShader(i.FRAGMENT_SHADER),b)&&(i.shaderSource(b,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),i.compileShader(b),m=i.createProgram(),m))&&(i.attachShader(m,f),i.attachShader(m,b),i.linkProgram(m),i.useProgram(m),i.drawArrays(i.POINTS,0,1),i.getError()===i.NO_ERROR)}finally{i.disable(i.BLEND),m&&i.deleteProgram(m),f&&i.deleteShader(f),b&&i.deleteShader(b),c&&(i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(c)),a&&(i.bindTexture(i.TEXTURE_2D,null),i.deleteTexture(a))}}beginTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){let i=this.gl,a=this.disjointTimerQueryWebgl2Extension,c=i.createQuery();return i.beginQuery(a.TIME_ELAPSED_EXT,c),c}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");this.gl.endQuery(this.disjointTimerQueryWebgl2Extension.TIME_ELAPSED_EXT)}isTimerResultAvailable(i){let a=!1,c=!1;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{let f=this.gl,b=this.disjointTimerQueryWebgl2Extension;a=f.getQueryParameter(i,f.QUERY_RESULT_AVAILABLE),c=f.getParameter(b.GPU_DISJOINT_EXT)}return a&&!c}getTimerResult(i){let a=0;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");{let c=this.gl;a=c.getQueryParameter(i,c.QUERY_RESULT),c.deleteQuery(i)}return a/1e6}waitForQueryAndGetTime(i){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return yield li(()=>a.isTimerResultAvailable(i)),a.getTimerResult(i)})()}createAndWaitForFence(){var i=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){let a=i.createFence(i.gl);return i.pollFence(a)})()}createFence(i){let a,c=i,f=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);return i.flush(),a=null===f?()=>!0:()=>{let b=c.clientWaitSync(f,0,0);return b===c.ALREADY_SIGNALED||b===c.CONDITION_SATISFIED},{query:f,isFencePassed:a}}pollFence(i){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return new Promise(c=>{a.addItemToPoll(()=>i.isFencePassed(),()=>c())})})()}pollItems(){let i=bg(this.itemsToPoll.map(a=>a.isDoneFn));for(let a=0;a<=i;++a){let{resolveFn:c}=this.itemsToPoll[a];c()}this.itemsToPoll=this.itemsToPoll.slice(i+1)}addItemToPoll(i,a){var c=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){c.itemsToPoll.push({isDoneFn:i,resolveFn:a}),!(c.itemsToPoll.length>1)&&(yield li(()=>(c.pollItems(),0===c.itemsToPoll.length)))})()}}});function Gi(i){let a;if(i&&"webgl2"!==i||!("webgl2"in mr)?(!i||"webgl"===i)&&"webgl"in mr&&(a=mr.webgl):a=mr.webgl2,!a)try{a=vp(yg(),i)}catch{a=vp(gg(),i)}let c=a.gl;return mr[i=i||1===a.version?"webgl":"webgl2"]=a,c.isContextLost()?(delete mr[i],Gi(i)):(c.disable(c.DEPTH_TEST),c.disable(c.STENCIL_TEST),c.disable(c.BLEND),c.disable(c.DITHER),c.disable(c.POLYGON_OFFSET_FILL),c.disable(c.SAMPLE_COVERAGE),c.enable(c.SCISSOR_TEST),c.enable(c.CULL_FACE),c.cullFace(c.BACK),a)}function vp(i,a){let f,b={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!a||"webgl2"===a)&&(f=i.getContext("webgl2",b),f))try{return new Mr(f,2)}catch(m){tt.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${m}`)}if((!a||"webgl"===a)&&(f=i.getContext("webgl",b)||i.getContext("experimental-webgl",b),f))try{return new Mr(f,1)}catch(m){tt.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${m}`)}throw new Error("WebGL is not supported")}function gg(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let i=document.createElement("canvas");return i.width=1,i.height=1,i}function yg(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var mr,Ip=O(()=>{Ut(),wp(),mr={}}),Yn,_p=O(()=>{Yt(),Ut(),Tp(),Ip(),Yn=class{get contextId(){return z.webgl.contextId}set contextId(i){z.webgl.contextId=i}get matmulMaxBatchSize(){return z.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(i){z.webgl.matmulMaxBatchSize=i}get textureCacheMode(){return z.webgl.textureCacheMode}set textureCacheMode(i){z.webgl.textureCacheMode=i}get pack(){return z.webgl.pack}set pack(i){z.webgl.pack=i}get async(){return z.webgl.async}set async(i){z.webgl.async=i}initialize(){try{return this.glContext=Gi(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),tt.setWithEnv(z),z.webgl.context||Object.defineProperty(z.webgl,"context",{value:this.glContext.gl}),tt.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(i){return tt.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${i}`),!1}}createSessionHandler(i){return new Jn(this,i)}dispose(){this.glContext.dispose()}}});function Mi(i){return _Mi.apply(this,arguments)}function _Mi(){return _Mi=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(i){if(!i)return Mi(["webgl"]);{let a="string"==typeof i?[i]:i;for(let c of a){let f=Op.get(c);if(f)return f;let b=yield Tg(c);if(b)return b}}throw new Error("no available backend to use")}),_Mi.apply(this,arguments)}function Tg(i){return _Tg.apply(this,arguments)}function _Tg(){return _Tg=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(i){let a=xg;if(typeof a[i]<"u"&&wg(a[i])){let c=a[i],f=c.initialize();if("object"==typeof f&&"then"in f&&(f=yield f),f)return Op.set(i,c),c}}),_Tg.apply(this,arguments)}function wg(i){return"initialize"in i&&"function"==typeof i.initialize&&"createSessionHandler"in i&&"function"==typeof i.createSessionHandler&&"dispose"in i&&"function"==typeof i.dispose}var Op,xg,Sp=O(()=>{_p(),Op=new Map,xg={webgl:new Yn}}),Ui,Zn,Ap=O(()=>{Ut(),Ui=class{constructor(i,a){this.op=i,this.node=a}},Zn=class{constructor(i,a,c){this.graph=i,this.profiler=c,this.initialize(a)}initialize(i){this.profiler.event("session","ExecutionPlan.initialize",()=>{let a=this.graph.getNodes();if(a.length!==i.length)throw new Error("The size of nodes and OPs do not match.");this._ops=i.map((c,f)=>new Ui(c,a[f])),this.reset(),this._starter=[],this._ops.forEach((c,f)=>{let b=!0;for(let m of c.node.inputs)if(!this._values[m]&&-1===this.graph.getInputIndices().indexOf(m)){b=!1;break}b&&this._starter.push(f)})})}reset(){this._values=this.graph.getValues().map(i=>i.tensor)}execute(i,a){var c=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return c.profiler.event("session","ExecutionPlan.execute",(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){c.reset();let f=i.createInferenceHandler(),b=c.graph.getInputIndices();if(a.length!==b.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${a.length} expected: ${b.length}`);a.forEach((g,p)=>{c._values[b[p]]=g});let m=c._starter.slice(0),v=c.graph.getValues(),l=c.graph.getNodes(),h=0;for(;h<m.length;){let g=m[h++],p=c._ops[g],T=p.node.inputs.map(U=>c._values[U]);if(-1!==T.indexOf(void 0))throw new Error(`unresolved input detected: op: ${p.node}`);let I=T;tt.verbose("ExecPlan",`Running op:${p.node.name} (${I.map((U,se)=>`'${p.node.inputs[se]}': ${U.type}[${U.dims.join(",")}]`).join(", ")})`);let N=yield c.profiler.event("node",p.node.name,(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return p.op.impl(f,I,p.op.context)}));if(N.length!==p.node.outputs.length)throw new Error("the size of output does not match model definition.");N.forEach((U,se)=>{let Z=p.node.outputs[se];if(c._values[Z])throw new Error(`output [${Z}] already has value: op:${p.node.name}`);c._values[Z]=U});let L=new Set;N.forEach((U,se)=>{let Z=p.node.outputs[se];for(let ie of v[Z].to){let le=l[ie],Oe=!0;for(let Io of le.inputs)if(!c._values[Io]){Oe=!1;break}Oe&&L.add(ie)}}),m.push(...L)}let s=[];for(let g=0;g<c.graph.getOutputIndices().length;g++){let p=c.graph.getOutputIndices()[g],T=c._values[p];if(void 0===T)throw new Error(`required output [${p}] does not have value`);0===p&&(yield T.getData()),s.push(T)}return tt.verbose("ExecPlan","disposing of inferenceHandler"),f.dispose(),s}))})()}}}),q,Xt,Ur,Pp=O(()=>{Pr(),q=rr(sr()),We(),Y(),Xt=F.experimental.fbs,Ur=class P0{constructor(a){if(this._attributes=new Map,null!=a){for(let c of a)c instanceof q.onnx.AttributeProto?this._attributes.set(c.name,[P0.getValue(c),P0.getType(c)]):c instanceof Xt.Attribute&&this._attributes.set(c.name(),[P0.getValue(c),P0.getType(c)]);if(this._attributes.size<a.length)throw new Error("duplicated attribute names")}}set(a,c,f){this._attributes.set(a,[f,c])}delete(a){this._attributes.delete(a)}getFloat(a,c){return this.get(a,"float",c)}getInt(a,c){return this.get(a,"int",c)}getString(a,c){return this.get(a,"string",c)}getTensor(a,c){return this.get(a,"tensor",c)}getFloats(a,c){return this.get(a,"floats",c)}getInts(a,c){return this.get(a,"ints",c)}getStrings(a,c){return this.get(a,"strings",c)}getTensors(a,c){return this.get(a,"tensors",c)}get(a,c,f){let b=this._attributes.get(a);if(void 0===b){if(void 0!==f)return f;throw new Error(`required attribute not found: ${a}`)}if(b[1]!==c)throw new Error(`type mismatch: expected ${c} but got ${b[1]}`);return b[0]}static getType(a){let c=a instanceof q.onnx.AttributeProto?a.type:a.type();switch(c){case q.onnx.AttributeProto.AttributeType.FLOAT:return"float";case q.onnx.AttributeProto.AttributeType.INT:return"int";case q.onnx.AttributeProto.AttributeType.STRING:return"string";case q.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case q.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case q.onnx.AttributeProto.AttributeType.INTS:return"ints";case q.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case q.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${q.onnx.AttributeProto.AttributeType[c]}`)}}static getValue(a){let c=a instanceof q.onnx.AttributeProto?a.type:a.type();if(c===q.onnx.AttributeProto.AttributeType.GRAPH||c===q.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let f=this.getValueNoCheck(a);if(c===q.onnx.AttributeProto.AttributeType.INT&&Rt.isLong(f))return Rt.longToNumber(f);if(c===q.onnx.AttributeProto.AttributeType.INTS){let b=f,m=new Array(b.length);for(let v=0;v<b.length;v++)m[v]=Rt.longToNumber(b[v]);return m}if(c===q.onnx.AttributeProto.AttributeType.TENSOR)return a instanceof q.onnx.AttributeProto?bt.fromProto(f):bt.fromOrtTensor(f);if(c===q.onnx.AttributeProto.AttributeType.TENSORS){if(a instanceof q.onnx.AttributeProto)return f.map(b=>bt.fromProto(b));if(a instanceof Xt.Attribute)return f.map(b=>bt.fromOrtTensor(b))}return c===q.onnx.AttributeProto.AttributeType.STRING&&a instanceof q.onnx.AttributeProto?kr(f):c===q.onnx.AttributeProto.AttributeType.STRINGS&&a instanceof q.onnx.AttributeProto?f.map(kr):f}static getValueNoCheck(a){return a instanceof q.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(a):this.getValueNoCheckFromOrtFormat(a)}static getValueNoCheckFromOnnxFormat(a){switch(a.type){case q.onnx.AttributeProto.AttributeType.FLOAT:return a.f;case q.onnx.AttributeProto.AttributeType.INT:return a.i;case q.onnx.AttributeProto.AttributeType.STRING:return a.s;case q.onnx.AttributeProto.AttributeType.TENSOR:return a.t;case q.onnx.AttributeProto.AttributeType.GRAPH:return a.g;case q.onnx.AttributeProto.AttributeType.FLOATS:return a.floats;case q.onnx.AttributeProto.AttributeType.INTS:return a.ints;case q.onnx.AttributeProto.AttributeType.STRINGS:return a.strings;case q.onnx.AttributeProto.AttributeType.TENSORS:return a.tensors;case q.onnx.AttributeProto.AttributeType.GRAPHS:return a.graphs;default:throw new Error(`unsupported attribute type: ${q.onnx.AttributeProto.AttributeType[a.type]}`)}}static getValueNoCheckFromOrtFormat(a){switch(a.type()){case Xt.AttributeType.FLOAT:return a.f();case Xt.AttributeType.INT:return a.i();case Xt.AttributeType.STRING:return a.s();case Xt.AttributeType.TENSOR:return a.t();case Xt.AttributeType.GRAPH:return a.g();case Xt.AttributeType.FLOATS:return a.floatsArray();case Xt.AttributeType.INTS:{let c=[];for(let f=0;f<a.intsLength();f++)c.push(a.ints(f));return c}case Xt.AttributeType.STRINGS:{let c=[];for(let f=0;f<a.stringsLength();f++)c.push(a.strings(f));return c}case Xt.AttributeType.TENSORS:{let c=[];for(let f=0;f<a.tensorsLength();f++)c.push(a.tensors(f));return c}default:throw new Error(`unsupported attribute type: ${Xt.AttributeType[a.type()]}`)}}}}),zi,Qn,Wi,me,to,Vi,Ep=O(()=>{Pp(),Pr(),zi=rr(sr()),We(),Y(),Qn=F.experimental.fbs,Wi={from:(i,a)=>new Vi(i,a)},me=class{constructor(i){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,i&&(this.type=At.tensorValueTypeFromProto(i.type.tensorType))}get from(){return this._from}get to(){return this._to}},to=class{constructor(i,a){i instanceof zi.onnx.NodeProto?(this.name=i.name,this.opType=i.opType,this.attributes=new Ur(i.attribute)):i instanceof Qn.Node&&(this.name=a??i.name(),this.opType=i.opType(),this.attributes=new Ur(At.tensorAttributesFromORTFormat(i))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Vi=class{constructor(i,a){if(!i)throw new TypeError("graph is empty");this.buildGraph(i),this.transformGraph(a),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(i){if(i instanceof zi.onnx.GraphProto)this.buildGraphFromOnnxFormat(i);else{if(!(i instanceof Qn.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(i)}}buildGraphFromOnnxFormat(i){let a=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let c=new Map;if(!i.input)throw new Error("missing information in graph: input");let f=[];for(let b of i.input){if(a.has(b.name))throw new Error(`duplicated input name: ${b.name}`);let m=this._allData.push(new me(b))-1;a.set(b.name,m),f.push(b.name)}if(!i.initializer)throw new Error("missing information in graph: initializer");for(let b of i.initializer){let m=a.get(b.name);if(void 0===m){let v=new me;v.type={shape:{dims:At.tensorDimsFromProto(b.dims)},tensorType:At.tensorDataTypeFromProto(b.dataType)},m=this._allData.push(v)-1,a.set(b.name,m)}this._allData[m]._from=-1,this._allData[m].tensor=bt.fromProto(b)}for(let b=0;b<this._allData.length;b++)this._allData[b].tensor||(this._allInputIndices.push(b),this._allInputNames.push(f[b]));if(!i.output)throw new Error("missing information in graph: output");for(let b of i.output){if(a.has(b.name))throw new Error(`duplicated output name: ${b.name}`);let m=this._allData.push(new me(b))-1;a.set(b.name,m),this._allOutputIndices.push(m),this._allOutputNames.push(b.name)}if(!i.node)throw new Error("missing information in graph: node");for(let b of i.node){if(!b.name)for(let v=0;;v++){let l=`unnamed_${b.opType}_${v}`;if(!c.has(l)){b.name=l;break}}if(c.has(b.name))throw new Error(`duplicated node name: ${b.name}`);let m=this._nodes.push(new to(b))-1;c.set(b.name,m)}for(let b=0;b<this._nodes.length;b++){let m=this._nodes[b],v=i.node[b];if(!v.output)throw new Error(`missing output for node: ${v.name}`);for(let l of v.output){let h=a.get(l);if(typeof h>"u"&&(h=this._allData.push(new me)-1,a.set(l,h)),m.outputs.push(h),void 0!==this._allData[h]._from)throw new Error(`multiple nodes output to one data value: ${h}`);if(this._allData[h]._from=b,"Constant"===v.opType){if(!v.attribute||1!==v.attribute.length||!v.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!v.output||1!==v.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");m.outputs.pop(),m.executeNode=!1,this._allData[h]._from=-1,this._allData[h].tensor=bt.fromProto(v.attribute[0].t)}}}for(let b=0;b<this._nodes.length;b++){let m=this._nodes[b],v=i.node[b];if(!v.input)throw new Error(`missing input for node: ${v.name}`);for(let l of v.input){let h=a.get(l);if(typeof h>"u"){if(""===l&&(3===v.input.length||4===v.input.length)&&"Resize"===v.opType)continue;throw new Error(`unrecognized input '${l}' for node: ${v.name}`)}m.inputs.push(h),this._allData[h]._to.push(b)}}return!0}buildGraphFromOrtFormat(i){let a=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let c=new Map,f=[];for(let b=0;b<i.inputsLength();b++){let m=i.inputs(b);if(a.has(m))throw new Error(`duplicated input name: ${m}`);for(let v=0;v<i.nodeArgsLength();v++)if(i.nodeArgs(v)?.name()===m){let l=new me;if(i.nodeArgs(v)?.type()?.valueType()!==Qn.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let h=i.nodeArgs(v).type().value(new Qn.TensorTypeAndShape),s=At.tensorDataTypeFromProto(h.elemType()),g=h.shape(),p=[];for(let I=0;I<g.dimLength();I++)p.push(Rt.longToNumber(g.dim(I).value().dimValue()));l.type={shape:{dims:p},tensorType:s};let T=this._allData.push(l)-1;a.set(m,T),f.push(m)}}for(let b=0;b<i.initializersLength();b++){let m=i.initializers(b),v=a.get(m.name());if(void 0===v){let l=new me,h=At.tensorDimsFromORTFormat(m),s=At.tensorDataTypeFromProto(m.dataType());l.type={shape:{dims:h},tensorType:s},v=this._allData.push(l)-1,a.set(m.name(),v)}this._allData[v]._from=-1,this._allData[v].tensor=bt.fromOrtTensor(m)}for(let b=0;b<this._allData.length;b++)this._allData[b].tensor||(this._allInputIndices.push(b),this._allInputNames.push(f[b]));for(let b=0;b<i.outputsLength();b++){let m=i.outputs(b);if(a.has(m))throw new Error(`duplicated output name: ${m}`);let v=this._allData.push(new me)-1;a.set(m,v),this._allOutputIndices.push(v),this._allOutputNames.push(m)}if(!i.nodes)throw new Error("missing information in graph: node");for(let b=0;b<i.nodesLength();b++){let m=i.nodes(b),v=m.name();if(!v)for(let h=0;v=`unnamed_${m.opType()}_${h}`,c.has(v);h++);if(c.has(v))throw new Error(`duplicated node name: ${v}`);let l=this._nodes.push(new to(m,v))-1;c.set(v,l)}for(let b=0;b<this._nodes.length;b++){let m=this._nodes[b],v=i.nodes(b);if(null==v)throw new Error(`No node exists at index ${b}`);if(0===v?.outputsLength())throw new Error(`missing output for node: ${v.name}`);for(let l=0;l<v?.outputsLength();l++){let h=v?.outputs(l),s=a.get(h);if(typeof s>"u"&&(s=this._allData.push(new me)-1,a.set(h,s)),m.outputs.push(s),void 0!==this._allData[s]._from)throw new Error(`multiple nodes output to one data value: ${s}`);if(this._allData[s]._from=b,"Constant"===v.opType()){if(1!==v.attributesLength()||!v.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==v.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");m.outputs.pop(),m.executeNode=!1,this._allData[s]._from=-1,this._allData[s].tensor=bt.fromOrtTensor(v.attributes(0).t())}}}for(let b=0;b<this._nodes.length;b++){let m=this._nodes[b],v=i.nodes(b);if(0===v.inputsLength())throw new Error(`missing input for node: ${v.name}`);for(let l=0;l<v.inputsLength();l++){let h=v.inputs(l),s=a.get(h);if(typeof s>"u")throw new Error(`unrecognized input '${h}' for node: ${v.name()}`);m.inputs.push(s),this._allData[s]._to.push(b)}}}checkIsAcyclic(){let i=new Set;this._allInputIndices.forEach(f=>{this._allData[f]._to.forEach(b=>{i.add(b)})});let a=Array.from(i),c=new Array(this._nodes.length).fill("white");for(;a.length>0;){let f=a.pop();"gray"===c[f]?c[f]="black":(a.push(f),c[f]="gray",this._nodes[f].outputs.forEach(b=>{let m=this._allData[b];if(typeof m.tensor<"u")throw new Error("node outputs should not be initialized");if(m._from!==f)throw new Error("from property of the Value object doesn't match index of Node being processed");m._to.forEach(v=>{if("gray"===c[v])throw new Error("model graph is cyclic");"white"===c[v]&&a.push(v)})}))}}transformGraph(i){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),i&&i.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let i=0,a=new Array(this._nodes.length,0),c=0;for(let f=0;f<this._nodes.length;f++)a[f]=c,this._nodes[f].executeNode?(c!==f&&(this._nodes[c]=this._nodes[f]),c++):this._nodes[f].outputs.forEach(b=>{this._allData[b]._from=-2});this._nodes.splice(c,this._nodes.length-c);for(let f=0;f<this._allData.length;f++){let b=this._allData[f];void 0!==b._from&&-1!==b._from&&-2!==b._from&&(b._from=a[b._from]);for(let m=0;m<b._to.length;m++){if(!(b._to[m]>=0))throw new Error("Trying to update a removed node");b._to[m]=a[b._to[m]]}}i=0;for(let f=0;f<this._allData.length;f++)if(-2!==this._allData[f].from||-1!==this._allOutputIndices.indexOf(f+i)){if(i>0){let b=-1;void 0!==this._allData[f].from&&-1!==this._allData[f].from?(b=this._nodes[this._allData[f].from].outputs.indexOf(f+i),-1!==b&&(this._nodes[this._allData[f].from].outputs[b]=f)):(b=this._allInputIndices.indexOf(f+i),-1!==b&&(this._allInputIndices[b]=f)),this._allData[f].to.forEach(m=>{b=this._nodes[m].inputs.indexOf(f+i),-1!==b&&(this._nodes[m].inputs[b]=f)}),0===this._allData[f].to.length&&(b=this._allOutputIndices.indexOf(f+i),-1!==b&&(this._allOutputIndices[b]=f))}}else i++,this._allData.splice(f,1),f--}deleteNode(i){let a=this._nodes[i];if(a.outputs.length>1)for(let v=1;v<a.outputs.length;v++)if(this._allData[a.outputs[v]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");a.executeNode=!1;let c=a.inputs[0],f=a.outputs[0],b=this._allData[f].to;for(let v=0;v<a.inputs.length;v++){let l=this._allData[a.inputs[v]].to.indexOf(i);if(-1===l)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[a.inputs[v]].to.splice(l,1)}this._allData[f]._to=[];let m=this._allOutputIndices.indexOf(f);if(-1!==m&&(this._allOutputIndices[m]=c),b&&b.length>0)for(let v of b){let l=this._nodes[v].inputs.indexOf(f);if(-1===l)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[v].inputs[l]=c,this._allData[c].to.push(v)}}removeAllDropoutNodes(){let i=0;for(let a of this._nodes){if("Dropout"===a.opType){if(1!==a.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==a.outputs.length&&2!==a.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===a.outputs.length&&0!==this._allData[a.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(i)}i++}}removeAllIdentityNodes(){let i=0;for(let a of this._nodes)"Identity"===a.opType&&this.deleteNode(i),i++}isActivation(i){switch(i.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let i of this._nodes)if("Conv"===i.opType){let a=this._allData[i.outputs[0]]._to;if(1===a.length&&this.isActivation(this._nodes[a[0]])){let c=this._nodes[a[0]];if("Clip"===c.opType)if(1===c.inputs.length)try{i.attributes.set("activation_params","floats",[c.attributes.getFloat("min"),c.attributes.getFloat("max")])}catch{i.attributes.set("activation_params","floats",[Ve,ze])}else{if(!(c.inputs.length>=3&&void 0!==this._allData[c.inputs[1]].tensor&&void 0!==this._allData[c.inputs[2]].tensor))continue;i.attributes.set("activation_params","floats",[this._allData[c.inputs[1]].tensor.floatData[0],this._allData[c.inputs[2]].tensor.floatData[0]])}i.attributes.set("activation","string",c.opType),this.deleteNode(a[0])}}}}}),Dp,vg,eo,Lp=O(()=>{wn(),Ep(),Pr(),Dp=rr(sr()),Y(),vg=F.experimental.fbs,eo=class{constructor(){}load(i,a,c){let f;if(!c)try{return void this.loadFromOnnxFormat(i,a)}catch(b){if(void 0!==c)throw b;f=b}try{this.loadFromOrtFormat(i,a)}catch(b){throw void 0!==c?b:new Error(`Failed to load model as ONNX format: ${f}\nas ORT format: ${b}`)}}loadFromOnnxFormat(i,a){let c=Dp.onnx.ModelProto.decode(i);if(Rt.longToNumber(c.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=c.opsetImport.map(f=>({domain:f.domain,version:Rt.longToNumber(f.version)})),this._graph=Wi.from(c.graph,a)}loadFromOrtFormat(i,a){let c=new w.ByteBuffer(i),f=vg.InferenceSession.getRootAsInferenceSession(c).model();if(Rt.longToNumber(f.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let b=0;b<f.opsetImportLength();b++){let m=f.opsetImport(b);this._opsets.push({domain:m?.domain(),version:Rt.longToNumber(m.version())})}this._graph=Wi.from(f.graph(),a)}get graph(){return this._graph}get opsets(){return this._opsets}}}),ro,$p=O(()=>{Sp(),Ap(),Ut(),Lp(),ro=class{constructor(i={}){this._initialized=!1,this.backendHint=i.backendHint,this.profiler=xn.create(i.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}loadModel(i,a,c){var f=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){yield f.profiler.event("session","Session.loadModel",(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){let b=yield Mi(f.backendHint);if(f.sessionHandler=b.createSessionHandler(f.context),f._model=new eo,"string"==typeof i){let m=i.endsWith(".ort");{let v=yield(yield fetch(i)).arrayBuffer();f.initialize(new Uint8Array(v),m)}}else if(ArrayBuffer.isView(i))f.initialize(i);else{let m=new Uint8Array(i,a||0,c||i.byteLength);f.initialize(m)}}))})()}initialize(i,a){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{this._model.load(i,this.sessionHandler.transformGraph?this.sessionHandler:void 0,a),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new Zn(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}run(i){var a=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){if(!a._initialized)throw new Error("session not initialized yet");return a.profiler.event("session","Session.run",(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){let c=a.normalizeAndValidateInputs(i),f=yield a._executionPlan.execute(a.sessionHandler,c);return a.createOutput(f)}))})()}normalizeAndValidateInputs(i){let a=this._model.graph.getInputNames();if(Array.isArray(i)){if(i.length!==a.length)throw new Error(`incorrect input array length: expected ${a.length} but got ${i.length}`)}else{if(i.size!==a.length)throw new Error(`incorrect input map size: expected ${a.length} but got ${i.size}`);let c=new Array(i.size),f=0;for(let b=0;b<a.length;++b){let m=i.get(a[b]);if(!m)throw new Error(`missing input tensor for: '${name}'`);c[f++]=m}i=c}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,i,!1);else{let c=this._model.graph.getInputIndices(),f=this._model.graph.getValues(),b=new Array(c.length);for(let m=0;m<c.length;++m){let v=f[c[m]];b[m]=v.type.shape.dims,this.context.graphInputTypes.push(v.type.tensorType),this.context.graphInputDims.push(i[m].dims)}this.validateInputTensorDims(b,i,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,i),i}validateInputTensorTypes(i,a){for(let c=0;c<a.length;c++){let f=i[c],b=a[c].type;if(f!==b)throw new Error(`input tensor[${c}] check failed: expected type '${f}' but got ${b}`)}}validateInputTensorDims(i,a,c){for(let f=0;f<a.length;f++){let b=i[f],m=a[f].dims;if(!this.compareTensorDims(b,m,c))throw new Error(`input tensor[${f}] check failed: expected shape '[${b.join(",")}]' but got [${m.join(",")}]`)}}compareTensorDims(i,a,c){if(i.length!==a.length)return!1;for(let f=0;f<i.length;++f)if(i[f]!==a[f]&&(!c||0!==i[f]))return!1;return!0}createOutput(i){let a=this._model.graph.getOutputNames();if(i.length!==a.length)throw new Error("expected number of outputs do not match number of generated outputs");let c=new Map;for(let f=0;f<a.length;++f)c.set(a[f],i[f]);return c}initializeOps(i){let a=i.getNodes();this._ops=new Array(a.length);for(let c=0;c<a.length;c++)this._ops[c]=this.sessionHandler.resolve(a[c],this._model.opsets,i)}}}),no,kp=O(()=>{Yt(),We(),no=class{constructor(i){this.session=i,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}dispose(){return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){})()}run(i,a,c){var f=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){let b=new Map;for(let l in i)if(Object.hasOwnProperty.call(i,l)){let h=i[l];b.set(l,new bt(h.dims,h.type,void 0,void 0,h.data))}let m=yield f.session.run(b),v={};return m.forEach((l,h)=>{v[h]=new yt(l.type,l.data,l.dims)}),v})()}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),Bp={};Or(Bp,{onnxjsBackend:()=>Ig});var Hi,Ig,Fp=O(()=>{$p(),kp(),Hi=class{init(){return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){})()}createInferenceSessionHandler(i,a){return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){let c=new ro(a);return yield c.loadModel(i),new no(c)})()}},Ig=new Hi}),oo=O(()=>{}),Rp={};Or(Rp,{default:()=>_g});var Cp,Np,_g,Gp=O(()=>{qi(),Ke(),Vr(),Cp="ort-wasm-proxy-worker",(Np=globalThis.self?.name===Cp)&&(self.onmessage=i=>{let{type:a,in:c}=i.data;try{switch(a){case"init-wasm":io(c.wasm).then(()=>{ao(c).then(()=>{postMessage({type:a})},f=>{postMessage({type:a,err:f})})},f=>{postMessage({type:a,err:f})});break;case"init-ep":{let{epName:f,env:b}=c;so(b,f).then(()=>{postMessage({type:a})},m=>{postMessage({type:a,err:m})});break}case"copy-from":{let{buffer:f}=c,b=zr(f);postMessage({type:a,out:b});break}case"create":{let{model:f,options:b}=c;uo(f,b).then(m=>{postMessage({type:a,out:m})},m=>{postMessage({type:a,err:m})});break}case"release":lo(c),postMessage({type:a});break;case"run":{let{sessionId:f,inputIndices:b,inputs:m,outputIndices:v,options:l}=c;fo(f,b,m,v,new Array(v.length).fill(null),l).then(h=>{h.some(s=>"cpu"!==s[3])?postMessage({type:a,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:a,out:h},po([...m,...h]))},h=>{postMessage({type:a,err:h})});break}case"end-profiling":co(c),postMessage({type:a})}}catch(f){postMessage({type:a,err:f})}}),_g=Np?null:i=>new Worker(i??br,{type:"module",name:Cp})}),Up={};Or(Up,{default:()=>Og});var ji,Mp,Og,Vp=O(()=>{ji="file:///Users/bharris/Code/audio/node_modules/onnxruntime-web/dist/ort.bundle.min.mjs",Mp=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(i={}){function a(){return Xs.buffer!=xa.buffer&&gr(),xa}function c(){return Xs.buffer!=xa.buffer&&gr(),Ca}function f(){return Xs.buffer!=xa.buffer&&gr(),$t}function b(){return Xs.buffer!=xa.buffer&&gr(),Gu}function m(){return Xs.buffer!=xa.buffer&&gr(),gu}var v,l,h=Object.assign({},i),s=new Promise((C,R)=>{v=C,l=R}),g="object"==typeof window,p="function"==typeof importScripts,T=p&&"em-pthread"==self.name;h.mountExternalData=(C,R)=>{C.startsWith("./")&&(C=C.substring(2)),(h.Ua||(h.Ua=new Map)).set(C,R)},h.unmountExternalData=()=>{delete h.Ua};var I,N,L=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,shared:!0}).buffer.constructor,U=Object.assign({},h),Z=(C,R)=>{throw R},ie="";(g||p)&&(p?ie=self.location.href:typeof document<"u"&&document.currentScript&&(ie=document.currentScript.src),ji&&(ie=ji),ie=ie.startsWith("blob:")?"":ie.substr(0,ie.replace(/[?#].*/,"").lastIndexOf("/")+1),p&&(N=C=>{var R=new XMLHttpRequest;return R.open("GET",C,!1),R.responseType="arraybuffer",R.send(null),new Uint8Array(R.response)}),I=(C,R,V)=>{var Q=new XMLHttpRequest;Q.open("GET",C,!0),Q.responseType="arraybuffer",Q.onload=()=>{200==Q.status||0==Q.status&&Q.response?R(Q.response):V()},Q.onerror=V,Q.send(null)});var le,Oe=console.log.bind(console),Io=console.error.bind(console),Zo=Oe,_r=Io;if(Object.assign(h,U),U=null,T){let C=function(R){try{var V=R.data,Q=V.cmd;if("load"===Q){let X=[];self.onmessage=ue=>X.push(ue),self.startWorker=()=>{postMessage({cmd:"loaded"});for(let ue of X)C(ue);self.onmessage=C};for(let ue of V.handlers)h[ue]&&!h[ue].proxy||(h[ue]=(...Ie)=>{postMessage({Za:"callHandler",kb:ue,args:Ie})},"print"==ue&&(Zo=h[ue]),"printErr"==ue&&(_r=h[ue]));Xs=V.wasmMemory,gr(),pu(V.wasmModule)}else if("run"===Q){Ty(V.pthread_ptr,0,0,1,0,0),B0(V.pthread_ptr),x_(),M0(),Xo||=!0;try{EE(V.start_routine,V.arg)}catch(X){if("unwind"!=X)throw X}}else"cancel"===Q?bu()&&qg(-1):"setimmediate"!==V.target&&("checkMailbox"===Q?Xo&&yy():Q&&(_r(`worker: received unknown command ${Q}`),_r(V)))}catch(X){throw $_(),X}};var pu,Xo=!1;_r=function(...R){R=R.join(" "),console.error(R)},self.alert=function(...R){postMessage({Za:"alert",text:R.join(" "),nb:bu()})},h.instantiateWasm=(R,V)=>new Promise(Q=>{pu=X=>{X=new WebAssembly.Instance(X,Zy()),V(X),Q()}}),self.onunhandledrejection=R=>{throw R.reason||R},self.onmessage=C}h.wasmBinary&&(le=h.wasmBinary);var Xs,Yy,Xa,xa,Ca,$t,Gu,Ja,gu,fl=!1;function gr(){var C=Xs.buffer;h.HEAP8=xa=new Int8Array(C),h.HEAP16=new Int16Array(C),h.HEAPU8=Ca=new Uint8Array(C),h.HEAPU16=new Uint16Array(C),h.HEAP32=$t=new Int32Array(C),h.HEAPU32=Gu=new Uint32Array(C),h.HEAPF32=new Float32Array(C),h.HEAPF64=gu=new Float64Array(C),h.HEAP64=Ja=new BigInt64Array(C),h.HEAPU64=new BigUint64Array(C)}if(!T){if(!((Xs=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0})).buffer instanceof L))throw _r("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Error("bad memory");gr()}var fa=[],Vd=[],py=[],mu=0,gy=null,ha=null;function eu(){if(0==--mu&&(null!==gy&&(clearInterval(gy),gy=null),ha)){var C=ha;ha=null,C()}}function hd(C){throw _r(C="Aborted("+C+")"),fl=!0,Xa=1,C=new WebAssembly.RuntimeError(C+". Build with -sASSERTIONS for more info."),l(C),C}var Jr,Bo=C=>C.startsWith("data:application/octet-stream;base64,"),gd=C=>C.startsWith("file://");function Jt(C){if(C==Jr&&le)return new Uint8Array(le);if(N)return N(C);throw"both async and sync fetching of the wasm failed"}function Vg(C,R,V){return function(Q){if(!le&&(g||p)){if("function"==typeof fetch&&!gd(Q))return fetch(Q,{credentials:"same-origin"}).then(X=>{if(!X.ok)throw`failed to load wasm binary file at '${Q}'`;return X.arrayBuffer()}).catch(()=>Jt(Q));if(I)return new Promise((X,ue)=>{I(Q,Ie=>X(new Uint8Array(Ie)),ue)})}return Promise.resolve().then(()=>Jt(Q))}(C).then(Q=>WebAssembly.instantiate(Q,R)).then(V,Q=>{_r(`failed to asynchronously prepare wasm: ${Q}`),hd(Q)})}function Zy(){return{a:{j:ra,b:SE,E:yd,g:O_,V:k0,A:P_,C:pa,W:M_,T:zo,L:Ao,S:$0,o:en,B:IE,y:N_,U:re,z:Gd,_:uv,Z:j0,P:j1,w:yu,F:Hg,k:zg,O:B0,Y:V0,I:R_,J:B1,K:V1,G:Wt,H:U0,v:Oo,q:U1,l:CE,p:k_,e:$e,X:ga,x:H1,d:vy,f:AE,i:z1,u:vd,t:G1,s:PE,Q:oa,R:Re,D:I_,h:NE,n:RE,M:kE,m:FE,a:Xs,r:tv,N:wy,c:$E}}}var Xy={836900:(C,R,V,Q,X)=>{if(void 0===h||!h.Ua)return 1;if((C=_o(C>>>0)).startsWith("./")&&(C=C.substring(2)),!(C=h.Ua.get(C)))return 2;if(Q>>>=0,(R>>>=0)+(V>>>=0)>C.byteLength)return 3;try{let ue=C.subarray(R,R+V);switch(X){case 0:c().set(ue,Q>>>0);break;case 1:h.mb(Q,ue);break;default:return 4}return 0}catch{return 4}},837583:()=>typeof wasmOffsetConverter<"u"};function ra(){return typeof wasmOffsetConverter<"u"}function Jy(C){this.name="ExitStatus",this.message=`Program terminated with exit(${C})`,this.status=C}var ev=C=>{C.terminate(),C.onmessage=()=>{}},S_=C=>{0==md.length&&(N0(),ov(md[0]));var R=md.pop();return R?(Ud.push(R),qs[C.Ra]=R,R.Ra=C.Ra,R.postMessage({cmd:"run",start_routine:C.cb,arg:C.ab,pthread_ptr:C.Ra},C.ib),0):6},Fa=0,vn=(C,R,...V)=>{for(var Q=2*V.length,X=Dy(),ue=B_(8*Q),Ie=ue>>>3,On=0;On<V.length;On++){var wr=V[On];"bigint"==typeof wr?(Ja[Ie+2*On]=1n,Ja[Ie+2*On+1]=wr):(Ja[Ie+2*On]=0n,m()[Ie+2*On+1>>>0]=wr)}return C=G0(C,0,Q,ue,R),Wg(X),C};function tv(C){if(T)return vn(0,1,C);if(Xa=C,!(0<Fa)){for(var R of Ud)ev(R);for(R of md)ev(R);md=[],Ud=[],qs=[],fl=!0}Z(C,new Jy(C))}function nv(C){if(T)return vn(1,0,C);I_(C)}var I_=C=>{if(Xa=C,T)throw nv(C),"unwind";tv(C)},md=[],Ud=[],rv=[],qs={},my=C=>{var R=C.Ra;delete qs[R],md.push(C),Ud.splice(Ud.indexOf(C),1),C.Ra=0,be(R)};function M0(){rv.forEach(C=>C())}var ov=C=>new Promise(R=>{C.onmessage=X=>{var ue=(X=X.data).cmd;if(X.targetThread&&X.targetThread!=bu()){var Ie=qs[X.targetThread];Ie?Ie.postMessage(X,X.transferList):_r(`Internal error! Worker sent a message "${ue}" to target pthread ${X.targetThread}, but that thread no longer exists!`)}else"checkMailbox"===ue?yy():"spawnThread"===ue?S_(X):"cleanupThread"===ue?my(qs[X.thread]):"killThread"===ue?(ue=qs[X=X.thread],delete qs[X],ev(ue),be(X),Ud.splice(Ud.indexOf(ue),1),ue.Ra=0):"cancelThread"===ue?qs[X.thread].postMessage({cmd:"cancel"}):"loaded"===ue?(C.loaded=!0,R(C)):"alert"===ue?alert(`Thread ${X.threadId}: ${X.text}`):"setimmediate"===X.target?C.postMessage(X):"callHandler"===ue?h[X.handler](...X.args):ue&&_r(`worker sent an unknown command ${ue}`)},C.onerror=X=>{throw _r(`worker sent an error! ${X.filename}:${X.lineno}: ${X.message}`),X};var V,Q=[];for(V of[])h.hasOwnProperty(V)&&Q.push(V);C.postMessage({cmd:"load",handlers:Q,wasmMemory:Xs,wasmModule:Yy})});function N0(){var C=new Worker(new URL("file:///Users/bharris/Code/audio/node_modules/onnxruntime-web/dist/ort.bundle.min.mjs"),{type:"module",workerData:"em-pthread",name:"em-pthread"});md.push(C)}var iv,sv=C=>{for(;0<C.length;)C.shift()(h)},x_=()=>{var C=bu(),R=b()[C+52>>>2>>>0];C=b()[C+56>>>2>>>0],j_(R,R-C),Wg(R)},zd=[],EE=(C,R)=>{Fa=0;var V=zd[C];V||(C>=zd.length&&(zd.length=C+1),zd[C]=V=iv.get(C)),C=V(R),0<Fa?Xa=C:qg(C)};class C_{constructor(R){this.Xa=R-24}}function SE(C,R,V){var Q=new C_(C>>>=0);throw R>>>=0,V>>>=0,b()[Q.Xa+16>>>2>>>0]=0,b()[Q.Xa+4>>>2>>>0]=R,b()[Q.Xa+8>>>2>>>0]=V,C}function av(C,R,V,Q){return T?vn(2,1,C,R,V,Q):yd(C,R,V,Q)}function yd(C,R,V,Q){if(C>>>=0,R>>>=0,V>>>=0,Q>>>=0,void 0===L)return _r("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var X=[];return T&&0===X.length?av(C,R,V,Q):(C={cb:V,Ra:C,ab:Q,ib:X},T?(C.Za="spawnThread",postMessage(C,X),0):S_(C))}var R0=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,A_=(C,R,V)=>{var Q=(R>>>=0)+V;for(V=R;C[V]&&!(V>=Q);)++V;if(16<V-R&&C.buffer&&R0)return R0.decode(C.buffer instanceof L?C.slice(R,V):C.subarray(R,V));for(Q="";R<V;){var X=C[R++];if(128&X){var ue=63&C[R++];if(192==(224&X))Q+=String.fromCharCode((31&X)<<6|ue);else{var Ie=63&C[R++];65536>(X=224==(240&X)?(15&X)<<12|ue<<6|Ie:(7&X)<<18|ue<<12|Ie<<6|63&C[R++])?Q+=String.fromCharCode(X):(X-=65536,Q+=String.fromCharCode(55296|X>>10,56320|1023&X))}}else Q+=String.fromCharCode(X)}return Q},_o=(C,R)=>(C>>>=0)?A_(c(),C,R):"";function O_(C,R,V){return T?vn(3,1,C,R,V):0}function k0(C,R){if(T)return vn(4,1,C,R)}var F0=C=>{for(var R=0,V=0;V<C.length;++V){var Q=C.charCodeAt(V);127>=Q?R++:2047>=Q?R+=2:55296<=Q&&57343>=Q?(R+=4,++V):R+=3}return R},L0=(C,R,V,Q)=>{if(!(0<Q))return 0;var X=V>>>=0;Q=V+Q-1;for(var ue=0;ue<C.length;++ue){var Ie=C.charCodeAt(ue);if(55296<=Ie&&57343>=Ie&&(Ie=65536+((1023&Ie)<<10)|1023&C.charCodeAt(++ue)),127>=Ie){if(V>=Q)break;R[V++>>>0]=Ie}else{if(2047>=Ie){if(V+1>=Q)break;R[V++>>>0]=192|Ie>>6}else{if(65535>=Ie){if(V+2>=Q)break;R[V++>>>0]=224|Ie>>12}else{if(V+3>=Q)break;R[V++>>>0]=240|Ie>>18,R[V++>>>0]=128|Ie>>12&63}R[V++>>>0]=128|Ie>>6&63}R[V++>>>0]=128|63&Ie}}return R[V>>>0]=0,V-X},Ks=(C,R,V)=>L0(C,c(),R,V);function P_(C,R){if(T)return vn(5,1,C,R)}function pa(C,R,V){if(T)return vn(6,1,C,R,V)}function M_(C,R,V){return T?vn(7,1,C,R,V):0}function zo(C,R){if(T)return vn(8,1,C,R)}function Ao(C,R,V){if(T)return vn(9,1,C,R,V)}function $0(C,R,V,Q){if(T)return vn(10,1,C,R,V,Q)}function en(C,R,V,Q){if(T)return vn(11,1,C,R,V,Q)}function IE(C,R,V,Q){if(T)return vn(12,1,C,R,V,Q)}function N_(C){if(T)return vn(13,1,C)}function re(C,R){if(T)return vn(14,1,C,R)}function Gd(C,R,V){if(T)return vn(15,1,C,R,V)}var uv=()=>{hd("")},j0=()=>1;function j1(C){Ty(C>>>0,!p,1,!g,131072,!1),M0()}function B0(C){C>>>=0,"function"==typeof Atomics.jb&&(Atomics.jb(f(),C>>>2,C).value.then(yy),C+=128,Atomics.store(f(),C>>>2,1))}var yy=()=>{var C=bu();if(C&&(B0(C),C=cv,!fl))try{if(C(),!(0<Fa))try{T?qg(Xa):I_(Xa)}catch(R){R instanceof Jy||"unwind"==R||Z(1,R)}}catch(R){R instanceof Jy||"unwind"==R||Z(1,R)}};function yu(C,R){(C>>>=0)==R>>>0?setTimeout(yy):T?postMessage({targetThread:C,cmd:"checkMailbox"}):(C=qs[C])&&C.postMessage({cmd:"checkMailbox"})}var bd=[];function Hg(C,R,V,Q,X){for(R>>>=0,bd.length=Q/=2,V=X>>>0>>>3,X=0;X<Q;X++)bd[X]=Ja[V+2*X]?Ja[V+2*X+1]:m()[V+2*X+1>>>0];return(R?Xy[R]:z0[C])(...bd)}function zg(C){C>>>=0,T?postMessage({cmd:"cleanupThread",thread:C}):my(qs[C])}function V0(C){}function R_(C,R){C=-9007199254740992>C||9007199254740992<C?NaN:Number(C),R>>>=0,C=new Date(1e3*C),f()[R>>>2>>>0]=C.getUTCSeconds(),f()[R+4>>>2>>>0]=C.getUTCMinutes(),f()[R+8>>>2>>>0]=C.getUTCHours(),f()[R+12>>>2>>>0]=C.getUTCDate(),f()[R+16>>>2>>>0]=C.getUTCMonth(),f()[R+20>>>2>>>0]=C.getUTCFullYear()-1900,f()[R+24>>>2>>>0]=C.getUTCDay(),C=(C.getTime()-Date.UTC(C.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[R+28>>>2>>>0]=C}var La=C=>C%4==0&&(C%100!=0||C%400==0),xE=[0,31,60,91,121,152,182,213,244,274,305,335],Mt=[0,31,59,90,120,151,181,212,243,273,304,334];function B1(C,R){C=-9007199254740992>C||9007199254740992<C?NaN:Number(C),R>>>=0,C=new Date(1e3*C),f()[R>>>2>>>0]=C.getSeconds(),f()[R+4>>>2>>>0]=C.getMinutes(),f()[R+8>>>2>>>0]=C.getHours(),f()[R+12>>>2>>>0]=C.getDate(),f()[R+16>>>2>>>0]=C.getMonth(),f()[R+20>>>2>>>0]=C.getFullYear()-1900,f()[R+24>>>2>>>0]=C.getDay();var V=(La(C.getFullYear())?xE:Mt)[C.getMonth()]+C.getDate()-1|0;f()[R+28>>>2>>>0]=V,f()[R+36>>>2>>>0]=-60*C.getTimezoneOffset(),V=new Date(C.getFullYear(),6,1).getTimezoneOffset();var Q=new Date(C.getFullYear(),0,1).getTimezoneOffset();C=0|(V!=Q&&C.getTimezoneOffset()==Math.min(Q,V)),f()[R+32>>>2>>>0]=C}function V1(C){C>>>=0;var R=new Date(f()[C+20>>>2>>>0]+1900,f()[C+16>>>2>>>0],f()[C+12>>>2>>>0],f()[C+8>>>2>>>0],f()[C+4>>>2>>>0],f()[C>>>2>>>0],0),V=f()[C+32>>>2>>>0],Q=R.getTimezoneOffset(),X=new Date(R.getFullYear(),6,1).getTimezoneOffset(),ue=new Date(R.getFullYear(),0,1).getTimezoneOffset(),Ie=Math.min(ue,X);return 0>V?f()[C+32>>>2>>>0]=+(X!=ue&&Ie==Q):0<V!=(Ie==Q)&&(X=Math.max(ue,X),R.setTime(R.getTime()+6e4*((0<V?Ie:X)-Q))),f()[C+24>>>2>>>0]=R.getDay(),V=(La(R.getFullYear())?xE:Mt)[R.getMonth()]+R.getDate()-1|0,f()[C+28>>>2>>>0]=V,f()[C>>>2>>>0]=R.getSeconds(),f()[C+4>>>2>>>0]=R.getMinutes(),f()[C+8>>>2>>>0]=R.getHours(),f()[C+12>>>2>>>0]=R.getDate(),f()[C+16>>>2>>>0]=R.getMonth(),f()[C+20>>>2>>>0]=R.getYear(),C=R.getTime(),BigInt(isNaN(C)?-1:C/1e3)}function Wt(C,R,V,Q,X,ue,Ie){return T?vn(16,1,C,R,V,Q,X,ue,Ie):-52}function U0(C,R,V,Q,X,ue){if(T)return vn(17,1,C,R,V,Q,X,ue)}function Oo(C,R,V,Q){C>>>=0,R>>>=0,V>>>=0,Q>>>=0;var X=(new Date).getFullYear(),ue=new Date(X,0,1),Ie=new Date(X,6,1);X=ue.getTimezoneOffset();var On=Ie.getTimezoneOffset(),wr=Math.max(X,On);b()[C>>>2>>>0]=60*wr,f()[R>>>2>>>0]=+(X!=On),ue=(C=Po=>Po.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1])(ue),Ie=C(Ie),On<X?(Ks(ue,V,17),Ks(Ie,Q,17)):(Ks(ue,Q,17),Ks(Ie,V,17))}var by=[];function U1(C,R,V){C>>>=0,R>>>=0,V>>>=0,by.length=0;for(var Q;Q=c()[R++>>>0];){var X=105!=Q;V+=(X&=112!=Q)&&V%8?4:0,by.push(112==Q?b()[V>>>2>>>0]:106==Q?Ja[V>>>3]:105==Q?f()[V>>>2>>>0]:m()[V>>>3>>>0]),V+=X?8:4}return Xy[C](...by)}var CE=()=>{},k_=()=>Date.now();function $e(C,R){return _r(_o(C>>>0,R>>>0))}var vy,ga=()=>{throw Fa+=1,"unwind"};function H1(){return 4294901760}vy=()=>performance.timeOrigin+performance.now();var AE=()=>navigator.hardwareConcurrency;function z1(){return hd("Cannot use emscripten_pc_get_function without -sUSE_OFFSET_CONVERTER"),0}function vd(C){C>>>=0;var R=c().length;if(C<=R||4294901760<C)return!1;for(var V=1;4>=V;V*=2){var Q=R*(1+.2/V);Q=Math.min(Q,C+100663296);var X=Math;Q=Math.max(C,Q);e:{X=(X.min.call(X,4294901760,Q+(65536-Q%65536)%65536)-Xs.buffer.byteLength+65535)/65536;try{Xs.grow(X),gr();var ue=1;break e}catch{}ue=void 0}if(ue)return!0}return!1}var F_=()=>(hd("Cannot use convertFrameToPC (needed by __builtin_return_address) without -sUSE_OFFSET_CONVERTER"),0),_y={},OE=C=>{C.forEach(R=>{var V=F_();V&&(_y[V]=R)})};function G1(){var C=Error().stack.toString().split("\n");return"Error"==C[0]&&C.shift(),OE(C),_y.$a=F_(),_y.bb=C,_y.$a}function PE(C,R,V){if(R>>>=0,_y.$a==(C>>>=0))var Q=_y.bb;else"Error"==(Q=Error().stack.toString().split("\n"))[0]&&Q.shift(),OE(Q);for(var X=3;Q[X]&&F_()!=C;)++X;for(C=0;C<V&&Q[C+X];++C)f()[R+4*C>>>2>>>0]=F_();return C}var H0,L_={},ME=()=>{if(!H0){var C,R={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(C in L_)void 0===L_[C]?delete R[C]:R[C]=L_[C];var V=[];for(C in R)V.push(`${C}=${R[C]}`);H0=V}return H0};function oa(C,R){if(T)return vn(18,1,C,R);C>>>=0,R>>>=0;var V=0;return ME().forEach((Q,X)=>{var ue=R+V;for(X=b()[C+4*X>>>2>>>0]=ue,ue=0;ue<Q.length;++ue)a()[X++>>>0]=Q.charCodeAt(ue);a()[X>>>0]=0,V+=Q.length+1}),0}function Re(C,R){if(T)return vn(19,1,C,R);C>>>=0,R>>>=0;var V=ME();b()[C>>>2>>>0]=V.length;var Q=0;return V.forEach(X=>Q+=X.length+1),b()[R>>>2>>>0]=Q,0}function NE(C){return T?vn(20,1,C):52}function RE(C,R,V,Q){return T?vn(21,1,C,R,V,Q):52}function kE(C,R,V,Q){return T?vn(22,1,C,R,V,Q):70}var q1=[null,[],[]];function FE(C,R,V,Q){if(T)return vn(23,1,C,R,V,Q);R>>>=0,V>>>=0,Q>>>=0;for(var X=0,ue=0;ue<V;ue++){var Ie=b()[R>>>2>>>0],On=b()[R+4>>>2>>>0];R+=8;for(var wr=0;wr<On;wr++){var Po=c()[Ie+wr>>>0],Js=q1[C];0===Po||10===Po?((1===C?Zo:_r)(A_(Js,0)),Js.length=0):Js.push(Po)}X+=On}return b()[Q>>>2>>>0]=X,0}var De=[31,29,31,30,31,30,31,31,30,31,30,31],LE=[31,28,31,30,31,30,31,31,30,31,30,31],lv=(C,R)=>{a().set(C,R>>>0)};function wy(C,R,V,Q){function X(ae,Nt,Do){for(ae="number"==typeof ae?ae.toString():ae||"";ae.length<Nt;)ae=Do[0]+ae;return ae}function ue(ae,Nt){return X(ae,Nt,"0")}function Ie(ae,Nt){function Do(q0){return 0>q0?-1:0<q0?1:0}var Kg;return 0===(Kg=Do(ae.getFullYear()-Nt.getFullYear()))&&0===(Kg=Do(ae.getMonth()-Nt.getMonth()))&&(Kg=Do(ae.getDate()-Nt.getDate())),Kg}function On(ae){switch(ae.getDay()){case 0:return new Date(ae.getFullYear()-1,11,29);case 1:return ae;case 2:return new Date(ae.getFullYear(),0,3);case 3:return new Date(ae.getFullYear(),0,2);case 4:return new Date(ae.getFullYear(),0,1);case 5:return new Date(ae.getFullYear()-1,11,31);case 6:return new Date(ae.getFullYear()-1,11,30)}}function wr(ae){var Nt=ae.Sa;for(ae=new Date(new Date(ae.Ta+1900,0,1).getTime());0<Nt;){var Do=ae.getMonth(),Kg=(La(ae.getFullYear())?De:LE)[Do];if(!(Nt>Kg-ae.getDate())){ae.setDate(ae.getDate()+Nt);break}Nt-=Kg-ae.getDate()+1,ae.setDate(1),11>Do?ae.setMonth(Do+1):(ae.setMonth(0),ae.setFullYear(ae.getFullYear()+1))}return Do=new Date(ae.getFullYear()+1,0,4),Nt=On(new Date(ae.getFullYear(),0,4)),Do=On(Do),0>=Ie(Nt,ae)?0>=Ie(Do,ae)?ae.getFullYear()+1:ae.getFullYear():ae.getFullYear()-1}C>>>=0,R>>>=0,V>>>=0,Q>>>=0;var Po=b()[Q+40>>>2>>>0];for(var Js in Q={gb:f()[Q>>>2>>>0],fb:f()[Q+4>>>2>>>0],Va:f()[Q+8>>>2>>>0],Ya:f()[Q+12>>>2>>>0],Wa:f()[Q+16>>>2>>>0],Ta:f()[Q+20>>>2>>>0],Qa:f()[Q+24>>>2>>>0],Sa:f()[Q+28>>>2>>>0],ob:f()[Q+32>>>2>>>0],eb:f()[Q+36>>>2>>>0],hb:Po?_o(Po):""},V=_o(V),Po={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})V=V.replace(new RegExp(Js,"g"),Po[Js]);var ae,Nt,Ze="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ot="January February March April May June July August September October November December".split(" ");for(Js in Po={"%a":ae=>Ze[ae.Qa].substring(0,3),"%A":ae=>Ze[ae.Qa],"%b":ae=>Ot[ae.Wa].substring(0,3),"%B":ae=>Ot[ae.Wa],"%C":ae=>ue((ae.Ta+1900)/100|0,2),"%d":ae=>ue(ae.Ya,2),"%e":ae=>X(ae.Ya,2," "),"%g":ae=>wr(ae).toString().substring(2),"%G":wr,"%H":ae=>ue(ae.Va,2),"%I":ae=>(0==(ae=ae.Va)?ae=12:12<ae&&(ae-=12),ue(ae,2)),"%j":ae=>{for(var Nt=0,Do=0;Do<=ae.Wa-1;Nt+=(La(ae.Ta+1900)?De:LE)[Do++]);return ue(ae.Ya+Nt,3)},"%m":ae=>ue(ae.Wa+1,2),"%M":ae=>ue(ae.fb,2),"%n":()=>"\n","%p":ae=>0<=ae.Va&&12>ae.Va?"AM":"PM","%S":ae=>ue(ae.gb,2),"%t":()=>"\t","%u":ae=>ae.Qa||7,"%U":ae=>ue(Math.floor((ae.Sa+7-ae.Qa)/7),2),"%V":ae=>{var Nt=Math.floor((ae.Sa+7-(ae.Qa+6)%7)/7);if(2>=(ae.Qa+371-ae.Sa-2)%7&&Nt++,Nt)53==Nt&&(4==(Do=(ae.Qa+371-ae.Sa)%7)||3==Do&&La(ae.Ta)||(Nt=1));else{Nt=52;var Do=(ae.Qa+7-ae.Sa-1)%7;(4==Do||5==Do&&La(ae.Ta%400-1))&&Nt++}return ue(Nt,2)},"%w":ae=>ae.Qa,"%W":ae=>ue(Math.floor((ae.Sa+7-(ae.Qa+6)%7)/7),2),"%y":ae=>(ae.Ta+1900).toString().substring(2),"%Y":ae=>ae.Ta+1900,"%z":ae=>(0<=(ae=ae.eb)?"+":"-")+("0000"+((ae=Math.abs(ae)/60)/60*100+ae%60)).slice(-4),"%Z":ae=>ae.hb,"%%":()=>"%"},V=V.replace(/%%/g,"\0\0"),Po)V.includes(Js)&&(V=V.replace(new RegExp(Js,"g"),Po[Js](Q)));return ae=V=V.replace(/\0\0/g,"%"),Nt=Array(F0(ae)+1),L0(ae,Nt,0,Nt.length),(Js=Nt).length>R?0:(lv(Js,C),Js.length-1)}function $E(C,R,V,Q){return wy(C>>>0,R>>>0,V>>>0,Q>>>0)}T||function(){for(var C=h.numThreads-1;C--;)N0();fa.unshift(()=>{var R;mu++,R=()=>eu(),T?R():Promise.all(md.map(ov)).then(R)})}();var z0=[tv,nv,av,O_,k0,P_,pa,M_,zo,Ao,$0,en,IE,N_,re,Gd,Wt,U0,oa,Re,NE,RE,kE,FE],Ge=function(){function C(V,Q){return X=Ge=V.exports,ue=On=>()=>On()>>>0,Ie=On=>wr=>On(wr)>>>0,(X=Object.assign({},X)).Ba=ue(X.Ba),X.Ca=Ie(X.Ca),X.emscripten_main_runtime_thread_id=ue(X.emscripten_main_runtime_thread_id),X.Oa=Ie(X.Oa),X.Pa=ue(X.Pa),rv.push((Ge=X).Ea),iv=Ge.Fa,Vd.unshift(Ge.$),Yy=Q,eu(),Ge;var X,ue,Ie}var V,Q,X,R=Zy();if(mu++,h.instantiateWasm)try{return h.instantiateWasm(R,C)}catch(V){_r(`Module.instantiateWasm callback failed with error: ${V}`),l(V)}return Jr||=h.locateFile?Bo("ort-wasm-simd-threaded.wasm")?"ort-wasm-simd-threaded.wasm":h.locateFile?h.locateFile("ort-wasm-simd-threaded.wasm",ie):ie+"ort-wasm-simd-threaded.wasm":new URL("ort-wasm-simd-threaded.wasm","file:///Users/bharris/Code/audio/node_modules/onnxruntime-web/dist/ort.bundle.min.mjs").href,(V=R,Q=function(V){C(V.instance,V.module)},X=Jr,le||"function"!=typeof WebAssembly.instantiateStreaming||Bo(X)||gd(X)||"function"!=typeof fetch?Vg(X,V,Q):fetch(X,{credentials:"same-origin"}).then(ue=>WebAssembly.instantiateStreaming(ue,V).then(Q,function(Ie){return _r(`wasm streaming compile failed: ${Ie}`),_r("falling back to ArrayBuffer instantiation"),Vg(X,V,Q)}))).catch(l),{}}();h._OrtInit=(C,R)=>(h._OrtInit=Ge.aa)(C,R),h._OrtGetLastError=(C,R)=>(h._OrtGetLastError=Ge.ba)(C,R),h._OrtCreateSessionOptions=(C,R,V,Q,X,ue,Ie,On,wr,Po)=>(h._OrtCreateSessionOptions=Ge.ca)(C,R,V,Q,X,ue,Ie,On,wr,Po),h._OrtAppendExecutionProvider=(C,R)=>(h._OrtAppendExecutionProvider=Ge.da)(C,R),h._OrtAddFreeDimensionOverride=(C,R,V)=>(h._OrtAddFreeDimensionOverride=Ge.ea)(C,R,V),h._OrtAddSessionConfigEntry=(C,R,V)=>(h._OrtAddSessionConfigEntry=Ge.fa)(C,R,V),h._OrtReleaseSessionOptions=C=>(h._OrtReleaseSessionOptions=Ge.ga)(C),h._OrtCreateSession=(C,R,V)=>(h._OrtCreateSession=Ge.ha)(C,R,V),h._OrtReleaseSession=C=>(h._OrtReleaseSession=Ge.ia)(C),h._OrtGetInputOutputCount=(C,R,V)=>(h._OrtGetInputOutputCount=Ge.ja)(C,R,V),h._OrtGetInputName=(C,R)=>(h._OrtGetInputName=Ge.ka)(C,R),h._OrtGetOutputName=(C,R)=>(h._OrtGetOutputName=Ge.la)(C,R),h._OrtFree=C=>(h._OrtFree=Ge.ma)(C),h._OrtCreateTensor=(C,R,V,Q,X,ue)=>(h._OrtCreateTensor=Ge.na)(C,R,V,Q,X,ue),h._OrtGetTensorData=(C,R,V,Q,X)=>(h._OrtGetTensorData=Ge.oa)(C,R,V,Q,X),h._OrtReleaseTensor=C=>(h._OrtReleaseTensor=Ge.pa)(C),h._OrtCreateRunOptions=(C,R,V,Q)=>(h._OrtCreateRunOptions=Ge.qa)(C,R,V,Q),h._OrtAddRunConfigEntry=(C,R,V)=>(h._OrtAddRunConfigEntry=Ge.ra)(C,R,V),h._OrtReleaseRunOptions=C=>(h._OrtReleaseRunOptions=Ge.sa)(C),h._OrtCreateBinding=C=>(h._OrtCreateBinding=Ge.ta)(C),h._OrtBindInput=(C,R,V)=>(h._OrtBindInput=Ge.ua)(C,R,V),h._OrtBindOutput=(C,R,V,Q)=>(h._OrtBindOutput=Ge.va)(C,R,V,Q),h._OrtClearBoundOutputs=C=>(h._OrtClearBoundOutputs=Ge.wa)(C),h._OrtReleaseBinding=C=>(h._OrtReleaseBinding=Ge.xa)(C),h._OrtRunWithBinding=(C,R,V,Q,X)=>(h._OrtRunWithBinding=Ge.ya)(C,R,V,Q,X),h._OrtRun=(C,R,V,Q,X,ue,Ie,On)=>(h._OrtRun=Ge.za)(C,R,V,Q,X,ue,Ie,On),h._OrtEndProfiling=C=>(h._OrtEndProfiling=Ge.Aa)(C);var bu=()=>(bu=Ge.Ba)();h._malloc=C=>(h._malloc=Ge.Ca)(C),h._free=C=>(h._free=Ge.Da)(C);var Wd,Ty=(C,R,V,Q,X,ue)=>(Ty=Ge.Ga)(C,R,V,Q,X,ue),$_=()=>($_=Ge.Ha)(),G0=(C,R,V,Q,X)=>(G0=Ge.Ia)(C,R,V,Q,X),be=C=>(be=Ge.Ja)(C),qg=C=>(qg=Ge.Ka)(C),cv=()=>(cv=Ge.La)(),j_=(C,R)=>(j_=Ge.Ma)(C,R),Wg=C=>(Wg=Ge.Na)(C),B_=C=>(B_=Ge.Oa)(C),Dy=()=>(Dy=Ge.Pa)();function jE(){0<mu||(T?(v(h),T||sv(Vd),startWorker(h)):(sv(fa),0<mu||Wd||(Wd=!0,h.calledRun=!0,fl||(T||sv(Vd),v(h),T||sv(py)))))}return h.___start_em_js=837640,h.___stop_em_js=837701,h.stackSave=()=>Dy(),h.stackRestore=C=>Wg(C),h.stackAlloc=C=>B_(C),h.UTF8ToString=_o,h.stringToUTF8=Ks,h.lengthBytesUTF8=F0,ha=function C(){Wd||jE(),Wd||(ha=C)},jE(),s}),Og=Mp,"em-pthread"===globalThis.self?.name&&Mp()}),br,Sg,Ag,Pg,zp,Wp,Eg,Hp,Vr=O(()=>{oo(),br="file:///Users/bharris/Code/audio/node_modules/onnxruntime-web/dist/ort.bundle.min.mjs",Sg=typeof location>"u"?void 0:location.origin,Ag=(i,a)=>{try{let c=a??br;return(c?new URL(i,c):new URL(i)).origin===Sg}catch{return!1}},Pg=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a){let c=yield(yield fetch(a,{credentials:"same-origin"})).blob();return URL.createObjectURL(c)});return function(c){return i.apply(this,arguments)}}(),zp=(Gp(),sn(Rp)).default,Wp=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){if(!br)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(Ag(br))return[void 0,zp()];let a=yield Pg(br);return[a,zp(a)]});return function(){return i.apply(this,arguments)}}(),Eg=(Vp(),sn(Up)).default,Hp=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a,c,f){return[void 0,Eg]});return function(c,f,b){return i.apply(this,arguments)}}()}),Xi,Ki,ho,qp,Dg,Lg,io,xt,Ke=O(()=>{Vr(),Ki=!1,ho=!1,qp=!1,Dg=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},Lg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},io=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a){if(Ki)return Promise.resolve();if(ho)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(qp)throw new Error("previous call to 'initializeWebAssembly()' failed.");ho=!0;let c=a.initTimeout,f=a.numThreads;if(!Lg())throw new Error("WebAssembly SIMD is not supported in the current environment.");let b=Dg();f>1&&!b&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+f+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),a.numThreads=f=1);let m=a.wasmPaths,v="string"==typeof m?m:void 0,l=m?.mjs,h=l?.href??l,s=m?.wasm,g=s?.href??s,p=a.wasmBinary,[T,I]=yield Hp(h,v,f>1),N=!1,L=[];if(c>0&&L.push(new Promise(U=>{setTimeout(()=>{N=!0,U()},c)})),L.push(new Promise((U,se)=>{let Z={numThreads:f};p?Z.wasmBinary=p:(g||v)&&(Z.locateFile=(ie,le)=>g??(v??le)+ie),I(Z).then(ie=>{ho=!1,Ki=!0,Xi=ie,U(),T&&URL.revokeObjectURL(T)},ie=>{ho=!1,qp=!0,se(ie)})})),yield Promise.race(L),N)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)});return function(c){return i.apply(this,arguments)}}(),xt=()=>{if(Ki&&Xi)return Xi;throw new Error("WebAssembly is not initialized yet.")}}),Tt,Wr,ht,mo=O(()=>{Ke(),Tt=(i,a)=>{let c=xt(),f=c.lengthBytesUTF8(i)+1,b=c._malloc(f);return c.stringToUTF8(i,b,f),a.push(b),b},Wr=(i,a,c,f)=>{if("object"==typeof i&&null!==i){if(c.has(i))throw new Error("Circular reference in options");c.add(i)}Object.entries(i).forEach(([b,m])=>{let v=a?a+b:b;if("object"==typeof m)Wr(m,v+".",c,f);else if("string"==typeof m||"number"==typeof m)f(v,m.toString());else{if("boolean"!=typeof m)throw new Error("Can't handle extra config type: "+typeof m);f(v,m?"1":"0")}})},ht=i=>{let a=xt(),c=a.stackSave();try{let f=a.stackAlloc(8);a._OrtGetLastError(f,f+4);let b=a.HEAP32[f/4],m=a.HEAPU32[f/4+1],v=m?a.UTF8ToString(m):"";throw new Error(`${i} ERROR_CODE: ${b}, ERROR_MESSAGE: ${v}`)}finally{a.stackRestore(c)}}}),jp,Xp=O(()=>{Ke(),mo(),jp=i=>{let a=xt(),c=0,f=[],b=i||{};try{if(void 0===i?.logSeverityLevel)b.logSeverityLevel=2;else if("number"!=typeof i.logSeverityLevel||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(void 0===i?.logVerbosityLevel)b.logVerbosityLevel=0;else if("number"!=typeof i.logVerbosityLevel||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);void 0===i?.terminate&&(b.terminate=!1);let m=0;return void 0!==i?.tag&&(m=Tt(i.tag,f)),c=a._OrtCreateRunOptions(b.logSeverityLevel,b.logVerbosityLevel,!!b.terminate,m),0===c&&ht("Can't create run options."),void 0!==i?.extra&&Wr(i.extra,"",new WeakSet,(v,l)=>{let h=Tt(v,f),s=Tt(l,f);0!==a._OrtAddRunConfigEntry(c,h,s)&&ht(`Can't set a run config entry: ${v} - ${l}.`)}),[c,f]}catch(m){throw 0!==c&&a._OrtReleaseRunOptions(c),f.forEach(v=>a._free(v)),m}}}),$g,kg,Bg,Fg,Kp,Jp=O(()=>{Ke(),mo(),$g=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},kg=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},Bg=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let a=i.extra.session;a.use_ort_model_bytes_directly||(a.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(c=>"webgpu"===("string"==typeof c?c:c.name))&&(i.enableMemPattern=!1)},Fg=(i,a,c)=>{for(let f of a){let b="string"==typeof f?f:f.name;switch(b){case"webnn":if(b="WEBNN","string"!=typeof f){let v=f?.deviceType;if(v){let l=Tt("deviceType",c),h=Tt(v,c);0!==xt()._OrtAddSessionConfigEntry(i,l,h)&&ht(`Can't set a session config entry: 'deviceType' - ${v}.`)}}break;case"webgpu":if(b="JS","string"!=typeof f){let v=f;if(v?.preferredLayout){if("NCHW"!==v.preferredLayout&&"NHWC"!==v.preferredLayout)throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${v.preferredLayout}`);let l=Tt("preferredLayout",c),h=Tt(v.preferredLayout,c);0!==xt()._OrtAddSessionConfigEntry(i,l,h)&&ht(`Can't set a session config entry: 'preferredLayout' - ${v.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${b}`)}let m=Tt(b,c);0!==xt()._OrtAppendExecutionProvider(i,m)&&ht(`Can't append execution provider: ${b}.`)}},Kp=i=>{let a=xt(),c=0,f=[],b=i||{};Bg(b);try{let m=$g(b.graphOptimizationLevel??"all"),v=kg(b.executionMode??"sequential"),l="string"==typeof b.logId?Tt(b.logId,f):0,h=b.logSeverityLevel??2;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log serverity level is not valid: ${h}`);let s=b.logVerbosityLevel??0;if(!Number.isInteger(s)||s<0||s>4)throw new Error(`log verbosity level is not valid: ${s}`);let g="string"==typeof b.optimizedModelFilePath?Tt(b.optimizedModelFilePath,f):0;if(c=a._OrtCreateSessionOptions(m,!!b.enableCpuMemArena,!!b.enableMemPattern,v,!!b.enableProfiling,0,l,h,s,g),0===c&&ht("Can't create session options."),b.executionProviders&&Fg(c,b.executionProviders,f),void 0!==b.enableGraphCapture){if("boolean"!=typeof b.enableGraphCapture)throw new Error(`enableGraphCapture must be a boolean value: ${b.enableGraphCapture}`);let p=Tt("enableGraphCapture",f),T=Tt(b.enableGraphCapture.toString(),f);0!==a._OrtAddSessionConfigEntry(c,p,T)&&ht(`Can't set a session config entry: 'enableGraphCapture' - ${b.enableGraphCapture}.`)}if(b.freeDimensionOverrides)for(let[p,T]of Object.entries(b.freeDimensionOverrides)){if("string"!=typeof p)throw new Error(`free dimension override name must be a string: ${p}`);if("number"!=typeof T||!Number.isInteger(T)||T<0)throw new Error(`free dimension override value must be a non-negative integer: ${T}`);let I=Tt(p,f);0!==a._OrtAddFreeDimensionOverride(c,I,T)&&ht(`Can't set a free dimension override: ${p} - ${T}.`)}return void 0!==b.extra&&Wr(b.extra,"",new WeakSet,(p,T)=>{let I=Tt(p,f),N=Tt(T,f);0!==a._OrtAddSessionConfigEntry(c,I,N)&&ht(`Can't set a session config entry: ${p} - ${T}.`)}),[c,f]}catch(m){throw 0!==c&&a._OrtReleaseSessionOptions(c),f.forEach(v=>a._free(v)),m}}}),Hr,Yp,qr,Zp,Qp,bo,go,td,Ji=O(()=>{Hr=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${i}`)}},Yp=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${i}`)}},qr=(i,a)=>{let c=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][i],f="number"==typeof a?a:a.reduce((b,m)=>b*m,1);return c>0?Math.ceil(f*c):void 0},Zp=i=>{switch(i){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Qp=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},bo=i=>"float32"===i||"float16"===i||"int32"===i||"int64"===i||"uint32"===i||"uint8"===i||"bool"===i||"uint4"===i||"int4"===i,go=i=>"float32"===i||"float16"===i||"int32"===i||"int64"===i||"uint32"===i||"uint64"===i||"int8"===i||"uint8"===i||"bool"===i,td=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${i}`)}}}),jr,Yi=O(()=>{oo(),jr=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a){if("string"==typeof a){let l=yield fetch(a);if(!l.ok)throw new Error(`failed to load external data file: ${a}`);let h=l.headers.get("Content-Length"),s=h?parseInt(h,10):0;if(s<1073741824)return new Uint8Array(yield l.arrayBuffer());{if(!l.body)throw new Error(`failed to load external data file: ${a}, no response body.`);let p,g=l.body.getReader();try{p=new ArrayBuffer(s)}catch(I){if(!(I instanceof RangeError))throw I;{let N=Math.ceil(s/65536);p=new WebAssembly.Memory({initial:N,maximum:N}).buffer}}let T=0;for(;;){let{done:I,value:N}=yield g.read();if(I)break;let L=N.byteLength;new Uint8Array(p,T,L).set(N),T+=L}return new Uint8Array(p,0,s)}}return a instanceof Blob?new Uint8Array(yield a.arrayBuffer()):a instanceof Uint8Array?a:new Uint8Array(a)});return function(c){return i.apply(this,arguments)}}()}),Cg,ao,so,yr,Ng,zr,uo,lo,ed,fo,co,po,qi=O(()=>{Xp(),Jp(),Ji(),Ke(),mo(),Yi(),Cg=(i,a)=>{0!==xt()._OrtInit(i,a)&&ht("Can't initialize onnxruntime.")},ao=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a){Cg(a.wasm.numThreads,Qp(a.logLevel))});return function(c){return i.apply(this,arguments)}}(),so=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a,c){});return function(c,f){return i.apply(this,arguments)}}(),yr=new Map,Ng=i=>{let a=xt(),c=a.stackSave();try{let f=a.stackAlloc(8);return 0!==a._OrtGetInputOutputCount(i,f,f+4)&&ht("Can't get session input/output count."),[a.HEAP32[f/4],a.HEAP32[f/4+1]]}finally{a.stackRestore(c)}},zr=i=>{let a=xt(),c=a._malloc(i.byteLength);if(0===c)throw new Error(`Can't create a session. failed to allocate a buffer of size ${i.byteLength}.`);return a.HEAPU8.set(i,c),[c,i.byteLength]},uo=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a,c){let f,b,m=xt();Array.isArray(a)?[f,b]=a:[f,b]=a.buffer===m.HEAPU8.buffer?[a.byteOffset,a.byteLength]:zr(a);let v=0,l=0,s=[],g=[],p=[];try{if([l,s]=Kp(c),c?.externalData&&m.mountExternalData){let ie=[];for(let le of c.externalData){let Oe="string"==typeof le?le:le.path;ie.push(jr("string"==typeof le?le:le.data).then(Io=>{m.mountExternalData(Oe,Io)}))}yield Promise.all(ie)}for(let ie of c?.executionProviders??[])if("webnn"===("string"==typeof ie?ie:ie.name)){if(m.shouldTransferToMLTensor=!1,m.currentContext)throw new Error("WebNN execution provider is already set.");if("string"!=typeof ie){let le=ie,Oe=le?.context,Io=le?.gpuDevice,Zo=le?.deviceType,_r=le?.numThreads,ka=le?.powerPreference;m.currentContext=Oe||(Io?yield navigator.ml.createContext(Io):yield navigator.ml.createContext({deviceType:Zo,numThreads:_r,powerPreference:ka}))}else m.currentContext=yield navigator.ml.createContext();break}v=yield m._OrtCreateSession(f,b,l),0===v&&ht("Can't create a session."),m.currentContext&&(m.jsepRegisterMLContext(v,m.currentContext),m.currentContext=void 0,m.shouldTransferToMLTensor=!0);let[T,I]=Ng(v),N=!!c?.enableGraphCapture,L=[],U=[];for(let ie=0;ie<T;ie++){let le=m._OrtGetInputName(v,ie);0===le&&ht("Can't get an input name."),g.push(le),L.push(m.UTF8ToString(le))}for(let ie=0;ie<I;ie++){let le=m._OrtGetOutputName(v,ie);0===le&&ht("Can't get an output name."),p.push(le);let Oe=m.UTF8ToString(le);U.push(Oe)}return yr.set(v,[v,g,p,null,N,!1]),[v,L,U]}catch(T){throw g.forEach(I=>m._OrtFree(I)),p.forEach(I=>m._OrtFree(I)),0!==v&&m._OrtReleaseSession(v),T}finally{m._free(f),0!==l&&m._OrtReleaseSessionOptions(l),s.forEach(T=>m._free(T)),m.unmountExternalData?.()}});return function(c,f){return i.apply(this,arguments)}}(),lo=i=>{let a=xt(),c=yr.get(i);if(!c)throw new Error(`cannot release session. invalid session id: ${i}`);let[f,b,m,v,l]=c;v&&(l&&a._OrtClearBoundOutputs(v.handle),a._OrtReleaseBinding(v.handle)),a.jsepOnReleaseSession?.(i),b.forEach(h=>a._OrtFree(h)),m.forEach(h=>a._OrtFree(h)),a._OrtReleaseSession(f),yr.delete(i)},ed=(i,a,c,f,b,m=!1)=>{if(!i)return void a.push(0);let g,p,v=xt(),l=i[0],h=i[1],s=i[3];if("string"===l&&("gpu-buffer"===s||"ml-tensor"===s))throw new Error("String tensor is not supported on GPU.");if(m&&"gpu-buffer"!==s)throw new Error(`External buffer must be provided for input/output index ${b} when enableGraphCapture is true.`);if("gpu-buffer"===s){let N=i[2].gpuBuffer;p=qr(Hr(l),h);let L=v.jsepRegisterBuffer;if(!L)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');g=L(f,b,N,p)}else if("ml-tensor"===s){let N=i[2].mlTensor;p=qr(Hr(l),h);let L=v.jsepRegisterMLTensor;if(!L)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');g=L(N,Hr(l),h)}else{let N=i[2];if(Array.isArray(N)){p=4*N.length,g=v._malloc(p),c.push(g);let L=g/4;for(let U=0;U<N.length;U++){if("string"!=typeof N[U])throw new TypeError(`tensor data at index ${U} is not a string`);v.HEAPU32[L++]=Tt(N[U],c)}}else p=N.byteLength,g=v._malloc(p),c.push(g),v.HEAPU8.set(new Uint8Array(N.buffer,N.byteOffset,p),g)}let T=v.stackSave(),I=v.stackAlloc(4*h.length);try{let N=I/4;h.forEach(U=>v.HEAP32[N++]=U);let L=v._OrtCreateTensor(Hr(l),g,p,I,h.length,td(s));0===L&&ht(`Can't create tensor for input/output. session=${f}, index=${b}.`),a.push(L)}finally{v.stackRestore(T)}},fo=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a,c,f,b,m,v){let l=xt(),h=yr.get(a);if(!h)throw new Error(`cannot run inference. invalid session id: ${a}`);let s=h[0],g=h[1],p=h[2],T=h[3],I=h[4],L=c.length,U=b.length,se=0,Z=[],ie=[],le=[],Oe=[],Io=l.stackSave(),Zo=l.stackAlloc(4*L),_r=l.stackAlloc(4*L),ka=l.stackAlloc(4*U),pu=l.stackAlloc(4*U);try{l.jsepOnRunStart?.(s),[se,Z]=jp(v);for(let $t=0;$t<L;$t++)ed(f[$t],ie,Oe,a,c[$t],I);for(let $t=0;$t<U;$t++)ed(m[$t],le,Oe,a,L+b[$t],I);let xa,Xo=Zo/4,Xs=_r/4,Yy=ka/4,Xa=pu/4;for(let $t=0;$t<L;$t++)l.HEAPU32[Xo++]=ie[$t],l.HEAPU32[Xs++]=g[c[$t]];for(let $t=0;$t<U;$t++)l.HEAPU32[Yy++]=le[$t],l.HEAPU32[Xa++]=p[b[$t]];xa=yield l._OrtRun(s,_r,Zo,L,pu,U,ka,se),0!==xa&&ht("failed to call OrtRun().");let Ca=[];for(let $t=0;$t<U;$t++){let Gu=l.HEAPU32[ka/4+$t];if(Gu===le[$t]){Ca.push(m[$t]);continue}let gr,Ja=l.stackSave(),gu=l.stackAlloc(16),fl=!1,fa=0;try{0!==l._OrtGetTensorData(Gu,gu,gu+4,gu+8,gu+12)&&ht(`Can't access output tensor data on index ${$t}.`);let Vd=gu/4,py=l.HEAPU32[Vd++];fa=l.HEAPU32[Vd++];let mu=l.HEAPU32[Vd++],gy=l.HEAPU32[Vd++],ha=[];for(let Jr=0;Jr<gy;Jr++)ha.push(l.HEAPU32[mu/4+Jr]);l._OrtFree(mu);let eu=ha.reduce((Jr,Bo)=>Jr*Bo,1);gr=Yp(py);let hd=T?.outputPreferredLocations[b[$t]];if("string"===gr){if("gpu-buffer"===hd||"ml-tensor"===hd)throw new Error("String tensor is not supported on GPU.");let Jr=[],Bo=fa/4;for(let gd=0;gd<eu;gd++){let Jt=l.HEAPU32[Bo++];Jr.push(l.UTF8ToString(Jt,gd===eu-1?void 0:l.HEAPU32[Bo]-Jt))}Ca.push([gr,ha,Jr,"cpu"])}else if("gpu-buffer"===hd&&eu>0){let Jr=l.jsepGetBuffer;if(!Jr)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let Bo=Jr(fa),gd=qr(py,eu);if(void 0===gd||!bo(gr))throw new Error(`Unsupported data type: ${gr}`);fl=!0,Ca.push([gr,ha,{gpuBuffer:Bo,download:l.jsepCreateDownloader(Bo,gd,gr),dispose:()=>{l._OrtReleaseTensor(Gu)}},"gpu-buffer"])}else if("ml-tensor"===hd&&eu>0){let Jr=l.jsepEnsureTensor;if(!Jr)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(void 0===qr(py,eu)||!go(gr))throw new Error(`Unsupported data type: ${gr}`);let Bo=yield Jr(fa,py,ha,!1);fl=!0,Ca.push([gr,ha,{mlTensor:Bo,download:l.jsepCreateMLTensorDownloader(fa,gr),dispose:()=>{l.jsepReleaseTensorId(fa),l._OrtReleaseTensor(Gu)}},"ml-tensor"])}else{let Bo=new(Zp(gr))(eu);new Uint8Array(Bo.buffer,Bo.byteOffset,Bo.byteLength).set(l.HEAPU8.subarray(fa,fa+Bo.byteLength)),Ca.push([gr,ha,Bo,"cpu"])}}finally{l.stackRestore(Ja),"string"===gr&&fa&&l._free(fa),fl||l._OrtReleaseTensor(Gu)}}return T&&!I&&(l._OrtClearBoundOutputs(T.handle),yr.set(a,[s,g,p,T,I,!1])),Ca}finally{l.stackRestore(Io),ie.forEach(Xo=>l._OrtReleaseTensor(Xo)),le.forEach(Xo=>l._OrtReleaseTensor(Xo)),Oe.forEach(Xo=>l._free(Xo)),0!==se&&l._OrtReleaseRunOptions(se),Z.forEach(Xo=>l._free(Xo))}});return function(c,f,b,m,v,l){return i.apply(this,arguments)}}(),co=i=>{let a=xt(),c=yr.get(i);if(!c)throw new Error("invalid session id");let b=a._OrtEndProfiling(c[0]);0===b&&ht("Can't get an profile file name."),a._OrtFree(b)},po=i=>{let a=[];for(let c of i){let f=c[2];!Array.isArray(f)&&"buffer"in f&&a.push(f.buffer)}return a}}),Je,Kt,Xr,xo,To,yo,Zi,Qi,xr,Tr,Gg,rd,nd,od,id,ad,sd,ud,ta=O(()=>{Yt(),qi(),Ke(),Vr(),Je=()=>!!z.wasm.proxy&&typeof document<"u",Xr=!1,xo=!1,To=!1,Qi=new Map,xr=(i,a)=>{let c=Qi.get(i);c?c.push(a):Qi.set(i,[a])},Tr=()=>{if(Xr||!xo||To||!Kt)throw new Error("worker not ready")},Gg=i=>{switch(i.data.type){case"init-wasm":Xr=!1,i.data.err?(To=!0,Zi[1](i.data.err)):(xo=!0,Zi[0]()),yo&&(URL.revokeObjectURL(yo),yo=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let a=Qi.get(i.data.type);i.data.err?a.shift()[1](i.data.err):a.shift()[0](i.data.out);break}}},rd=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){if(!xo){if(Xr)throw new Error("multiple calls to 'initWasm()' detected.");if(To)throw new Error("previous call to 'initWasm()' failed.");if(Xr=!0,Je())return new Promise((a,c)=>{Kt?.terminate(),Wp().then(([f,b])=>{try{(Kt=b).onerror=v=>c(v),Kt.onmessage=Gg,Zi=[a,c],Kt.postMessage({type:"init-wasm",in:z}),yo=f}catch(m){c(m)}},c)});try{yield io(z.wasm),yield ao(z),xo=!0}catch(a){throw To=!0,a}finally{Xr=!1}}});return function(){return i.apply(this,arguments)}}(),nd=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a){if(Je())return Tr(),new Promise((c,f)=>{xr("init-ep",[c,f]),Kt.postMessage({type:"init-ep",in:{epName:a,env:z}})});yield so(z,a)});return function(c){return i.apply(this,arguments)}}(),od=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a){return Je()?(Tr(),new Promise((c,f)=>{xr("copy-from",[c,f]),Kt.postMessage({type:"copy-from",in:{buffer:a}},[a.buffer])})):zr(a)});return function(c){return i.apply(this,arguments)}}(),id=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a,c){if(Je()){if(c?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Tr(),new Promise((f,b)=>{xr("create",[f,b]);let m={type:"create",in:{model:a,options:{...c}}},v=[];a instanceof Uint8Array&&v.push(a.buffer),Kt.postMessage(m,v)})}return uo(a,c)});return function(c,f){return i.apply(this,arguments)}}(),ad=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a){if(Je())return Tr(),new Promise((c,f)=>{xr("release",[c,f]),Kt.postMessage({type:"release",in:a})});lo(a)});return function(c){return i.apply(this,arguments)}}(),sd=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a,c,f,b,m,v){if(Je()){if(f.some(l=>"cpu"!==l[3]))throw new Error("input tensor on GPU is not supported for proxy.");if(m.some(l=>l))throw new Error("pre-allocated output tensor is not supported for proxy.");return Tr(),new Promise((l,h)=>{xr("run",[l,h]),Kt.postMessage({type:"run",in:{sessionId:a,inputIndices:c,inputs:f,outputIndices:b,options:v}},po(f))})}return fo(a,c,f,b,m,v)});return function(c,f,b,m,v,l){return i.apply(this,arguments)}}(),ud=function(){var i=(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(a){if(Je())return Tr(),new Promise((c,f)=>{xr("end-profiling",[c,f]),Kt.postMessage({type:"end-profiling",in:a})});co(a)});return function(c){return i.apply(this,arguments)}}()}),ld,Mg,wo,fd=O(()=>{Yt(),ta(),Ji(),oo(),Yi(),ld=(i,a)=>{switch(i.location){case"cpu":return[i.type,i.dims,i.data,"cpu"];case"gpu-buffer":return[i.type,i.dims,{gpuBuffer:i.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[i.type,i.dims,{mlTensor:i.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${i.location} for ${a()}`)}},Mg=i=>{switch(i[3]){case"cpu":return new yt(i[0],i[2],i[1]);case"gpu-buffer":{let a=i[0];if(!bo(a))throw new Error(`not supported data type: ${a} for deserializing GPU tensor`);let{gpuBuffer:c,download:f,dispose:b}=i[2];return yt.fromGpuBuffer(c,{dataType:a,dims:i[1],download:f,dispose:b})}case"ml-tensor":{let a=i[0];if(!go(a))throw new Error(`not supported data type: ${a} for deserializing MLTensor tensor`);let{mlTensor:c,download:f,dispose:b}=i[2];return yt.fromMLTensor(c,{dataType:a,dims:i[1],download:f,dispose:b})}default:throw new Error(`invalid data location: ${i[3]}`)}},wo=class{fetchModelAndCopyToWasmMemory(i){return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return od(yield jr(i))})()}loadModel(i,a){var c=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){let f;Fe(),f="string"==typeof i?yield c.fetchModelAndCopyToWasmMemory(i):i,[c.sessionId,c.inputNames,c.outputNames]=yield id(f,a),Ce()})()}dispose(){var i=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){return ad(i.sessionId)})()}run(i,a,c){var f=this;return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){Fe();let b=[],m=[];Object.entries(i).forEach(T=>{let I=T[0],N=T[1],L=f.inputNames.indexOf(I);if(-1===L)throw new Error(`invalid input '${I}'`);b.push(N),m.push(L)});let v=[],l=[];Object.entries(a).forEach(T=>{let I=T[0],N=T[1],L=f.outputNames.indexOf(I);if(-1===L)throw new Error(`invalid output '${I}'`);v.push(N),l.push(L)});let h=b.map((T,I)=>ld(T,()=>`input "${f.inputNames[m[I]]}"`)),s=v.map((T,I)=>T?ld(T,()=>`output "${f.outputNames[l[I]]}"`):null),g=yield sd(f.sessionId,m,h,l,s,c),p={};for(let T=0;T<g.length;T++)p[f.outputNames[l[T]]]=v[T]??Mg(g[T]);return Ce(),p})()}startProfiling(){}endProfiling(){ud(this.sessionId)}}}),pd={};Or(pd,{OnnxruntimeWebAssemblyBackend:()=>vo,initializeFlags:()=>cd,wasmBackend:()=>Ug});var cd,vo,Ug,dd=O(()=>{Yt(),ta(),fd(),Vr(),cd=()=>{if(("number"!=typeof z.wasm.initTimeout||z.wasm.initTimeout<0)&&(z.wasm.initTimeout=0),!1===z.wasm.simd&&console.warn('Deprecated property "env.wasm.simd" is set to false. non-SIMD build is no longer provided, and this setting will be ignored.'),"boolean"!=typeof z.wasm.proxy&&(z.wasm.proxy=!1),"boolean"!=typeof z.wasm.trace&&(z.wasm.trace=!1),"number"!=typeof z.wasm.numThreads||!Number.isInteger(z.wasm.numThreads)||z.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)z.wasm.numThreads=1;else{let i=typeof navigator>"u"?Co("node:os").cpus().length:navigator.hardwareConcurrency;z.wasm.numThreads=Math.min(4,Math.ceil((i||1)/2))}},vo=class{init(i){return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){cd(),yield rd(),yield nd(i)})()}createInferenceSessionHandler(i,a){return(0,_Users_bharris_Code_audio_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(function*(){let c=new wo;return yield c.loadModel(i,a),Promise.resolve(c)})()}},Ug=new vo});Yt(),Yt(),Yt();var Ds="1.20.0",mO=Mo;{let i=(Fp(),sn(Bp)).onnxjsBackend;nr("webgl",i,-10)}{let i=(dd(),sn(pd)).wasmBackend;nr("cpu",i,10),nr("wasm",i,10)}Object.defineProperty(z.versions,"web",{value:Ds,enumerable:!0})},467:(i,a,c)=>{function f(m,v,l,h,s,g,p){try{var T=m[g](p),I=T.value}catch(N){return void l(N)}T.done?v(I):Promise.resolve(I).then(h,s)}function b(m){return function(){var v=this,l=arguments;return new Promise(function(h,s){var g=m.apply(v,l);function p(I){f(g,h,s,p,T,"next",I)}function T(I){f(g,h,s,p,T,"throw",I)}p(void 0)})}}c.d(a,{A:()=>b})}},i=>{i(i.s=792)}]);